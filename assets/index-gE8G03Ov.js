(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))c(m);new MutationObserver(m=>{for(const f of m)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function u(m){const f={};return m.integrity&&(f.integrity=m.integrity),m.referrerPolicy&&(f.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?f.credentials="include":m.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(m){if(m.ep)return;m.ep=!0;const f=u(m);fetch(m.href,f)}})();var Yd={exports:{}},fl={};var Bg;function Nw(){if(Bg)return fl;Bg=1;var s=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function u(c,m,f){var p=null;if(f!==void 0&&(p=""+f),m.key!==void 0&&(p=""+m.key),"key"in m){f={};for(var g in m)g!=="key"&&(f[g]=m[g])}else f=m;return m=f.ref,{$$typeof:s,type:c,key:p,ref:m!==void 0?m:null,props:f}}return fl.Fragment=l,fl.jsx=u,fl.jsxs=u,fl}var zg;function Tw(){return zg||(zg=1,Yd.exports=Nw()),Yd.exports}var n=Tw(),qd={exports:{}},nt={};var $g;function Aw(){if($g)return nt;$g=1;var s=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),C=Symbol.iterator;function R(k){return k===null||typeof k!="object"?null:(k=C&&k[C]||k["@@iterator"],typeof k=="function"?k:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,P={};function Z(k,z,re){this.props=k,this.context=z,this.refs=P,this.updater=re||L}Z.prototype.isReactComponent={},Z.prototype.setState=function(k,z){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,z,"setState")},Z.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function xe(){}xe.prototype=Z.prototype;function te(k,z,re){this.props=k,this.context=z,this.refs=P,this.updater=re||L}var ue=te.prototype=new xe;ue.constructor=te,W(ue,Z.prototype),ue.isPureReactComponent=!0;var se=Array.isArray;function ae(){}var V={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function O(k,z,re){var N=re.ref;return{$$typeof:s,type:k,key:z,ref:N!==void 0?N:null,props:re}}function le(k,z){return O(k.type,z,k.props)}function ve(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function ce(k){var z={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(re){return z[re]})}var fe=/\/+/g;function we(k,z){return typeof k=="object"&&k!==null&&k.key!=null?ce(""+k.key):z.toString(36)}function Ce(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ae,ae):(k.status="pending",k.then(function(z){k.status==="pending"&&(k.status="fulfilled",k.value=z)},function(z){k.status==="pending"&&(k.status="rejected",k.reason=z)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function _(k,z,re,N,F){var X=typeof k;(X==="undefined"||X==="boolean")&&(k=null);var U=!1;if(k===null)U=!0;else switch(X){case"bigint":case"string":case"number":U=!0;break;case"object":switch(k.$$typeof){case s:case l:U=!0;break;case x:return U=k._init,_(U(k._payload),z,re,N,F)}}if(U)return F=F(k),U=N===""?"."+we(k,0):N,se(F)?(re="",U!=null&&(re=U.replace(fe,"$&/")+"/"),_(F,z,re,"",function(De){return De})):F!=null&&(ve(F)&&(F=le(F,re+(F.key==null||k&&k.key===F.key?"":(""+F.key).replace(fe,"$&/")+"/")+U)),z.push(F)),1;U=0;var Te=N===""?".":N+":";if(se(k))for(var Ae=0;Ae<k.length;Ae++)N=k[Ae],X=Te+we(N,Ae),U+=_(N,z,re,X,F);else if(Ae=R(k),typeof Ae=="function")for(k=Ae.call(k),Ae=0;!(N=k.next()).done;)N=N.value,X=Te+we(N,Ae++),U+=_(N,z,re,X,F);else if(X==="object"){if(typeof k.then=="function")return _(Ce(k),z,re,N,F);throw z=String(k),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return U}function Q(k,z,re){if(k==null)return k;var N=[],F=0;return _(k,N,"","",function(X){return z.call(re,X,F++)}),N}function Se(k){if(k._status===-1){var z=k._result;z=z(),z.then(function(re){(k._status===0||k._status===-1)&&(k._status=1,k._result=re)},function(re){(k._status===0||k._status===-1)&&(k._status=2,k._result=re)}),k._status===-1&&(k._status=0,k._result=z)}if(k._status===1)return k._result.default;throw k._result}var Y=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},ge={map:Q,forEach:function(k,z,re){Q(k,function(){z.apply(this,arguments)},re)},count:function(k){var z=0;return Q(k,function(){z++}),z},toArray:function(k){return Q(k,function(z){return z})||[]},only:function(k){if(!ve(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return nt.Activity=M,nt.Children=ge,nt.Component=Z,nt.Fragment=u,nt.Profiler=m,nt.PureComponent=te,nt.StrictMode=c,nt.Suspense=v,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,nt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return V.H.useMemoCache(k)}},nt.cache=function(k){return function(){return k.apply(null,arguments)}},nt.cacheSignal=function(){return null},nt.cloneElement=function(k,z,re){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var N=W({},k.props),F=k.key;if(z!=null)for(X in z.key!==void 0&&(F=""+z.key),z)!K.call(z,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&z.ref===void 0||(N[X]=z[X]);var X=arguments.length-2;if(X===1)N.children=re;else if(1<X){for(var U=Array(X),Te=0;Te<X;Te++)U[Te]=arguments[Te+2];N.children=U}return O(k.type,F,N)},nt.createContext=function(k){return k={$$typeof:p,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:f,_context:k},k},nt.createElement=function(k,z,re){var N,F={},X=null;if(z!=null)for(N in z.key!==void 0&&(X=""+z.key),z)K.call(z,N)&&N!=="key"&&N!=="__self"&&N!=="__source"&&(F[N]=z[N]);var U=arguments.length-2;if(U===1)F.children=re;else if(1<U){for(var Te=Array(U),Ae=0;Ae<U;Ae++)Te[Ae]=arguments[Ae+2];F.children=Te}if(k&&k.defaultProps)for(N in U=k.defaultProps,U)F[N]===void 0&&(F[N]=U[N]);return O(k,X,F)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(k){return{$$typeof:g,render:k}},nt.isValidElement=ve,nt.lazy=function(k){return{$$typeof:x,_payload:{_status:-1,_result:k},_init:Se}},nt.memo=function(k,z){return{$$typeof:b,type:k,compare:z===void 0?null:z}},nt.startTransition=function(k){var z=V.T,re={};V.T=re;try{var N=k(),F=V.S;F!==null&&F(re,N),typeof N=="object"&&N!==null&&typeof N.then=="function"&&N.then(ae,Y)}catch(X){Y(X)}finally{z!==null&&re.types!==null&&(z.types=re.types),V.T=z}},nt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},nt.use=function(k){return V.H.use(k)},nt.useActionState=function(k,z,re){return V.H.useActionState(k,z,re)},nt.useCallback=function(k,z){return V.H.useCallback(k,z)},nt.useContext=function(k){return V.H.useContext(k)},nt.useDebugValue=function(){},nt.useDeferredValue=function(k,z){return V.H.useDeferredValue(k,z)},nt.useEffect=function(k,z){return V.H.useEffect(k,z)},nt.useEffectEvent=function(k){return V.H.useEffectEvent(k)},nt.useId=function(){return V.H.useId()},nt.useImperativeHandle=function(k,z,re){return V.H.useImperativeHandle(k,z,re)},nt.useInsertionEffect=function(k,z){return V.H.useInsertionEffect(k,z)},nt.useLayoutEffect=function(k,z){return V.H.useLayoutEffect(k,z)},nt.useMemo=function(k,z){return V.H.useMemo(k,z)},nt.useOptimistic=function(k,z){return V.H.useOptimistic(k,z)},nt.useReducer=function(k,z,re){return V.H.useReducer(k,z,re)},nt.useRef=function(k){return V.H.useRef(k)},nt.useState=function(k){return V.H.useState(k)},nt.useSyncExternalStore=function(k,z,re){return V.H.useSyncExternalStore(k,z,re)},nt.useTransition=function(){return V.H.useTransition()},nt.version="19.2.4",nt}var Ig;function Lm(){return Ig||(Ig=1,qd.exports=Aw()),qd.exports}var w=Lm(),Wd={exports:{}},pl={},Pd={exports:{}},Gd={};var Ug;function Mw(){return Ug||(Ug=1,(function(s){function l(_,Q){var Se=_.length;_.push(Q);e:for(;0<Se;){var Y=Se-1>>>1,ge=_[Y];if(0<m(ge,Q))_[Y]=Q,_[Se]=ge,Se=Y;else break e}}function u(_){return _.length===0?null:_[0]}function c(_){if(_.length===0)return null;var Q=_[0],Se=_.pop();if(Se!==Q){_[0]=Se;e:for(var Y=0,ge=_.length,k=ge>>>1;Y<k;){var z=2*(Y+1)-1,re=_[z],N=z+1,F=_[N];if(0>m(re,Se))N<ge&&0>m(F,re)?(_[Y]=F,_[N]=Se,Y=N):(_[Y]=re,_[z]=Se,Y=z);else if(N<ge&&0>m(F,Se))_[Y]=F,_[N]=Se,Y=N;else break e}}return Q}function m(_,Q){var Se=_.sortIndex-Q.sortIndex;return Se!==0?Se:_.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var p=Date,g=p.now();s.unstable_now=function(){return p.now()-g}}var v=[],b=[],x=1,M=null,C=3,R=!1,L=!1,W=!1,P=!1,Z=typeof setTimeout=="function"?setTimeout:null,xe=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ue(_){for(var Q=u(b);Q!==null;){if(Q.callback===null)c(b);else if(Q.startTime<=_)c(b),Q.sortIndex=Q.expirationTime,l(v,Q);else break;Q=u(b)}}function se(_){if(W=!1,ue(_),!L)if(u(v)!==null)L=!0,ae||(ae=!0,ce());else{var Q=u(b);Q!==null&&Ce(se,Q.startTime-_)}}var ae=!1,V=-1,K=5,O=-1;function le(){return P?!0:!(s.unstable_now()-O<K)}function ve(){if(P=!1,ae){var _=s.unstable_now();O=_;var Q=!0;try{e:{L=!1,W&&(W=!1,xe(V),V=-1),R=!0;var Se=C;try{t:{for(ue(_),M=u(v);M!==null&&!(M.expirationTime>_&&le());){var Y=M.callback;if(typeof Y=="function"){M.callback=null,C=M.priorityLevel;var ge=Y(M.expirationTime<=_);if(_=s.unstable_now(),typeof ge=="function"){M.callback=ge,ue(_),Q=!0;break t}M===u(v)&&c(v),ue(_)}else c(v);M=u(v)}if(M!==null)Q=!0;else{var k=u(b);k!==null&&Ce(se,k.startTime-_),Q=!1}}break e}finally{M=null,C=Se,R=!1}Q=void 0}}finally{Q?ce():ae=!1}}}var ce;if(typeof te=="function")ce=function(){te(ve)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,we=fe.port2;fe.port1.onmessage=ve,ce=function(){we.postMessage(null)}}else ce=function(){Z(ve,0)};function Ce(_,Q){V=Z(function(){_(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(_){_.callback=null},s.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<_?Math.floor(1e3/_):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(_){switch(C){case 1:case 2:case 3:var Q=3;break;default:Q=C}var Se=C;C=Q;try{return _()}finally{C=Se}},s.unstable_requestPaint=function(){P=!0},s.unstable_runWithPriority=function(_,Q){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var Se=C;C=_;try{return Q()}finally{C=Se}},s.unstable_scheduleCallback=function(_,Q,Se){var Y=s.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Y+Se:Y):Se=Y,_){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Se+ge,_={id:x++,callback:Q,priorityLevel:_,startTime:Se,expirationTime:ge,sortIndex:-1},Se>Y?(_.sortIndex=Se,l(b,_),u(v)===null&&_===u(b)&&(W?(xe(V),V=-1):W=!0,Ce(se,Se-Y))):(_.sortIndex=ge,l(v,_),L||R||(L=!0,ae||(ae=!0,ce()))),_},s.unstable_shouldYield=le,s.unstable_wrapCallback=function(_){var Q=C;return function(){var Se=C;C=Q;try{return _.apply(this,arguments)}finally{C=Se}}}})(Gd)),Gd}var Kg;function Ew(){return Kg||(Kg=1,Pd.exports=Mw()),Pd.exports}var Vd={exports:{}},_a={};var Fg;function Cw(){if(Fg)return _a;Fg=1;var s=Lm();function l(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)b+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var c={d:{f:u,r:function(){throw Error(l(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},m=Symbol.for("react.portal");function f(v,b,x){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:M==null?null:""+M,children:v,containerInfo:b,implementation:x}}var p=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return _a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,_a.createPortal=function(v,b){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(l(299));return f(v,b,null,x)},_a.flushSync=function(v){var b=p.T,x=c.p;try{if(p.T=null,c.p=2,v)return v()}finally{p.T=b,c.p=x,c.d.f()}},_a.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,c.d.C(v,b))},_a.prefetchDNS=function(v){typeof v=="string"&&c.d.D(v)},_a.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var x=b.as,M=g(x,b.crossOrigin),C=typeof b.integrity=="string"?b.integrity:void 0,R=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;x==="style"?c.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:M,integrity:C,fetchPriority:R}):x==="script"&&c.d.X(v,{crossOrigin:M,integrity:C,fetchPriority:R,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},_a.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var x=g(b.as,b.crossOrigin);c.d.M(v,{crossOrigin:x,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&c.d.M(v)},_a.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var x=b.as,M=g(x,b.crossOrigin);c.d.L(v,x,{crossOrigin:M,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},_a.preloadModule=function(v,b){if(typeof v=="string")if(b){var x=g(b.as,b.crossOrigin);c.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:x,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else c.d.m(v)},_a.requestFormReset=function(v){c.d.r(v)},_a.unstable_batchedUpdates=function(v,b){return v(b)},_a.useFormState=function(v,b,x){return p.H.useFormState(v,b,x)},_a.useFormStatus=function(){return p.H.useHostTransitionStatus()},_a.version="19.2.4",_a}var Yg;function Dw(){if(Yg)return Vd.exports;Yg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(l){console.error(l)}}return s(),Vd.exports=Cw(),Vd.exports}var qg;function Ow(){if(qg)return pl;qg=1;var s=Ew(),l=Lm(),u=Dw();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(f(e)!==e)throw Error(c(188))}function b(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,i=t;;){var o=a.return;if(o===null)break;var r=o.alternate;if(r===null){if(i=o.return,i!==null){a=i;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===a)return v(o),e;if(r===i)return v(o),t;r=r.sibling}throw Error(c(188))}if(a.return!==i.return)a=o,i=r;else{for(var d=!1,y=o.child;y;){if(y===a){d=!0,a=o,i=r;break}if(y===i){d=!0,i=o,a=r;break}y=y.sibling}if(!d){for(y=r.child;y;){if(y===a){d=!0,a=r,i=o;break}if(y===i){d=!0,i=r,a=o;break}y=y.sibling}if(!d)throw Error(c(189))}}if(a.alternate!==i)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var M=Object.assign,C=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),xe=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ve=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=ve&&e[ve]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function we(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case Z:return"Profiler";case P:return"StrictMode";case se:return"Suspense";case ae:return"SuspenseList";case O:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case te:return e.displayName||"Context";case xe:return(e._context.displayName||"Context")+".Consumer";case ue:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return t=e.displayName||null,t!==null?t:we(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return we(e(t))}catch{}}return null}var Ce=Array.isArray,_=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Y=[],ge=-1;function k(e){return{current:e}}function z(e){0>ge||(e.current=Y[ge],Y[ge]=null,ge--)}function re(e,t){ge++,Y[ge]=e.current,e.current=t}var N=k(null),F=k(null),X=k(null),U=k(null);function Te(e,t){switch(re(X,t),re(F,e),re(N,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?og(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=og(t),e=lg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(N),re(N,e)}function Ae(){z(N),z(F),z(X)}function De(e){e.memoizedState!==null&&re(U,e);var t=N.current,a=lg(t,e.type);t!==a&&(re(F,e),re(N,a))}function tt(e){F.current===e&&(z(N),z(F)),U.current===e&&(z(U),ul._currentValue=Se)}var de,Oe;function Ve(e){if(de===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);de=t&&t[1]||"",Oe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+e+Oe}var Xe=!1;function Ze(e,t){if(!e||Xe)return"";Xe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(q){var I=q}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(q){I=q}e.call(ie.prototype)}}else{try{throw Error()}catch(q){I=q}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(q){if(q&&I&&typeof q.stack=="string")return[q.stack,I.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),d=r[0],y=r[1];if(d&&y){var S=d.split(`
`),B=y.split(`
`);for(o=i=0;i<S.length&&!S[i].includes("DetermineComponentFrameRoot");)i++;for(;o<B.length&&!B[o].includes("DetermineComponentFrameRoot");)o++;if(i===S.length||o===B.length)for(i=S.length-1,o=B.length-1;1<=i&&0<=o&&S[i]!==B[o];)o--;for(;1<=i&&0<=o;i--,o--)if(S[i]!==B[o]){if(i!==1||o!==1)do if(i--,o--,0>o||S[i]!==B[o]){var J=`
`+S[i].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=i&&0<=o);break}}}finally{Xe=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ve(a):""}function lt(e,t){switch(e.tag){case 26:case 27:case 5:return Ve(e.type);case 16:return Ve("Lazy");case 13:return e.child!==t&&t!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return Ze(e.type,!1);case 11:return Ze(e.type.render,!1);case 1:return Ze(e.type,!0);case 31:return Ve("Activity");default:return""}}function qe(e){try{var t="",a=null;do t+=lt(e,a),a=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var rt=Object.prototype.hasOwnProperty,Wt=s.unstable_scheduleCallback,xt=s.unstable_cancelCallback,ye=s.unstable_shouldYield,Me=s.unstable_requestPaint,Qe=s.unstable_now,$e=s.unstable_getCurrentPriorityLevel,kt=s.unstable_ImmediatePriority,St=s.unstable_UserBlockingPriority,ft=s.unstable_NormalPriority,Ct=s.unstable_LowPriority,Bt=s.unstable_IdlePriority,Kt=s.log,Ke=s.unstable_setDisableYieldValue,zt=null,Dt=null;function Rt(e){if(typeof Kt=="function"&&Ke(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(zt,e)}catch{}}var ct=Math.clz32?Math.clz32:Sa,Ge=Math.log,Da=Math.LN2;function Sa(e){return e>>>=0,e===0?32:31-(Ge(e)/Da|0)|0}var $a=256,Xt=262144,La=4194304;function At(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ga(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var o=0,r=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var y=i&134217727;return y!==0?(i=y&~r,i!==0?o=At(i):(d&=y,d!==0?o=At(d):a||(a=y&~e,a!==0&&(o=At(a))))):(y=i&~r,y!==0?o=At(y):d!==0?o=At(d):a||(a=i&~e,a!==0&&(o=At(a)))),o===0?0:t!==0&&t!==o&&(t&r)===0&&(r=o&-o,a=t&-t,r>=a||r===32&&(a&4194048)!==0)?t:o}function j(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function We(){var e=La;return La<<=1,(La&62914560)===0&&(La=4194304),e}function G(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function oe(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function he(e,t,a,i,o,r){var d=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,S=e.expirationTimes,B=e.hiddenUpdates;for(a=d&~a;0<a;){var J=31-ct(a),ie=1<<J;y[J]=0,S[J]=-1;var I=B[J];if(I!==null)for(B[J]=null,J=0;J<I.length;J++){var q=I[J];q!==null&&(q.lane&=-536870913)}a&=~ie}i!==0&&_e(e,i,0),r!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=r&~(d&~t))}function _e(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-ct(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&261930}function ut(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-ct(a),o=1<<i;o&t|e[i]&t&&(e[i]|=t),a&=~o}}function wt(e,t){var a=t&-t;return a=(a&42)!==0?1:T(a),(a&(e.suspendedLanes|t))!==0?0:a}function T(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function me(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ne(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:Cg(e.type))}function He(e,t){var a=Q.p;try{return Q.p=e,t()}finally{Q.p=a}}var Je=Math.random().toString(36).slice(2),at="__reactFiber$"+Je,yt="__reactProps$"+Je,Oa="__reactContainer$"+Je,ba="__reactEvents$"+Je,Ia="__reactListeners$"+Je,un="__reactHandles$"+Je,Rn="__reactResources$"+Je,Ra="__reactMarker$"+Je;function Ua(e){delete e[at],delete e[yt],delete e[ba],delete e[Ia],delete e[un]}function ja(e){var t=e[at];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Oa]||a[at]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=fg(e);e!==null;){if(a=e[at])return a;e=fg(e)}return t}e=a,a=e.parentNode}return null}function Ka(e){if(e=e[at]||e[Oa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function qn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function ma(e){var t=e[Rn];return t||(t=e[Rn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Pt(e){e[Ra]=!0}var _n=new Set,Ha={};function dn(e,t){A(e,t),A(e+"Capture",t)}function A(e,t){for(Ha[e]=t,e=0;e<t.length;e++)_n.add(t[e])}var be=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Be={},dt={};function la(e){return rt.call(dt,e)?!0:rt.call(Be,e)?!1:be.test(e)?dt[e]=!0:(Be[e]=!0,!1)}function _t(e,t,a){if(la(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Gt(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function ta(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}function Qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Va(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ot(e,t,a){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(d){a=""+d,r.call(this,d)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ft(e){if(!e._valueTracker){var t=Va(e)?"checked":"value";e._valueTracker=Ot(e,t,""+e[t])}}function aa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Va(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function bt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var mn=/[\n"\\]/g;function Mt(e){return e.replace(mn,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function hn(e,t,a,i,o,r,d,y){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Qt(t)):e.value!==""+Qt(t)&&(e.value=""+Qt(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?ts(e,d,Qt(t)):a!=null?ts(e,d,Qt(a)):i!=null&&e.removeAttribute("value"),o==null&&r!=null&&(e.defaultChecked=!!r),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Qt(y):e.removeAttribute("name")}function es(e,t,a,i,o,r,d,y){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||a!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Ft(e);return}a=a!=null?""+Qt(a):"",t=t!=null?""+Qt(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=y?e.checked:!!i,e.defaultChecked=!!i,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),Ft(e)}function ts(e,t,a){t==="number"&&bt(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Wn(e,t,a,i){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&i&&(e[a].defaultSelected=!0)}else{for(a=""+Qt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function jo(e,t,a){if(t!=null&&(t=""+Qt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Qt(a):""}function ql(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(c(92));if(Ce(i)){if(1<i.length)throw Error(c(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=Qt(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i),Ft(e)}function Pn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Fc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gn(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||Fc.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ms(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&a[o]!==i&&Gn(e,o,i)}else for(var r in t)t.hasOwnProperty(r)&&Gn(e,r,t[r])}function bi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var No=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vn(e){return Yc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function fn(){}var To=null;function Ao(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ln=null,jn=null;function Wl(e){var t=Ka(e);if(t&&(e=t.stateNode)){var a=e[yt]||null;e:switch(e=t.stateNode,t.type){case"input":if(hn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Mt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var o=i[yt]||null;if(!o)throw Error(c(90));hn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&aa(i)}break e;case"textarea":jo(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Wn(e,!!a.multiple,t,!1)}}}var as=!1;function Pl(e,t,a){if(as)return e(t,a);as=!0;try{var i=e(t);return i}finally{if(as=!1,(Ln!==null||jn!==null)&&(Or(),Ln&&(t=Ln,e=jn,jn=Ln=null,Wl(t),e)))for(t=0;t<e.length;t++)Wl(e[t])}}function vi(e,t){var a=e.stateNode;if(a===null)return null;var i=a[yt]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var Xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Es=!1;if(Xa)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){Es=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{Es=!1}var Nn=null,Mo=null,is=null;function Gl(){if(is)return is;var e,t=Mo,a=t.length,i,o="value"in Nn?Nn.value:Nn.textContent,r=o.length;for(e=0;e<a&&t[e]===o[e];e++);var d=a-e;for(i=1;i<=d&&t[a-i]===o[r-i];i++);return is=o.slice(e,1<i?1-i:void 0)}function Cs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ds(){return!0}function Vl(){return!1}function Na(e){function t(a,i,o,r,d){this._reactName=a,this._targetInst=o,this.type=i,this.nativeEvent=r,this.target=d,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(r):r[y]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ds:Vl,this.isPropagationStopped=Vl,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),t}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xn=Na(Qa),Za=M({},Qa,{view:0,detail:0}),qc=Na(Za),Eo,Co,h,$=M({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==h&&(h&&e.type==="mousemove"?(Eo=e.screenX-h.screenX,Co=e.screenY-h.screenY):Co=Eo=0,h=e),Eo)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),ee=Na($),pe=M({},$,{dataTransfer:0}),je=Na(pe),Ie=M({},Za,{relatedTarget:0}),jt=Na(Ie),Zt=M({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),et=Na(Zt),Yt=M({},Qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),va=Na(Yt),Qn=M({},Qa,{data:0}),Xl=Na(Qn),Wc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ja={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pc[e])?!!t[e]:!1}function Vc(){return Gc}var Hb=M({},Za,{key:function(e){if(e.key){var t=Wc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ja[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vc,charCode:function(e){return e.type==="keypress"?Cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bb=Na(Hb),zb=M({},$,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uh=Na(zb),$b=M({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vc}),Ib=Na($b),Ub=M({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kb=Na(Ub),Fb=M({},$,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yb=Na(Fb),qb=M({},Qa,{newState:0,oldState:0}),Wb=Na(qb),Pb=[9,13,27,32],Xc=Xa&&"CompositionEvent"in window,Do=null;Xa&&"documentMode"in document&&(Do=document.documentMode);var Gb=Xa&&"TextEvent"in window&&!Do,dh=Xa&&(!Xc||Do&&8<Do&&11>=Do),mh=" ",hh=!1;function fh(e,t){switch(e){case"keyup":return Pb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ph(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Os=!1;function Vb(e,t){switch(e){case"compositionend":return ph(t);case"keypress":return t.which!==32?null:(hh=!0,mh);case"textInput":return e=t.data,e===mh&&hh?null:e;default:return null}}function Xb(e,t){if(Os)return e==="compositionend"||!Xc&&fh(e,t)?(e=Gl(),is=Mo=Nn=null,Os=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dh&&t.locale!=="ko"?null:t.data;default:return null}}var Qb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qb[e.type]:t==="textarea"}function yh(e,t,a,i){Ln?jn?jn.push(i):jn=[i]:Ln=i,t=$r(t,"onChange"),0<t.length&&(a=new Xn("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var Oo=null,Ro=null;function Zb(e){eg(e,0)}function Ql(e){var t=qn(e);if(aa(t))return e}function bh(e,t){if(e==="change")return t}var vh=!1;if(Xa){var Qc;if(Xa){var Zc="oninput"in document;if(!Zc){var wh=document.createElement("div");wh.setAttribute("oninput","return;"),Zc=typeof wh.oninput=="function"}Qc=Zc}else Qc=!1;vh=Qc&&(!document.documentMode||9<document.documentMode)}function kh(){Oo&&(Oo.detachEvent("onpropertychange",xh),Ro=Oo=null)}function xh(e){if(e.propertyName==="value"&&Ql(Ro)){var t=[];yh(t,Ro,e,Ao(e)),Pl(Zb,t)}}function Jb(e,t,a){e==="focusin"?(kh(),Oo=t,Ro=a,Oo.attachEvent("onpropertychange",xh)):e==="focusout"&&kh()}function ev(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ql(Ro)}function tv(e,t){if(e==="click")return Ql(t)}function av(e,t){if(e==="input"||e==="change")return Ql(t)}function nv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var en=typeof Object.is=="function"?Object.is:nv;function _o(e,t){if(en(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var o=a[i];if(!rt.call(t,o)||!en(e[o],t[o]))return!1}return!0}function Sh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jh(e,t){var a=Sh(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sh(a)}}function Nh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Th(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bt(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=bt(e.document)}return t}function Jc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var iv=Xa&&"documentMode"in document&&11>=document.documentMode,Rs=null,eu=null,Lo=null,tu=!1;function Ah(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tu||Rs==null||Rs!==bt(i)||(i=Rs,"selectionStart"in i&&Jc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Lo&&_o(Lo,i)||(Lo=i,i=$r(eu,"onSelect"),0<i.length&&(t=new Xn("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=Rs)))}function ss(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var _s={animationend:ss("Animation","AnimationEnd"),animationiteration:ss("Animation","AnimationIteration"),animationstart:ss("Animation","AnimationStart"),transitionrun:ss("Transition","TransitionRun"),transitionstart:ss("Transition","TransitionStart"),transitioncancel:ss("Transition","TransitionCancel"),transitionend:ss("Transition","TransitionEnd")},au={},Mh={};Xa&&(Mh=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function os(e){if(au[e])return au[e];if(!_s[e])return e;var t=_s[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Mh)return au[e]=t[a];return e}var Eh=os("animationend"),Ch=os("animationiteration"),Dh=os("animationstart"),sv=os("transitionrun"),ov=os("transitionstart"),lv=os("transitioncancel"),Oh=os("transitionend"),Rh=new Map,nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nu.push("scrollEnd");function Tn(e,t){Rh.set(e,t),dn(t,[e])}var Zl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pn=[],Ls=0,iu=0;function Jl(){for(var e=Ls,t=iu=Ls=0;t<e;){var a=pn[t];pn[t++]=null;var i=pn[t];pn[t++]=null;var o=pn[t];pn[t++]=null;var r=pn[t];if(pn[t++]=null,i!==null&&o!==null){var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}r!==0&&_h(a,o,r)}}function er(e,t,a,i){pn[Ls++]=e,pn[Ls++]=t,pn[Ls++]=a,pn[Ls++]=i,iu|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function su(e,t,a,i){return er(e,t,a,i),tr(e)}function ls(e,t){return er(e,null,null,t),tr(e)}function _h(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var o=!1,r=e.return;r!==null;)r.childLanes|=a,i=r.alternate,i!==null&&(i.childLanes|=a),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(o=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,o&&t!==null&&(o=31-ct(a),e=r.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=a|536870912),r):null}function tr(e){if(50<nl)throw nl=0,fd=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hs={};function rv(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(e,t,a,i){return new rv(e,t,a,i)}function ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zn(e,t){var a=e.alternate;return a===null?(a=tn(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Lh(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ar(e,t,a,i,o,r){var d=0;if(i=e,typeof e=="function")ou(e)&&(d=1);else if(typeof e=="string")d=hw(e,a,N.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case O:return e=tn(31,a,t,o),e.elementType=O,e.lanes=r,e;case W:return rs(a.children,o,r,t);case P:d=8,o|=24;break;case Z:return e=tn(12,a,t,o|2),e.elementType=Z,e.lanes=r,e;case se:return e=tn(13,a,t,o),e.elementType=se,e.lanes=r,e;case ae:return e=tn(19,a,t,o),e.elementType=ae,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case te:d=10;break e;case xe:d=9;break e;case ue:d=11;break e;case V:d=14;break e;case K:d=16,i=null;break e}d=29,a=Error(c(130,e===null?"null":typeof e,"")),i=null}return t=tn(d,a,t,o),t.elementType=e,t.type=i,t.lanes=r,t}function rs(e,t,a,i){return e=tn(7,e,i,t),e.lanes=a,e}function lu(e,t,a){return e=tn(6,e,null,t),e.lanes=a,e}function Hh(e){var t=tn(18,null,null,0);return t.stateNode=e,t}function ru(e,t,a){return t=tn(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Bh=new WeakMap;function gn(e,t){if(typeof e=="object"&&e!==null){var a=Bh.get(e);return a!==void 0?a:(t={value:e,source:t,stack:qe(t)},Bh.set(e,t),t)}return{value:e,source:t,stack:qe(t)}}var Bs=[],zs=0,nr=null,Ho=0,yn=[],bn=0,wi=null,Hn=1,Bn="";function Jn(e,t){Bs[zs++]=Ho,Bs[zs++]=nr,nr=e,Ho=t}function zh(e,t,a){yn[bn++]=Hn,yn[bn++]=Bn,yn[bn++]=wi,wi=e;var i=Hn;e=Bn;var o=32-ct(i)-1;i&=~(1<<o),a+=1;var r=32-ct(t)+o;if(30<r){var d=o-o%5;r=(i&(1<<d)-1).toString(32),i>>=d,o-=d,Hn=1<<32-ct(t)+o|a<<o|i,Bn=r+e}else Hn=1<<r|a<<o|i,Bn=e}function cu(e){e.return!==null&&(Jn(e,1),zh(e,1,0))}function uu(e){for(;e===nr;)nr=Bs[--zs],Bs[zs]=null,Ho=Bs[--zs],Bs[zs]=null;for(;e===wi;)wi=yn[--bn],yn[bn]=null,Bn=yn[--bn],yn[bn]=null,Hn=yn[--bn],yn[bn]=null}function $h(e,t){yn[bn++]=Hn,yn[bn++]=Bn,yn[bn++]=wi,Hn=t.id,Bn=t.overflow,wi=e}var Ta=null,Jt=null,vt=!1,ki=null,vn=!1,du=Error(c(519));function xi(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bo(gn(t,e)),du}function Ih(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[at]=e,t[yt]=i,a){case"dialog":ht("cancel",t),ht("close",t);break;case"iframe":case"object":case"embed":ht("load",t);break;case"video":case"audio":for(a=0;a<sl.length;a++)ht(sl[a],t);break;case"source":ht("error",t);break;case"img":case"image":case"link":ht("error",t),ht("load",t);break;case"details":ht("toggle",t);break;case"input":ht("invalid",t),es(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ht("invalid",t);break;case"textarea":ht("invalid",t),ql(t,i.value,i.defaultValue,i.children)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||ig(t.textContent,a)?(i.popover!=null&&(ht("beforetoggle",t),ht("toggle",t)),i.onScroll!=null&&ht("scroll",t),i.onScrollEnd!=null&&ht("scrollend",t),i.onClick!=null&&(t.onclick=fn),t=!0):t=!1,t||xi(e,!0)}function Uh(e){for(Ta=e.return;Ta;)switch(Ta.tag){case 5:case 31:case 13:vn=!1;return;case 27:case 3:vn=!0;return;default:Ta=Ta.return}}function $s(e){if(e!==Ta)return!1;if(!vt)return Uh(e),vt=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ed(e.type,e.memoizedProps)),a=!a),a&&Jt&&xi(e),Uh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Jt=hg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Jt=hg(e)}else t===27?(t=Jt,Hi(e.type)?(e=_d,_d=null,Jt=e):Jt=t):Jt=Ta?kn(e.stateNode.nextSibling):null;return!0}function cs(){Jt=Ta=null,vt=!1}function mu(){var e=ki;return e!==null&&(Wa===null?Wa=e:Wa.push.apply(Wa,e),ki=null),e}function Bo(e){ki===null?ki=[e]:ki.push(e)}var hu=k(null),us=null,ei=null;function Si(e,t,a){re(hu,t._currentValue),t._currentValue=a}function ti(e){e._currentValue=hu.current,z(hu)}function fu(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function pu(e,t,a,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var r=o.dependencies;if(r!==null){var d=o.child;r=r.firstContext;e:for(;r!==null;){var y=r;r=o;for(var S=0;S<t.length;S++)if(y.context===t[S]){r.lanes|=a,y=r.alternate,y!==null&&(y.lanes|=a),fu(r.return,a,e),i||(d=null);break e}r=y.next}}else if(o.tag===18){if(d=o.return,d===null)throw Error(c(341));d.lanes|=a,r=d.alternate,r!==null&&(r.lanes|=a),fu(d,a,e),d=null}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===e){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}}function Is(e,t,a,i){e=null;for(var o=t,r=!1;o!==null;){if(!r){if((o.flags&524288)!==0)r=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var d=o.alternate;if(d===null)throw Error(c(387));if(d=d.memoizedProps,d!==null){var y=o.type;en(o.pendingProps.value,d.value)||(e!==null?e.push(y):e=[y])}}else if(o===U.current){if(d=o.alternate,d===null)throw Error(c(387));d.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ul):e=[ul])}o=o.return}e!==null&&pu(t,e,a,i),t.flags|=262144}function ir(e){for(e=e.firstContext;e!==null;){if(!en(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ds(e){us=e,ei=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Aa(e){return Kh(us,e)}function sr(e,t){return us===null&&ds(e),Kh(e,t)}function Kh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ei===null){if(e===null)throw Error(c(308));ei=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ei=ei.next=t;return a}var cv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},uv=s.unstable_scheduleCallback,dv=s.unstable_NormalPriority,ha={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gu(){return{controller:new cv,data:new Map,refCount:0}}function zo(e){e.refCount--,e.refCount===0&&uv(dv,function(){e.controller.abort()})}var $o=null,yu=0,Us=0,Ks=null;function mv(e,t){if($o===null){var a=$o=[];yu=0,Us=wd(),Ks={status:"pending",value:void 0,then:function(i){a.push(i)}}}return yu++,t.then(Fh,Fh),t}function Fh(){if(--yu===0&&$o!==null){Ks!==null&&(Ks.status="fulfilled");var e=$o;$o=null,Us=0,Ks=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function hv(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),i}var Yh=_.S;_.S=function(e,t){Mp=Qe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&mv(e,t),Yh!==null&&Yh(e,t)};var ms=k(null);function bu(){var e=ms.current;return e!==null?e:qt.pooledCache}function or(e,t){t===null?re(ms,ms.current):re(ms,t.pool)}function qh(){var e=bu();return e===null?null:{parent:ha._currentValue,pool:e}}var Fs=Error(c(460)),vu=Error(c(474)),lr=Error(c(542)),rr={then:function(){}};function Wh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ph(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(fn,fn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vh(e),e;default:if(typeof t.status=="string")t.then(fn,fn);else{if(e=qt,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vh(e),e}throw fs=t,Fs}}function hs(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(fs=a,Fs):a}}var fs=null;function Gh(){if(fs===null)throw Error(c(459));var e=fs;return fs=null,e}function Vh(e){if(e===Fs||e===lr)throw Error(c(483))}var Ys=null,Io=0;function cr(e){var t=Io;return Io+=1,Ys===null&&(Ys=[]),Ph(Ys,e,t)}function Uo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ur(e,t){throw t.$$typeof===C?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Xh(e){function t(D,E){if(e){var H=D.deletions;H===null?(D.deletions=[E],D.flags|=16):H.push(E)}}function a(D,E){if(!e)return null;for(;E!==null;)t(D,E),E=E.sibling;return null}function i(D){for(var E=new Map;D!==null;)D.key!==null?E.set(D.key,D):E.set(D.index,D),D=D.sibling;return E}function o(D,E){return D=Zn(D,E),D.index=0,D.sibling=null,D}function r(D,E,H){return D.index=H,e?(H=D.alternate,H!==null?(H=H.index,H<E?(D.flags|=67108866,E):H):(D.flags|=67108866,E)):(D.flags|=1048576,E)}function d(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function y(D,E,H,ne){return E===null||E.tag!==6?(E=lu(H,D.mode,ne),E.return=D,E):(E=o(E,H),E.return=D,E)}function S(D,E,H,ne){var Fe=H.type;return Fe===W?J(D,E,H.props.children,ne,H.key):E!==null&&(E.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===K&&hs(Fe)===E.type)?(E=o(E,H.props),Uo(E,H),E.return=D,E):(E=ar(H.type,H.key,H.props,null,D.mode,ne),Uo(E,H),E.return=D,E)}function B(D,E,H,ne){return E===null||E.tag!==4||E.stateNode.containerInfo!==H.containerInfo||E.stateNode.implementation!==H.implementation?(E=ru(H,D.mode,ne),E.return=D,E):(E=o(E,H.children||[]),E.return=D,E)}function J(D,E,H,ne,Fe){return E===null||E.tag!==7?(E=rs(H,D.mode,ne,Fe),E.return=D,E):(E=o(E,H),E.return=D,E)}function ie(D,E,H){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=lu(""+E,D.mode,H),E.return=D,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case R:return H=ar(E.type,E.key,E.props,null,D.mode,H),Uo(H,E),H.return=D,H;case L:return E=ru(E,D.mode,H),E.return=D,E;case K:return E=hs(E),ie(D,E,H)}if(Ce(E)||ce(E))return E=rs(E,D.mode,H,null),E.return=D,E;if(typeof E.then=="function")return ie(D,cr(E),H);if(E.$$typeof===te)return ie(D,sr(D,E),H);ur(D,E)}return null}function I(D,E,H,ne){var Fe=E!==null?E.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Fe!==null?null:y(D,E,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===Fe?S(D,E,H,ne):null;case L:return H.key===Fe?B(D,E,H,ne):null;case K:return H=hs(H),I(D,E,H,ne)}if(Ce(H)||ce(H))return Fe!==null?null:J(D,E,H,ne,null);if(typeof H.then=="function")return I(D,E,cr(H),ne);if(H.$$typeof===te)return I(D,E,sr(D,H),ne);ur(D,H)}return null}function q(D,E,H,ne,Fe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return D=D.get(H)||null,y(E,D,""+ne,Fe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case R:return D=D.get(ne.key===null?H:ne.key)||null,S(E,D,ne,Fe);case L:return D=D.get(ne.key===null?H:ne.key)||null,B(E,D,ne,Fe);case K:return ne=hs(ne),q(D,E,H,ne,Fe)}if(Ce(ne)||ce(ne))return D=D.get(H)||null,J(E,D,ne,Fe,null);if(typeof ne.then=="function")return q(D,E,H,cr(ne),Fe);if(ne.$$typeof===te)return q(D,E,H,sr(E,ne),Fe);ur(E,ne)}return null}function Re(D,E,H,ne){for(var Fe=null,Nt=null,ze=E,ot=E=0,gt=null;ze!==null&&ot<H.length;ot++){ze.index>ot?(gt=ze,ze=null):gt=ze.sibling;var Tt=I(D,ze,H[ot],ne);if(Tt===null){ze===null&&(ze=gt);break}e&&ze&&Tt.alternate===null&&t(D,ze),E=r(Tt,E,ot),Nt===null?Fe=Tt:Nt.sibling=Tt,Nt=Tt,ze=gt}if(ot===H.length)return a(D,ze),vt&&Jn(D,ot),Fe;if(ze===null){for(;ot<H.length;ot++)ze=ie(D,H[ot],ne),ze!==null&&(E=r(ze,E,ot),Nt===null?Fe=ze:Nt.sibling=ze,Nt=ze);return vt&&Jn(D,ot),Fe}for(ze=i(ze);ot<H.length;ot++)gt=q(ze,D,ot,H[ot],ne),gt!==null&&(e&&gt.alternate!==null&&ze.delete(gt.key===null?ot:gt.key),E=r(gt,E,ot),Nt===null?Fe=gt:Nt.sibling=gt,Nt=gt);return e&&ze.forEach(function(Ui){return t(D,Ui)}),vt&&Jn(D,ot),Fe}function Pe(D,E,H,ne){if(H==null)throw Error(c(151));for(var Fe=null,Nt=null,ze=E,ot=E=0,gt=null,Tt=H.next();ze!==null&&!Tt.done;ot++,Tt=H.next()){ze.index>ot?(gt=ze,ze=null):gt=ze.sibling;var Ui=I(D,ze,Tt.value,ne);if(Ui===null){ze===null&&(ze=gt);break}e&&ze&&Ui.alternate===null&&t(D,ze),E=r(Ui,E,ot),Nt===null?Fe=Ui:Nt.sibling=Ui,Nt=Ui,ze=gt}if(Tt.done)return a(D,ze),vt&&Jn(D,ot),Fe;if(ze===null){for(;!Tt.done;ot++,Tt=H.next())Tt=ie(D,Tt.value,ne),Tt!==null&&(E=r(Tt,E,ot),Nt===null?Fe=Tt:Nt.sibling=Tt,Nt=Tt);return vt&&Jn(D,ot),Fe}for(ze=i(ze);!Tt.done;ot++,Tt=H.next())Tt=q(ze,D,ot,Tt.value,ne),Tt!==null&&(e&&Tt.alternate!==null&&ze.delete(Tt.key===null?ot:Tt.key),E=r(Tt,E,ot),Nt===null?Fe=Tt:Nt.sibling=Tt,Nt=Tt);return e&&ze.forEach(function(jw){return t(D,jw)}),vt&&Jn(D,ot),Fe}function Ut(D,E,H,ne){if(typeof H=="object"&&H!==null&&H.type===W&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var Fe=H.key;E!==null;){if(E.key===Fe){if(Fe=H.type,Fe===W){if(E.tag===7){a(D,E.sibling),ne=o(E,H.props.children),ne.return=D,D=ne;break e}}else if(E.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===K&&hs(Fe)===E.type){a(D,E.sibling),ne=o(E,H.props),Uo(ne,H),ne.return=D,D=ne;break e}a(D,E);break}else t(D,E);E=E.sibling}H.type===W?(ne=rs(H.props.children,D.mode,ne,H.key),ne.return=D,D=ne):(ne=ar(H.type,H.key,H.props,null,D.mode,ne),Uo(ne,H),ne.return=D,D=ne)}return d(D);case L:e:{for(Fe=H.key;E!==null;){if(E.key===Fe)if(E.tag===4&&E.stateNode.containerInfo===H.containerInfo&&E.stateNode.implementation===H.implementation){a(D,E.sibling),ne=o(E,H.children||[]),ne.return=D,D=ne;break e}else{a(D,E);break}else t(D,E);E=E.sibling}ne=ru(H,D.mode,ne),ne.return=D,D=ne}return d(D);case K:return H=hs(H),Ut(D,E,H,ne)}if(Ce(H))return Re(D,E,H,ne);if(ce(H)){if(Fe=ce(H),typeof Fe!="function")throw Error(c(150));return H=Fe.call(H),Pe(D,E,H,ne)}if(typeof H.then=="function")return Ut(D,E,cr(H),ne);if(H.$$typeof===te)return Ut(D,E,sr(D,H),ne);ur(D,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,E!==null&&E.tag===6?(a(D,E.sibling),ne=o(E,H),ne.return=D,D=ne):(a(D,E),ne=lu(H,D.mode,ne),ne.return=D,D=ne),d(D)):a(D,E)}return function(D,E,H,ne){try{Io=0;var Fe=Ut(D,E,H,ne);return Ys=null,Fe}catch(ze){if(ze===Fs||ze===lr)throw ze;var Nt=tn(29,ze,null,D.mode);return Nt.lanes=ne,Nt.return=D,Nt}}}var ps=Xh(!0),Qh=Xh(!1),ji=!1;function wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ku(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ni(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Et&2)!==0){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=tr(e),_h(e,null,a),t}return er(e,i,t,a),tr(e)}function Ko(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,ut(e,a)}}function xu(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var o=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var d={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};r===null?o=r=d:r=r.next=d,a=a.next}while(a!==null);r===null?o=r=t:r=r.next=t}else o=r=t;a={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Su=!1;function Fo(){if(Su){var e=Ks;if(e!==null)throw e}}function Yo(e,t,a,i){Su=!1;var o=e.updateQueue;ji=!1;var r=o.firstBaseUpdate,d=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var S=y,B=S.next;S.next=null,d===null?r=B:d.next=B,d=S;var J=e.alternate;J!==null&&(J=J.updateQueue,y=J.lastBaseUpdate,y!==d&&(y===null?J.firstBaseUpdate=B:y.next=B,J.lastBaseUpdate=S))}if(r!==null){var ie=o.baseState;d=0,J=B=S=null,y=r;do{var I=y.lane&-536870913,q=I!==y.lane;if(q?(pt&I)===I:(i&I)===I){I!==0&&I===Us&&(Su=!0),J!==null&&(J=J.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var Re=e,Pe=y;I=t;var Ut=a;switch(Pe.tag){case 1:if(Re=Pe.payload,typeof Re=="function"){ie=Re.call(Ut,ie,I);break e}ie=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Pe.payload,I=typeof Re=="function"?Re.call(Ut,ie,I):Re,I==null)break e;ie=M({},ie,I);break e;case 2:ji=!0}}I=y.callback,I!==null&&(e.flags|=64,q&&(e.flags|=8192),q=o.callbacks,q===null?o.callbacks=[I]:q.push(I))}else q={lane:I,tag:y.tag,payload:y.payload,callback:y.callback,next:null},J===null?(B=J=q,S=ie):J=J.next=q,d|=I;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;q=y,y=q.next,q.next=null,o.lastBaseUpdate=q,o.shared.pending=null}}while(!0);J===null&&(S=ie),o.baseState=S,o.firstBaseUpdate=B,o.lastBaseUpdate=J,r===null&&(o.shared.lanes=0),Di|=d,e.lanes=d,e.memoizedState=ie}}function Zh(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Jh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Zh(a[e],t)}var qs=k(null),dr=k(0);function ef(e,t){e=ui,re(dr,e),re(qs,t),ui=e|t.baseLanes}function ju(){re(dr,ui),re(qs,qs.current)}function Nu(){ui=dr.current,z(qs),z(dr)}var an=k(null),wn=null;function Ai(e){var t=e.alternate;re(ra,ra.current&1),re(an,e),wn===null&&(t===null||qs.current!==null||t.memoizedState!==null)&&(wn=e)}function Tu(e){re(ra,ra.current),re(an,e),wn===null&&(wn=e)}function tf(e){e.tag===22?(re(ra,ra.current),re(an,e),wn===null&&(wn=e)):Mi()}function Mi(){re(ra,ra.current),re(an,an.current)}function nn(e){z(an),wn===e&&(wn=null),z(ra)}var ra=k(0);function mr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Od(a)||Rd(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ai=0,it=null,$t=null,fa=null,hr=!1,Ws=!1,gs=!1,fr=0,qo=0,Ps=null,fv=0;function sa(){throw Error(c(321))}function Au(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!en(e[a],t[a]))return!1;return!0}function Mu(e,t,a,i,o,r){return ai=r,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?$f:Fu,gs=!1,r=a(i,o),gs=!1,Ws&&(r=nf(t,a,i,o)),af(e),r}function af(e){_.H=Go;var t=$t!==null&&$t.next!==null;if(ai=0,fa=$t=it=null,hr=!1,qo=0,Ps=null,t)throw Error(c(300));e===null||pa||(e=e.dependencies,e!==null&&ir(e)&&(pa=!0))}function nf(e,t,a,i){it=e;var o=0;do{if(Ws&&(Ps=null),qo=0,Ws=!1,25<=o)throw Error(c(301));if(o+=1,fa=$t=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}_.H=If,r=t(a,i)}while(Ws);return r}function pv(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?Wo(t):t,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(it.flags|=1024),t}function Eu(){var e=fr!==0;return fr=0,e}function Cu(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Du(e){if(hr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}hr=!1}ai=0,fa=$t=it=null,Ws=!1,qo=fr=0,Ps=null}function Ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fa===null?it.memoizedState=fa=e:fa=fa.next=e,fa}function ca(){if($t===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var t=fa===null?it.memoizedState:fa.next;if(t!==null)fa=t,$t=e;else{if(e===null)throw it.alternate===null?Error(c(467)):Error(c(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},fa===null?it.memoizedState=fa=e:fa=fa.next=e}return fa}function pr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wo(e){var t=qo;return qo+=1,Ps===null&&(Ps=[]),e=Ph(Ps,e,t),t=it,(fa===null?t.memoizedState:fa.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?$f:Fu),e}function gr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Wo(e);if(e.$$typeof===te)return Aa(e)}throw Error(c(438,String(e)))}function Ou(e){var t=null,a=it.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=it.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=pr(),it.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=le;return t.index++,a}function ni(e,t){return typeof t=="function"?t(e):t}function yr(e){var t=ca();return Ru(t,$t,e)}function Ru(e,t,a){var i=e.queue;if(i===null)throw Error(c(311));i.lastRenderedReducer=a;var o=e.baseQueue,r=i.pending;if(r!==null){if(o!==null){var d=o.next;o.next=r.next,r.next=d}t.baseQueue=o=r,i.pending=null}if(r=e.baseState,o===null)e.memoizedState=r;else{t=o.next;var y=d=null,S=null,B=t,J=!1;do{var ie=B.lane&-536870913;if(ie!==B.lane?(pt&ie)===ie:(ai&ie)===ie){var I=B.revertLane;if(I===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ie===Us&&(J=!0);else if((ai&I)===I){B=B.next,I===Us&&(J=!0);continue}else ie={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},S===null?(y=S=ie,d=r):S=S.next=ie,it.lanes|=I,Di|=I;ie=B.action,gs&&a(r,ie),r=B.hasEagerState?B.eagerState:a(r,ie)}else I={lane:ie,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},S===null?(y=S=I,d=r):S=S.next=I,it.lanes|=ie,Di|=ie;B=B.next}while(B!==null&&B!==t);if(S===null?d=r:S.next=y,!en(r,e.memoizedState)&&(pa=!0,J&&(a=Ks,a!==null)))throw a;e.memoizedState=r,e.baseState=d,e.baseQueue=S,i.lastRenderedState=r}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function _u(e){var t=ca(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var i=a.dispatch,o=a.pending,r=t.memoizedState;if(o!==null){a.pending=null;var d=o=o.next;do r=e(r,d.action),d=d.next;while(d!==o);en(r,t.memoizedState)||(pa=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),a.lastRenderedState=r}return[r,i]}function sf(e,t,a){var i=it,o=ca(),r=vt;if(r){if(a===void 0)throw Error(c(407));a=a()}else a=t();var d=!en(($t||o).memoizedState,a);if(d&&(o.memoizedState=a,pa=!0),o=o.queue,Bu(rf.bind(null,i,o,e),[e]),o.getSnapshot!==t||d||fa!==null&&fa.memoizedState.tag&1){if(i.flags|=2048,Gs(9,{destroy:void 0},lf.bind(null,i,o,a,t),null),qt===null)throw Error(c(349));r||(ai&127)!==0||of(i,t,a)}return a}function of(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=it.updateQueue,t===null?(t=pr(),it.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function lf(e,t,a,i){t.value=a,t.getSnapshot=i,cf(t)&&uf(e)}function rf(e,t,a){return a(function(){cf(t)&&uf(e)})}function cf(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!en(e,a)}catch{return!0}}function uf(e){var t=ls(e,2);t!==null&&Pa(t,e,2)}function Lu(e){var t=Ba();if(typeof e=="function"){var a=e;if(e=a(),gs){Rt(!0);try{a()}finally{Rt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:e},t}function df(e,t,a,i){return e.baseState=a,Ru(e,$t,typeof i=="function"?i:ni)}function gv(e,t,a,i,o){if(wr(e))throw Error(c(485));if(e=t.action,e!==null){var r={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){r.listeners.push(d)}};_.T!==null?a(!0):r.isTransition=!1,i(r),a=t.pending,a===null?(r.next=t.pending=r,mf(t,r)):(r.next=a.next,t.pending=a.next=r)}}function mf(e,t){var a=t.action,i=t.payload,o=e.state;if(t.isTransition){var r=_.T,d={};_.T=d;try{var y=a(o,i),S=_.S;S!==null&&S(d,y),hf(e,t,y)}catch(B){Hu(e,t,B)}finally{r!==null&&d.types!==null&&(r.types=d.types),_.T=r}}else try{r=a(o,i),hf(e,t,r)}catch(B){Hu(e,t,B)}}function hf(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){ff(e,t,i)},function(i){return Hu(e,t,i)}):ff(e,t,a)}function ff(e,t,a){t.status="fulfilled",t.value=a,pf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,mf(e,a)))}function Hu(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,pf(t),t=t.next;while(t!==i)}e.action=null}function pf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function gf(e,t){return t}function yf(e,t){if(vt){var a=qt.formState;if(a!==null){e:{var i=it;if(vt){if(Jt){t:{for(var o=Jt,r=vn;o.nodeType!==8;){if(!r){o=null;break t}if(o=kn(o.nextSibling),o===null){o=null;break t}}r=o.data,o=r==="F!"||r==="F"?o:null}if(o){Jt=kn(o.nextSibling),i=o.data==="F!";break e}}xi(i)}i=!1}i&&(t=a[0])}}return a=Ba(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:t},a.queue=i,a=Hf.bind(null,it,i),i.dispatch=a,i=Lu(!1),r=Ku.bind(null,it,!1,i.queue),i=Ba(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,a=gv.bind(null,it,o,r,a),o.dispatch=a,i.memoizedState=e,[t,a,!1]}function bf(e){var t=ca();return vf(t,$t,e)}function vf(e,t,a){if(t=Ru(e,t,gf)[0],e=yr(ni)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Wo(t)}catch(d){throw d===Fs?lr:d}else i=t;t=ca();var o=t.queue,r=o.dispatch;return a!==t.memoizedState&&(it.flags|=2048,Gs(9,{destroy:void 0},yv.bind(null,o,a),null)),[i,r,e]}function yv(e,t){e.action=t}function wf(e){var t=ca(),a=$t;if(a!==null)return vf(t,a,e);ca(),t=t.memoizedState,a=ca();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function Gs(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=it.updateQueue,t===null&&(t=pr(),it.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function kf(){return ca().memoizedState}function br(e,t,a,i){var o=Ba();it.flags|=e,o.memoizedState=Gs(1|t,{destroy:void 0},a,i===void 0?null:i)}function vr(e,t,a,i){var o=ca();i=i===void 0?null:i;var r=o.memoizedState.inst;$t!==null&&i!==null&&Au(i,$t.memoizedState.deps)?o.memoizedState=Gs(t,r,a,i):(it.flags|=e,o.memoizedState=Gs(1|t,r,a,i))}function xf(e,t){br(8390656,8,e,t)}function Bu(e,t){vr(2048,8,e,t)}function bv(e){it.flags|=4;var t=it.updateQueue;if(t===null)t=pr(),it.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Sf(e){var t=ca().memoizedState;return bv({ref:t,nextImpl:e}),function(){if((Et&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function jf(e,t){return vr(4,2,e,t)}function Nf(e,t){return vr(4,4,e,t)}function Tf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Af(e,t,a){a=a!=null?a.concat([e]):null,vr(4,4,Tf.bind(null,t,e),a)}function zu(){}function Mf(e,t){var a=ca();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&Au(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function Ef(e,t){var a=ca();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&Au(t,i[1]))return i[0];if(i=e(),gs){Rt(!0);try{e()}finally{Rt(!1)}}return a.memoizedState=[i,t],i}function $u(e,t,a){return a===void 0||(ai&1073741824)!==0&&(pt&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Cp(),it.lanes|=e,Di|=e,a)}function Cf(e,t,a,i){return en(a,t)?a:qs.current!==null?(e=$u(e,a,i),en(e,t)||(pa=!0),e):(ai&42)===0||(ai&1073741824)!==0&&(pt&261930)===0?(pa=!0,e.memoizedState=a):(e=Cp(),it.lanes|=e,Di|=e,t)}function Df(e,t,a,i,o){var r=Q.p;Q.p=r!==0&&8>r?r:8;var d=_.T,y={};_.T=y,Ku(e,!1,t,a);try{var S=o(),B=_.S;if(B!==null&&B(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var J=hv(S,i);Po(e,t,J,ln(e))}else Po(e,t,i,ln(e))}catch(ie){Po(e,t,{then:function(){},status:"rejected",reason:ie},ln())}finally{Q.p=r,d!==null&&y.types!==null&&(d.types=y.types),_.T=d}}function vv(){}function Iu(e,t,a,i){if(e.tag!==5)throw Error(c(476));var o=Of(e).queue;Df(e,o,t,Se,a===null?vv:function(){return Rf(e),a(i)})}function Of(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:Se},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Rf(e){var t=Of(e);t.next===null&&(t=e.alternate.memoizedState),Po(e,t.next.queue,{},ln())}function Uu(){return Aa(ul)}function _f(){return ca().memoizedState}function Lf(){return ca().memoizedState}function wv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=ln();e=Ni(a);var i=Ti(t,e,a);i!==null&&(Pa(i,t,a),Ko(i,t,a)),t={cache:gu()},e.payload=t;return}t=t.return}}function kv(e,t,a){var i=ln();a={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wr(e)?Bf(t,a):(a=su(e,t,a,i),a!==null&&(Pa(a,e,i),zf(a,t,i)))}function Hf(e,t,a){var i=ln();Po(e,t,a,i)}function Po(e,t,a,i){var o={lane:i,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wr(e))Bf(t,o);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var d=t.lastRenderedState,y=r(d,a);if(o.hasEagerState=!0,o.eagerState=y,en(y,d))return er(e,t,o,0),qt===null&&Jl(),!1}catch{}if(a=su(e,t,o,i),a!==null)return Pa(a,e,i),zf(a,t,i),!0}return!1}function Ku(e,t,a,i){if(i={lane:2,revertLane:wd(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},wr(e)){if(t)throw Error(c(479))}else t=su(e,a,i,2),t!==null&&Pa(t,e,2)}function wr(e){var t=e.alternate;return e===it||t!==null&&t===it}function Bf(e,t){Ws=hr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function zf(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,ut(e,a)}}var Go={readContext:Aa,use:gr,useCallback:sa,useContext:sa,useEffect:sa,useImperativeHandle:sa,useLayoutEffect:sa,useInsertionEffect:sa,useMemo:sa,useReducer:sa,useRef:sa,useState:sa,useDebugValue:sa,useDeferredValue:sa,useTransition:sa,useSyncExternalStore:sa,useId:sa,useHostTransitionStatus:sa,useFormState:sa,useActionState:sa,useOptimistic:sa,useMemoCache:sa,useCacheRefresh:sa};Go.useEffectEvent=sa;var $f={readContext:Aa,use:gr,useCallback:function(e,t){return Ba().memoizedState=[e,t===void 0?null:t],e},useContext:Aa,useEffect:xf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,br(4194308,4,Tf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return br(4194308,4,e,t)},useInsertionEffect:function(e,t){br(4,2,e,t)},useMemo:function(e,t){var a=Ba();t=t===void 0?null:t;var i=e();if(gs){Rt(!0);try{e()}finally{Rt(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=Ba();if(a!==void 0){var o=a(t);if(gs){Rt(!0);try{a(t)}finally{Rt(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=kv.bind(null,it,e),[i.memoizedState,e]},useRef:function(e){var t=Ba();return e={current:e},t.memoizedState=e},useState:function(e){e=Lu(e);var t=e.queue,a=Hf.bind(null,it,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:zu,useDeferredValue:function(e,t){var a=Ba();return $u(a,e,t)},useTransition:function(){var e=Lu(!1);return e=Df.bind(null,it,e.queue,!0,!1),Ba().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=it,o=Ba();if(vt){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),qt===null)throw Error(c(349));(pt&127)!==0||of(i,t,a)}o.memoizedState=a;var r={value:a,getSnapshot:t};return o.queue=r,xf(rf.bind(null,i,r,e),[e]),i.flags|=2048,Gs(9,{destroy:void 0},lf.bind(null,i,r,a,t),null),a},useId:function(){var e=Ba(),t=qt.identifierPrefix;if(vt){var a=Bn,i=Hn;a=(i&~(1<<32-ct(i)-1)).toString(32)+a,t="_"+t+"R_"+a,a=fr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=fv++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Uu,useFormState:yf,useActionState:yf,useOptimistic:function(e){var t=Ba();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Ku.bind(null,it,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ou,useCacheRefresh:function(){return Ba().memoizedState=wv.bind(null,it)},useEffectEvent:function(e){var t=Ba(),a={impl:e};return t.memoizedState=a,function(){if((Et&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},Fu={readContext:Aa,use:gr,useCallback:Mf,useContext:Aa,useEffect:Bu,useImperativeHandle:Af,useInsertionEffect:jf,useLayoutEffect:Nf,useMemo:Ef,useReducer:yr,useRef:kf,useState:function(){return yr(ni)},useDebugValue:zu,useDeferredValue:function(e,t){var a=ca();return Cf(a,$t.memoizedState,e,t)},useTransition:function(){var e=yr(ni)[0],t=ca().memoizedState;return[typeof e=="boolean"?e:Wo(e),t]},useSyncExternalStore:sf,useId:_f,useHostTransitionStatus:Uu,useFormState:bf,useActionState:bf,useOptimistic:function(e,t){var a=ca();return df(a,$t,e,t)},useMemoCache:Ou,useCacheRefresh:Lf};Fu.useEffectEvent=Sf;var If={readContext:Aa,use:gr,useCallback:Mf,useContext:Aa,useEffect:Bu,useImperativeHandle:Af,useInsertionEffect:jf,useLayoutEffect:Nf,useMemo:Ef,useReducer:_u,useRef:kf,useState:function(){return _u(ni)},useDebugValue:zu,useDeferredValue:function(e,t){var a=ca();return $t===null?$u(a,e,t):Cf(a,$t.memoizedState,e,t)},useTransition:function(){var e=_u(ni)[0],t=ca().memoizedState;return[typeof e=="boolean"?e:Wo(e),t]},useSyncExternalStore:sf,useId:_f,useHostTransitionStatus:Uu,useFormState:wf,useActionState:wf,useOptimistic:function(e,t){var a=ca();return $t!==null?df(a,$t,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ou,useCacheRefresh:Lf};If.useEffectEvent=Sf;function Yu(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:M({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var qu={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=ln(),o=Ni(i);o.payload=t,a!=null&&(o.callback=a),t=Ti(e,o,i),t!==null&&(Pa(t,e,i),Ko(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=ln(),o=Ni(i);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=Ti(e,o,i),t!==null&&(Pa(t,e,i),Ko(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ln(),i=Ni(a);i.tag=2,t!=null&&(i.callback=t),t=Ti(e,i,a),t!==null&&(Pa(t,e,a),Ko(t,e,a))}};function Uf(e,t,a,i,o,r,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,d):t.prototype&&t.prototype.isPureReactComponent?!_o(a,i)||!_o(o,r):!0}function Kf(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&qu.enqueueReplaceState(t,t.state,null)}function ys(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=M({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function Ff(e){Zl(e)}function Yf(e){console.error(e)}function qf(e){Zl(e)}function kr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Wf(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Wu(e,t,a){return a=Ni(a),a.tag=3,a.payload={element:null},a.callback=function(){kr(e,t)},a}function Pf(e){return e=Ni(e),e.tag=3,e}function Gf(e,t,a,i){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var r=i.value;e.payload=function(){return o(r)},e.callback=function(){Wf(t,a,i)}}var d=a.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){Wf(t,a,i),typeof o!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var y=i.stack;this.componentDidCatch(i.value,{componentStack:y!==null?y:""})})}function xv(e,t,a,i,o){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&Is(t,a,o,!0),a=an.current,a!==null){switch(a.tag){case 31:case 13:return wn===null?Rr():a.alternate===null&&oa===0&&(oa=3),a.flags&=-257,a.flags|=65536,a.lanes=o,i===rr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),yd(e,i,o)),!1;case 22:return a.flags|=65536,i===rr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),yd(e,i,o)),!1}throw Error(c(435,a.tag))}return yd(e,i,o),Rr(),!1}if(vt)return t=an.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==du&&(e=Error(c(422),{cause:i}),Bo(gn(e,a)))):(i!==du&&(t=Error(c(423),{cause:i}),Bo(gn(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=gn(i,a),o=Wu(e.stateNode,i,o),xu(e,o),oa!==4&&(oa=2)),!1;var r=Error(c(520),{cause:i});if(r=gn(r,a),al===null?al=[r]:al.push(r),oa!==4&&(oa=2),t===null)return!0;i=gn(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=Wu(a.stateNode,i,e),xu(a,e),!1;case 1:if(t=a.type,r=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Oi===null||!Oi.has(r))))return a.flags|=65536,o&=-o,a.lanes|=o,o=Pf(o),Gf(o,e,a,i),xu(a,o),!1}a=a.return}while(a!==null);return!1}var Pu=Error(c(461)),pa=!1;function Ma(e,t,a,i){t.child=e===null?Qh(t,null,a,i):ps(t,e.child,a,i)}function Vf(e,t,a,i,o){a=a.render;var r=t.ref;if("ref"in i){var d={};for(var y in i)y!=="ref"&&(d[y]=i[y])}else d=i;return ds(t),i=Mu(e,t,a,d,r,o),y=Eu(),e!==null&&!pa?(Cu(e,t,o),ii(e,t,o)):(vt&&y&&cu(t),t.flags|=1,Ma(e,t,i,o),t.child)}function Xf(e,t,a,i,o){if(e===null){var r=a.type;return typeof r=="function"&&!ou(r)&&r.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=r,Qf(e,t,r,i,o)):(e=ar(a.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!td(e,o)){var d=r.memoizedProps;if(a=a.compare,a=a!==null?a:_o,a(d,i)&&e.ref===t.ref)return ii(e,t,o)}return t.flags|=1,e=Zn(r,i),e.ref=t.ref,e.return=t,t.child=e}function Qf(e,t,a,i,o){if(e!==null){var r=e.memoizedProps;if(_o(r,i)&&e.ref===t.ref)if(pa=!1,t.pendingProps=i=r,td(e,o))(e.flags&131072)!==0&&(pa=!0);else return t.lanes=e.lanes,ii(e,t,o)}return Gu(e,t,a,i,o)}function Zf(e,t,a,i){var o=i.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|a:a,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~r}else i=0,t.child=null;return Jf(e,t,r,a,i)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&or(t,r!==null?r.cachePool:null),r!==null?ef(t,r):ju(),tf(t);else return i=t.lanes=536870912,Jf(e,t,r!==null?r.baseLanes|a:a,a,i)}else r!==null?(or(t,r.cachePool),ef(t,r),Mi(),t.memoizedState=null):(e!==null&&or(t,null),ju(),Mi());return Ma(e,t,o,a),t.child}function Vo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Jf(e,t,a,i,o){var r=bu();return r=r===null?null:{parent:ha._currentValue,pool:r},t.memoizedState={baseLanes:a,cachePool:r},e!==null&&or(t,null),ju(),tf(t),e!==null&&Is(e,t,i,!0),t.childLanes=o,null}function xr(e,t){return t=jr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ep(e,t,a){return ps(t,e.child,null,a),e=xr(t,t.pendingProps),e.flags|=2,nn(t),t.memoizedState=null,e}function Sv(e,t,a){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(vt){if(i.mode==="hidden")return e=xr(t,i),t.lanes=536870912,Vo(null,e);if(Tu(t),(e=Jt)?(e=mg(e,vn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wi!==null?{id:Hn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},a=Hh(e),a.return=t,t.child=a,Ta=t,Jt=null)):e=null,e===null)throw xi(t);return t.lanes=536870912,null}return xr(t,i)}var r=e.memoizedState;if(r!==null){var d=r.dehydrated;if(Tu(t),o)if(t.flags&256)t.flags&=-257,t=ep(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(pa||Is(e,t,a,!1),o=(a&e.childLanes)!==0,pa||o){if(i=qt,i!==null&&(d=wt(i,a),d!==0&&d!==r.retryLane))throw r.retryLane=d,ls(e,d),Pa(i,e,d),Pu;Rr(),t=ep(e,t,a)}else e=r.treeContext,Jt=kn(d.nextSibling),Ta=t,vt=!0,ki=null,vn=!1,e!==null&&$h(t,e),t=xr(t,i),t.flags|=4096;return t}return e=Zn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Sr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Gu(e,t,a,i,o){return ds(t),a=Mu(e,t,a,i,void 0,o),i=Eu(),e!==null&&!pa?(Cu(e,t,o),ii(e,t,o)):(vt&&i&&cu(t),t.flags|=1,Ma(e,t,a,o),t.child)}function tp(e,t,a,i,o,r){return ds(t),t.updateQueue=null,a=nf(t,i,a,o),af(e),i=Eu(),e!==null&&!pa?(Cu(e,t,r),ii(e,t,r)):(vt&&i&&cu(t),t.flags|=1,Ma(e,t,a,r),t.child)}function ap(e,t,a,i,o){if(ds(t),t.stateNode===null){var r=Hs,d=a.contextType;typeof d=="object"&&d!==null&&(r=Aa(d)),r=new a(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=qu,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},wu(t),d=a.contextType,r.context=typeof d=="object"&&d!==null?Aa(d):Hs,r.state=t.memoizedState,d=a.getDerivedStateFromProps,typeof d=="function"&&(Yu(t,a,d,i),r.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(d=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),d!==r.state&&qu.enqueueReplaceState(r,r.state,null),Yo(t,i,r,o),Fo(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var y=t.memoizedProps,S=ys(a,y);r.props=S;var B=r.context,J=a.contextType;d=Hs,typeof J=="object"&&J!==null&&(d=Aa(J));var ie=a.getDerivedStateFromProps;J=typeof ie=="function"||typeof r.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,J||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(y||B!==d)&&Kf(t,r,i,d),ji=!1;var I=t.memoizedState;r.state=I,Yo(t,i,r,o),Fo(),B=t.memoizedState,y||I!==B||ji?(typeof ie=="function"&&(Yu(t,a,ie,i),B=t.memoizedState),(S=ji||Uf(t,a,S,i,I,B,d))?(J||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=B),r.props=i,r.state=B,r.context=d,i=S):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,ku(e,t),d=t.memoizedProps,J=ys(a,d),r.props=J,ie=t.pendingProps,I=r.context,B=a.contextType,S=Hs,typeof B=="object"&&B!==null&&(S=Aa(B)),y=a.getDerivedStateFromProps,(B=typeof y=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(d!==ie||I!==S)&&Kf(t,r,i,S),ji=!1,I=t.memoizedState,r.state=I,Yo(t,i,r,o),Fo();var q=t.memoizedState;d!==ie||I!==q||ji||e!==null&&e.dependencies!==null&&ir(e.dependencies)?(typeof y=="function"&&(Yu(t,a,y,i),q=t.memoizedState),(J=ji||Uf(t,a,J,i,I,q,S)||e!==null&&e.dependencies!==null&&ir(e.dependencies))?(B||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,q,S),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,q,S)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||d===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=q),r.props=i,r.state=q,r.context=S,i=J):(typeof r.componentDidUpdate!="function"||d===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,Sr(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=ps(t,e.child,null,o),t.child=ps(t,null,a,o)):Ma(e,t,a,o),t.memoizedState=r.state,e=t.child):e=ii(e,t,o),e}function np(e,t,a,i){return cs(),t.flags|=256,Ma(e,t,a,i),t.child}var Vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xu(e){return{baseLanes:e,cachePool:qh()}}function Qu(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=on),e}function ip(e,t,a){var i=t.pendingProps,o=!1,r=(t.flags&128)!==0,d;if((d=r)||(d=e!==null&&e.memoizedState===null?!1:(ra.current&2)!==0),d&&(o=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(vt){if(o?Ai(t):Mi(),(e=Jt)?(e=mg(e,vn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wi!==null?{id:Hn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},a=Hh(e),a.return=t,t.child=a,Ta=t,Jt=null)):e=null,e===null)throw xi(t);return Rd(e)?t.lanes=32:t.lanes=536870912,null}var y=i.children;return i=i.fallback,o?(Mi(),o=t.mode,y=jr({mode:"hidden",children:y},o),i=rs(i,o,a,null),y.return=t,i.return=t,y.sibling=i,t.child=y,i=t.child,i.memoizedState=Xu(a),i.childLanes=Qu(e,d,a),t.memoizedState=Vu,Vo(null,i)):(Ai(t),Zu(t,y))}var S=e.memoizedState;if(S!==null&&(y=S.dehydrated,y!==null)){if(r)t.flags&256?(Ai(t),t.flags&=-257,t=Ju(e,t,a)):t.memoizedState!==null?(Mi(),t.child=e.child,t.flags|=128,t=null):(Mi(),y=i.fallback,o=t.mode,i=jr({mode:"visible",children:i.children},o),y=rs(y,o,a,null),y.flags|=2,i.return=t,y.return=t,i.sibling=y,t.child=i,ps(t,e.child,null,a),i=t.child,i.memoizedState=Xu(a),i.childLanes=Qu(e,d,a),t.memoizedState=Vu,t=Vo(null,i));else if(Ai(t),Rd(y)){if(d=y.nextSibling&&y.nextSibling.dataset,d)var B=d.dgst;d=B,i=Error(c(419)),i.stack="",i.digest=d,Bo({value:i,source:null,stack:null}),t=Ju(e,t,a)}else if(pa||Is(e,t,a,!1),d=(a&e.childLanes)!==0,pa||d){if(d=qt,d!==null&&(i=wt(d,a),i!==0&&i!==S.retryLane))throw S.retryLane=i,ls(e,i),Pa(d,e,i),Pu;Od(y)||Rr(),t=Ju(e,t,a)}else Od(y)?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,Jt=kn(y.nextSibling),Ta=t,vt=!0,ki=null,vn=!1,e!==null&&$h(t,e),t=Zu(t,i.children),t.flags|=4096);return t}return o?(Mi(),y=i.fallback,o=t.mode,S=e.child,B=S.sibling,i=Zn(S,{mode:"hidden",children:i.children}),i.subtreeFlags=S.subtreeFlags&65011712,B!==null?y=Zn(B,y):(y=rs(y,o,a,null),y.flags|=2),y.return=t,i.return=t,i.sibling=y,t.child=i,Vo(null,i),i=t.child,y=e.child.memoizedState,y===null?y=Xu(a):(o=y.cachePool,o!==null?(S=ha._currentValue,o=o.parent!==S?{parent:S,pool:S}:o):o=qh(),y={baseLanes:y.baseLanes|a,cachePool:o}),i.memoizedState=y,i.childLanes=Qu(e,d,a),t.memoizedState=Vu,Vo(e.child,i)):(Ai(t),a=e.child,e=a.sibling,a=Zn(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=a,t.memoizedState=null,a)}function Zu(e,t){return t=jr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function jr(e,t){return e=tn(22,e,null,t),e.lanes=0,e}function Ju(e,t,a){return ps(t,e.child,null,a),e=Zu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sp(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),fu(e.return,t,a)}function ed(e,t,a,i,o,r){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:o,treeForkCount:r}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=a,d.tailMode=o,d.treeForkCount=r)}function op(e,t,a){var i=t.pendingProps,o=i.revealOrder,r=i.tail;i=i.children;var d=ra.current,y=(d&2)!==0;if(y?(d=d&1|2,t.flags|=128):d&=1,re(ra,d),Ma(e,t,i,a),i=vt?Ho:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sp(e,a,t);else if(e.tag===19)sp(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&mr(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),ed(t,!1,o,a,r,i);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&mr(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}ed(t,!0,a,null,r,i);break;case"together":ed(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function ii(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Di|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Is(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=Zn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Zn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function td(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ir(e)))}function jv(e,t,a){switch(t.tag){case 3:Te(t,t.stateNode.containerInfo),Si(t,ha,e.memoizedState.cache),cs();break;case 27:case 5:De(t);break;case 4:Te(t,t.stateNode.containerInfo);break;case 10:Si(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Tu(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ai(t),t.flags|=128,null):(a&t.child.childLanes)!==0?ip(e,t,a):(Ai(t),e=ii(e,t,a),e!==null?e.sibling:null);Ai(t);break;case 19:var o=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(Is(e,t,a,!1),i=(a&t.childLanes)!==0),o){if(i)return op(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),re(ra,ra.current),i)break;return null;case 22:return t.lanes=0,Zf(e,t,a,t.pendingProps);case 24:Si(t,ha,e.memoizedState.cache)}return ii(e,t,a)}function lp(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)pa=!0;else{if(!td(e,a)&&(t.flags&128)===0)return pa=!1,jv(e,t,a);pa=(e.flags&131072)!==0}else pa=!1,vt&&(t.flags&1048576)!==0&&zh(t,Ho,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=hs(t.elementType),t.type=e,typeof e=="function")ou(e)?(i=ys(e,i),t.tag=1,t=ap(null,t,e,i,a)):(t.tag=0,t=Gu(null,t,e,i,a));else{if(e!=null){var o=e.$$typeof;if(o===ue){t.tag=11,t=Vf(null,t,e,i,a);break e}else if(o===V){t.tag=14,t=Xf(null,t,e,i,a);break e}}throw t=we(e)||e,Error(c(306,t,""))}}return t;case 0:return Gu(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,o=ys(i,t.pendingProps),ap(e,t,i,o,a);case 3:e:{if(Te(t,t.stateNode.containerInfo),e===null)throw Error(c(387));i=t.pendingProps;var r=t.memoizedState;o=r.element,ku(e,t),Yo(t,i,null,a);var d=t.memoizedState;if(i=d.cache,Si(t,ha,i),i!==r.cache&&pu(t,[ha],a,!0),Fo(),i=d.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=np(e,t,i,a);break e}else if(i!==o){o=gn(Error(c(424)),t),Bo(o),t=np(e,t,i,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Jt=kn(e.firstChild),Ta=t,vt=!0,ki=null,vn=!0,a=Qh(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(cs(),i===o){t=ii(e,t,a);break e}Ma(e,t,i,a)}t=t.child}return t;case 26:return Sr(e,t),e===null?(a=bg(t.type,null,t.pendingProps,null))?t.memoizedState=a:vt||(a=t.type,e=t.pendingProps,i=Ir(X.current).createElement(a),i[at]=t,i[yt]=e,Ea(i,a,e),Pt(i),t.stateNode=i):t.memoizedState=bg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return De(t),e===null&&vt&&(i=t.stateNode=pg(t.type,t.pendingProps,X.current),Ta=t,vn=!0,o=Jt,Hi(t.type)?(_d=o,Jt=kn(i.firstChild)):Jt=o),Ma(e,t,t.pendingProps.children,a),Sr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&vt&&((o=i=Jt)&&(i=ew(i,t.type,t.pendingProps,vn),i!==null?(t.stateNode=i,Ta=t,Jt=kn(i.firstChild),vn=!1,o=!0):o=!1),o||xi(t)),De(t),o=t.type,r=t.pendingProps,d=e!==null?e.memoizedProps:null,i=r.children,Ed(o,r)?i=null:d!==null&&Ed(o,d)&&(t.flags|=32),t.memoizedState!==null&&(o=Mu(e,t,pv,null,null,a),ul._currentValue=o),Sr(e,t),Ma(e,t,i,a),t.child;case 6:return e===null&&vt&&((e=a=Jt)&&(a=tw(a,t.pendingProps,vn),a!==null?(t.stateNode=a,Ta=t,Jt=null,e=!0):e=!1),e||xi(t)),null;case 13:return ip(e,t,a);case 4:return Te(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ps(t,null,i,a):Ma(e,t,i,a),t.child;case 11:return Vf(e,t,t.type,t.pendingProps,a);case 7:return Ma(e,t,t.pendingProps,a),t.child;case 8:return Ma(e,t,t.pendingProps.children,a),t.child;case 12:return Ma(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,Si(t,t.type,i.value),Ma(e,t,i.children,a),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,ds(t),o=Aa(o),i=i(o),t.flags|=1,Ma(e,t,i,a),t.child;case 14:return Xf(e,t,t.type,t.pendingProps,a);case 15:return Qf(e,t,t.type,t.pendingProps,a);case 19:return op(e,t,a);case 31:return Sv(e,t,a);case 22:return Zf(e,t,a,t.pendingProps);case 24:return ds(t),i=Aa(ha),e===null?(o=bu(),o===null&&(o=qt,r=gu(),o.pooledCache=r,r.refCount++,r!==null&&(o.pooledCacheLanes|=a),o=r),t.memoizedState={parent:i,cache:o},wu(t),Si(t,ha,o)):((e.lanes&a)!==0&&(ku(e,t),Yo(t,null,null,a),Fo()),o=e.memoizedState,r=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Si(t,ha,i)):(i=r.cache,Si(t,ha,i),i!==o.cache&&pu(t,[ha],a,!0))),Ma(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function si(e){e.flags|=4}function ad(e,t,a,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(_p())e.flags|=8192;else throw fs=rr,vu}else e.flags&=-16777217}function rp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Sg(t))if(_p())e.flags|=8192;else throw fs=rr,vu}function Nr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?We():536870912,e.lanes|=t,Zs|=t)}function Xo(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ea(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function Nv(e,t,a){var i=t.pendingProps;switch(uu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(t),null;case 1:return ea(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ti(ha),Ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&($s(t)?si(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,mu())),ea(t),null;case 26:var o=t.type,r=t.memoizedState;return e===null?(si(t),r!==null?(ea(t),rp(t,r)):(ea(t),ad(t,o,null,i,a))):r?r!==e.memoizedState?(si(t),ea(t),rp(t,r)):(ea(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&si(t),ea(t),ad(t,o,e,i,a)),null;case 27:if(tt(t),a=X.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&si(t);else{if(!i){if(t.stateNode===null)throw Error(c(166));return ea(t),null}e=N.current,$s(t)?Ih(t):(e=pg(o,i,a),t.stateNode=e,si(t))}return ea(t),null;case 5:if(tt(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&si(t);else{if(!i){if(t.stateNode===null)throw Error(c(166));return ea(t),null}if(r=N.current,$s(t))Ih(t);else{var d=Ir(X.current);switch(r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?d.createElement("select",{is:i.is}):d.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?d.createElement(o,{is:i.is}):d.createElement(o)}}r[at]=t,r[yt]=i;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=r;e:switch(Ea(r,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&si(t)}}return ea(t),ad(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&si(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(c(166));if(e=X.current,$s(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,o=Ta,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[at]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||ig(e.nodeValue,a)),e||xi(t,!0)}else e=Ir(e).createTextNode(i),e[at]=t,t.stateNode=e}return ea(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(i=$s(t),a!==null){if(e===null){if(!i)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[at]=t}else cs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ea(t),e=!1}else a=mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(nn(t),t):(nn(t),null);if((t.flags&128)!==0)throw Error(c(558))}return ea(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=$s(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[at]=t}else cs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ea(t),o=!1}else o=mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(nn(t),t):(nn(t),null)}return nn(t),(t.flags&128)!==0?(t.lanes=a,t):(a=i!==null,e=e!==null&&e.memoizedState!==null,a&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(i.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Nr(t,t.updateQueue),ea(t),null);case 4:return Ae(),e===null&&jd(t.stateNode.containerInfo),ea(t),null;case 10:return ti(t.type),ea(t),null;case 19:if(z(ra),i=t.memoizedState,i===null)return ea(t),null;if(o=(t.flags&128)!==0,r=i.rendering,r===null)if(o)Xo(i,!1);else{if(oa!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=mr(e),r!==null){for(t.flags|=128,Xo(i,!1),e=r.updateQueue,t.updateQueue=e,Nr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Lh(a,e),a=a.sibling;return re(ra,ra.current&1|2),vt&&Jn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Qe()>Cr&&(t.flags|=128,o=!0,Xo(i,!1),t.lanes=4194304)}else{if(!o)if(e=mr(r),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Nr(t,e),Xo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!vt)return ea(t),null}else 2*Qe()-i.renderingStartTime>Cr&&a!==536870912&&(t.flags|=128,o=!0,Xo(i,!1),t.lanes=4194304);i.isBackwards?(r.sibling=t.child,t.child=r):(e=i.last,e!==null?e.sibling=r:t.child=r,i.last=r)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qe(),e.sibling=null,a=ra.current,re(ra,o?a&1|2:a&1),vt&&Jn(t,i.treeForkCount),e):(ea(t),null);case 22:case 23:return nn(t),Nu(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(ea(t),t.subtreeFlags&6&&(t.flags|=8192)):ea(t),a=t.updateQueue,a!==null&&Nr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&z(ms),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ti(ha),ea(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Tv(e,t){switch(uu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(ha),Ae(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return tt(t),null;case 31:if(t.memoizedState!==null){if(nn(t),t.alternate===null)throw Error(c(340));cs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(nn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));cs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return z(ra),null;case 4:return Ae(),null;case 10:return ti(t.type),null;case 22:case 23:return nn(t),Nu(),e!==null&&z(ms),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ti(ha),null;case 25:return null;default:return null}}function cp(e,t){switch(uu(t),t.tag){case 3:ti(ha),Ae();break;case 26:case 27:case 5:tt(t);break;case 4:Ae();break;case 31:t.memoizedState!==null&&nn(t);break;case 13:nn(t);break;case 19:z(ra);break;case 10:ti(t.type);break;case 22:case 23:nn(t),Nu(),e!==null&&z(ms);break;case 24:ti(ha)}}function Qo(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var o=i.next;a=o;do{if((a.tag&e)===e){i=void 0;var r=a.create,d=a.inst;i=r(),d.destroy=i}a=a.next}while(a!==o)}}catch(y){Ht(t,t.return,y)}}function Ei(e,t,a){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var r=o.next;i=r;do{if((i.tag&e)===e){var d=i.inst,y=d.destroy;if(y!==void 0){d.destroy=void 0,o=t;var S=a,B=y;try{B()}catch(J){Ht(o,S,J)}}}i=i.next}while(i!==r)}}catch(J){Ht(t,t.return,J)}}function up(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Jh(t,a)}catch(i){Ht(e,e.return,i)}}}function dp(e,t,a){a.props=ys(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){Ht(e,t,i)}}function Zo(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(o){Ht(e,t,o)}}function zn(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(o){Ht(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Ht(e,t,o)}else a.current=null}function mp(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(o){Ht(e,e.return,o)}}function nd(e,t,a){try{var i=e.stateNode;Gv(i,e.type,a,t),i[yt]=t}catch(o){Ht(e,e.return,o)}}function hp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hi(e.type)||e.tag===4}function id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sd(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=fn));else if(i!==4&&(i===27&&Hi(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(sd(e,t,a),e=e.sibling;e!==null;)sd(e,t,a),e=e.sibling}function Tr(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&Hi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Tr(e,t,a),e=e.sibling;e!==null;)Tr(e,t,a),e=e.sibling}function fp(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Ea(t,i,a),t[at]=e,t[yt]=a}catch(r){Ht(e,e.return,r)}}var oi=!1,ga=!1,od=!1,pp=typeof WeakSet=="function"?WeakSet:Set,wa=null;function Av(e,t){if(e=e.containerInfo,Ad=Pr,e=Th(e),Jc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var o=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var d=0,y=-1,S=-1,B=0,J=0,ie=e,I=null;t:for(;;){for(var q;ie!==a||o!==0&&ie.nodeType!==3||(y=d+o),ie!==r||i!==0&&ie.nodeType!==3||(S=d+i),ie.nodeType===3&&(d+=ie.nodeValue.length),(q=ie.firstChild)!==null;)I=ie,ie=q;for(;;){if(ie===e)break t;if(I===a&&++B===o&&(y=d),I===r&&++J===i&&(S=d),(q=ie.nextSibling)!==null)break;ie=I,I=ie.parentNode}ie=q}a=y===-1||S===-1?null:{start:y,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Md={focusedElem:e,selectionRange:a},Pr=!1,wa=t;wa!==null;)if(t=wa,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,wa=e;else for(;wa!==null;){switch(t=wa,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,a=t,o=r.memoizedProps,r=r.memoizedState,i=a.stateNode;try{var Re=ys(a.type,o);e=i.getSnapshotBeforeUpdate(Re,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(Pe){Ht(a,a.return,Pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Dd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,wa=e;break}wa=t.return}}function gp(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:ri(e,a),i&4&&Qo(5,a);break;case 1:if(ri(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(d){Ht(a,a.return,d)}else{var o=ys(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){Ht(a,a.return,d)}}i&64&&up(a),i&512&&Zo(a,a.return);break;case 3:if(ri(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Jh(e,t)}catch(d){Ht(a,a.return,d)}}break;case 27:t===null&&i&4&&fp(a);case 26:case 5:ri(e,a),t===null&&i&4&&mp(a),i&512&&Zo(a,a.return);break;case 12:ri(e,a);break;case 31:ri(e,a),i&4&&vp(e,a);break;case 13:ri(e,a),i&4&&wp(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Hv.bind(null,a),aw(e,a))));break;case 22:if(i=a.memoizedState!==null||oi,!i){t=t!==null&&t.memoizedState!==null||ga,o=oi;var r=ga;oi=i,(ga=t)&&!r?ci(e,a,(a.subtreeFlags&8772)!==0):ri(e,a),oi=o,ga=r}break;case 30:break;default:ri(e,a)}}function yp(e){var t=e.alternate;t!==null&&(e.alternate=null,yp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ua(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var na=null,Fa=!1;function li(e,t,a){for(a=a.child;a!==null;)bp(e,t,a),a=a.sibling}function bp(e,t,a){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(zt,a)}catch{}switch(a.tag){case 26:ga||zn(a,t),li(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ga||zn(a,t);var i=na,o=Fa;Hi(a.type)&&(na=a.stateNode,Fa=!1),li(e,t,a),ll(a.stateNode),na=i,Fa=o;break;case 5:ga||zn(a,t);case 6:if(i=na,o=Fa,na=null,li(e,t,a),na=i,Fa=o,na!==null)if(Fa)try{(na.nodeType===9?na.body:na.nodeName==="HTML"?na.ownerDocument.body:na).removeChild(a.stateNode)}catch(r){Ht(a,t,r)}else try{na.removeChild(a.stateNode)}catch(r){Ht(a,t,r)}break;case 18:na!==null&&(Fa?(e=na,ug(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),oo(e)):ug(na,a.stateNode));break;case 4:i=na,o=Fa,na=a.stateNode.containerInfo,Fa=!0,li(e,t,a),na=i,Fa=o;break;case 0:case 11:case 14:case 15:Ei(2,a,t),ga||Ei(4,a,t),li(e,t,a);break;case 1:ga||(zn(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&dp(a,t,i)),li(e,t,a);break;case 21:li(e,t,a);break;case 22:ga=(i=ga)||a.memoizedState!==null,li(e,t,a),ga=i;break;default:li(e,t,a)}}function vp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{oo(e)}catch(a){Ht(t,t.return,a)}}}function wp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{oo(e)}catch(a){Ht(t,t.return,a)}}function Mv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new pp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new pp),t;default:throw Error(c(435,e.tag))}}function Ar(e,t){var a=Mv(e);t.forEach(function(i){if(!a.has(i)){a.add(i);var o=Bv.bind(null,e,i);i.then(o,o)}})}function Ya(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var o=a[i],r=e,d=t,y=d;e:for(;y!==null;){switch(y.tag){case 27:if(Hi(y.type)){na=y.stateNode,Fa=!1;break e}break;case 5:na=y.stateNode,Fa=!1;break e;case 3:case 4:na=y.stateNode.containerInfo,Fa=!0;break e}y=y.return}if(na===null)throw Error(c(160));bp(r,d,o),na=null,Fa=!1,r=o.alternate,r!==null&&(r.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)kp(t,e),t=t.sibling}var An=null;function kp(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ya(t,e),qa(e),i&4&&(Ei(3,e,e.return),Qo(3,e),Ei(5,e,e.return));break;case 1:Ya(t,e),qa(e),i&512&&(ga||a===null||zn(a,a.return)),i&64&&oi&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var o=An;if(Ya(t,e),qa(e),i&512&&(ga||a===null||zn(a,a.return)),i&4){var r=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":r=o.getElementsByTagName("title")[0],(!r||r[Ra]||r[at]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=o.createElement(i),o.head.insertBefore(r,o.querySelector("head > title"))),Ea(r,i,a),r[at]=e,Pt(r),i=r;break e;case"link":var d=kg("link","href",o).get(i+(a.href||""));if(d){for(var y=0;y<d.length;y++)if(r=d[y],r.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&r.getAttribute("rel")===(a.rel==null?null:a.rel)&&r.getAttribute("title")===(a.title==null?null:a.title)&&r.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){d.splice(y,1);break t}}r=o.createElement(i),Ea(r,i,a),o.head.appendChild(r);break;case"meta":if(d=kg("meta","content",o).get(i+(a.content||""))){for(y=0;y<d.length;y++)if(r=d[y],r.getAttribute("content")===(a.content==null?null:""+a.content)&&r.getAttribute("name")===(a.name==null?null:a.name)&&r.getAttribute("property")===(a.property==null?null:a.property)&&r.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&r.getAttribute("charset")===(a.charSet==null?null:a.charSet)){d.splice(y,1);break t}}r=o.createElement(i),Ea(r,i,a),o.head.appendChild(r);break;default:throw Error(c(468,i))}r[at]=e,Pt(r),i=r}e.stateNode=i}else xg(o,e.type,e.stateNode);else e.stateNode=wg(o,i,e.memoizedProps);else r!==i?(r===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):r.count--,i===null?xg(o,e.type,e.stateNode):wg(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&nd(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ya(t,e),qa(e),i&512&&(ga||a===null||zn(a,a.return)),a!==null&&i&4&&nd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ya(t,e),qa(e),i&512&&(ga||a===null||zn(a,a.return)),e.flags&32){o=e.stateNode;try{Pn(o,"")}catch(Re){Ht(e,e.return,Re)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,nd(e,o,a!==null?a.memoizedProps:o)),i&1024&&(od=!0);break;case 6:if(Ya(t,e),qa(e),i&4){if(e.stateNode===null)throw Error(c(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(Re){Ht(e,e.return,Re)}}break;case 3:if(Fr=null,o=An,An=Ur(t.containerInfo),Ya(t,e),An=o,qa(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{oo(t.containerInfo)}catch(Re){Ht(e,e.return,Re)}od&&(od=!1,xp(e));break;case 4:i=An,An=Ur(e.stateNode.containerInfo),Ya(t,e),qa(e),An=i;break;case 12:Ya(t,e),qa(e);break;case 31:Ya(t,e),qa(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ar(e,i)));break;case 13:Ya(t,e),qa(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Er=Qe()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ar(e,i)));break;case 22:o=e.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,B=oi,J=ga;if(oi=B||o,ga=J||S,Ya(t,e),ga=J,oi=B,qa(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||S||oi||ga||bs(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){S=a=t;try{if(r=S.stateNode,o)d=r.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{y=S.stateNode;var ie=S.memoizedProps.style,I=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;y.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(Re){Ht(S,S.return,Re)}}}else if(t.tag===6){if(a===null){S=t;try{S.stateNode.nodeValue=o?"":S.memoizedProps}catch(Re){Ht(S,S.return,Re)}}}else if(t.tag===18){if(a===null){S=t;try{var q=S.stateNode;o?dg(q,!0):dg(S.stateNode,!1)}catch(Re){Ht(S,S.return,Re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,Ar(e,a))));break;case 19:Ya(t,e),qa(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Ar(e,i)));break;case 30:break;case 21:break;default:Ya(t,e),qa(e)}}function qa(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(hp(i)){a=i;break}i=i.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var o=a.stateNode,r=id(e);Tr(e,r,o);break;case 5:var d=a.stateNode;a.flags&32&&(Pn(d,""),a.flags&=-33);var y=id(e);Tr(e,y,d);break;case 3:case 4:var S=a.stateNode.containerInfo,B=id(e);sd(e,B,S);break;default:throw Error(c(161))}}catch(J){Ht(e,e.return,J)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ri(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)gp(e,t.alternate,t),t=t.sibling}function bs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ei(4,t,t.return),bs(t);break;case 1:zn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&dp(t,t.return,a),bs(t);break;case 27:ll(t.stateNode);case 26:case 5:zn(t,t.return),bs(t);break;case 22:t.memoizedState===null&&bs(t);break;case 30:bs(t);break;default:bs(t)}e=e.sibling}}function ci(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,r=t,d=r.flags;switch(r.tag){case 0:case 11:case 15:ci(o,r,a),Qo(4,r);break;case 1:if(ci(o,r,a),i=r,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(B){Ht(i,i.return,B)}if(i=r,o=i.updateQueue,o!==null){var y=i.stateNode;try{var S=o.shared.hiddenCallbacks;if(S!==null)for(o.shared.hiddenCallbacks=null,o=0;o<S.length;o++)Zh(S[o],y)}catch(B){Ht(i,i.return,B)}}a&&d&64&&up(r),Zo(r,r.return);break;case 27:fp(r);case 26:case 5:ci(o,r,a),a&&i===null&&d&4&&mp(r),Zo(r,r.return);break;case 12:ci(o,r,a);break;case 31:ci(o,r,a),a&&d&4&&vp(o,r);break;case 13:ci(o,r,a),a&&d&4&&wp(o,r);break;case 22:r.memoizedState===null&&ci(o,r,a),Zo(r,r.return);break;case 30:break;default:ci(o,r,a)}t=t.sibling}}function ld(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zo(a))}function rd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zo(e))}function Mn(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sp(e,t,a,i),t=t.sibling}function Sp(e,t,a,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Mn(e,t,a,i),o&2048&&Qo(9,t);break;case 1:Mn(e,t,a,i);break;case 3:Mn(e,t,a,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zo(e)));break;case 12:if(o&2048){Mn(e,t,a,i),e=t.stateNode;try{var r=t.memoizedProps,d=r.id,y=r.onPostCommit;typeof y=="function"&&y(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){Ht(t,t.return,S)}}else Mn(e,t,a,i);break;case 31:Mn(e,t,a,i);break;case 13:Mn(e,t,a,i);break;case 23:break;case 22:r=t.stateNode,d=t.alternate,t.memoizedState!==null?r._visibility&2?Mn(e,t,a,i):Jo(e,t):r._visibility&2?Mn(e,t,a,i):(r._visibility|=2,Vs(e,t,a,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&ld(d,t);break;case 24:Mn(e,t,a,i),o&2048&&rd(t.alternate,t);break;default:Mn(e,t,a,i)}}function Vs(e,t,a,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,d=t,y=a,S=i,B=d.flags;switch(d.tag){case 0:case 11:case 15:Vs(r,d,y,S,o),Qo(8,d);break;case 23:break;case 22:var J=d.stateNode;d.memoizedState!==null?J._visibility&2?Vs(r,d,y,S,o):Jo(r,d):(J._visibility|=2,Vs(r,d,y,S,o)),o&&B&2048&&ld(d.alternate,d);break;case 24:Vs(r,d,y,S,o),o&&B&2048&&rd(d.alternate,d);break;default:Vs(r,d,y,S,o)}t=t.sibling}}function Jo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,o=i.flags;switch(i.tag){case 22:Jo(a,i),o&2048&&ld(i.alternate,i);break;case 24:Jo(a,i),o&2048&&rd(i.alternate,i);break;default:Jo(a,i)}t=t.sibling}}var el=8192;function Xs(e,t,a){if(e.subtreeFlags&el)for(e=e.child;e!==null;)jp(e,t,a),e=e.sibling}function jp(e,t,a){switch(e.tag){case 26:Xs(e,t,a),e.flags&el&&e.memoizedState!==null&&fw(a,An,e.memoizedState,e.memoizedProps);break;case 5:Xs(e,t,a);break;case 3:case 4:var i=An;An=Ur(e.stateNode.containerInfo),Xs(e,t,a),An=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=el,el=16777216,Xs(e,t,a),el=i):Xs(e,t,a));break;default:Xs(e,t,a)}}function Np(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function tl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];wa=i,Ap(i,e)}Np(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Tp(e),e=e.sibling}function Tp(e){switch(e.tag){case 0:case 11:case 15:tl(e),e.flags&2048&&Ei(9,e,e.return);break;case 3:tl(e);break;case 12:tl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Mr(e)):tl(e);break;default:tl(e)}}function Mr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];wa=i,Ap(i,e)}Np(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ei(8,t,t.return),Mr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Mr(t));break;default:Mr(t)}e=e.sibling}}function Ap(e,t){for(;wa!==null;){var a=wa;switch(a.tag){case 0:case 11:case 15:Ei(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:zo(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,wa=i;else e:for(a=e;wa!==null;){i=wa;var o=i.sibling,r=i.return;if(yp(i),i===a){wa=null;break e}if(o!==null){o.return=r,wa=o;break e}wa=r}}}var Ev={getCacheForType:function(e){var t=Aa(ha),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Aa(ha).controller.signal}},Cv=typeof WeakMap=="function"?WeakMap:Map,Et=0,qt=null,mt=null,pt=0,Lt=0,sn=null,Ci=!1,Qs=!1,cd=!1,ui=0,oa=0,Di=0,vs=0,ud=0,on=0,Zs=0,al=null,Wa=null,dd=!1,Er=0,Mp=0,Cr=1/0,Dr=null,Oi=null,ya=0,Ri=null,Js=null,di=0,md=0,hd=null,Ep=null,nl=0,fd=null;function ln(){return(Et&2)!==0&&pt!==0?pt&-pt:_.T!==null?wd():Ne()}function Cp(){if(on===0)if((pt&536870912)===0||vt){var e=Xt;Xt<<=1,(Xt&3932160)===0&&(Xt=262144),on=e}else on=536870912;return e=an.current,e!==null&&(e.flags|=32),on}function Pa(e,t,a){(e===qt&&(Lt===2||Lt===9)||e.cancelPendingCommit!==null)&&(eo(e,0),_i(e,pt,on,!1)),oe(e,a),((Et&2)===0||e!==qt)&&(e===qt&&((Et&2)===0&&(vs|=a),oa===4&&_i(e,pt,on,!1)),$n(e))}function Dp(e,t,a){if((Et&6)!==0)throw Error(c(327));var i=!a&&(t&127)===0&&(t&e.expiredLanes)===0||j(e,t),o=i?Rv(e,t):gd(e,t,!0),r=i;do{if(o===0){Qs&&!i&&_i(e,t,0,!1);break}else{if(a=e.current.alternate,r&&!Dv(a)){o=gd(e,t,!1),r=!1;continue}if(o===2){if(r=t,e.errorRecoveryDisabledLanes&r)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var y=e;o=al;var S=y.current.memoizedState.isDehydrated;if(S&&(eo(y,d).flags|=256),d=gd(y,d,!1),d!==2){if(cd&&!S){y.errorRecoveryDisabledLanes|=r,vs|=r,o=4;break e}r=Wa,Wa=o,r!==null&&(Wa===null?Wa=r:Wa.push.apply(Wa,r))}o=d}if(r=!1,o!==2)continue}}if(o===1){eo(e,0),_i(e,t,0,!0);break}e:{switch(i=e,r=o,r){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:_i(i,t,on,!Ci);break e;case 2:Wa=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(o=Er+300-Qe(),10<o)){if(_i(i,t,on,!Ci),Ga(i,0,!0)!==0)break e;di=t,i.timeoutHandle=rg(Op.bind(null,i,a,Wa,Dr,dd,t,on,vs,Zs,Ci,r,"Throttled",-0,0),o);break e}Op(i,a,Wa,Dr,dd,t,on,vs,Zs,Ci,r,null,-0,0)}}break}while(!0);$n(e)}function Op(e,t,a,i,o,r,d,y,S,B,J,ie,I,q){if(e.timeoutHandle=-1,ie=t.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fn},jp(t,r,ie);var Re=(r&62914560)===r?Er-Qe():(r&4194048)===r?Mp-Qe():0;if(Re=pw(ie,Re),Re!==null){di=r,e.cancelPendingCommit=Re(Ip.bind(null,e,t,r,a,i,o,d,y,S,J,ie,null,I,q)),_i(e,r,d,!B);return}}Ip(e,t,r,a,i,o,d,y,S)}function Dv(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var o=a[i],r=o.getSnapshot;o=o.value;try{if(!en(r(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _i(e,t,a,i){t&=~ud,t&=~vs,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var r=31-ct(o),d=1<<r;i[r]=-1,o&=~d}a!==0&&_e(e,a,t)}function Or(){return(Et&6)===0?(il(0),!1):!0}function pd(){if(mt!==null){if(Lt===0)var e=mt.return;else e=mt,ei=us=null,Du(e),Ys=null,Io=0,e=mt;for(;e!==null;)cp(e.alternate,e),e=e.return;mt=null}}function eo(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Qv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),di=0,pd(),qt=e,mt=a=Zn(e.current,null),pt=t,Lt=0,sn=null,Ci=!1,Qs=j(e,t),cd=!1,Zs=on=ud=vs=Di=oa=0,Wa=al=null,dd=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-ct(i),r=1<<o;t|=e[o],i&=~r}return ui=t,Jl(),a}function Rp(e,t){it=null,_.H=Go,t===Fs||t===lr?(t=Gh(),Lt=3):t===vu?(t=Gh(),Lt=4):Lt=t===Pu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,sn=t,mt===null&&(oa=1,kr(e,gn(t,e.current)))}function _p(){var e=an.current;return e===null?!0:(pt&4194048)===pt?wn===null:(pt&62914560)===pt||(pt&536870912)!==0?e===wn:!1}function Lp(){var e=_.H;return _.H=Go,e===null?Go:e}function Hp(){var e=_.A;return _.A=Ev,e}function Rr(){oa=4,Ci||(pt&4194048)!==pt&&an.current!==null||(Qs=!0),(Di&134217727)===0&&(vs&134217727)===0||qt===null||_i(qt,pt,on,!1)}function gd(e,t,a){var i=Et;Et|=2;var o=Lp(),r=Hp();(qt!==e||pt!==t)&&(Dr=null,eo(e,t)),t=!1;var d=oa;e:do try{if(Lt!==0&&mt!==null){var y=mt,S=sn;switch(Lt){case 8:pd(),d=6;break e;case 3:case 2:case 9:case 6:an.current===null&&(t=!0);var B=Lt;if(Lt=0,sn=null,to(e,y,S,B),a&&Qs){d=0;break e}break;default:B=Lt,Lt=0,sn=null,to(e,y,S,B)}}Ov(),d=oa;break}catch(J){Rp(e,J)}while(!0);return t&&e.shellSuspendCounter++,ei=us=null,Et=i,_.H=o,_.A=r,mt===null&&(qt=null,pt=0,Jl()),d}function Ov(){for(;mt!==null;)Bp(mt)}function Rv(e,t){var a=Et;Et|=2;var i=Lp(),o=Hp();qt!==e||pt!==t?(Dr=null,Cr=Qe()+500,eo(e,t)):Qs=j(e,t);e:do try{if(Lt!==0&&mt!==null){t=mt;var r=sn;t:switch(Lt){case 1:Lt=0,sn=null,to(e,t,r,1);break;case 2:case 9:if(Wh(r)){Lt=0,sn=null,zp(t);break}t=function(){Lt!==2&&Lt!==9||qt!==e||(Lt=7),$n(e)},r.then(t,t);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:Wh(r)?(Lt=0,sn=null,zp(t)):(Lt=0,sn=null,to(e,t,r,7));break;case 5:var d=null;switch(mt.tag){case 26:d=mt.memoizedState;case 5:case 27:var y=mt;if(d?Sg(d):y.stateNode.complete){Lt=0,sn=null;var S=y.sibling;if(S!==null)mt=S;else{var B=y.return;B!==null?(mt=B,_r(B)):mt=null}break t}}Lt=0,sn=null,to(e,t,r,5);break;case 6:Lt=0,sn=null,to(e,t,r,6);break;case 8:pd(),oa=6;break e;default:throw Error(c(462))}}_v();break}catch(J){Rp(e,J)}while(!0);return ei=us=null,_.H=i,_.A=o,Et=a,mt!==null?0:(qt=null,pt=0,Jl(),oa)}function _v(){for(;mt!==null&&!ye();)Bp(mt)}function Bp(e){var t=lp(e.alternate,e,ui);e.memoizedProps=e.pendingProps,t===null?_r(e):mt=t}function zp(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=tp(a,t,t.pendingProps,t.type,void 0,pt);break;case 11:t=tp(a,t,t.pendingProps,t.type.render,t.ref,pt);break;case 5:Du(t);default:cp(a,t),t=mt=Lh(t,ui),t=lp(a,t,ui)}e.memoizedProps=e.pendingProps,t===null?_r(e):mt=t}function to(e,t,a,i){ei=us=null,Du(t),Ys=null,Io=0;var o=t.return;try{if(xv(e,o,t,a,pt)){oa=1,kr(e,gn(a,e.current)),mt=null;return}}catch(r){if(o!==null)throw mt=o,r;oa=1,kr(e,gn(a,e.current)),mt=null;return}t.flags&32768?(vt||i===1?e=!0:Qs||(pt&536870912)!==0?e=!1:(Ci=e=!0,(i===2||i===9||i===3||i===6)&&(i=an.current,i!==null&&i.tag===13&&(i.flags|=16384))),$p(t,e)):_r(t)}function _r(e){var t=e;do{if((t.flags&32768)!==0){$p(t,Ci);return}e=t.return;var a=Nv(t.alternate,t,ui);if(a!==null){mt=a;return}if(t=t.sibling,t!==null){mt=t;return}mt=t=e}while(t!==null);oa===0&&(oa=5)}function $p(e,t){do{var a=Tv(e.alternate,e);if(a!==null){a.flags&=32767,mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){mt=e;return}mt=e=a}while(e!==null);oa=6,mt=null}function Ip(e,t,a,i,o,r,d,y,S){e.cancelPendingCommit=null;do Lr();while(ya!==0);if((Et&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(r=t.lanes|t.childLanes,r|=iu,he(e,a,r,d,y,S),e===qt&&(mt=qt=null,pt=0),Js=t,Ri=e,di=a,md=r,hd=o,Ep=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,zv(ft,function(){return qp(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=_.T,_.T=null,o=Q.p,Q.p=2,d=Et,Et|=4;try{Av(e,t,a)}finally{Et=d,Q.p=o,_.T=i}}ya=1,Up(),Kp(),Fp()}}function Up(){if(ya===1){ya=0;var e=Ri,t=Js,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=_.T,_.T=null;var i=Q.p;Q.p=2;var o=Et;Et|=4;try{kp(t,e);var r=Md,d=Th(e.containerInfo),y=r.focusedElem,S=r.selectionRange;if(d!==y&&y&&y.ownerDocument&&Nh(y.ownerDocument.documentElement,y)){if(S!==null&&Jc(y)){var B=S.start,J=S.end;if(J===void 0&&(J=B),"selectionStart"in y)y.selectionStart=B,y.selectionEnd=Math.min(J,y.value.length);else{var ie=y.ownerDocument||document,I=ie&&ie.defaultView||window;if(I.getSelection){var q=I.getSelection(),Re=y.textContent.length,Pe=Math.min(S.start,Re),Ut=S.end===void 0?Pe:Math.min(S.end,Re);!q.extend&&Pe>Ut&&(d=Ut,Ut=Pe,Pe=d);var D=jh(y,Pe),E=jh(y,Ut);if(D&&E&&(q.rangeCount!==1||q.anchorNode!==D.node||q.anchorOffset!==D.offset||q.focusNode!==E.node||q.focusOffset!==E.offset)){var H=ie.createRange();H.setStart(D.node,D.offset),q.removeAllRanges(),Pe>Ut?(q.addRange(H),q.extend(E.node,E.offset)):(H.setEnd(E.node,E.offset),q.addRange(H))}}}}for(ie=[],q=y;q=q.parentNode;)q.nodeType===1&&ie.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<ie.length;y++){var ne=ie[y];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Pr=!!Ad,Md=Ad=null}finally{Et=o,Q.p=i,_.T=a}}e.current=t,ya=2}}function Kp(){if(ya===2){ya=0;var e=Ri,t=Js,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=_.T,_.T=null;var i=Q.p;Q.p=2;var o=Et;Et|=4;try{gp(e,t.alternate,t)}finally{Et=o,Q.p=i,_.T=a}}ya=3}}function Fp(){if(ya===4||ya===3){ya=0,Me();var e=Ri,t=Js,a=di,i=Ep;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ya=5:(ya=0,Js=Ri=null,Yp(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Oi=null),me(a),t=t.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(zt,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=_.T,o=Q.p,Q.p=2,_.T=null;try{for(var r=e.onRecoverableError,d=0;d<i.length;d++){var y=i[d];r(y.value,{componentStack:y.stack})}}finally{_.T=t,Q.p=o}}(di&3)!==0&&Lr(),$n(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===fd?nl++:(nl=0,fd=e):nl=0,il(0)}}function Yp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,zo(t)))}function Lr(){return Up(),Kp(),Fp(),qp()}function qp(){if(ya!==5)return!1;var e=Ri,t=md;md=0;var a=me(di),i=_.T,o=Q.p;try{Q.p=32>a?32:a,_.T=null,a=hd,hd=null;var r=Ri,d=di;if(ya=0,Js=Ri=null,di=0,(Et&6)!==0)throw Error(c(331));var y=Et;if(Et|=4,Tp(r.current),Sp(r,r.current,d,a),Et=y,il(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(zt,r)}catch{}return!0}finally{Q.p=o,_.T=i,Yp(e,t)}}function Wp(e,t,a){t=gn(a,t),t=Wu(e.stateNode,t,2),e=Ti(e,t,2),e!==null&&(oe(e,2),$n(e))}function Ht(e,t,a){if(e.tag===3)Wp(e,e,a);else for(;t!==null;){if(t.tag===3){Wp(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Oi===null||!Oi.has(i))){e=gn(a,e),a=Pf(2),i=Ti(t,a,2),i!==null&&(Gf(a,i,t,e),oe(i,2),$n(i));break}}t=t.return}}function yd(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new Cv;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(a)||(cd=!0,o.add(a),e=Lv.bind(null,e,t,a),t.then(e,e))}function Lv(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,qt===e&&(pt&a)===a&&(oa===4||oa===3&&(pt&62914560)===pt&&300>Qe()-Er?(Et&2)===0&&eo(e,0):ud|=a,Zs===pt&&(Zs=0)),$n(e)}function Pp(e,t){t===0&&(t=We()),e=ls(e,t),e!==null&&(oe(e,t),$n(e))}function Hv(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Pp(e,a)}function Bv(e,t){var a=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(c(314))}i!==null&&i.delete(t),Pp(e,a)}function zv(e,t){return Wt(e,t)}var Hr=null,ao=null,bd=!1,Br=!1,vd=!1,Li=0;function $n(e){e!==ao&&e.next===null&&(ao===null?Hr=ao=e:ao=ao.next=e),Br=!0,bd||(bd=!0,Iv())}function il(e,t){if(!vd&&Br){vd=!0;do for(var a=!1,i=Hr;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var r=0;else{var d=i.suspendedLanes,y=i.pingedLanes;r=(1<<31-ct(42|e)+1)-1,r&=o&~(d&~y),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(a=!0,Qp(i,r))}else r=pt,r=Ga(i,i===qt?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(r&3)===0||j(i,r)||(a=!0,Qp(i,r));i=i.next}while(a);vd=!1}}function $v(){Gp()}function Gp(){Br=bd=!1;var e=0;Li!==0&&Xv()&&(e=Li);for(var t=Qe(),a=null,i=Hr;i!==null;){var o=i.next,r=Vp(i,t);r===0?(i.next=null,a===null?Hr=o:a.next=o,o===null&&(ao=a)):(a=i,(e!==0||(r&3)!==0)&&(Br=!0)),i=o}ya!==0&&ya!==5||il(e),Li!==0&&(Li=0)}function Vp(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var d=31-ct(r),y=1<<d,S=o[d];S===-1?((y&a)===0||(y&i)!==0)&&(o[d]=ke(y,t)):S<=t&&(e.expiredLanes|=y),r&=~y}if(t=qt,a=pt,a=Ga(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(Lt===2||Lt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&xt(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||j(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&xt(i),me(a)){case 2:case 8:a=St;break;case 32:a=ft;break;case 268435456:a=Bt;break;default:a=ft}return i=Xp.bind(null,e),a=Wt(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&xt(i),e.callbackPriority=2,e.callbackNode=null,2}function Xp(e,t){if(ya!==0&&ya!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Lr()&&e.callbackNode!==a)return null;var i=pt;return i=Ga(e,e===qt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Dp(e,i,t),Vp(e,Qe()),e.callbackNode!=null&&e.callbackNode===a?Xp.bind(null,e):null)}function Qp(e,t){if(Lr())return null;Dp(e,t,!0)}function Iv(){Zv(function(){(Et&6)!==0?Wt(kt,$v):Gp()})}function wd(){if(Li===0){var e=Us;e===0&&(e=$a,$a<<=1,($a&261888)===0&&($a=256)),Li=e}return Li}function Zp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vn(""+e)}function Jp(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Uv(e,t,a,i,o){if(t==="submit"&&a&&a.stateNode===o){var r=Zp((o[yt]||null).action),d=i.submitter;d&&(t=(t=d[yt]||null)?Zp(t.formAction):d.getAttribute("formAction"),t!==null&&(r=t,d=null));var y=new Xn("action","action",null,i,o);e.push({event:y,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Li!==0){var S=d?Jp(o,d):new FormData(o);Iu(a,{pending:!0,data:S,method:o.method,action:r},null,S)}}else typeof r=="function"&&(y.preventDefault(),S=d?Jp(o,d):new FormData(o),Iu(a,{pending:!0,data:S,method:o.method,action:r},r,S))},currentTarget:o}]})}}for(var kd=0;kd<nu.length;kd++){var xd=nu[kd],Kv=xd.toLowerCase(),Fv=xd[0].toUpperCase()+xd.slice(1);Tn(Kv,"on"+Fv)}Tn(Eh,"onAnimationEnd"),Tn(Ch,"onAnimationIteration"),Tn(Dh,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(sv,"onTransitionRun"),Tn(ov,"onTransitionStart"),Tn(lv,"onTransitionCancel"),Tn(Oh,"onTransitionEnd"),A("onMouseEnter",["mouseout","mouseover"]),A("onMouseLeave",["mouseout","mouseover"]),A("onPointerEnter",["pointerout","pointerover"]),A("onPointerLeave",["pointerout","pointerover"]),dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function eg(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],o=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var d=i.length-1;0<=d;d--){var y=i[d],S=y.instance,B=y.currentTarget;if(y=y.listener,S!==r&&o.isPropagationStopped())break e;r=y,o.currentTarget=B;try{r(o)}catch(J){Zl(J)}o.currentTarget=null,r=S}else for(d=0;d<i.length;d++){if(y=i[d],S=y.instance,B=y.currentTarget,y=y.listener,S!==r&&o.isPropagationStopped())break e;r=y,o.currentTarget=B;try{r(o)}catch(J){Zl(J)}o.currentTarget=null,r=S}}}}function ht(e,t){var a=t[ba];a===void 0&&(a=t[ba]=new Set);var i=e+"__bubble";a.has(i)||(tg(t,e,2,!1),a.add(i))}function Sd(e,t,a){var i=0;t&&(i|=4),tg(a,e,i,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function jd(e){if(!e[zr]){e[zr]=!0,_n.forEach(function(a){a!=="selectionchange"&&(Yv.has(a)||Sd(a,!1,e),Sd(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zr]||(t[zr]=!0,Sd("selectionchange",!1,t))}}function tg(e,t,a,i){switch(Cg(t)){case 2:var o=bw;break;case 8:o=vw;break;default:o=$d}a=o.bind(null,t,a,e),o=void 0,!Es||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function Nd(e,t,a,i,o){var r=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var y=i.stateNode.containerInfo;if(y===o)break;if(d===4)for(d=i.return;d!==null;){var S=d.tag;if((S===3||S===4)&&d.stateNode.containerInfo===o)return;d=d.return}for(;y!==null;){if(d=ja(y),d===null)return;if(S=d.tag,S===5||S===6||S===26||S===27){i=r=d;continue e}y=y.parentNode}}i=i.return}Pl(function(){var B=r,J=Ao(a),ie=[];e:{var I=Rh.get(e);if(I!==void 0){var q=Xn,Re=e;switch(e){case"keypress":if(Cs(a)===0)break e;case"keydown":case"keyup":q=Bb;break;case"focusin":Re="focus",q=jt;break;case"focusout":Re="blur",q=jt;break;case"beforeblur":case"afterblur":q=jt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=ee;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=je;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Ib;break;case Eh:case Ch:case Dh:q=et;break;case Oh:q=Kb;break;case"scroll":case"scrollend":q=qc;break;case"wheel":q=Yb;break;case"copy":case"cut":case"paste":q=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=uh;break;case"toggle":case"beforetoggle":q=Wb}var Pe=(t&4)!==0,Ut=!Pe&&(e==="scroll"||e==="scrollend"),D=Pe?I!==null?I+"Capture":null:I;Pe=[];for(var E=B,H;E!==null;){var ne=E;if(H=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||H===null||D===null||(ne=vi(E,D),ne!=null&&Pe.push(ol(E,ne,H))),Ut)break;E=E.return}0<Pe.length&&(I=new q(I,Re,null,a,J),ie.push({event:I,listeners:Pe}))}}if((t&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",I&&a!==To&&(Re=a.relatedTarget||a.fromElement)&&(ja(Re)||Re[Oa]))break e;if((q||I)&&(I=J.window===J?J:(I=J.ownerDocument)?I.defaultView||I.parentWindow:window,q?(Re=a.relatedTarget||a.toElement,q=B,Re=Re?ja(Re):null,Re!==null&&(Ut=f(Re),Pe=Re.tag,Re!==Ut||Pe!==5&&Pe!==27&&Pe!==6)&&(Re=null)):(q=null,Re=B),q!==Re)){if(Pe=ee,ne="onMouseLeave",D="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(Pe=uh,ne="onPointerLeave",D="onPointerEnter",E="pointer"),Ut=q==null?I:qn(q),H=Re==null?I:qn(Re),I=new Pe(ne,E+"leave",q,a,J),I.target=Ut,I.relatedTarget=H,ne=null,ja(J)===B&&(Pe=new Pe(D,E+"enter",Re,a,J),Pe.target=H,Pe.relatedTarget=Ut,ne=Pe),Ut=ne,q&&Re)t:{for(Pe=qv,D=q,E=Re,H=0,ne=D;ne;ne=Pe(ne))H++;ne=0;for(var Fe=E;Fe;Fe=Pe(Fe))ne++;for(;0<H-ne;)D=Pe(D),H--;for(;0<ne-H;)E=Pe(E),ne--;for(;H--;){if(D===E||E!==null&&D===E.alternate){Pe=D;break t}D=Pe(D),E=Pe(E)}Pe=null}else Pe=null;q!==null&&ag(ie,I,q,Pe,!1),Re!==null&&Ut!==null&&ag(ie,Ut,Re,Pe,!0)}}e:{if(I=B?qn(B):window,q=I.nodeName&&I.nodeName.toLowerCase(),q==="select"||q==="input"&&I.type==="file")var Nt=bh;else if(gh(I))if(vh)Nt=av;else{Nt=ev;var ze=Jb}else q=I.nodeName,!q||q.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?B&&bi(B.elementType)&&(Nt=bh):Nt=tv;if(Nt&&(Nt=Nt(e,B))){yh(ie,Nt,a,J);break e}ze&&ze(e,I,B),e==="focusout"&&B&&I.type==="number"&&B.memoizedProps.value!=null&&ts(I,"number",I.value)}switch(ze=B?qn(B):window,e){case"focusin":(gh(ze)||ze.contentEditable==="true")&&(Rs=ze,eu=B,Lo=null);break;case"focusout":Lo=eu=Rs=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,Ah(ie,a,J);break;case"selectionchange":if(iv)break;case"keydown":case"keyup":Ah(ie,a,J)}var ot;if(Xc)e:{switch(e){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else Os?fh(e,a)&&(gt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(gt="onCompositionStart");gt&&(dh&&a.locale!=="ko"&&(Os||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Os&&(ot=Gl()):(Nn=J,Mo="value"in Nn?Nn.value:Nn.textContent,Os=!0)),ze=$r(B,gt),0<ze.length&&(gt=new Xl(gt,e,null,a,J),ie.push({event:gt,listeners:ze}),ot?gt.data=ot:(ot=ph(a),ot!==null&&(gt.data=ot)))),(ot=Gb?Vb(e,a):Xb(e,a))&&(gt=$r(B,"onBeforeInput"),0<gt.length&&(ze=new Xl("onBeforeInput","beforeinput",null,a,J),ie.push({event:ze,listeners:gt}),ze.data=ot)),Uv(ie,e,B,a,J)}eg(ie,t)})}function ol(e,t,a){return{instance:e,listener:t,currentTarget:a}}function $r(e,t){for(var a=t+"Capture",i=[];e!==null;){var o=e,r=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||r===null||(o=vi(e,a),o!=null&&i.unshift(ol(e,o,r)),o=vi(e,t),o!=null&&i.push(ol(e,o,r))),e.tag===3)return i;e=e.return}return[]}function qv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ag(e,t,a,i,o){for(var r=t._reactName,d=[];a!==null&&a!==i;){var y=a,S=y.alternate,B=y.stateNode;if(y=y.tag,S!==null&&S===i)break;y!==5&&y!==26&&y!==27||B===null||(S=B,o?(B=vi(a,r),B!=null&&d.unshift(ol(a,B,S))):o||(B=vi(a,r),B!=null&&d.push(ol(a,B,S)))),a=a.return}d.length!==0&&e.push({event:t,listeners:d})}var Wv=/\r\n?/g,Pv=/\u0000|\uFFFD/g;function ng(e){return(typeof e=="string"?e:""+e).replace(Wv,`
`).replace(Pv,"")}function ig(e,t){return t=ng(t),ng(e)===t}function It(e,t,a,i,o,r){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Pn(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Pn(e,""+i);break;case"className":Gt(e,"class",i);break;case"tabIndex":Gt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Gt(e,a,i);break;case"style":Ms(e,i,r);break;case"data":if(t!=="object"){Gt(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Vn(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(a==="formAction"?(t!=="input"&&It(e,t,"name",o.name,o,null),It(e,t,"formEncType",o.formEncType,o,null),It(e,t,"formMethod",o.formMethod,o,null),It(e,t,"formTarget",o.formTarget,o,null)):(It(e,t,"encType",o.encType,o,null),It(e,t,"method",o.method,o,null),It(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Vn(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=fn);break;case"onScroll":i!=null&&ht("scroll",e);break;case"onScrollEnd":i!=null&&ht("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(a=i.__html,a!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=Vn(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":ht("beforetoggle",e),ht("toggle",e),_t(e,"popover",i);break;case"xlinkActuate":ta(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ta(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ta(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ta(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ta(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ta(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ta(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ta(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ta(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":_t(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=No.get(a)||a,_t(e,a,i))}}function Td(e,t,a,i,o,r){switch(a){case"style":Ms(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(c(61));if(a=i.__html,a!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof i=="string"?Pn(e,i):(typeof i=="number"||typeof i=="bigint")&&Pn(e,""+i);break;case"onScroll":i!=null&&ht("scroll",e);break;case"onScrollEnd":i!=null&&ht("scrollend",e);break;case"onClick":i!=null&&(e.onclick=fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ha.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),r=e[yt]||null,r=r!=null?r[a]:null,typeof r=="function"&&e.removeEventListener(t,r,o),typeof i=="function")){typeof r!="function"&&r!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,o);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):_t(e,a,i)}}}function Ea(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",e),ht("load",e);var i=!1,o=!1,r;for(r in a)if(a.hasOwnProperty(r)){var d=a[r];if(d!=null)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:It(e,t,r,d,a,null)}}o&&It(e,t,"srcSet",a.srcSet,a,null),i&&It(e,t,"src",a.src,a,null);return;case"input":ht("invalid",e);var y=r=d=o=null,S=null,B=null;for(i in a)if(a.hasOwnProperty(i)){var J=a[i];if(J!=null)switch(i){case"name":o=J;break;case"type":d=J;break;case"checked":S=J;break;case"defaultChecked":B=J;break;case"value":r=J;break;case"defaultValue":y=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(c(137,t));break;default:It(e,t,i,J,a,null)}}es(e,r,y,S,B,d,o,!1);return;case"select":ht("invalid",e),i=d=r=null;for(o in a)if(a.hasOwnProperty(o)&&(y=a[o],y!=null))switch(o){case"value":r=y;break;case"defaultValue":d=y;break;case"multiple":i=y;default:It(e,t,o,y,a,null)}t=r,a=d,e.multiple=!!i,t!=null?Wn(e,!!i,t,!1):a!=null&&Wn(e,!!i,a,!0);return;case"textarea":ht("invalid",e),r=o=i=null;for(d in a)if(a.hasOwnProperty(d)&&(y=a[d],y!=null))switch(d){case"value":i=y;break;case"defaultValue":o=y;break;case"children":r=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(c(91));break;default:It(e,t,d,y,a,null)}ql(e,i,o,r);return;case"option":for(S in a)a.hasOwnProperty(S)&&(i=a[S],i!=null)&&(S==="selected"?e.selected=i&&typeof i!="function"&&typeof i!="symbol":It(e,t,S,i,a,null));return;case"dialog":ht("beforetoggle",e),ht("toggle",e),ht("cancel",e),ht("close",e);break;case"iframe":case"object":ht("load",e);break;case"video":case"audio":for(i=0;i<sl.length;i++)ht(sl[i],e);break;case"image":ht("error",e),ht("load",e);break;case"details":ht("toggle",e);break;case"embed":case"source":case"link":ht("error",e),ht("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(i=a[B],i!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:It(e,t,B,i,a,null)}return;default:if(bi(t)){for(J in a)a.hasOwnProperty(J)&&(i=a[J],i!==void 0&&Td(e,t,J,i,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(i=a[y],i!=null&&It(e,t,y,i,a,null))}function Gv(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,r=null,d=null,y=null,S=null,B=null,J=null;for(q in a){var ie=a[q];if(a.hasOwnProperty(q)&&ie!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":S=ie;default:i.hasOwnProperty(q)||It(e,t,q,null,i,ie)}}for(var I in i){var q=i[I];if(ie=a[I],i.hasOwnProperty(I)&&(q!=null||ie!=null))switch(I){case"type":r=q;break;case"name":o=q;break;case"checked":B=q;break;case"defaultChecked":J=q;break;case"value":d=q;break;case"defaultValue":y=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(c(137,t));break;default:q!==ie&&It(e,t,I,q,i,ie)}}hn(e,d,y,S,B,J,r,o);return;case"select":q=d=y=I=null;for(r in a)if(S=a[r],a.hasOwnProperty(r)&&S!=null)switch(r){case"value":break;case"multiple":q=S;default:i.hasOwnProperty(r)||It(e,t,r,null,i,S)}for(o in i)if(r=i[o],S=a[o],i.hasOwnProperty(o)&&(r!=null||S!=null))switch(o){case"value":I=r;break;case"defaultValue":y=r;break;case"multiple":d=r;default:r!==S&&It(e,t,o,r,i,S)}t=y,a=d,i=q,I!=null?Wn(e,!!a,I,!1):!!i!=!!a&&(t!=null?Wn(e,!!a,t,!0):Wn(e,!!a,a?[]:"",!1));return;case"textarea":q=I=null;for(y in a)if(o=a[y],a.hasOwnProperty(y)&&o!=null&&!i.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:It(e,t,y,null,i,o)}for(d in i)if(o=i[d],r=a[d],i.hasOwnProperty(d)&&(o!=null||r!=null))switch(d){case"value":I=o;break;case"defaultValue":q=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(c(91));break;default:o!==r&&It(e,t,d,o,i,r)}jo(e,I,q);return;case"option":for(var Re in a)I=a[Re],a.hasOwnProperty(Re)&&I!=null&&!i.hasOwnProperty(Re)&&(Re==="selected"?e.selected=!1:It(e,t,Re,null,i,I));for(S in i)I=i[S],q=a[S],i.hasOwnProperty(S)&&I!==q&&(I!=null||q!=null)&&(S==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":It(e,t,S,I,i,q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in a)I=a[Pe],a.hasOwnProperty(Pe)&&I!=null&&!i.hasOwnProperty(Pe)&&It(e,t,Pe,null,i,I);for(B in i)if(I=i[B],q=a[B],i.hasOwnProperty(B)&&I!==q&&(I!=null||q!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(c(137,t));break;default:It(e,t,B,I,i,q)}return;default:if(bi(t)){for(var Ut in a)I=a[Ut],a.hasOwnProperty(Ut)&&I!==void 0&&!i.hasOwnProperty(Ut)&&Td(e,t,Ut,void 0,i,I);for(J in i)I=i[J],q=a[J],!i.hasOwnProperty(J)||I===q||I===void 0&&q===void 0||Td(e,t,J,I,i,q);return}}for(var D in a)I=a[D],a.hasOwnProperty(D)&&I!=null&&!i.hasOwnProperty(D)&&It(e,t,D,null,i,I);for(ie in i)I=i[ie],q=a[ie],!i.hasOwnProperty(ie)||I===q||I==null&&q==null||It(e,t,ie,I,i,q)}function sg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),i=0;i<a.length;i++){var o=a[i],r=o.transferSize,d=o.initiatorType,y=o.duration;if(r&&y&&sg(d)){for(d=0,y=o.responseEnd,i+=1;i<a.length;i++){var S=a[i],B=S.startTime;if(B>y)break;var J=S.transferSize,ie=S.initiatorType;J&&sg(ie)&&(S=S.responseEnd,d+=J*(S<y?1:(y-B)/(S-B)))}if(--i,t+=8*(r+d)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ad=null,Md=null;function Ir(e){return e.nodeType===9?e:e.ownerDocument}function og(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ed(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cd=null;function Xv(){var e=window.event;return e&&e.type==="popstate"?e===Cd?!1:(Cd=e,!0):(Cd=null,!1)}var rg=typeof setTimeout=="function"?setTimeout:void 0,Qv=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,Zv=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(e){return cg.resolve(null).then(e).catch(Jv)}:rg;function Jv(e){setTimeout(function(){throw e})}function Hi(e){return e==="head"}function ug(e,t){var a=t,i=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(i===0){e.removeChild(o),oo(t);return}i--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")i++;else if(a==="html")ll(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ll(a);for(var r=a.firstChild;r;){var d=r.nextSibling,y=r.nodeName;r[Ra]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&r.rel.toLowerCase()==="stylesheet"||a.removeChild(r),r=d}}else a==="body"&&ll(e.ownerDocument.body);a=o}while(a);oo(t)}function dg(e,t){var a=e;e=0;do{var i=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=i}while(a)}function Dd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dd(a),Ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ew(e,t,a,i){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Ra])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=kn(e.nextSibling),e===null)break}return null}function tw(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=kn(e.nextSibling),e===null))return null;return e}function mg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=kn(e.nextSibling),e===null))return null;return e}function Od(e){return e.data==="$?"||e.data==="$~"}function Rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function aw(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _d=null;function hg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return kn(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function fg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function pg(e,t,a){switch(t=Ir(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function ll(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ua(e)}var xn=new Map,gg=new Set;function Ur(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mi=Q.d;Q.d={f:nw,r:iw,D:sw,C:ow,L:lw,m:rw,X:uw,S:cw,M:dw};function nw(){var e=mi.f(),t=Or();return e||t}function iw(e){var t=Ka(e);t!==null&&t.tag===5&&t.type==="form"?Rf(t):mi.r(e)}var no=typeof document>"u"?null:document;function yg(e,t,a){var i=no;if(i&&typeof t=="string"&&t){var o=Mt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),gg.has(o)||(gg.add(o),e={rel:e,crossOrigin:a,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),Ea(t,"link",e),Pt(t),i.head.appendChild(t)))}}function sw(e){mi.D(e),yg("dns-prefetch",e,null)}function ow(e,t){mi.C(e,t),yg("preconnect",e,t)}function lw(e,t,a){mi.L(e,t,a);var i=no;if(i&&e&&t){var o='link[rel="preload"][as="'+Mt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+Mt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+Mt(a.imageSizes)+'"]')):o+='[href="'+Mt(e)+'"]';var r=o;switch(t){case"style":r=io(e);break;case"script":r=so(e)}xn.has(r)||(e=M({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),xn.set(r,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(rl(r))||t==="script"&&i.querySelector(cl(r))||(t=i.createElement("link"),Ea(t,"link",e),Pt(t),i.head.appendChild(t)))}}function rw(e,t){mi.m(e,t);var a=no;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Mt(i)+'"][href="'+Mt(e)+'"]',r=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=so(e)}if(!xn.has(r)&&(e=M({rel:"modulepreload",href:e},t),xn.set(r,e),a.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cl(r)))return}i=a.createElement("link"),Ea(i,"link",e),Pt(i),a.head.appendChild(i)}}}function cw(e,t,a){mi.S(e,t,a);var i=no;if(i&&e){var o=ma(i).hoistableStyles,r=io(e);t=t||"default";var d=o.get(r);if(!d){var y={loading:0,preload:null};if(d=i.querySelector(rl(r)))y.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":t},a),(a=xn.get(r))&&Ld(e,a);var S=d=i.createElement("link");Pt(S),Ea(S,"link",e),S._p=new Promise(function(B,J){S.onload=B,S.onerror=J}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Kr(d,t,i)}d={type:"stylesheet",instance:d,count:1,state:y},o.set(r,d)}}}function uw(e,t){mi.X(e,t);var a=no;if(a&&e){var i=ma(a).hoistableScripts,o=so(e),r=i.get(o);r||(r=a.querySelector(cl(o)),r||(e=M({src:e,async:!0},t),(t=xn.get(o))&&Hd(e,t),r=a.createElement("script"),Pt(r),Ea(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function dw(e,t){mi.M(e,t);var a=no;if(a&&e){var i=ma(a).hoistableScripts,o=so(e),r=i.get(o);r||(r=a.querySelector(cl(o)),r||(e=M({src:e,async:!0,type:"module"},t),(t=xn.get(o))&&Hd(e,t),r=a.createElement("script"),Pt(r),Ea(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function bg(e,t,a,i){var o=(o=X.current)?Ur(o):null;if(!o)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=io(a.href),a=ma(o).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=io(a.href);var r=ma(o).hoistableStyles,d=r.get(e);if(d||(o=o.ownerDocument||o,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,d),(r=o.querySelector(rl(e)))&&!r._p&&(d.instance=r,d.state.loading=5),xn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xn.set(e,a),r||mw(o,e,a,d.state))),t&&i===null)throw Error(c(528,""));return d}if(t&&i!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=so(a),a=ma(o).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function io(e){return'href="'+Mt(e)+'"'}function rl(e){return'link[rel="stylesheet"]['+e+"]"}function vg(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function mw(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ea(t,"link",a),Pt(t),e.head.appendChild(t))}function so(e){return'[src="'+Mt(e)+'"]'}function cl(e){return"script[async]"+e}function wg(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Mt(a.href)+'"]');if(i)return t.instance=i,Pt(i),i;var o=M({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Pt(i),Ea(i,"style",o),Kr(i,a.precedence,e),t.instance=i;case"stylesheet":o=io(a.href);var r=e.querySelector(rl(o));if(r)return t.state.loading|=4,t.instance=r,Pt(r),r;i=vg(a),(o=xn.get(o))&&Ld(i,o),r=(e.ownerDocument||e).createElement("link"),Pt(r);var d=r;return d._p=new Promise(function(y,S){d.onload=y,d.onerror=S}),Ea(r,"link",i),t.state.loading|=4,Kr(r,a.precedence,e),t.instance=r;case"script":return r=so(a.src),(o=e.querySelector(cl(r)))?(t.instance=o,Pt(o),o):(i=a,(o=xn.get(r))&&(i=M({},a),Hd(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),Pt(o),Ea(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Kr(i,a.precedence,e));return t.instance}function Kr(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,r=o,d=0;d<i.length;d++){var y=i[d];if(y.dataset.precedence===t)r=y;else if(r!==o)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Ld(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Hd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Fr=null;function kg(e,t,a){if(Fr===null){var i=new Map,o=Fr=new Map;o.set(a,i)}else o=Fr,i=o.get(a),i||(i=new Map,o.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var r=a[o];if(!(r[Ra]||r[at]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var d=r.getAttribute(t)||"";d=e+d;var y=i.get(d);y?y.push(r):i.set(d,[r])}}return i}function xg(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function hw(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Sg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function fw(e,t,a,i){if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=io(i.href),r=t.querySelector(rl(o));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Yr.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=r,Pt(r);return}r=t.ownerDocument||t,i=vg(i),(o=xn.get(o))&&Ld(i,o),r=r.createElement("link"),Pt(r);var d=r;d._p=new Promise(function(y,S){d.onload=y,d.onerror=S}),Ea(r,"link",i),a.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Yr.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Bd=0;function pw(e,t){return e.stylesheets&&e.count===0&&Wr(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var i=setTimeout(function(){if(e.stylesheets&&Wr(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&Bd===0&&(Bd=62500*Vv());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wr(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Bd?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function Yr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var qr=null;function Wr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,qr=new Map,t.forEach(gw,e),qr=null,Yr.call(e))}function gw(e,t){if(!(t.state.loading&4)){var a=qr.get(e);if(a)var i=a.get(null);else{a=new Map,qr.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<o.length;r++){var d=o[r];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(a.set(d.dataset.precedence,d),i=d)}i&&a.set(null,i)}o=t.instance,d=o.getAttribute("data-precedence"),r=a.get(d)||i,r===i&&a.set(null,o),a.set(d,o),this.count++,i=Yr.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),r?r.parentNode.insertBefore(o,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var ul={$$typeof:te,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function yw(e,t,a,i,o,r,d,y,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=G(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G(0),this.hiddenUpdates=G(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=r,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function jg(e,t,a,i,o,r,d,y,S,B,J,ie){return e=new yw(e,t,a,d,S,B,J,ie,y),t=1,r===!0&&(t|=24),r=tn(3,null,null,t),e.current=r,r.stateNode=e,t=gu(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:a,cache:t},wu(r),e}function Ng(e){return e?(e=Hs,e):Hs}function Tg(e,t,a,i,o,r){o=Ng(o),i.context===null?i.context=o:i.pendingContext=o,i=Ni(t),i.payload={element:a},r=r===void 0?null:r,r!==null&&(i.callback=r),a=Ti(e,i,t),a!==null&&(Pa(a,e,t),Ko(a,e,t))}function Ag(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function zd(e,t){Ag(e,t),(e=e.alternate)&&Ag(e,t)}function Mg(e){if(e.tag===13||e.tag===31){var t=ls(e,67108864);t!==null&&Pa(t,e,67108864),zd(e,67108864)}}function Eg(e){if(e.tag===13||e.tag===31){var t=ln();t=T(t);var a=ls(e,t);a!==null&&Pa(a,e,t),zd(e,t)}}var Pr=!0;function bw(e,t,a,i){var o=_.T;_.T=null;var r=Q.p;try{Q.p=2,$d(e,t,a,i)}finally{Q.p=r,_.T=o}}function vw(e,t,a,i){var o=_.T;_.T=null;var r=Q.p;try{Q.p=8,$d(e,t,a,i)}finally{Q.p=r,_.T=o}}function $d(e,t,a,i){if(Pr){var o=Id(i);if(o===null)Nd(e,t,i,Gr,a),Dg(e,i);else if(kw(o,e,t,a,i))i.stopPropagation();else if(Dg(e,i),t&4&&-1<ww.indexOf(e)){for(;o!==null;){var r=Ka(o);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var d=At(r.pendingLanes);if(d!==0){var y=r;for(y.pendingLanes|=2,y.entangledLanes|=2;d;){var S=1<<31-ct(d);y.entanglements[1]|=S,d&=~S}$n(r),(Et&6)===0&&(Cr=Qe()+500,il(0))}}break;case 31:case 13:y=ls(r,2),y!==null&&Pa(y,r,2),Or(),zd(r,2)}if(r=Id(i),r===null&&Nd(e,t,i,Gr,a),r===o)break;o=r}o!==null&&i.stopPropagation()}else Nd(e,t,i,null,a)}}function Id(e){return e=Ao(e),Ud(e)}var Gr=null;function Ud(e){if(Gr=null,e=ja(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=p(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Gr=e,null}function Cg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case kt:return 2;case St:return 8;case ft:case Ct:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var Kd=!1,Bi=null,zi=null,$i=null,dl=new Map,ml=new Map,Ii=[],ww="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dg(e,t){switch(e){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":dl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(t.pointerId)}}function hl(e,t,a,i,o,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:r,targetContainers:[o]},t!==null&&(t=Ka(t),t!==null&&Mg(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function kw(e,t,a,i,o){switch(t){case"focusin":return Bi=hl(Bi,e,t,a,i,o),!0;case"dragenter":return zi=hl(zi,e,t,a,i,o),!0;case"mouseover":return $i=hl($i,e,t,a,i,o),!0;case"pointerover":var r=o.pointerId;return dl.set(r,hl(dl.get(r)||null,e,t,a,i,o)),!0;case"gotpointercapture":return r=o.pointerId,ml.set(r,hl(ml.get(r)||null,e,t,a,i,o)),!0}return!1}function Og(e){var t=ja(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=p(a),t!==null){e.blockedOn=t,He(e.priority,function(){Eg(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,He(e.priority,function(){Eg(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Id(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);To=i,a.target.dispatchEvent(i),To=null}else return t=Ka(a),t!==null&&Mg(t),e.blockedOn=a,!1;t.shift()}return!0}function Rg(e,t,a){Vr(e)&&a.delete(t)}function xw(){Kd=!1,Bi!==null&&Vr(Bi)&&(Bi=null),zi!==null&&Vr(zi)&&(zi=null),$i!==null&&Vr($i)&&($i=null),dl.forEach(Rg),ml.forEach(Rg)}function Xr(e,t){e.blockedOn===t&&(e.blockedOn=null,Kd||(Kd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,xw)))}var Qr=null;function _g(e){Qr!==e&&(Qr=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Qr===e&&(Qr=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(Ud(i||a)===null)continue;break}var r=Ka(a);r!==null&&(e.splice(t,3),t-=3,Iu(r,{pending:!0,data:o,method:a.method,action:i},i,o))}}))}function oo(e){function t(S){return Xr(S,e)}Bi!==null&&Xr(Bi,e),zi!==null&&Xr(zi,e),$i!==null&&Xr($i,e),dl.forEach(t),ml.forEach(t);for(var a=0;a<Ii.length;a++){var i=Ii[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ii.length&&(a=Ii[0],a.blockedOn===null);)Og(a),a.blockedOn===null&&Ii.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var o=a[i],r=a[i+1],d=o[yt]||null;if(typeof r=="function")d||_g(a);else if(d){var y=null;if(r&&r.hasAttribute("formAction")){if(o=r,d=r[yt]||null)y=d.formAction;else if(Ud(o)!==null)continue}else y=d.action;typeof y=="function"?a[i+1]=y:(a.splice(i,3),i-=3),_g(a)}}}function Lg(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(d){return o=d})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(a,20)}function a(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Fd(e){this._internalRoot=e}Zr.prototype.render=Fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,i=ln();Tg(a,i,e,t,null,null)},Zr.prototype.unmount=Fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tg(e.current,2,null,e,null,null),Or(),t[Oa]=null}};function Zr(e){this._internalRoot=e}Zr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ne();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ii.length&&t!==0&&t<Ii[a].priority;a++);Ii.splice(a,0,e),a===0&&Og(e)}};var Hg=l.version;if(Hg!=="19.2.4")throw Error(c(527,Hg,"19.2.4"));Q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=b(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Sw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jr.isDisabled&&Jr.supportsFiber)try{zt=Jr.inject(Sw),Dt=Jr}catch{}}return pl.createRoot=function(e,t){if(!m(e))throw Error(c(299));var a=!1,i="",o=Ff,r=Yf,d=qf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=jg(e,1,!1,null,null,a,i,null,o,r,d,Lg),e[Oa]=t.current,jd(e),new Fd(t)},pl.hydrateRoot=function(e,t,a){if(!m(e))throw Error(c(299));var i=!1,o="",r=Ff,d=Yf,y=qf,S=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.formState!==void 0&&(S=a.formState)),t=jg(e,1,!0,t,a??null,i,o,S,r,d,y,Lg),t.context=Ng(null),a=t.current,i=ln(),i=T(i),o=Ni(i),o.callback=null,Ti(a,o,i),a=i,t.current.lanes=a,oe(t,a),$n(t),e[Oa]=t.current,jd(e),new Zr(t)},pl.version="19.2.4",pl}var Wg;function Rw(){if(Wg)return Wd.exports;Wg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(l){console.error(l)}}return s(),Wd.exports=Ow(),Wd.exports}var _w=Rw();const Lw="baby-prep-photos",Hw=2,Sn="photos",Zi="appState",Bw="baby-prep-",zw=new Set(["baby-prep-cloud-session","baby-prep-smart-notifs-enabled","baby-prep-smart-notif-quiet-hours","baby-prep-smart-notif-channels"]);function $w(s){const l=String(s||"");return zw.has(l)||l.startsWith("baby-prep-cloud-session:")}function Hm(s){return!!(s&&s.startsWith(Bw)&&!$w(s))}function Bm(){const s=[];for(let l=0;l<localStorage.length;l++){const u=localStorage.key(l);Hm(u)&&s.push(u)}return s}function kc(s){typeof window<"u"&&(window.__peggySyncApplying=!!s)}function L0(){typeof window<"u"&&window.dispatchEvent(new CustomEvent("peggy-backup-restored"))}function Ic(){typeof window<"u"&&window.dispatchEvent(new CustomEvent("peggy-photo-changed"))}function Ji(){return new Promise((s,l)=>{const u=indexedDB.open(Lw,Hw);u.onupgradeneeded=()=>{const c=u.result;if(!c.objectStoreNames.contains(Sn)){const m=c.createObjectStore(Sn,{keyPath:"id"});m.createIndex("category","category",{unique:!1}),m.createIndex("date","date",{unique:!1})}c.objectStoreNames.contains(Zi)||c.createObjectStore(Zi,{keyPath:"key"})},u.onsuccess=()=>s(u.result),u.onerror=()=>l(u.error)})}function Iw(s,l=1200){return new Promise(u=>{const c=new FileReader;c.onload=m=>{const f=new Image;f.onload=()=>{const p=document.createElement("canvas");let g=f.width,v=f.height;g>l&&(v=Math.round(v*(l/g)),g=l),p.width=g,p.height=v,p.getContext("2d").drawImage(f,0,0,g,v),u(p.toDataURL("image/jpeg",.8))},f.src=m.target.result},c.readAsDataURL(s)})}async function Uw(s,l){const u=await Iw(l),c={id:Date.now().toString(36)+Math.random().toString(36).slice(2,6),category:s,date:new Date().toISOString(),name:l.name,data:u},m=await Ji();return new Promise((f,p)=>{const g=m.transaction(Sn,"readwrite");g.objectStore(Sn).put(c),g.oncomplete=()=>{Ic(),f(c)},g.onerror=()=>p(g.error)})}async function H0(s){const l=await Ji();return new Promise((u,c)=>{const f=l.transaction(Sn,"readonly").objectStore(Sn),p=f.index("category"),g=s?p.getAll(s):f.getAll();g.onsuccess=()=>u(g.result.sort((v,b)=>b.date.localeCompare(v.date))),g.onerror=()=>c(g.error)})}async function Kw(s){const l=await Ji();return new Promise((u,c)=>{const m=l.transaction(Sn,"readwrite");m.objectStore(Sn).delete(s),m.oncomplete=()=>{Ic(),u()},m.onerror=()=>c(m.error)})}async function Ul(s,l){try{const u=await Ji();return new Promise((c,m)=>{const f=u.transaction(Zi,"readwrite");f.objectStore(Zi).put({key:s,value:l,updated:new Date().toISOString()}),f.oncomplete=()=>c(),f.onerror=()=>m(f.error)})}catch{}}async function dm(s){try{const l=await Ji();return new Promise((u,c)=>{const f=l.transaction(Zi,"readonly").objectStore(Zi).get(s);f.onsuccess=()=>u(f.result?.value??null),f.onerror=()=>c(f.error)})}catch{return null}}async function B0(s){const l=await Ji();return new Promise((u,c)=>{const m=l.transaction(s,"readwrite");m.objectStore(s).clear(),m.oncomplete=()=>u(),m.onerror=()=>c(m.error)})}async function z0(){const s=await Ji();return new Promise((l,u)=>{const c=s.transaction(Zi,"readwrite"),m=c.objectStore(Zi),f=m.getAllKeys();f.onsuccess=()=>{const p=Array.isArray(f.result)?f.result:[];for(const g of p)Hm(String(g))&&m.delete(g)},f.onerror=()=>u(f.error),c.oncomplete=()=>l(),c.onerror=()=>u(c.error)})}async function ec(){kc(!0);try{for(const s of Bm())localStorage.removeItem(s);await z0(),await B0(Sn),L0(),Ic()}finally{kc(!1)}}function Fw(){const s={};for(const l of Bm())try{s[l]=JSON.parse(localStorage.getItem(l))}catch{s[l]=localStorage.getItem(l)}return s}function $0(s){return!!(s&&typeof s=="object"&&s.version&&s.appData&&typeof s.appData=="object")}async function xc(){const s=Fw();let l=[];try{l=await H0(null)}catch{}return{version:1,exportDate:new Date().toISOString(),appData:s,photos:l}}async function zm(s){if(!$0(s))throw new Error("Invalid backup data");kc(!0);try{for(const u of Bm())localStorage.removeItem(u);await z0();for(const[u,c]of Object.entries(s.appData))Hm(u)&&(localStorage.setItem(u,JSON.stringify(c)),await Ul(u,c));await B0(Sn);const l=Array.isArray(s.photos)?s.photos:[];if(l.length){const u=await Ji();for(const c of l)await new Promise((m,f)=>{const p=u.transaction(Sn,"readwrite");p.objectStore(Sn).put(c),p.oncomplete=()=>m(),p.onerror=()=>f(p.error)})}return L0(),Ic(),{items:Object.keys(s.appData).length,photos:l.length}}finally{kc(!1)}}async function Yw(){const s=await xc(),l=new Blob([JSON.stringify(s)],{type:"application/json"}),u=URL.createObjectURL(l),c=document.createElement("a");return c.href=u,c.download=`baby-prep-backup-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u),!0}async function qw(s){return new Promise((l,u)=>{const c=new FileReader;c.onload=async m=>{try{const f=JSON.parse(m.target.result);if(!$0(f)){u(new Error("Invalid backup file"));return}const p=await zm(f);l(p)}catch(f){u(f)}},c.onerror=()=>u(c.error),c.readAsText(s)})}const js=[{id:"pregnancy",title:"Pregnancy (ASAP)",icon:"",color:"#e91e8b",items:[{id:"p1",text:"Visit OB-GYN to confirm pregnancy",priority:"urgent",howTo:["Find an OB-GYN clinic ( / sanfujinka) near Kawasaki-ku","Call to make an appointment","Bring: Health insurance card (), residence card ()","First visit usually includes: urine test, ultrasound, blood test","Cost: 5,000-15,000 (before vouchers - keep the receipt!)","Ask for a pregnancy confirmation letter () for ward office"],phones:[{label:"Kawasaki Health Center",number:"044-201-3212"}],scripts:[{situation:"Calling to make an appointment",lines:[{speaker:"you",ja:"",romaji:"Sumimasen, ninshin no kensa wo shitai no desu ga, yoyaku dekimasu ka?",en:"Excuse me, I'd like to get a pregnancy test. Can I make an appointment?"},{speaker:"staff",ja:"",romaji:"Hokenshou wa omochi desu ka?",en:"Do you have your health insurance card?"},{speaker:"you",ja:"",romaji:"Hai, motteimasu.",en:"Yes, I have it."},{speaker:"staff",ja:"",romaji:"Itsu ga tsugou ga yoroshii desu ka?",en:"When would be convenient for you?"},{speaker:"you",ja:"",romaji:"[Month] gatsu [day] nichi wa aiteimasu ka?",en:"Is [date] available?"}]},{situation:"At the reception desk",lines:[{speaker:"you",ja:"",romaji:"Yoyaku shita [name] desu. Ninshin no kakunin de onegai shimasu.",en:"I'm [name], I have an appointment. I'm here for pregnancy confirmation."},{speaker:"you",ja:"",romaji:"Hokenshou to zairyuu kaado desu.",en:"Here's my insurance card and residence card."}]}]},{id:"p2",text:"Go to Kawasaki Ward Office - get Boshi Techo ( / boshi kenkou techou) + 14 checkup vouchers",priority:"urgent",moneyIds:["m2"],howTo:["Go to Kawasaki Ward Office (), Child & Family section ()","Address: 8, near Kawasaki Station","Hours: Mon-Fri 8:30-17:00","Bring: Pregnancy confirmation from clinic, residence card, health insurance card, My Number card","You will receive: Boshi Techo (handbook), 14 prenatal checkup vouchers, information packets","This also triggers eligibility for the 50,000 pregnancy grant (do at same visit!)","Ask about ANY other programs available"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[{situation:"At the ward office reception",lines:[{speaker:"you",ja:"",romaji:"Sumimasen, boshi kenkou techou no koufu wo onegai shitai no desu ga.",en:"Excuse me, I'd like to get the Mother-Child Health Handbook."},{speaker:"staff",ja:"",romaji:"Ninshin kakuninsho wa omochi desu ka?",en:"Do you have pregnancy confirmation?"},{speaker:"you",ja:"",romaji:"Hai, sanfujinka kara no mono desu. Kore desu.",en:"Yes, from my OB-GYN. Here it is."},{speaker:"you",ja:"",romaji:"Shussan kosodate ouen kyuufukin no mendan mo onegai dekimasu ka?",en:"Can I also do the consultation for the birth/child-rearing support grant?"},{speaker:"you",ja:"",romaji:"Hoka ni atarashii kazoku muke no puroguramu wa arimasu ka?",en:"Are there any other programs for new families?"}]}]},{id:"p3",text:"Complete consultation for Shussan Kosodate Ouen Kyuufukin ( / shussan kosodate ouen kyuufukin)  receive 50,000",priority:"urgent",moneyIds:["m1"],howTo:["This is part of the boshi techo pickup process - do it at the SAME VISIT","You need a consultation ( / mendan) with a support worker","They will ask about your situation, health, support network","After the consultation, you receive 50,000 (cash or voucher depending on municipality)","A SECOND 50,000 comes after birth (total: 100,000)","DO NOT SKIP THIS - no consultation = no money!"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[{situation:"Asking about the grant",lines:[{speaker:"you",ja:"",romaji:"Shussan kosodate ouen kyuufukin no mendan wo onegai shimasu.",en:"I'd like to do the consultation for the childbirth support grant."},{speaker:"staff",ja:"",romaji:"Boshi techou wa uketori mashita ka?",en:"Have you received the mother-child handbook?"},{speaker:"you",ja:"",romaji:"Hai, kyou uketorimashita.",en:"Yes, I received it today."},{speaker:"you",ja:"",romaji:"Kyuufukin wa itsu moraemasu ka?",en:"When can I receive the grant money?"}]}]},{id:"p4",text:"Ask Kawasaki Ward Office about municipal baby gift programs",priority:"high",moneyIds:["m10","m15"],howTo:["While at the ward office for boshi techo, ask about ALL available programs","Some programs are not advertised publicly","Ask at: , , and welfare counter","Programs may include: cash gifts, shopping vouchers, baby supplies"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[{situation:"Asking about programs",lines:[{speaker:"you",ja:"",romaji:"Shussan ni kanshite, Kawasaki-shi de hoka ni moraeru kyuufukin ya saabisu wa arimasu ka?",en:"Regarding childbirth, are there other grants or services available in Kawasaki?"},{speaker:"you",ja:"",romaji:"Shinseiji muke no oiwaikin ya buppin teikyou wa arimasu ka?",en:"Are there celebratory gifts or supplies for newborns?"}]}]},{id:"p5",text:"Ask about Kokuho Ryou Genmen ( / kokuho ryou genmen) - insurance premium reduction",priority:"high",moneyIds:["m16"],howTo:["If your household income is low, you may qualify for insurance premium reduction","7-wari (70% off), 5-wari (50% off), or 2-wari (20% off)","Applied automatically ONLY IF you file a tax return","Even if income is zero, you MUST file a tax return!","Ask at the insurance/pension counter ()"],phones:[{label:"Kawasaki Ward ",number:"044-201-3151"}],scripts:[{situation:"Asking about insurance reduction",lines:[{speaker:"you",ja:"",romaji:"Kokumin kenkou hokenryou no genmen ni tsuite oshiete kudasai.",en:"Please tell me about health insurance premium reductions."},{speaker:"you",ja:"",romaji:"Kakutei shinkoku wa shiteimasu. Setai no shuunyuu wa sukunai desu.",en:"I have filed my tax return. Our household income is low."},{speaker:"staff",ja:"",romaji:"Gengaku no taishou ni naru ka kakunin shimasu ne.",en:"Let me check if you qualify for a reduction."}]}]},{id:"p6",text:"Apply for Sanzen Sango pension exemption ( / sanzen sango) ~66,000 saved",priority:"high",moneyIds:["m3"],howTo:["Exemption from National Pension () for 4 months around due date","Saves ~16,500/month  4 = ~66,000","These months STILL COUNT as paid toward pension record!","Apply at ward office pension counter OR Kawasaki Pension Office","Bring: Boshi Techo (for due date proof), My Number card","If Naomi is on employer pension (), her company handles this"],phones:[{label:"Kawasaki Ward ",number:"044-201-3151"},{label:"Kawasaki Pension Office",number:"044-233-0181"}],scripts:[{situation:"Applying for pension exemption",lines:[{speaker:"you",ja:"",romaji:"Sanzen sango no kokumin nenkin hokenryou menjo wo shinsei shitai desu.",en:"I'd like to apply for the maternity pension premium exemption."},{speaker:"you",ja:"104",romaji:"Shussan yoteibi wa juu-gatsu yokka desu. Boshi techou wo motteimasu.",en:"The due date is October 4th. I have the mother-child handbook."},{speaker:"staff",ja:"",romaji:"Mainanbaa kaado wa omochi desu ka?",en:"Do you have your My Number card?"},{speaker:"you",ja:"",romaji:"Hai, kore desu.",en:"Yes, here it is."}]}]},{id:"p7",text:"Ask about free dental checkup ( / ninpu shika kenshin)",priority:"medium",howTo:["Kawasaki offers free dental checkup for pregnant women","Important: Gum disease during pregnancy is linked to premature birth!","Best time: 2nd trimester ( / anteiki)","Ask ward office for the voucher, then visit a participating dentist","Any dental TREATMENT costs still count toward tax deduction"],phones:[{label:"Kawasaki Health Center",number:"044-201-3212"}],scripts:[{situation:"Asking about dental checkup",lines:[{speaker:"you",ja:"",romaji:"Ninpu shika kenshin no jushinpyou wo itadakemasu ka?",en:"May I have the maternity dental checkup voucher?"},{speaker:"you",ja:"",romaji:"Taishou no shika iin no risuto wa arimasu ka?",en:"Is there a list of participating dental clinics?"}]}]},{id:"p8",text:"Ask about postpartum care ( / sango kea jigyou)",priority:"medium",howTo:["Kawasaki offers subsidized postpartum care programs","Options: Facility stay (1,000-3,000/night), Day visits (free-cheap), Midwife home visits","Covers: Mom recovery, breastfeeding support, baby care guidance","Register early since spots may be limited","Ask at ward office health center counter"],phones:[{label:"Kawasaki Health Center",number:"044-201-3212"}],scripts:[{situation:"Asking about postpartum care",lines:[{speaker:"you",ja:"",romaji:"Sango kea jigyou ni tsuite oshiete kudasai.",en:"Please tell me about the postpartum care program."},{speaker:"you",ja:"",romaji:"Sango no shooto sutei ya dei saabisu wa arimasu ka?",en:"Are there postpartum short-stay or day-care services?"},{speaker:"you",ja:"",romaji:"Yoyaku wa itsu kara dekimasu ka?",en:"When can I start making reservations?"}]}]},{id:"p9",text:"Get info on public housing / danchi ( / kouei juutaku) - you plan to move in June!",priority:"high",howTo:["You plan to move to danchi in June - start applying NOW!","Three systems to check: City housing (), Prefectural (), UR housing","Families with children get priority in some lotteries","Income-based rent (lower income = lower rent)","Apply 2-3 months before desired move-in","Bring: Proof of income, residence cards, family register"],phones:[{label:"Kawasaki Housing",number:"044-200-2994"},{label:"UR Housing",number:"0120-411-363"},{label:"Kanagawa Prefecture Housing",number:"045-651-1854"}],scripts:[{situation:"Calling UR Housing",lines:[{speaker:"you",ja:"UR",romaji:"Kawasaki-shi nai no UR juutaku no aki joukyou wo oshiete kudasai.",en:"Please tell me about available UR housing in Kawasaki City."},{speaker:"you",ja:"46",romaji:"Kazoku yonin de nyuukyo shitai desu. Roku-gatsu goro ni hikkoshi shitai no desu ga.",en:"I'd like housing for a family of 4. We want to move around June."},{speaker:"you",ja:"",romaji:"Kodomo ga iru baai no yuusen waku wa arimasu ka?",en:"Is there a priority slot for families with children?"},{speaker:"you",ja:"",romaji:"Hitsuyou na shorui wo oshiete kudasai.",en:"What documents do I need?"}]}]},{id:"p10",text:"Check employer: birth bonus, Fuka Kyuufu ( / fuka kyuufu), company benefits",priority:"high",moneyIds:["m7","m11","m12","m13"],howTo:["Ask BOTH Shinji's and Naomi's HR departments","Things to ask about: Birth bonus (), Additional insurance benefit ()","Also ask about: Maternity leave procedures, Childcare leave benefits","Some companies have mutual aid programs with extra benefits","The  alone can be 10,000-90,000 extra - many people miss this!"],phones:[],scripts:[{situation:"Asking HR about birth benefits",lines:[{speaker:"you",ja:"",romaji:"Shussan ni kansuru kaisha no fukuri kousei ni tsuite oshiete kudasai.",en:"Please tell me about company benefits related to childbirth."},{speaker:"you",ja:"",romaji:"Shussan iwaikin wa arimasu ka?",en:"Is there a birth celebration bonus?"},{speaker:"you",ja:"",romaji:"Kenkou hoken kumiai ni fuka kyuufu wa arimasu ka?",en:"Does our health insurance association have additional benefits?"},{speaker:"you",ja:"",romaji:"Ikuji kyuugyou no tetsuzuki ni tsuite mo oshiete kudasai.",en:"Also, please tell me about childcare leave procedures."}]}]},{id:"p11",text:"Start saving ALL medical receipts (including transport log)",priority:"urgent",howTo:["Get a folder or envelope specifically for medical receipts","Save EVERYTHING: clinic co-pays, pharmacy receipts, hospital bills, dental receipts","Start a transportation log in a notebook or on your phone:","Format: Date | From  To | Amount | Purpose","Example: 2026/03/15 | Home  Clinic | 480 | Prenatal checkup #2","Even bus/train fares count! Taxi fare during labor counts too!","Combine all family expenses (Shinji + Naomi + Ryzen + baby) for maximum deduction","These are needed for  (iryouhi koujo) tax refund in Feb-March next year"],phones:[],scripts:[]},{id:"p12",text:"File tax return even if income is low (triggers auto reductions)",priority:"high",howTo:["Go to Kawasaki-Minami Tax Office during Feb-March filing period","Or file online via e-Tax (www.e-tax.nta.go.jp)","Even if income is ZERO, you MUST file!","Filing triggers: Insurance premium reductions, Pension reductions, Welfare eligibility","Without filing, the system doesn't know your income is low","Bring: My Number card, income records, receipts, bank info for refund"],phones:[{label:"Kawasaki-Minami Tax Office",number:"044-222-7531"}],scripts:[{situation:"At the tax office",lines:[{speaker:"you",ja:"",romaji:"Kakutei shinkoku wo shitai no desu ga.",en:"I'd like to file a tax return."},{speaker:"you",ja:"",romaji:"Iryouhi koujo wo shinsei shitai desu.",en:"I'd like to claim the medical expense deduction."},{speaker:"you",ja:"",romaji:"Haiguusha koujo mo shinsei dekimasu ka?",en:"Can I also claim the spouse deduction?"}]}]},{id:"p13",text:"Register with Kawasaki International Association (044-435-7000)",priority:"medium",howTo:["Free services for foreign residents","Offers: Free Japanese classes, translation help, tax filing support","Location: Kawasaki Frontier Building 2F, near Kawasaki Station","Helpful for navigating government paperwork"],phones:[{label:"Kawasaki International Association",number:"044-435-7000"}],scripts:[{situation:"Calling to register",lines:[{speaker:"you",ja:"",romaji:"Gaikokujin muke no saabisu ni tsuite oshiete kudasai.",en:"Please tell me about services for foreign residents."},{speaker:"you",ja:"",romaji:"Nihongo kyoushitsu wa arimasu ka?",en:"Are there Japanese language classes?"}]}]},{id:"p14",text:"Apply for Gendogaku Tekiyou Ninteishou ( / gendogaku tekiyou ninteishou) - Limit Certificate",priority:"high",howTo:["This limits your out-of-pocket for hospital bills","If delivery has complications (C-section, etc.), this is CRITICAL","Get it BEFORE delivery day - present it at the hospital","Apply at ward office insurance counter","Bring: Health insurance card, My Number card"],phones:[{label:"Kawasaki Ward ",number:"044-201-3151"}],scripts:[{situation:"Applying for the certificate",lines:[{speaker:"you",ja:"",romaji:"Gendogaku tekiyou ninteishou wo shinsei shitai no desu ga.",en:"I'd like to apply for the High-Cost Medical Care Limit Certificate."},{speaker:"you",ja:"",romaji:"Shussan no yotei ga aru node, jizen ni shutoku shite okitai desu.",en:"I have a delivery coming up, so I'd like to get it in advance."}]}]},{id:"p15",text:"Order prenatal supplements from iHerb",priority:"urgent",howTo:["Go to iHerb.com - ships directly to Japan (5-10 day delivery)","Recommended order (see Health tab > Supplements for details):","1. Nature Made Prenatal Multi + DHA, 90 Softgels","2. Nordic Naturals Prenatal DHA, 500mg, 90 Soft Gels","3. NOW Foods Calcium & Magnesium with D-3 and Zinc, 120 Softgels","4. NOW Foods Organic Chlorella, 500mg, 200 Tablets","5. NOW Foods Choline & Inositol, 500mg, 100 Capsules","6. NOW Foods Vitamin D-3, 2000 IU, 120 Softgels","First order ~13,000-14,000 (covers 1.5-3 months)","Search for promo codes before ordering!"],phones:[],scripts:[]},{id:"p16",text:"Show supplement list to OB-GYN for approval",priority:"high",howTo:["Bring the list of 6 supplements to your next OB-GYN visit","Ask the doctor to confirm the supplements and dosages are safe","Some doctors may recommend adjustments based on blood test results","Especially important: iron levels, vitamin D levels, calcium intake"],phones:[],scripts:[{situation:"Asking the doctor about supplements",lines:[{speaker:"you",ja:"",romaji:"Kono sapurimento risuto wo mite moraemasu ka? Ninshin-chuu ni nonde mo daijoubu desu ka?",en:"Could you look at this supplement list? Is it safe to take during pregnancy?"},{speaker:"you",ja:"",romaji:"Ryou wo kaeta hou ga ii mono wa arimasu ka?",en:"Should I change the dosage of any of these?"}]}]}]},{id:"delivery",title:"Before Delivery",icon:"",color:"#6c5ce7",items:[{id:"d1",text:"Confirm hospital uses Chokusetsu Shiharai Seido ( / chokusetsu shiharai seido) for 500,000",priority:"urgent",moneyIds:["m4"],howTo:["Ask at your delivery hospital during a prenatal visit","The 500,000 childbirth allowance goes directly from insurance to hospital","You only pay the difference (if any)","If delivery costs LESS than 500,000, you get the refund!","Sign the agreement form during pregnancy (not on delivery day)"],phones:[],scripts:[{situation:"Asking the hospital about direct payment",lines:[{speaker:"you",ja:"",romaji:"Shussan ikuji ichijikin no chokusetsu shiharai seido wa riyou dekimasu ka?",en:"Can I use the direct payment system for the childbirth lump-sum?"},{speaker:"you",ja:"",romaji:"Tetsuzuki no shorui wo itadakemasu ka?",en:"May I have the paperwork for this?"},{speaker:"you",ja:"",romaji:"Kono byouin de no shussan hiyou wa daitai ikura desu ka?",en:"Approximately how much does delivery cost at this hospital?"}]}]},{id:"d2",text:"Prepare hospital bag",priority:"high",howTo:["Pack by Week 36 (be ready early!)","For Naomi: Boshi Techo, insurance card, birth plan, comfortable clothes, nursing bra, toiletries, slippers, phone charger, snacks","For baby: 1 outfit to go home in, blanket, diapers (hospital usually provides some)","For Dada Shinji: Snacks, change of clothes, camera/phone, coins for vending machine","Documents: Pre-filled birth registration form, seal ( / inkan), My Number cards"],phones:[],scripts:[]},{id:"d3",text:"Pre-fill Shussei Todoke ( / shussei todoke) - Birth Registration form",priority:"medium",howTo:["Get the form from ward office or hospital in advance","Fill in everything you can before delivery (parents info, address)","Baby name and birth details filled in after birth","DEADLINE: 14 days after birth!","Having it ready saves precious time after delivery"],phones:[{label:"Kawasaki Ward Office",number:"044-201-3113"}],scripts:[{situation:"Getting the form",lines:[{speaker:"you",ja:"",romaji:"Shussei todoke no youshi wo jizen ni itadakemasu ka?",en:"Can I get the birth registration form in advance?"}]}]},{id:"d4",text:"Decide on baby name",priority:"high",howTo:["Check the More tab > Baby Names for suggestions following the Ryzen formula","Verify kanji are in the approved list ( or )","Test the name in Filipino, Japanese, AND English","Consider how it pairs with Ryzen ()","You can check approved kanji at the ward office before submitting"],phones:[],scripts:[]},{id:"d5",text:"Prepare Jidou Teate ( / jidou teate) - Child Allowance application form",priority:"high",howTo:["Get the form from ward office in advance","15,000/month (age 0-3) - this is the BIGGEST ongoing benefit","MUST apply within 15 days of birth!","Bring: Birth certificate, both parents' My Number cards, bank account info, insurance card","Best strategy: Submit on the SAME DAY as birth registration"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[{situation:"Getting the form in advance",lines:[{speaker:"you",ja:"",romaji:"Jidou teate no shinseisho wo jizen ni itadakemasu ka?",en:"Can I get the child allowance application form in advance?"},{speaker:"you",ja:"",romaji:"Hitsuyou na shorui no risuto mo onegai shimasu.",en:"Also, could I have a list of required documents?"}]}]},{id:"d6",text:"If employed: arrange maternity leave with employer",priority:"high",moneyIds:["m11","m12","m13"],howTo:["For Naomi: Talk to HR at least 1 month before leave starts","Maternity leave (): 6 weeks before + 8 weeks after birth","Childcare leave (): up to 2 years","During leave: 67% salary (first 6 months), 50% after","Social insurance premiums are EXEMPT during leave"],phones:[],scripts:[{situation:"Talking to HR about maternity leave",lines:[{speaker:"you",ja:"",romaji:"Sanzen sango kyuuka to ikuji kyuugyou ni tsuite soudan shitai no desu ga.",en:"I'd like to discuss maternity leave and childcare leave."},{speaker:"you",ja:"104",romaji:"Shussan yoteibi wa juu-gatsu yokka desu.",en:"My due date is October 4th."},{speaker:"you",ja:"",romaji:"Ikuji kyuugyou kyuufukin no tetsuzuki mo oshiete kudasai.",en:"Please also tell me about childcare leave benefits procedures."}]}]}]},{id:"birth",title:"After Birth (14-Day Deadline!)",icon:"",color:"#e17055",items:[{id:"b1",text:"Submit Shussei Todoke ( / shussei todoke) at Kawasaki Ward Office - WITHIN 14 DAYS",priority:"urgent",howTo:["DEADLINE: 14 days after birth! Do this FIRST","Go to Kawasaki Ward Office ","Bring: Pre-filled birth registration form, birth certificate from hospital, Boshi Techo, seal ()","While there, also apply for: Child Allowance, 2nd grant consultation, baby insurance","Save time by doing everything at the same visit"],phones:[{label:"Kawasaki Ward Office",number:"044-201-3113"},{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[{situation:"Submitting birth registration",lines:[{speaker:"you",ja:"",romaji:"Shussei todoke wo teishutsu shitai no desu ga.",en:"I'd like to submit the birth registration."},{speaker:"you",ja:"",romaji:"Awasete jidou teate no shinsei mo shitai desu.",en:"I'd also like to apply for child allowance at the same time."},{speaker:"you",ja:"2",romaji:"Shussan kosodate ouen kyuufukin no nikai-me no mendan mo onegai shimasu.",en:"Also, the 2nd consultation for the childbirth support grant, please."},{speaker:"you",ja:"",romaji:"Akachan no kenkou hoken no tetsuzuki mo koko de dekimasu ka?",en:"Can I also do the baby's health insurance here?"}]}]},{id:"b2",text:"Complete 2nd consultation for Ouen Kyuufukin ( / ouen kyuufukin)  receive 50,000",priority:"urgent",moneyIds:["m5"],howTo:["This is the 2nd half of the 100,000 total grant","Do at the SAME VISIT as birth registration","Requires another brief consultation () with support worker","Bring: Boshi Techo, birth certificate, My Number card"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[]},{id:"b3",text:"Apply for Jidou Teate ( / jidou teate) - WITHIN 15 DAYS (15,000/month!)",priority:"urgent",moneyIds:["m8"],howTo:["DEADLINE: Within 15 days of birth! Late = lost months!","Apply at ward office ","Bring: Birth certificate, both parents' My Number, bank account info, insurance card","15,000/month for ages 0-3, 10,000/month for ages 3-18","For 2 kids (Ryzen + Baby): 25,000-30,000/month!","Payment: Every 2 months into your bank account"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[{situation:"Applying for child allowance",lines:[{speaker:"you",ja:"",romaji:"Jidou teate no nintei seikyuusho wo teishutsu shitai desu.",en:"I'd like to submit the child allowance application."},{speaker:"you",ja:"",romaji:"Ue no ko mo jukyuu shiteimasu ga, henkou todoke wa hitsuyou desu ka?",en:"My older child is also receiving it. Do I need to file a change notice?"}]}]},{id:"b4",text:"Get baby's health insurance card",priority:"urgent",howTo:["Add baby to either National Health Insurance () or employer insurance ()","For : Apply at ward office insurance counter","For : Through employer HR","Bring: Birth certificate, parent's insurance card, My Number","Baby needs insurance card before getting medical subsidy"],phones:[{label:"Kawasaki Ward ",number:"044-201-3151"}],scripts:[{situation:"Adding baby to insurance",lines:[{speaker:"you",ja:"",romaji:"Shinseiji wo kokumin kenkou hoken ni kanyuu sasetai no desu ga.",en:"I'd like to enroll my newborn in the national health insurance."},{speaker:"you",ja:"",romaji:"Shussei todoke wa teishutsu-zumi desu.",en:"I've already submitted the birth registration."}]}]},{id:"b5",text:"Apply for Nyuuyouji Iryouhi Josei ( / nyuuyouji iryouhi josei) - Child Medical Subsidy",priority:"urgent",moneyIds:["m14"],howTo:["Free medical care for children until age 15 in Kawasaki!","Apply AFTER getting baby's health insurance card","Apply at ward office ","Covers: Doctor visits, hospitalization, prescriptions","Babies get sick A LOT - this saves massive amounts"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[{situation:"Applying for medical subsidy",lines:[{speaker:"you",ja:"",romaji:"Nyuuyouji iryouhi josei no shinsei wo shitai no desu ga.",en:"I'd like to apply for the child medical expense subsidy."},{speaker:"you",ja:"",romaji:"Akachan no hokenshou wa motteimasu.",en:"I have the baby's insurance card."}]}]},{id:"b6",text:"If delivery < 500,000  apply for refund of difference",priority:"high",moneyIds:["m6"],howTo:["Check your hospital invoice after delivery","If total cost was LESS than 500,000, get the difference refunded","Example: Delivery cost 400,000  Refund 100,000!","For : Apply at ward office","For : Apply through employer insurance","Bring: Hospital invoice, Direct Payment agreement copy"],phones:[{label:"Kawasaki Ward  (for )",number:"044-201-3151"}],scripts:[{situation:"Applying for delivery refund",lines:[{speaker:"you",ja:"",romaji:"Shussan ikuji ichijikin no sagaku wo shinsei shitai desu.",en:"I'd like to apply for the childbirth allowance difference refund."},{speaker:"you",ja:"",romaji:"Shussan hiyou wa [amount] en deshita.",en:"The delivery cost was [amount] yen."}]}]},{id:"b7",text:"Check Fuka Kyuufu ( / fuka kyuufu) with employer insurance",priority:"high",moneyIds:["m7"],howTo:["Some health insurance associations pay EXTRA on top of 500,000","Amount varies: 10,000-90,000","Check BOTH Shinji's and Naomi's employers","Just ask HR - this is free money many people miss!"],phones:[],scripts:[{situation:"Asking HR about additional benefits",lines:[{speaker:"you",ja:"",romaji:"Shussan ikuji ichijikin no fuka kyuufu wa arimasu ka?",en:"Is there an additional birth benefit from our health insurance?"}]}]},{id:"b8",text:"Register baby at Philippine Consulate Yokohama (045-681-5006) for dual citizenship",priority:"medium",howTo:["Register baby's birth at the Philippine Consulate for dual citizenship","Yokohama consulate is closer than Tokyo embassy","Bring: Birth certificate (Japanese), parents' passports, marriage certificate","Baby can hold both Filipino and Japanese citizenship","Japan technically requires choosing at 22 but rarely enforced"],phones:[{label:"Phil. Consulate Yokohama",number:"045-681-5006"},{label:"Phil. Embassy Tokyo",number:"03-5562-1600"}],scripts:[{situation:"Calling the consulate",lines:[{speaker:"you",ja:"",romaji:"",en:"Hello, I'd like to register my baby's birth for Philippine citizenship. What documents do I need to bring?"}]}]}]},{id:"ongoing",title:"Ongoing / Annual",icon:"",color:"#00b894",items:[{id:"o1",text:"Keep all medical receipts throughout the year",priority:"high",howTo:["Collect ALL receipts: doctor visits, pharmacy, dental, hospital","Include transportation costs to medical facilities","Save receipts for: Shinji, Naomi, Ryzen, AND baby","Organize by month for easy filing later","Goal: Total over 100,000 for tax deduction (pregnancy year will easily exceed this!)"],phones:[],scripts:[]},{id:"o2",text:"Maintain transportation log to medical appointments",priority:"medium",howTo:["Keep a simple log: Date | Route | Fare | Purpose","Bus, train, even taxi fares count","Taxi during labor counts!","Keep it in a notebook or phone notes app","This goes into your tax return for "],phones:[],scripts:[]},{id:"o3",text:"Do Furusato Nouzei ( / furusato nouzei) before year end (free food/goods!)",priority:"medium",howTo:["Donate to rural municipalities, get return gifts (rice, meat, fruit!)","You pay 2,000 out of pocket, rest is a tax credit","Example: Donate 30,000 = ~9,000 worth of goods for 2,000","Use online calculator to find optimal donation amount based on income","Popular sites: Furusato Choice, Rakuten Furusato, SatoFull","Strategy: Get rice and baby supplies to save on groceries!"],phones:[],scripts:[]},{id:"o4",text:"File Kakutei Shinkoku ( / kakutei shinkoku) in Feb-March with Iryouhi Koujo ( / iryouhi koujo)",priority:"high",moneyIds:["m9"],howTo:["Filing period: February 16 - March 15 each year","File at Kawasaki-Minami Tax Office or online via e-Tax","Bring: All medical receipts, transport log, My Number card, bank info","Combine ALL family medical expenses in one return","Formula: (Total medical - 100,000)  tax rate = refund","Pregnancy year will likely have 300,000-500,000+ in medical costs"],phones:[{label:"Kawasaki-Minami Tax Office",number:"044-222-7531"}],scripts:[{situation:"At the tax office",lines:[{speaker:"you",ja:"",romaji:"Iryouhi koujo no kakutei shinkoku wo shitai no desu ga.",en:"I'd like to file a tax return for medical expense deduction."},{speaker:"you",ja:"",romaji:"Ryoushuusho to koutsuuhi no kiroku wo motte kimashita.",en:"I've brought my receipts and transportation records."}]}]},{id:"o5",text:"When child turns 3  enroll in free preschool/kindergarten",priority:"high",howTo:["Age 3-5: ALL preschool/kindergarten is FREE (2019 reform)","Age 0-2: Free for tax-exempt households, half-price for 2nd child","Start looking at options 6-12 months before enrollment","Types: Hoikuen () for working parents, Youchien () for everyone","Apply through ward office child support section"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}],scripts:[]},{id:"o6",text:"When Ryzen enters school  apply for Shuugaku Enjo ( / shuugaku enjo) if eligible",priority:"high",howTo:["Income-based assistance for school expenses","Covers: Supplies, lunch, field trips, PE uniform, swimming gear, dental/eye treatment","Income threshold is relatively generous - check if you qualify","Apply through the school or Kawasaki education department","Many qualifying families MISS this because they don't know about it!"],phones:[],scripts:[{situation:"Asking at school",lines:[{speaker:"you",ja:"",romaji:"Shuugaku enjo no shinsei ni tsuite oshiete kudasai.",en:"Please tell me about the school expense assistance application."},{speaker:"you",ja:"",romaji:"Taishou ni naru ka kakunin shitai no desu ga.",en:"I'd like to check if we qualify."}]}]},{id:"o7",text:"Check Kawasaki Ward Office annually for new programs",priority:"medium",moneyIds:["m10","m15"],howTo:["Visit or call the ward office once a year to check for new programs","Japan frequently adds new family support programs","Recent addition (2023): 100,000 birth support grant","Recent addition (2024): Child allowance expanded to age 18, income limits removed","Some programs are not advertised - you have to ASK!"],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"},{label:"Kawasaki Ward General",number:"044-201-3113"}],scripts:[{situation:"Annual check-in call",lines:[{speaker:"you",ja:"",romaji:"Kosodate katei muke no atarashii seido ya saabisu wa arimasu ka?",en:"Are there any new programs or services for families with children?"},{speaker:"you",ja:"",romaji:"Konnendo kawatta ten ga areba oshiete kudasai.",en:"Please tell me if anything has changed this year."}]}]}]}],cn=[{id:"prenatal",name:"Prenatal Multivitamin",product:"Thorne, Basic Prenatal, 90 Capsules",when:"Morning with breakfast",why:"Folic acid + iron + B vitamins foundation",icon:"",timesPerDay:1,defaultTimes:["08:00"],bottleSize:90,perDose:3,price:4149,note:"Take 3 capsules with food. This serving includes high iron, so avoid adding extra iron unless OB-GYN confirms deficiency.",dosageInfo:"3 capsules daily with breakfast. Serving size = 3 caps, kaya 30 days lang ang isang bottle!",warnings:"Contains high iron. Keep 2+ hours away from calcium and do not add extra iron unless advised by OB-GYN.",explanation:"Ang prenatal multivitamin ang base ng lahat. Ang Thorne version ay may methylated folate (L-5-MTHF) na mas mabilis ma-absorb kumpara sa regular folic acid. May iron din para sa blood production (dadami ang blood mo ng 50% during pregnancy!). 3 capsules per serving kaya 30 days lang per bottle.",budgetAlt:"Nature Made Prenatal Multi + DHA (1,500, 90 days supply, 1/day)  same core nutrients, 8x cheaper per day!"},{id:"dha",name:"DHA (Omega-3)",product:"Nordic Naturals, Prenatal DHA, 90 Soft Gels",when:"Morning with breakfast (needs fat)",why:"#1 brain-building nutrient for baby",icon:"",timesPerDay:1,defaultTimes:["08:00"],bottleSize:90,perDose:1,price:3256,note:"Take with food containing fat for best absorption. 480mg DHA + 205mg EPA per softgel.",dosageInfo:"1 softgel daily with a meal containing fat (eggs, avocado, etc.)",warnings:"Safe to take with prenatal. Best absorbed with fatty food. Some people get fishy burps - take with food or freeze the capsule.",explanation:"DHA ang pinaka-importante para sa brain ng baby! 60% ng brain ay fat, at DHA ang primary building block. Studies show na mga baby ng mga nanay na nag-supplement ng DHA may higher IQ, better attention span, at better vision. Nordic Naturals ang gold standard for fish oil quality.",budgetAlt:null},{id:"calcium",name:"Calcium Citrate + D3 (No Zinc)",product:"21st Century, Calcium Citrate + D3, 120 Tablets",when:"Lunch AND evening (split dose, 2+ hours away from prenatal)",why:"Bone support without stacking extra zinc",icon:"",timesPerDay:2,defaultTimes:["12:00","20:00"],bottleSize:120,perDose:1,price:1599,note:"Prefer calcium-only or calcium + D3 formula without added zinc. Keep 2+ hours away from prenatal iron.",dosageInfo:"1 tablet at LUNCH + 1 tablet at DINNER. Adjust total amount based on dietary calcium and OB-GYN advice.",warnings:"HUWAG sabayan ng Prenatal vitamin! Calcium and iron compete for absorption. Keep at least 2 hours apart.",explanation:"Goal is to close the calcium gap from food, not mega-dose. If food calcium is already high, lower supplemental dose may be enough.",budgetAlt:null},{id:"chlorella",name:"Chlorella",product:"Sun Chlorella, 500 mg, 120 Tablets",when:"Morning with breakfast",why:"The Ryzen formula - superfood that worked for kuya!",icon:"",timesPerDay:1,defaultTimes:["08:00"],bottleSize:120,perDose:3,price:4872,note:"Start with 1 tablet, increase to 3 over first week. Sun Chlorella uses pulverized cell wall for better absorption.",dosageInfo:"Week 1: Start with 1 tablet. Week 2: Increase to 2. Week 3+: Full dose of 3 tablets/day. 120 tabs = 40 days.",warnings:"Optional only. Start SLOWLY and stop if may stomach upset. Use trusted brands and clear with OB-GYN.",explanation:"Optional add-on ito, hindi core requirement. If okay ang tiyan and approved by OB-GYN, puwedeng ituloy. 120 tablets  3/day = 40 days supply.",budgetAlt:"NOW Foods Organic Chlorella 200 Tablets (1,500-2,000, 66 days supply)  mas maraming tablets, mas mura, mas matagal!"},{id:"choline",name:"Choline (Bitartrate)",product:"NOW Foods, Choline & Inositol, 500 mg, 100 Capsules",when:"Morning with breakfast",why:"Brain-development support to help reach daily choline target",icon:"",timesPerDay:1,defaultTimes:["08:00"],bottleSize:100,perDose:1,price:1450,note:"Use plain choline form. Aim total intake (food + supplement) near pregnancy target, not megadoses.",dosageInfo:"1 capsule daily with food. Count egg/food intake first, then top up only what is missing.",warnings:"Food-first approach is best. No need to stack multiple choline products.",explanation:"Most practical approach: food + simple choline top-up. Eggs, fish, meat, and dairy already contribute a lot.",budgetAlt:"Phosphatidylcholine (lecithin) capsules are another plain option if better tolerated."},{id:"vitd",name:"Vitamin D3 (Optional - Lab Guided)",product:"Solgar, Vitamin D3, 55 mcg (2,200 IU), 100 Vegetable Capsules",when:"Lunch with food (only if advised)",why:"Use when deficiency risk is confirmed",icon:"",timesPerDay:1,defaultTimes:["12:00"],bottleSize:100,perDose:1,price:1453,note:"Many prenatals already include vitamin D. Add extra only if OB-GYN/labs say needed.",dosageInfo:"Default: OFF. If advised, take 1 capsule with a fatty meal.",warnings:"Do not stack blindly with other vitamin D products. Keep total intake within OB-guided target.",explanation:"Vitamin D matters, but routine extra high-dose D3 is not required for everyone. Lab-guided use is safer.",budgetAlt:"NOW Foods Vitamin D-3 2,000 IU, 120 Softgels (800-1,000, 120 days)  20 more days supply at mas mura!"}],In=[{id:"m1",label:"Pregnancy Support Benefit ( / first payment)",amount:5e4,phase:"pregnancy",howTo:"Complete a consultation ( / mendan) with a support worker at Kawasaki Ward Office when you register the pregnancy. The current framework transitioned from  to  in 2025. First payment is 50,000 at pregnancy registration, with a second payment after birth under the same support framework.",where:`Kawasaki Ward Office ( / kawasaki kuyakusho)
210-8570 8
Phone: 044-201-3214 ( / kodomo katei ka)`,bring:"Pregnancy confirmation from clinic, residence card ( / zairyuu kaado), health insurance card ( / hokenshou), My Number card",deadline:"When registering pregnancy - do it at the SAME VISIT as getting boshi techo",tip:"DO NOT SKIP THE CONSULTATION. No consultation = no money. Kawasaki gives this as cash or vouchers - ask which one. Get this at the same visit as your boshi techo pickup to save a trip.",verifiedAt:"2026-02-11",sourceLinks:[{label:"Kawasaki: ",url:"https://www.city.kawasaki.jp/450/page/0000146038.html"}],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}]},{id:"m2",label:"Prenatal Checkup Vouchers ( / ninpu kenshin jushinpyou)",amount:135e3,phase:"pregnancy",howTo:"You receive 14 checkup vouchers when you get the Boshi Techo (). Each voucher covers 5,000-10,000+ per OB-GYN visit. Just present the voucher at each prenatal checkup and it reduces the bill.",where:`Kawasaki Ward Office - received together with boshi techo
 : 044-201-3214`,bring:"Same visit as boshi techo pickup",deadline:"Get early in pregnancy to use all 14 vouchers. The earlier you register, the more vouchers you use.",tip:"KEEP ALL RECEIPTS for amounts NOT covered by vouchers - these count toward  (iryouhi koujo) tax deduction at year end! Kawasaki increased support to around 135,000 total subsidy for eligible checkup tickets, and some visits still have co-pay depending on clinic. Ask at ward office for current ticket set details.",verifiedAt:"2026-02-11",sourceLinks:[{label:"Kawasaki:  (up to 135,000)",url:"https://www.city.kawasaki.jp/450/page/0000145999.html"}],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}]},{id:"m3",label:"Pension Exemption ( / sanzen sango menjo)",amount:66e3,phase:"pregnancy",howTo:"Apply for exemption from National Pension ( / kokumin nenkin) premiums for 4 months around the due date. Save ~16,500/month x 4 = ~66,000. These months STILL COUNT as paid toward pension record - free money basically.",where:`Kawasaki Ward Office pension counter ( / nenkin ka)
Phone: 044-201-3151
Or Kawasaki Pension Office (): 044-233-0181
210-0005 12-17`,bring:"Boshi Techo (for due date proof), My Number card, residence card",deadline:"Apply during pregnancy, before due date month. Don't wait!",tip:'They say "automatic" pero kailangan mag-apply! If Naomi is on employer pension ( / kousei nenkin), different rules - ask her HR department.',phones:[{label:"Kawasaki Ward ",number:"044-201-3151"},{label:"Kawasaki Pension Office",number:"044-233-0181"}]},{id:"m4",label:"Childbirth Allowance ( / shussan ikuji ichijikin)",amount:5e5,phase:"birth",howTo:"Use the Direct Payment System ( / chokusetsu shiharai seido) through the hospital. The 500,000 goes straight from insurance to the hospital. You only pay the difference (if any). If delivery costs LESS than 500,000, you get the difference BACK!",where:`Arranged at your delivery hospital/clinic. For refund: Health insurance office.
If National Health Insurance ( / kokuho): Kawasaki Ward Office 044-201-3151
If Employer Insurance ( / shaho): Ask employer HR`,bring:"Health insurance card. Sign the Direct Payment agreement form at the hospital during pregnancy.",deadline:"Arrange BEFORE delivery day. Ask hospital about it at your first or second visit.",tip:"Budget hospitals in Kawasaki area: 350,000-450,000 = potential refund of 50,000-150,000! Weekday daytime delivery is cheapest. Ask multiple hospitals for price lists - they vary a LOT. Midwife birth centers ( / josanin) are often cheapest.",phones:[{label:"Kawasaki Ward ",number:"044-201-3151"}]},{id:"m5",label:"Birth Support Benefit ( / second payment)",amount:5e4,phase:"birth",howTo:"Complete the post-birth consultation ( / mendan) with a support worker AFTER the baby is born. This is the second payment in the  framework (transitioned from the older  naming).",where:`Kawasaki Ward Office ()
: 044-201-3214`,bring:"Boshi Techo, birth certificate, My Number card",deadline:"After submitting birth registration ( / shussei todoke)",tip:"Do this at the SAME TIME as registering the birth to save a trip. Same rules as pregnancy grant - requires consultation.",verifiedAt:"2026-02-11",sourceLinks:[{label:"Kawasaki: ",url:"https://www.city.kawasaki.jp/450/page/0000146038.html"}],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}]},{id:"m6",label:"Delivery Refund (if cost < 500k)",amount:1e5,phase:"birth",howTo:"If your delivery cost less than 500,000, apply to get the difference refunded. Example: delivery cost 400,000  get 100,000 back. This is separate from the lump-sum - it's the leftovers.",where:`Health insurance office:
 (National): Kawasaki Ward Office 044-201-3151
 (Employer): Your employer HR or insurance association ( / kenpokumiai)`,bring:"Hospital invoice/receipt showing actual delivery cost, copy of Direct Payment agreement form",deadline:"2 years from delivery date, pero do it within 1 month for fastest payment",tip:"Amount shown (100,000) is estimate. Actual refund depends on your hospital's pricing. Weekday daytime = cheapest. Ask hospitals in Kawasaki for their price list before deciding where to deliver!",phones:[{label:"Kawasaki Ward ",number:"044-201-3151"}]},{id:"m7",label:"Employer Additional Benefit ( / fuka kyuufu)",amount:5e4,phase:"birth",howTo:"Some employer health insurance associations ( / kenkou hoken kumiai) pay EXTRA money on top of the standard 500,000. Amount varies: 10,000-90,000. MANY PEOPLE DON'T KNOW THIS EXISTS. Just ask!",where:`Shinji's employer HR department
Naomi's employer HR department
Your health insurance association ( / kenpokumiai)`,bring:"Just ask them! They will tell you the process.",deadline:"Ask early during pregnancy so you know what to expect",tip:"Only for employer insurance ( / shakai hoken), NOT National Health Insurance ( / kokuho). Check BOTH Shinji's and Naomi's employers. This is FREE EXTRA MONEY just for asking.",phones:[]},{id:"m8",label:"Child Allowance Year 1 ( / jidou teate)",amount:18e4,phase:"ongoing",howTo:"Apply for 15,000/month (age 0-3). Since 2024 reform: NO income limits - everyone gets it! Extended to age 18. Payment every 2 months. Over 18 years per child: 2,340,000. For 2 kids (Ryzen + Baby): 25,000-30,000/month!",where:`Kawasaki Ward Office ()
: 044-201-3214`,bring:"Birth certificate, both parents' My Number cards, bank account info (for deposits), health insurance card",deadline:"WITHIN 15 DAYS of birth! Late = lost months forever. Huwag mag-late! Apply the SAME DAY or day after birth registration.",tip:"This is the BIGGEST ongoing benefit. 15,000/month for 3 years + 10,000/month until 18. For 2 kids that's 4,680,000 total over 18 years. If you have a 3rd child: 30,000/month = 6,480,000! Amount shown is Year 1 only (15,000 x 12).",verifiedAt:"2026-02-11",sourceLinks:[{label:"Children and Families Agency: Child Allowance Guide",url:"https://www.cfa.go.jp/seisaku/teate-seido/annai"},{label:"Children and Families Agency: Child Allowance Reform Summary",url:"https://www.cfa.go.jp/seisaku/teate-seido/mottoouen"},{label:"Kawasaki: ",url:"https://www.city.kawasaki.jp/450/page/0000169414.html"}],phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}]},{id:"m9",label:"Tax Refund ( / iryouhi koujo)",amount:4e4,phase:"ongoing",howTo:"File Kakutei Shinkoku ( / kakutei shinkoku) tax return in Feb-March. Claim ALL medical expenses: checkup co-pays, delivery costs, hospital meals, dental, prescriptions, bus/train fare to hospitals. Formula: (total medical - 100,000) x tax rate = refund.",where:`Kawasaki-Minami Tax Office ( / kawasaki minami zeimusho)
210-0006 3-18
Phone: 044-222-7531
Or online via e-Tax (www.e-tax.nta.go.jp)`,bring:"ALL medical receipts, transportation log, My Number card, bank account info for refund deposit",deadline:"February-March filing period (for previous year's expenses)",tip:"I-save LAHAT ng resibo! Keep a transport log: date, route, fare, purpose. Even taxi fare during labor counts! Combine all family expenses (Shinji + Naomi + Ryzen + baby) in one return for bigger deduction. Even with low income, FILE - it triggers automatic insurance premium reductions!",phones:[{label:"Kawasaki-Minami Tax Office",number:"044-222-7531"}]},{id:"m10",label:"Municipal Baby Gift ( / jichitai oiwai)",amount:5e4,phase:"birth",howTo:"Many cities give cash gifts ( / shussan iwaikin), shopping vouchers, baby goods packages, rice, or point card credits. Kawasaki has various programs - the only way to know the current offerings is to ASK.",where:`Kawasaki Ward Office - child/family support counter
: 044-201-3214
Also check:  (kosodate shien ka)`,bring:"Boshi Techo, birth certificate",deadline:"Usually within a few months of birth - ask for specific deadlines",tip:"Wag mahiya! Some programs are not advertised. Go through EVERY counter at Kawasaki Ward Office and ask what's available for families with a new baby. Amount varies wildly: 0 to 100,000+. The amount shown (50,000) is an estimate.",phones:[{label:"Kawasaki Ward ",number:"044-201-3214"}]},{id:"m11",label:"Maternity Leave Allowance (shussan teatekin)",amount:43e4,phase:"birth",howTo:"If enrolled in employee health insurance, apply for maternity leave allowance through employer and insurer. Coverage is generally 42 days before birth to 56 days after birth (98 days total for single birth), and payment is about 2/3 of standard salary.",where:"Your employer HR and health insurance association. Not paid under National Health Insurance.",bring:"Doctor certificate form, leave dates, bank account details, employer paperwork.",deadline:"Apply after leave starts; submit as soon as HR gives forms.",tip:"One of the biggest pregnancy-period cash supports for employed moms. Amount shown is an estimate and varies by salary and leave dates.",verifiedAt:"2026-02-11",sourceLinks:[{label:"Kyokai Kenpo: ",url:"https://www.kyoukaikenpo.or.jp/g3/sb3270/r148/"}],phones:[]},{id:"m12",label:"Childcare Leave Benefit (ikuji kyuugyou kyuufu)",amount:12e5,phase:"ongoing",howTo:"If covered by employment insurance and eligible for childcare leave, apply through employer plus Hello Work. Standard payout is 67% of wage for the first 180 days, then 50% after that. New add-on support (around 13%) can apply for specific postpartum leave periods if conditions are met.",where:"Employer HR and Hello Work",bring:"Employment insurance details, leave schedule, wage records, and HR application forms.",deadline:"Start paperwork before childcare leave begins to avoid payout delays.",tip:"For many families, this is the largest first-year childcare cash support after childbirth.",verifiedAt:"2026-02-11",sourceLinks:[{label:"MHLW: ",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/0000135090_00001.html"},{label:"MHLW Leaflet (R7)",url:"https://www.mhlw.go.jp/content/11600000/001421353.pdf"}],phones:[]},{id:"m13",label:"Social Insurance Exemption During Childcare Leave",amount:2e5,phase:"ongoing",howTo:"During approved childcare leave, employee social insurance premiums can be exempted (health insurance plus pension). This is handled via employer payroll and insurance procedures.",where:"Employer HR or payroll team",bring:"Childcare leave approval records and HR forms.",deadline:"Confirm exemption setup before first leave month payroll closes.",tip:"This is savings (money not paid), not a separate cash transfer. Amount shown is an estimate.",verifiedAt:"2026-02-11",sourceLinks:[{label:"MHLW Leaflet (R7)",url:"https://www.mhlw.go.jp/content/11600000/001421353.pdf"}],phones:[]},{id:"m14",label:"Kawasaki Child Medical Subsidy",amount:8e4,phase:"ongoing",howTo:"After birth registration and baby insurance enrollment, apply for child medical subsidy at the ward office. This reduces out-of-pocket medical costs for pediatric visits, prescriptions, and treatment.",where:"Kawasaki Ward Office child and family counter",bring:"Baby health insurance card, parent ID, residence details, and account info if requested.",deadline:"Apply soon after baby insurance card is issued.",tip:"Kawasaki announced phased expansion toward high-school-age support. Check current age range and co-pay rules at application time.",verifiedAt:"2026-02-11",sourceLinks:[{label:"Kawasaki: ",url:"https://www.city.kawasaki.jp/450/page/0000181307.html"}],phones:[{label:"Kawasaki Ward child and family section",number:"044-201-3214"}]},{id:"m15",label:"Kawasaki Cost-of-Living Child Support",amount:2e4,phase:"ongoing",howTo:"Kawasaki implemented a one-time support payment for child-raising households at JPY 20,000 per eligible child under the published 2025 program.",where:"Kawasaki City official child policy program page and ward guidance",bring:"Application or confirmation documents based on Kawasaki rules (if required).",deadline:"Time-limited program. Example: the 2025 program had a specific filing deadline as published by Kawasaki.",tip:"Treat this as campaign-style support: check each fiscal year if a new one-time child payment is available.",verifiedAt:"2026-02-11",sourceLinks:[{label:"Kawasaki:  (20,000 per eligible child)",url:"https://www.city.kawasaki.jp/450/page/0000182550.html"}],phones:[]},{id:"m16",label:"National Health Insurance Premium Reduction (pregnancy/postpartum)",amount:4e4,phase:"birth",howTo:"If enrolled in National Health Insurance (kokuho), apply for pregnancy/postpartum premium reduction at the ward office after pregnancy registration and childbirth filing. Reduction amount depends on your premium bracket and period.",where:"Kawasaki Ward Office insurance and pension counter",bring:"Boshi techo, insurance card, parent ID, and required ward forms.",deadline:"Apply as early as possible once eligible periods are open.",tip:"This is often missed because families assume it is automatic. Ask specifically about maternal premium reduction and under-school-age child premium reduction.",verifiedAt:"2026-02-11",sourceLinks:[{label:"Kawasaki: ",url:"https://www.city.kawasaki.jp/350/page/0000178815.html"}],phones:[{label:"Kawasaki Ward insurance and pension section",number:"044-201-3151"}]}],pi=[{id:"v1",visit:1,weekRange:"8-11",label:"Initial checkup - confirm pregnancy, heartbeat"},{id:"v2",visit:2,weekRange:"12-15",label:"Nuchal translucency screening, blood tests"},{id:"v3",visit:3,weekRange:"16-19",label:"Gender check (maybe!), growth measurement"},{id:"v4",visit:4,weekRange:"20-23",label:"Detailed anatomy scan, halfway point!"},{id:"v5",visit:5,weekRange:"24",label:"Glucose tolerance test, growth check"},{id:"v6",visit:6,weekRange:"26",label:"Blood pressure, weight, baby position"},{id:"v7",visit:7,weekRange:"28",label:"Start biweekly visits, Rh antibody check"},{id:"v8",visit:8,weekRange:"30",label:"Growth scan, amniotic fluid check"},{id:"v9",visit:9,weekRange:"32",label:"Baby position check, birth plan discussion"},{id:"v10",visit:10,weekRange:"34",label:"GBS test, cervix check"},{id:"v11",visit:11,weekRange:"36",label:"Weekly visits start, NST monitoring"},{id:"v12",visit:12,weekRange:"37",label:"Full term! Ready check, pelvic exam"},{id:"v13",visit:13,weekRange:"38-39",label:"Cervix dilation check, baby engagement"},{id:"v14",visit:14,weekRange:"40",label:"Due date visit, induction discussion if needed"}],Ww={prenatal:{enabled:!0,times:["08:00"],timesPerDay:1},dha:{enabled:!0,times:["08:00"],timesPerDay:1},calcium:{enabled:!0,times:["12:00","20:00"],timesPerDay:2},chlorella:{enabled:!0,times:["08:00"],timesPerDay:1},choline:{enabled:!0,times:["08:00"],timesPerDay:1},vitd:{enabled:!1,times:["12:00"],timesPerDay:1}},Pw=[{time:"08:00 - BREAKFAST",icon:"",supps:["Prenatal Multivitamin","DHA (Omega-3)","Choline","Chlorella"],note:"Take with food that has fat (eggs, avocado). Keep this as the core morning stack.",tagNote:"Sabay-sabay to sa breakfast! Need ng fat para ma-absorb ang DHA."},{time:"12:00 - LUNCH",icon:"",supps:["Calcium (1st dose)"],note:"AT LEAST 2 hours after breakfast supplements. Add extra Vitamin D3 only if advised.",tagNote:"2+ HOURS after breakfast supplements! Iron at calcium nag-aagawan kasi."},{time:"20:00 - DINNER/BEFORE BED",icon:"",supps:["Calcium (2nd dose)"],note:"Split calcium dose for better absorption.",tagNote:"Second calcium dose para hindi sabay sa prenatal iron."}],I0=w.createContext();function Vt(s,l){const u=w.useRef(l),[c,m]=w.useState(()=>{try{const p=localStorage.getItem(s);return p?JSON.parse(p):l}catch{return l}}),f=w.useRef(!1);return w.useEffect(()=>{dm(s).then(p=>{if(p!==null){const g=localStorage.getItem(s);(!g||g==="null"||g==='""'||g==="{}"||g==="[]")&&(typeof p=="object"?Array.isArray(p)?p.length>0:Object.keys(p).length>0:p)&&m(p)}}).catch(()=>{})},[s]),w.useEffect(()=>{if(typeof window>"u")return;const p=()=>{try{const g=localStorage.getItem(s);m(g?JSON.parse(g):u.current)}catch{m(u.current)}};return window.addEventListener("peggy-backup-restored",p),()=>window.removeEventListener("peggy-backup-restored",p)},[s]),w.useEffect(()=>{localStorage.setItem(s,JSON.stringify(c)),Ul(s,c);const p=typeof window<"u"&&window.__peggySyncApplying;f.current&&typeof window<"u"&&!p?window.dispatchEvent(new CustomEvent("peggy-local-changed",{detail:{key:s}})):f.current=!0},[s,c]),[c,m]}const Gw=Ww,Vw=Object.freeze({supps:!0,work:!0,checkups:!0,mood:!0});function Pg(){return{enabled:!1,name:"",lat:"",lng:"",radiusMeters:180,homeName:"",homeLat:"",homeLng:"",homeRadiusMeters:220,autoHours:8,awayMinutesForWork:90,lastAutoLogDate:"",lastInsideAt:"",lastAutoReason:""}}function Xw(){return{payrollProfiles:{naomi:{delayMonths:1,monthlyAdjustment:0},husband:{delayMonths:1,monthlyAdjustment:0}}}}function Qw({children:s}){const[l,u]=Vt("baby-prep-checked",{}),[c,m]=Vt("baby-prep-daily",{}),[f,p]=Vt("baby-prep-money",{}),[g,v]=Vt("baby-prep-due","2026-10-04"),[b,x]=Vt("baby-prep-theme","light"),[M,C]=Vt("baby-prep-icon-style","minimal-clean"),[R,L]=Vt("baby-prep-salary",[]),[W,P]=Vt("baby-prep-pay-rates",[]),[Z,xe]=Vt("baby-prep-checkups",{}),[te,ue]=Vt("baby-prep-moods",[]),[se,ae]=Vt("baby-prep-task-bundle-filter","all"),[V,K]=Vt("baby-prep-health-calendar-visibility",{...Vw}),[O,le]=Vt("baby-prep-planner",{}),[ve,ce]=Vt("baby-prep-doctor",{name:"",hospital:"",phone:"",address:"",notes:""}),[fe,we]=Vt("baby-prep-contacts",[{id:"1",name:"Naomi",phone:"",relationship:"Wife / Mommy"},{id:"2",name:"Shinji",phone:"",relationship:"Husband / Dada"},{id:"3",name:"Tom",phone:"",relationship:"Ate / Sister"}]),[Ce,_]=Vt("baby-prep-tax",{annualIncome:"",spouseIncome:"",medicalExpenses:"",socialInsurance:""}),[Q,Se]=Vt("baby-prep-attendance",{}),[Y,ge]=Vt("baby-prep-attendance-husband",{}),[k,z]=Vt("baby-prep-family-config",{includeHusband:!0}),[re,N]=Vt("baby-prep-finance-config",Xw()),[F,X]=Vt("baby-prep-expenses",[]),[U,Te]=Vt("baby-prep-work-location",Pg()),[Ae,De]=Vt("baby-prep-work-location-husband",Pg()),[tt]=Vt("baby-prep-supp-schedule",Gw),[de,Oe]=Vt("baby-prep-supp-taken",{}),[Ve,Xe]=Vt("baby-prep-supp-bottles",{}),Ze=()=>x(G=>G==="dark"?"light":"dark"),lt=w.useRef(new Set),qe=G=>u(oe=>({...oe,[G]:!oe[G]})),rt=(G,oe=0)=>{const he=new Date().toDateString(),_e=`${G}-${oe}-${he}`;if(c[_e]||lt.current.has(_e))return;lt.current.add(_e),m(T=>({...T,[_e]:!0}));const ut=`${G}-${oe}`;Oe(T=>({...T,[ut]:new Date().toISOString()}));const wt=cn.find(T=>T.id===G);wt&&Xe(T=>{const me=T[G]||{startDate:new Date().toISOString(),remaining:wt.bottleSize},Ne=Math.max(0,me.remaining-wt.perDose);return Ne<=0?{...T,[G]:{startDate:new Date().toISOString(),remaining:wt.bottleSize}}:{...T,[G]:{...me,remaining:Ne}}})},Wt=(G,oe=0)=>{const he=new Date().toDateString(),_e=`${G}-${oe}-${he}`;if(!c[_e]&&!lt.current.has(_e))return;lt.current.delete(_e),m(wt=>{const T={...wt};return delete T[_e],T});const ut=cn.find(wt=>wt.id===G);ut&&Xe(wt=>{const T=wt[G]||{startDate:new Date().toISOString(),remaining:ut.bottleSize};return{...wt,[G]:{...T,remaining:Math.min(ut.bottleSize,T.remaining+ut.perDose)}}})},xt=(G,oe=0)=>{const he=new Date().toDateString();return c[`${G}-${oe}-${he}`]||!1},ye=G=>{const oe=new Date().toDateString();return c[`${G}-${oe}`]||c[`${G}-0-${oe}`]||!1},Me=G=>p(oe=>({...oe,[G]:!oe[G]})),Qe=G=>L(oe=>[...oe,{...G,id:Date.now().toString(36)}]),$e=G=>L(oe=>oe.filter(he=>he.id!==G)),kt=G=>P(oe=>[...oe,{...G,id:Date.now().toString(36)+Math.random().toString(36).slice(2,5)}]),St=G=>P(oe=>oe.filter(he=>he.id!==G)),ft=(G,oe)=>P(he=>he.map(_e=>_e.id===G?{..._e,...oe}:_e));w.useEffect(()=>{if(!Array.isArray(W)||W.length>0||!Array.isArray(R)||R.length===0)return;const G=R.map(oe=>{const he=String(oe?.month||"").trim(),_e=Number(oe?.amount)||0;return!he||_e<=0?null:{id:`mig-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`,person:"naomi",basis:"monthly",rate:_e,effectiveFrom:`${he}-01`,hoursPerDay:"",workDaysPerMonth:"",note:String(oe?.memo||"Migrated from legacy salary tracker")}}).filter(Boolean);G.length&&P(G)},[W,R,P]);const We={checked:l,toggle:qe,dailySupp:c,toggleSupp:rt,undoSupp:Wt,isSuppTaken:xt,isSuppTakenLegacy:ye,moneyClaimed:f,toggleMoney:Me,dueDate:g,setDueDate:v,salary:R,addSalary:Qe,removeSalary:$e,payRates:W,addPayRate:kt,removePayRate:St,updatePayRate:ft,checkups:Z,updateCheckup:(G,oe)=>xe(he=>({...he,[G]:{...he[G],...oe}})),moods:te,addMood:G=>ue(oe=>[{...G,id:Date.now().toString(36),date:new Date().toISOString()},...oe]),taskBundleFilter:se,setTaskBundleFilter:ae,healthCalendarVisibility:V,setHealthCalendarVisibility:K,planner:O,addPlan:(G,oe)=>{const he=String(G||"").trim();if(!he)return;const _e=String(oe?.title||"").trim();if(!_e)return;const ut=String(oe?.time||"").trim(),wt=String(oe?.location||"").trim(),T=String(oe?.notes||"").trim(),me=!!oe?.done,Ne=Array.isArray(oe?.taskIds)?oe.taskIds.map(Je=>String(Je||"").trim()).filter(Boolean):[],He=Date.now().toString(36)+Math.random().toString(36).slice(2,6);le(Je=>{const at=Array.isArray(Je?.[he])?Je[he]:[];return{...Je,[he]:[...at,{id:He,time:ut,title:_e,location:wt,notes:T,done:me,taskIds:Ne}]}}),me&&Ne.length&&u(Je=>{const at={...Je};for(const yt of Ne)at[yt]=!0;return at})},updatePlan:(G,oe,he)=>{const _e=String(G||"").trim(),ut=String(oe||"").trim();if(!_e||!ut)return;const T=(Array.isArray(O?.[_e])?O[_e]:[]).find(He=>He?.id===ut)||null,me=he&&Object.prototype.hasOwnProperty.call(he,"done")?!!he.done:!!T?.done,Ne=he&&Object.prototype.hasOwnProperty.call(he,"taskIds")?Array.isArray(he.taskIds)?he.taskIds.map(He=>String(He||"").trim()).filter(Boolean):[]:Array.isArray(T?.taskIds)?T.taskIds.map(He=>String(He||"").trim()).filter(Boolean):[];le(He=>{const Je=Array.isArray(He?.[_e])?He[_e]:[];if(!Je.length)return He;const at=Je.map(yt=>{if(yt?.id!==ut)return yt;const Oa=he&&Object.prototype.hasOwnProperty.call(he,"title")?String(he.title||"").trim():String(yt?.title||"").trim(),ba=he&&Object.prototype.hasOwnProperty.call(he,"taskIds")?Array.isArray(he.taskIds)?he.taskIds.map(Ia=>String(Ia||"").trim()).filter(Boolean):[]:Array.isArray(yt?.taskIds)?yt.taskIds.map(Ia=>String(Ia||"").trim()).filter(Boolean):[];return{...yt,...he,title:Oa,time:he&&Object.prototype.hasOwnProperty.call(he,"time")?String(he.time||"").trim():String(yt?.time||"").trim(),location:he&&Object.prototype.hasOwnProperty.call(he,"location")?String(he.location||"").trim():String(yt?.location||"").trim(),notes:he&&Object.prototype.hasOwnProperty.call(he,"notes")?String(he.notes||"").trim():String(yt?.notes||"").trim(),done:he&&Object.prototype.hasOwnProperty.call(he,"done")?!!he.done:!!yt?.done,taskIds:ba}});return{...He,[_e]:at}}),me&&Ne.length&&u(He=>{const Je={...He};for(const at of Ne)Je[at]=!0;return Je})},removePlan:(G,oe)=>{const he=String(G||"").trim(),_e=String(oe||"").trim();!he||!_e||le(ut=>{const wt=Array.isArray(ut?.[he])?ut[he]:[];if(!wt.length)return ut;const T=wt.filter(Ne=>Ne?.id!==_e),me={...ut};return T.length?me[he]=T:delete me[he],me})},togglePlanDone:(G,oe)=>{const he=String(G||"").trim(),_e=String(oe||"").trim();if(!he||!_e)return;const wt=(Array.isArray(O?.[he])?O[he]:[]).find(Ne=>Ne?.id===_e)||null,me=(wt?!wt.done:!1)&&Array.isArray(wt?.taskIds)?wt.taskIds.map(Ne=>String(Ne||"").trim()).filter(Boolean):[];le(Ne=>{const He=Array.isArray(Ne?.[he])?Ne[he]:[];if(!He.length)return Ne;const Je=He.map(at=>at?.id===_e?{...at,done:!at.done}:at);return{...Ne,[he]:Je}}),me.length&&u(Ne=>{const He={...Ne};for(const Je of me)He[Je]=!0;return He})},doctor:ve,setDoctor:ce,contacts:fe,addContact:G=>we(oe=>[...oe,{...G,id:Date.now().toString(36)}]),removeContact:G=>we(oe=>oe.filter(he=>he.id!==G)),updateContact:(G,oe)=>we(he=>he.map(_e=>_e.id===G?{..._e,...oe}:_e)),taxInputs:Ce,setTaxInputs:_,attendance:Q,markAttendance:(G,oe)=>{Se(he=>({...he,[G]:oe}))},getAttendance:G=>Q[G]||null,removeAttendance:G=>{const oe=String(G||"").trim();oe&&Se(he=>{const _e=he&&typeof he=="object"?he:{};if(!Object.prototype.hasOwnProperty.call(_e,oe))return _e;const ut={..._e};return delete ut[oe],ut})},workLocation:U,setWorkLocation:Te,husbandAttendance:Y,markHusbandAttendance:(G,oe)=>{ge(he=>({...he,[G]:oe}))},getHusbandAttendance:G=>Y[G]||null,removeHusbandAttendance:G=>{const oe=String(G||"").trim();oe&&ge(he=>{const _e=he&&typeof he=="object"?he:{};if(!Object.prototype.hasOwnProperty.call(_e,oe))return _e;const ut={..._e};return delete ut[oe],ut})},husbandWorkLocation:Ae,setHusbandWorkLocation:De,familyConfig:k,setFamilyConfig:z,financeConfig:re,setFinanceConfig:N,expenses:F,addExpense:G=>{const oe=String(G?.date||"").trim(),he=Math.max(0,Number(G?.amount)||0);if(!oe||he<=0)return;const _e=String(G?.category||"other").trim()||"other",ut=String(G?.note||"").trim(),wt=Date.now().toString(36)+Math.random().toString(36).slice(2,6);X(T=>[{id:wt,date:oe,category:_e,amount:he,note:ut},...Array.isArray(T)?T:[]])},removeExpense:G=>{const oe=String(G||"").trim();oe&&X(he=>Array.isArray(he)?he.filter(_e=>_e?.id!==oe):[])},suppSchedule:tt,suppLastTaken:de,suppBottles:Ve,resetBottle:G=>{const oe=cn.find(he=>he.id===G);oe&&Xe(he=>({...he,[G]:{startDate:new Date().toISOString(),remaining:oe.bottleSize}}))},theme:b,toggleTheme:Ze,iconStyle:M,setIconStyle:C};return n.jsx(I0.Provider,{value:We,children:s})}function Fn(){return w.useContext(I0)}const Zw={address:"Kawasaki-shi Kawasaki-ku Oda 5-28-9",wardOffice:{name:"Kawasaki Ward Office ()",address:"8",mainPhone:"044-201-3113",departments:{childFamily:{name:"Child & Family Support ()",phone:"044-201-3214"},insurance:{name:"Insurance & Pension ()",phone:"044-201-3151"},welfare:{name:"Welfare ()",phone:"044-201-3216"},housing:{name:"Housing ()",phone:"044-200-2994"},tax:{name:"Tax ()",phone:"044-200-2205"}},hours:"Mon-Fri 8:30-17:00",note:"Near Kawasaki Station, walking distance from your area"},taxOffice:{name:"Kawasaki-Minami Tax Office ()",address:"3-18",phone:"044-222-7531",note:"For  (tax return filing)"},pensionOffice:{name:"Kawasaki Pension Office ()",address:"12-17",phone:"044-233-0181",note:"For pension exemption questions"},healthCenter:{name:"Kawasaki Health & Welfare Center ()",address:"8 (same building as ward office)",phone:"044-201-3212",note:"For maternity classes, postpartum care, newborn visits"},urHousing:{name:"UR Kawasaki (UR )",phone:"0120-411-363",note:"For danchi/UR housing - you plan to move in June. Apply early!"},kanagawaHousing:{name:"Kanagawa Prefecture Housing ()",phone:"045-651-1854",note:"For  (prefectural housing)"},philEmbassy:{name:"Philippine Embassy Tokyo",address:"5-15-5 Roppongi, Minato-ku, Tokyo",phone:"03-5562-1600",note:"For baby birth registration (dual citizenship). Also has consulate in Yokohama."},philConsulateYokohama:{name:"Philippine Consulate Yokohama",phone:"045-681-5006",note:"Closer to Kawasaki than Tokyo embassy"},internationalExchange:{name:"Kawasaki International Association ()",address:"11-2 (Kawasaki Frontier Building 2F)",phone:"044-435-7000",note:"Free Japanese classes, translation help, tax filing support"},danchiInfo:{note:"You plan to move to danchi in June. Key info:",tips:["Apply through UR (0120-411-363) or City Hall housing department (044-200-2994)","Kawasaki-ku has several danchi options near your area","Families with children get priority in some lotteries","Rent is income-based - lower income = lower rent","Bring proof of income, residence cards, family register","Check  and  AND UR - all different systems","UR danchi does not require income limits but city/prefectural housing does","Apply 2-3 months before desired move-in date"]}},Jw=[{phase:"Pregnancy (ASAP)",icon:"",items:[{title:"Mother-Child Health Handbook ()",value:"Priceless - unlocks everything else",details:["Go to Kawasaki Ward Office () immediately","Bring: Pregnancy confirmation from clinic, residence card, health insurance card, My Number card","You receive: The handbook (used at every checkup and at birth), 14 prenatal checkup vouchers, information about local programs","Some cities give additional gifts at this point - ASK at Kawasaki Ward Office","Kawasaki Ward Office: 044-201-3214 ()"]},{title:"Pregnancy/Childbirth Support Grant ()",value:"100,000 CASH (or equivalent vouchers)",details:["NATIONAL program started 2023 - this is new!","When you register pregnancy (): 50,000","When you register birth (): 50,000","Total: 100,000","Requires brief consultation with support worker () at each stage","DO NOT SKIP THE CONSULTATION - no consultation = no money","Applied for at Kawasaki Ward Office","Some municipalities give cash, others give shopping vouchers or point cards - ask what Kawasaki gives","Kawasaki contact: 044-201-3214"]},{title:"Prenatal Checkup Vouchers ()",value:"70,000-120,000",details:["14 checkup vouchers, each covering 5,000-10,000+ per visit","Received when getting Mother-Child Handbook","Present at each OB-GYN visit","Some municipalities offer additional ultrasound vouchers","KEEP ALL RECEIPTS for amounts not covered - counts toward  tax deduction!"]},{title:"Free Dental Checkup ()",value:"5,000-10,000",details:["Kawasaki offers free dental checkup for pregnant women","Usually 1 free checkup during pregnancy","Ask at Ward Office when getting the handbook","Additional dental treatment costs count toward medical expense tax deduction","Dental problems during pregnancy can cause premature birth - this is important!"]},{title:"Pension Exemption ()",value:"~65,000 saved (4 months)",details:["AUTOMATIC exemption from pension premiums for 4 months around due date","1 month before due date month through 2 months after","Saves ~16,500/month x 4 = ~66,000","These months STILL COUNT as paid toward pension record","Apply at Kawasaki Ward Office pension counter (): 044-201-3151",'They say "automatic" pero kailangan mag-apply!',"If on employer pension (): Different rules through employer","Kawasaki Pension Office: 044-233-0181"]},{title:"Health Insurance Premium Reduction ()",value:"Potentially 100,000+/year",details:["If household income is low, you may qualify for:","7-wari reduction (70% off): Very low income","5-wari reduction (50% off): Low income","2-wari reduction (20% off): Moderate-low income","Applied automatically based on tax filing","IMPORTANT: You MUST file a tax return even if income is zero!","Many foreigners miss this because they don't file returns when income is low","Kawasaki insurance counter: 044-201-3151"]},{title:"Maternity Mark Badge ()",value:"Free",details:["Free badge from Ward Office or train stations","Priority seating on trains/buses","Helpful in early months when not showing yet"]},{title:"Free Maternity Classes (/)",value:"Free",details:["Kawasaki Health Center offers free prenatal classes","Topics: Birth prep, breastfeeding, newborn care, nutrition","Good networking with other parents","Kawasaki Health Center: 044-201-3212"]},{title:"Pregnancy Sickness Leave Benefit ()",value:"2/3 of daily salary (if applicable)",details:["If Naomi has severe morning sickness requiring time off work","Must be enrolled in employer health insurance ()","Doctor must certify the condition","Covers 2/3 of daily salary for the sick leave period"]}]},{phase:"Delivery",icon:"",items:[{title:"Childbirth Lump-Sum Allowance ()",value:"500,000",details:["Use Direct Payment System () through hospital","If delivery costs less than 500,000: GET THE DIFFERENCE BACK","Normal delivery at budget hospital: 350,000-450,000 = potential refund 50,000-150,000!","Kawasaki area hospital prices vary widely - ask multiple hospitals","Apply refund at health insurance office (: Ward Office / : employer)"]},{title:"Additional Insurance Benefit ()",value:"0-90,000 extra",details:["MANY PEOPLE DON'T KNOW THIS EXISTS","Some employer health insurance associations pay EXTRA on top of 500,000","Amount varies: 10,000-90,000","Ask Shinji's and Naomi's employer HR departments","Only for employer insurance (), not National Health Insurance ()","This is FREE EXTRA MONEY just for asking"]},{title:"High-Cost Medical Care ()",value:"Potentially 100,000-300,000 back",details:["If monthly medical costs exceed ~80,000-90,000","GET THE LIMIT CERTIFICATE () BEFORE DELIVERY","Applies to: C-section, complications, NICU stays","Normal delivery NOT covered (not classified as medical treatment)","But if anything goes wrong, it kicks in automatically","Apply at: Kawasaki Ward Office insurance counter (044-201-3151)"]},{title:"Premature Baby Medical Care ()",value:"Full coverage (if needed)",details:["If baby is born premature or low birth weight","Government covers ALL medical costs for the baby","Includes NICU hospitalization","Apply at Ward Office with doctor's documentation","Hopefully not needed, but important to know about"]}]},{phase:"Maternity/Paternity Leave",icon:"",items:[{title:"Maternity Leave Allowance ()",value:"~2/3 of salary x 98 days",details:["For women on employer health insurance ()","42 days before due date + 56 days after birth","Example: Monthly salary 200,000  ~430,000 total","Apply through employer"]},{title:"Childcare Leave Benefits ()",value:"67%50% of salary for up to 2 years",details:["First 180 days: 67% of salary","After 180 days: 50% of salary","Can extend until child is 2 years old","BOTH PARENTS can take this - Shinji too!","Papa/Mama Plus: if both parents take leave, extends to 14 months","Apply through Hello Work via employer","Example: 200,000/month salary  134,000/month first 6 months, then 100,000/month"]},{title:"Social Insurance Premium Exemption ()",value:"Potentially 200,000+ saved/year",details:["During childcare leave: NO social insurance premiums","Both employee AND employer portions exempted","Pension record still maintained as if paid","Applies to health insurance AND pension","Automatic through employer - confirm with HR"]}]},{phase:"After Birth",icon:"",items:[{title:"Birth Registration ()",value:"Required",details:["DEADLINE: 14 days after birth!","Kawasaki Ward Office, bring birth certificate from hospital + boshi techo","Must complete before applying for anything else","Pre-fill the form before delivery to save time"]},{title:"Child Allowance () - REFORMED 2024",value:"2,340,000 per child over 18 years",details:["2024 reform: Income limits REMOVED - everyone gets it!","Extended to age 18 (was 15)","Age 0-3: 15,000/month","Age 3-18 (1st/2nd child): 10,000/month","Total per child over 18 years: 2,340,000","Total for 2 children (Ryzen + Baby): ~4,680,000","Payment: Every 2 months","APPLY WITHIN 15 DAYS OF BIRTH at Kawasaki Ward Office","LATE APPLICATION = LOST MONTHS. Huwag mag-late!","For 3rd child: 30,000/month = 6,480,000 over 18 years!","Kawasaki contact: 044-201-3214"]},{title:"Child Medical Expense Subsidy ()",value:"50,000-100,000+/year in savings",details:["Kawasaki: Free medical care for children until age 15","Some cities expanding to age 18 - check Kawasaki updates","Co-pay varies by municipality","Covers: Doctor visits, hospitalization, prescriptions","Babies get sick A LOT - this saves massive amounts","Apply at Ward Office after getting baby's health insurance card"]},{title:"Newborn Home Visit ()",value:"Free",details:["Public health nurse visits your home within 4 months of birth","Free health check for baby and mom","They provide info about local support services","USE THIS VISIT to ask about every local benefit","Kawasaki Health Center: 044-201-3212"]},{title:"Postpartum Care Program ()",value:"Free to heavily subsidized",details:["Kawasaki offers postpartum care programs","Stay at postpartum care facility: Subsidized to 1,000-3,000/night","Day visits: Free to very cheap","Home visits by midwife: Free to very cheap","Covers: Mom's recovery, breastfeeding support, baby care","Apply at Ward Office or Health Center: 044-201-3212"]},{title:"Philippine Embassy Birth Registration",value:"Preserves Filipino citizenship",details:["Register baby at Philippine Embassy/Consulate","Baby can hold dual citizenship (Filipino + Japanese)","Phil. Embassy Tokyo: 03-5562-1600 (5-15-5 Roppongi)","Phil. Consulate Yokohama: 045-681-5006 (closer to Kawasaki)","Bring: Birth certificate, parents' passports, marriage certificate","Japan technically requires choosing at age 22, but rarely enforced"]}]},{phase:"Childcare & Education (0-18)",icon:"",items:[{title:"Free Preschool/Daycare ()",value:"444,000-924,000/year per child (age 3-5)",details:["Age 3-5: FREE for ALL children regardless of income","Age 0-2: FREE for tax-exempt households","2nd child discount (age 0-2): Half price","Some municipalities making 2nd child FREE from 2025 - check Kawasaki!","Kindergarten: Up to 25,700/month saved","Licensed daycare: Up to 37,000/month saved","For 2 children = potentially 900,000-1,800,000 total saved"]},{title:"School Expense Assistance ()",value:"50,000-100,000+/year",details:["For when Ryzen enters elementary school (and later Baby #2)","Families with income near welfare level qualify (threshold is generous)","Covers: School supplies, lunch fees, field trips, PE uniform, swimming gear","Also covers: Eye/dental treatment, commute costs, class materials","You have to APPLY - not automatic. Many qualifying families miss this.","Apply through school or Kawasaki education department"]},{title:"Free School Lunch ()",value:"~50,000/year per child",details:["Increasing number of municipalities making lunch FREE","Check if Kawasaki offers this","If not,  covers it for qualifying families"]},{title:"Free High School ()",value:"Up to 396,000/year",details:["Public high school: Tuition is FREE for all","Private high school: Subsidy up to 396,000/year for lower-income families","Applies to both Ryzen and Baby #2"]},{title:"University Support ()",value:"Up to 910,000/year",details:["Income-based tuition reduction","Up to full tuition waiver at national universities","Living expense grant up to 910,000/year (non-repayable!)","Multi-child families get expanded support from 2025"]},{title:"Children's Centers ()",value:"Free daily",details:["Every city has free children's centers","Indoor play, activities, events","Staff available for parenting advice"," specifically for 0-3 year olds"]},{title:"Family Support Center ()",value:"500-800/hour (vs 1,500+ private)",details:["City-organized mutual aid network for childcare","Other parents watch your kids for cheap","Good for school pickup, emergencies","Register at Kawasaki Ward Office"]}]},{phase:"Tax Strategies",icon:"",items:[{title:"Medical Expense Tax Deduction ()",value:"20,000-80,000 refund/year",details:["Formula: (Total medical - 100,000) x tax rate = refund","Example: 300,000 expenses, 10% rate = 20,000 back","Example: 500,000 expenses, 20% rate = 80,000 back","WHAT COUNTS: Prenatal co-pays, delivery costs, hospital meals, baby doctor visits, Ryzen's visits, dental, prescriptions, eye doctor","TRANSPORTATION: Bus/train to ANY medical facility, taxi during labor, taxi when needed due to pregnancy","LESS KNOWN: Midwife fees, breast milk management fee, blood tests, genetic testing, medical devices if prescribed","Strategy: Combine all family medical expenses in ONE person's return","File at: Kawasaki-Minami Tax Office (044-222-7531) or online via e-Tax","Keep a transport log: date, route, fare, purpose"]},{title:"Spouse Tax Deduction (/)",value:"50,000-100,000+/year savings",details:["If Naomi earns less than ~1,500,000/year",": Up to 380,000 deduction (if spouse earns under ~1,030,000)",": Sliding scale above that","Directly reduces income tax and resident tax","Check if you're already claiming this"]},{title:"Dependent Tax Deduction ()",value:"Starts when child turns 16",details:["Ages 16-18: 380,000 deduction","Ages 19-22: 630,000 deduction (higher for university age!)","Not available for children under 16 ( covers that period)"]},{title:"Furusato Nouzei ()",value:"Free goods worth 30% of donation",details:["Donate to municipalities, receive return gifts","Pay 2,000 out of pocket, rest comes back as tax credit","Get: Rice, meat, fish, diapers, baby goods!","Example: Donate 30,000 = ~9,000 worth of gifts for 2,000","Strategy: Use this to get free food and baby supplies","Use online calculator to find your optimal donation amount"]},{title:"Resident Tax Exemption ()",value:"Unlocks multiple other benefits",details:["If household income below threshold (varies by family size)","Family of 4: Roughly under 2,500,000-3,000,000 annual","Being tax-exempt unlocks: Free daycare 0-2, higher NHI reductions, public housing priority, welfare support, NHK exemption","CRITICAL: Even if income is zero, FILE A TAX RETURN showing zero income","Without a tax return, the system doesn't know you're low-income"]}]},{phase:"Housing & Utilities",icon:"",items:[{title:"Public Housing / Danchi (/UR)",value:"20,000-50,000+/month in rent savings",details:["YOU PLAN TO MOVE TO DANCHI IN JUNE - start applying NOW!","//UR: Government-subsidized housing","Families with children get priority in lottery","Rent is income-based (lower income = lower rent)","UR Housing: 0120-411-363","Kawasaki Housing: 044-200-2994","Kanagawa Prefecture Housing: 045-651-1854","Apply 2-3 months before desired move-in","Bring: Proof of income, residence cards, family register"]},{title:"Housing Security Benefit ()",value:"Up to 3 months rent",details:["If main earner lost job or significant income drop","Covers actual rent for 3 months (can extend to 9)","Must be actively looking for work","Apply at Ward Office welfare counter: 044-201-3216"]},{title:"Water Bill Reduction ()",value:"1,000-3,000/month",details:["Some municipalities offer reduced rates for large families or low-income","Ask at Ward Office or contact Kawasaki water company"]},{title:"NHK Fee Exemption (NHK)",value:"~14,000/year",details:["Full exemption for tax-exempt households ()","Apply through Ward Office if you qualify"]}]},{phase:"Emergency & Low-Income Support",icon:"",items:[{title:"Emergency Small Loan ()",value:"Up to 100,000, interest-free",details:["For temporary living difficulties","Interest-free loan","Repayment: 2 months grace, up to 12 months","Apply at  in Kawasaki"]},{title:"General Support Fund ()",value:"Up to 200,000/month for 3 months",details:["For ongoing financial difficulties","Very low or zero interest","Up to 10 years to repay","Apply at "]},{title:"Food Bank / Children's Cafeteria (/)",value:"Free food",details:[": Free food distribution events",": Free or very cheap meals for families","No income verification usually required","Search online for locations near Kawasaki-ku"]}]},{phase:"Employer Benefits",icon:"",items:[{title:"Company Birth Bonus ()",value:"10,000-100,000+",details:["Many companies give cash gift for new baby","Check with both Shinji's and Naomi's HR departments","Some companies also give childcare-related benefits"]},{title:"Company Mutual Aid (/)",value:"Varies",details:["Many employers have mutual aid programs","May offer: Additional childbirth allowance, baby goods, discount coupons","Check employee handbook or ask HR","Also check if company uses cafeteria plan ()"]}]}],Gg={title:"Budget-Saving Tips",sections:[{title:"Choosing Where to Deliver",icon:"",content:[{label:"Public hospital",detail:"350,000-450,000  Possible REFUND after 500k allowance"},{label:"Private clinic (weekday)",detail:"400,000-500,000  0 or small cost"},{label:"Private clinic (night/weekend)",detail:"500,000-600,000  0-100,000"},{label:"Large private hospital",detail:"600,000-800,000  100,000-300,000 out of pocket"},{label:"Tip",detail:"Weekday daytime delivery is cheapest. Ask multiple hospitals for price lists. Midwife birth centers (josanin) are often cheapest."}]},{title:"Baby Items - Free or Cheap",icon:"",content:[{label:"Hand-me-downs from Ryzen",detail:"If same gender or neutral colors"},{label:"Mercari app",detail:"Secondhand baby clothes in excellent condition, very cheap"},{label:"Recycle shops",detail:"Baby sections have barely-worn clothes"},{label:"Hard Off / Off House",detail:"Secondhand stores with baby sections"},{label:"Jimoty",detail:"Local classifieds, sometimes free items"},{label:"City Hall events",detail:"Kawasaki organizes baby goods exchange events"}]},{title:"Buy New vs Used",icon:"",content:[{label:"ALWAYS buy new",detail:"Car seat (safety), bottles/nipples (hygiene), mattress (safety), breast pump parts"},{label:"Safe to buy used",detail:"Clothes, stroller, crib (check recalls), toys, books, baby bath, blankets, bouncer, baby carrier"}]},{title:"Diaper Savings",icon:"",content:[{label:"Costco (bulk)",detail:"Cheapest per diaper"},{label:"Amazon Subscribe & Save",detail:"Convenient + discount"},{label:"Drug store sale days",detail:"Watch for weekly specials"},{label:"Nishimatsuya PB brand",detail:"Good quality, lower price"},{label:"Tip",detail:"Newborn size is used briefly - don't overbuy!"}]},{title:"Monthly Budget During Pregnancy",icon:"",content:[{label:"Supplements (iHerb)",detail:"5,000-7,000/month"},{label:"Extra nutrition food",detail:"3,000-5,000/month"},{label:"Medical co-pays",detail:"0-3,000/month (mostly covered by vouchers)"},{label:"TOTAL EXTRA",detail:"8,000-15,000/month"},{label:"Government support",detail:"25,000-30,000/month ( for 2 kids)"},{label:"NET RESULT",detail:"Government support MORE than covers extra costs!"}]},{title:"Best Stores for Budget Families",icon:"",content:[{label:"1. Nishimatsuya ()",detail:"CHEAPEST baby store chain in Japan"},{label:"2. Akachan Honpo ()",detail:"Good variety, regular member sales"},{label:"3. Daiso/Seria/Can Do",detail:"Baby bibs, toys, storage, basics"},{label:"4. Costco",detail:"Best for bulk diapers and wipes"},{label:"5. Amazon Japan",detail:"Subscribe & Save for recurring purchases"},{label:"6. Mercari",detail:"Best secondhand app - search for baby items"},{label:"7. Hard Off",detail:"Physical secondhand store chain"},{label:"8. Book Off",detail:"Secondhand children's books (super cheap)"}]},{title:"Receipt Strategy (Saves Money!)",icon:"",content:[{label:"Start a receipt folder NOW",detail:"Keep EVERY medical receipt"},{label:"What to save",detail:"Medical co-pays, prescriptions, hospital meals, dental, bus/train fare to appointments"},{label:"Transport log",detail:"Date | Route | Amount | Purpose (accepted by tax office)"},{label:"Example",detail:"2026/04/15 | Home to Clinic | 480 | Prenatal checkup #3"}]}]},Vg={title:"Pregnancy Health Tips",sections:[{title:"Top 5 Brain-Building Nutrients",icon:"",content:[{label:"1. DHA (Omega-3)",detail:"Makes up major portion of brain structural fat. Sources: Salmon, sardines, saba, walnuts"},{label:"2. Choline",detail:'The "memory molecule." Best source: Eggs (aim for 2/day = 300mg). Also: soybeans, edamame, broccoli'},{label:"3. Iron",detail:"Delivers oxygen to developing brain. Sources: Red meat, spinach, legumes. Take with Vitamin C, NOT with calcium."},{label:"4. Iodine",detail:"Directly impacts IQ. Easy in Japan: seaweed (wakame, nori). Don't overdo kombu."},{label:"5. Folate",detail:"Critical for neural tube (first 4-8 weeks). Sources: Leafy greens, natto, edamame. Your prenatal covers this."}]},{title:"Daily Food Priorities",icon:"",content:[{label:"Eat more",detail:"Fatty fish 2-3x/week, eggs daily (2 ideal), leafy greens (spinach, komatsuna), berries, sweet potatoes, nuts, natto, miso soup, tofu/edamame, brown rice"},{label:"Limit/Avoid",detail:"Raw fish (sashimi), high-mercury fish (tuna/swordfish: max 1x/week), caffeine (max 200mg/day), alcohol (avoid completely), processed foods, unpasteurized dairy"}]},{title:"The Ryzen Formula + Improvements",icon:"",content:[{label:"What worked with Ryzen",detail:"Chlorella supplementation + vegan/plant-heavy diet  Exceptionally smart at math"},{label:"Replicate",detail:"Continue chlorella + plant-heavy eating as foundation"},{label:"ADD this time",detail:"DHA supplement (biggest upgrade), Choline supplement + eggs, Calcium, Vitamin D3, more intentional brain stimulation"}]},{title:"Brain Stimulation Techniques",icon:"",content:[{label:"Talk to baby (Week 18+)",detail:"Baby hears sounds from week 18. Use multiple languages: Filipino, Japanese, English. Dad should talk too!"},{label:"Read out loud",detail:"Content doesn't matter - rhythm and patterns of speech stimulate brain development"},{label:"Music",detail:"Any music Naomi enjoys. Variety is good. Avoid prolonged very loud sounds."},{label:"Morning sunlight",detail:"15-20 min daily. Produces Vitamin D, regulates sleep, reduces depression risk. Free!"},{label:"Exercise",detail:"30 min walking daily. Prenatal yoga. Swimming late pregnancy. Stop if pain/bleeding/dizziness."},{label:"Stress management",detail:"4-7-8 breathing (in 4, hold 7, out 8). Nature walks. Warm baths under 38C. Journaling."},{label:"Sleep",detail:"7-9 hours. Left side when possible (blood flow to baby). Extra pillows for comfort."},{label:"Hydration",detail:"2-2.5 liters water daily. Supports amniotic fluid, blood volume, nutrient delivery."}]},{title:"Week-by-Week Brain Development",icon:"",content:[{label:"Weeks 1-4",detail:"Neural tube forming  Folic acid most critical"},{label:"Weeks 5-8",detail:"Brain regions forming  All supplements, clean diet"},{label:"Weeks 9-12",detail:"Neurons multiplying rapidly  Good nutrition, manage stress"},{label:"Weeks 13-16",detail:"Brain structure developing  Start talking to baby"},{label:"Weeks 17-20",detail:"Hearing developing  DHA especially important, music"},{label:"Weeks 21-28",detail:"Hearing well-developed, eyes respond to light  Talk, read, sing"},{label:"Weeks 29-36",detail:"Brain weight TRIPLES  Maximum nutrition + rest"},{label:"Weeks 37-40",detail:"Final brain development  Rest, prepare, stay calm"}]},{title:"Common Discomforts - Budget Solutions",icon:"",content:[{label:"Morning sickness",detail:"Ginger tea (fresh ginger in hot water), small frequent meals, plain crackers"},{label:"Leg cramps",detail:"Magnesium (in calcium supplement), stretching before bed"},{label:"Constipation",detail:"More water, fiber from vegetables/brown rice, walking, prunes"},{label:"Back pain",detail:"Good posture, gentle stretching, warm (not hot) bath"},{label:"Heartburn",detail:"Smaller meals, don't lie down after eating, elevate head"},{label:"Fatigue",detail:"Rest when possible, iron-rich foods, accept help"},{label:"Insomnia",detail:"Regular schedule, no screens before bed, warm milk, breathing exercises"}]},{title:"Dental Care",icon:"",content:[{label:"Why important",detail:"Pregnancy hormones cause gum problems. Gum disease linked to premature birth!"},{label:"When",detail:"2nd trimester is safest time for dental visit"},{label:"Free checkup",detail:"Kawasaki offers FREE dental checkup for pregnant women ()"},{label:"Tax benefit",detail:"All dental costs count toward  tax deduction"}]}]},ws={title:"Prenatal Supplements Guide",disclaimer:"IMPORTANT: Show this list to your OB-GYN before starting. Prices are approximate estimates from iHerb - actual prices may vary. All prices in USD.",sections:[{name:"Prenatal Multivitamin",icon:"",why:"Foundation supplement. Covers folic acid (prevents neural tube defects), iron (prevents anemia, delivers oxygen to baby's brain), B vitamins, iodine, zinc.",when:"Daily with food, morning is best",options:[{product:"Nature Made, Prenatal Multi + DHA, 90 Softgels",price:"~$15-18 (usually 2,200-2,800)",note:"Budget pick - includes some DHA too",lasts:"3 months"},{product:"Thorne, Basic Prenatal, 90 Capsules",price:"~$28-35 (usually 4,200-5,200)",note:"Methylated folate option. Contains high iron, so avoid adding extra iron unless OB says needed.",lasts:"1 month"},{product:"Garden of Life Vitamin Code RAW Prenatal",price:"~$25-30 (usually 3,700-4,500)",note:"Whole food-based option",lasts:"1 month"}]},{name:"DHA (Omega-3)",icon:"",why:"THE #1 brain-building nutrient. Makes up large portion of brain's structural fat. Studies show mothers who supplement have children with higher cognitive scores.",when:"With any meal containing fat (helps absorption)",target:"At least 200-300mg DHA daily. Many experts recommend 500mg+.",options:[{product:"Nordic Naturals, Prenatal DHA, 500 mg, 90 Soft Gels",price:"~$25-35 (usually 3,700-5,200)",note:"Best overall - 480mg DHA + 205mg EPA, purity tested",lasts:"1.5-3 months"},{product:"Carlson Labs, The Very Finest Fish Oil, 1,600mg, 120 Soft Gels",price:"~$20-25 (usually 3,000-3,700)",note:"Budget alternative - high DHA content",lasts:"2 months"},{product:"Nordic Naturals, Algae Omega, 715 mg, 60 Soft Gels",price:"~$28-35 (usually 4,200-5,200)",note:"Vegan option - DHA from algae",lasts:"2 months"}]},{name:"Calcium (No Added Zinc Preferred)",icon:"",why:"Use supplements only to fill calcium gap from food. Keep a safe margin below zinc and magnesium upper limits.",when:"Split into 2 doses (morning/evening). Body absorbs max 500mg at a time. TAKE 2+ HOURS AWAY FROM IRON/PRENATAL!",options:[{product:"21st Century, Calcium Citrate + D3, 120 Tablets",price:"~$8-12 (usually 1,200-1,800)",note:"No added zinc. Citrate form is generally easier to absorb.",lasts:"1 month"},{product:"Nature Made, Calcium 600mg + D3, 220 Tablets",price:"~$10-14 (usually 1,500-2,100)",note:"No added zinc. Adjust tablet count based on food calcium intake.",lasts:"3+ months"},{product:"Kirkland Calcium Citrate + D3, 500 Tablets",price:"~$12-18 (usually 1,800-2,700)",note:"Large bottle, no added zinc, budget long-term option",lasts:"4-6 months"}]},{name:"Chlorella",icon:"",why:"Optional add-on only. Not a core prenatal requirement. If used, start low and monitor tolerance.",when:"With meals. Start with lower dose, increase gradually over a week.",options:[{product:"NOW Foods, Certified Organic Chlorella, 500 mg, 200 Tablets",price:"~$12-16 (usually 1,800-2,400)",note:"Budget pick - organic, broken cell wall",lasts:"1-2 months"},{product:"Sun Chlorella, Sun Chlorella A, 500 mg, 120 Tablets",price:"~$25-35 (usually 3,700-5,200)",note:"Premium Japanese brand - DYNO-Mill process, best absorption",lasts:"1 month"},{product:"NOW Foods, Organic Chlorella Powder, 4 oz",price:"~$12-15 (usually 1,800-2,200)",note:"Powder - mix into smoothies, cheaper per serving",lasts:"1-2 months"}]},{name:"Choline",icon:"",why:"MOST PEOPLE MISS THIS. On par with DHA for brain development. Improves memory, attention, processing speed. Most prenatals have little to none. Target: 450mg/day during pregnancy.",when:"With food, any time of day",options:[{product:"NOW Foods, Choline & Inositol, 500 mg, 100 Capsules",price:"~$8-12 (usually 1,200-1,800)",note:"Plain and practical top-up after checking choline from food (eggs, fish, meat).",lasts:"3+ months"},{product:"NOW Foods, Sunflower Lecithin, 1200 mg, 100 Softgels",price:"~$10-14 (usually 1,500-2,100)",note:"Alternative phosphatidylcholine source if better tolerated",lasts:"1-2 months"}]},{name:"Vitamin D3 (Optional / Lab-Guided)",icon:"",why:"Important nutrient, but extra high-dose D3 should be based on OB advice and 25-OH vitamin D labs.",when:"With a meal containing fat, only if advised",options:[{product:"NOW Foods, Vitamin D-3, 1,000 IU, 180 Softgels",price:"~$7-10 (usually 1,050-1,500)",note:"Lower-dose option for conservative top-up if OB suggests supplementation.",lasts:"6 months"},{product:"Solgar, Vitamin D3, 2,200 IU, 100 Vegetable Capsules",price:"~$10-14 (usually 1,500-2,100)",note:"Use only when deficiency is confirmed or clinician recommends.",lasts:"3+ months"}]}],schedule:[{time:"BREAKFAST",supplements:"Prenatal Multi + DHA + Choline + Chlorella",note:"With food (needs fat for DHA absorption)"},{time:"LUNCH/MERIENDA",supplements:"Calcium (1st dose)",note:"With food, AT LEAST 2 HOURS after breakfast supplements. Add Vitamin D3 only if advised."},{time:"DINNER/BEFORE BED",supplements:"Calcium (2nd dose)",note:"With food"}],importantRule:"HUWAG sabayan ang calcium at prenatal (may iron). Keep 2+ hours apart. Extra Vitamin D3 should be lab-guided, not automatic.",iherbTips:["First order discount: Automatic na discount pag bagong account",'Search "iHerb promo code" before ordering - laging may available',"Subscribe & Save: Extra 5% off sa items na ire-reorder mo","Free shipping to Japan: Usually $20+ orders",'Check "Specials" and "Clearance" before every order',"Loyalty credits from past purchases apply to future orders","Larger bottle = cheaper per tablet","Order 2 weeks before maubusan para hindi magka-gap","iHerb ships directly to Japan, delivery usually 5-10 days"],whatNotToBuy:["Separate folic acid (prenatal has it)","Separate iron (prenatal has it, unless OB-GYN says otherwise)","Biotin (prenatal covers it)","Vitamin C supplements (eat fruits instead - free)","Collagen supplements (no proven benefit for pregnancy)",'"Pregnancy tea" blends (overpriced, minimal benefit)',"Separate B-complex (prenatal covers it)",'Expensive "prenatal packs" (paying for marketing)']},Cn={title:"Baby Name Suggestions",subtitle:"Every name follows the Ryzen Formula: cool modern sound hiding deeper kanji meaning.",ryzenFormula:{sound:"Ryzen - modern, international, powerful",kanji:" - Thunder () + Zen ()",meaning:"The balance of raw power and inner peace"},boyNames:[{name:"Kaizen",kanji:"",tier:1,meaning:"Pioneer of Zen / The One Who Leads with Peace",pairing:" +  = Thunder Zen + Pioneer Zen",why:"TRIPLE meaning: the kaizen philosophy + the kanji +  connection with Ryzen. Your family keeps improving - that IS kaizen.",readability:"Natural ( uncommon but reading is obvious)",nicknames:"Kai, Zen"},{name:"Raiden",kanji:"",tier:1,meaning:"Thunder's Legacy / The Legend of Thunder",pairing:" +  = Thunder Zen + Thunder Legend",why:'Both share . One finds peace in thunder, the other carries its legacy.  = "passing down the thunder."',readability:"Instant",nicknames:"Rai, Den"},{name:"Tenzen",kanji:"",tier:1,meaning:"Heavenly Zen / Zen of the Heavens",pairing:" +  = Thunder Zen + Heaven Zen",why:"Thunder is born from the sky. One brother is the storm, the other is the sky itself.",readability:"Instant",nicknames:"Ten, Zen"},{name:"Raion",kanji:"",tier:1,meaning:"Sound of Thunder / Thunder's Roar",pairing:" +  = Thunder Zen + Thunder Sound",why:`SPECIAL: "Raion" = Japanese for LION. Kanji says "sound of thunder." A lion's roar IS thunder. Four layers deep.`,readability:"Instant",nicknames:"Rai, on-chan"},{name:"Raito",kanji:"",tier:1,meaning:"Thunder of the Big Dipper / Thunder Fighter",pairing:" +  = Thunder Zen + Thunder Fighter",why:'Hidden English: "Light." Hidden Japanese: Big Dipper. Shares .',readability:"Instant",nicknames:"Rai, Light"},{name:"Raishin",kanji:"",tier:1,meaning:"Thunder Heart / Heart of the Storm",pairing:" +  = Thunder Zen + Thunder Heart",why:"Ryzen found zen (peace), Raishin found the heart. Calm mind vs fierce heart.",readability:"Instant",nicknames:"Rai, Shin"},{name:"Gaizen",kanji:"",tier:2,meaning:"Triumphant Zen / Victory in Peace",pairing:" +  = Thunder Zen + Triumph Zen",why:"Power through storm, victory through peace. The family's story.",readability:"Natural",nicknames:"Gai, Zen"},{name:"Guren",kanji:"",tier:2,meaning:"Crimson Lotus - highest enlightenment from suffering",pairing:" +  = Thunder Zen + Crimson Lotus",why:"In Buddhism, crimson lotus = enlightenment born from suffering. Your family faces hard times - this lotus blooms precisely because of the struggle.",readability:"Instant",nicknames:"Gu, Ren"},{name:"Hayate",kanji:"",tier:2,meaning:"Swift Wind / The Gust That Clears Everything",pairing:" +  = Thunder Zen + Swift Wind",why:"One kanji, maximum impact.  is the wind before thunder. He arrives first, clearing the way.",readability:"Instant (popular name)",nicknames:"Haya"},{name:"Kohaku",kanji:"",tier:2,meaning:"Amber - the gem that preserves ancient life",pairing:" +  = Thunder Zen + Amber",why:'Unisex. Greek "elektron" (amber) = origin of "electricity." Lightning frozen in time.',readability:"Instant",nicknames:"Ko, Haku"},{name:"Reizen",kanji:"",tier:1,meaning:"Clear Bell Zen / Refined Calm",pairing:" +  = Thunder Zen + Clear Zen",why:"Keeps the zen identity while sounding modern and international. Very close family signature without copying.",readability:"Natural",nicknames:"Rei, Zen"},{name:"Raiku",kanji:"",tier:1,meaning:"Thunder Sky / Sky that carries lightning",pairing:" +  = Thunder Zen + Thunder Sky",why:"One is thunder with peace, the other is the sky that holds the storm. Clean sibling symmetry.",readability:"Instant",nicknames:"Rai, Ku"},{name:"Soren",kanji:"",tier:1,meaning:"Blue Lotus / Calm strength in deep waters",pairing:" +  = Thunder Zen + Blue Lotus",why:"Balances power with serenity. Lotus motif links naturally with your existing spiritual naming direction.",readability:"Natural",nicknames:"So, Ren"},{name:"Hibiki",kanji:"",tier:2,meaning:"Resonance / Echo that stays",pairing:" +  = Thunder Zen + Resonance",why:"After thunder comes echo. The name implies lasting influence and presence.",readability:"Instant",nicknames:"Hibi"},{name:"Tsubasa",kanji:"",tier:2,meaning:"Wings / Ability to fly far",pairing:" +  = Thunder Zen + Wings",why:"Grounded kuya and soaring sibling. Great aspirational meaning with simple readability.",readability:"Instant",nicknames:"Tsuba"},{name:"Akito",kanji:"",tier:2,meaning:"Dawn Star Fighter / Dawn strength",pairing:" +  = Thunder Zen + Dawn Fighter",why:"Storm at night, dawn after. Symbolizes recovery and resilience.",readability:"Natural",nicknames:"Aki, To"},{name:"Haruki",kanji:"",tier:2,meaning:"Sunlight Brilliance / Warm shining child",pairing:" +  = Thunder Zen + Sunlight Radiance",why:"Thunder and sun create a complete sky story. Warm counterpart to Ryzens electric motif.",readability:"Instant",nicknames:"Haru"},{name:"Souma",kanji:"",tier:2,meaning:"Blue Truth / True deep spirit",pairing:" +  = Thunder Zen + Blue Truth",why:"Simple, modern, and grounded. Keeps strong Japanese identity while easy internationally.",readability:"Instant",nicknames:"Sou"}],girlNames:[{name:"Raika",kanji:"",tier:1,meaning:"Thunder Flower / Flower Born from the Storm",pairing:" +  = Thunder Zen + Thunder Flower",why:"Shares . He is the zen, she is the flower that blooms from it. The storm creates beauty.",readability:"Instant",nicknames:"Rai, Ka-chan"},{name:"Seiren",kanji:"",tier:1,meaning:"Star Lotus - celestial beauty rooted in earth",pairing:" +  = Thunder Zen + Star Lotus",why:'Sounds like "siren" (mythological beauty). Means star + lotus. Celestial and grounded.',readability:"Instant",nicknames:"Sei, Ren"},{name:"Kazane",kanji:"",tier:1,meaning:"Sound of the Wind",pairing:" +  = Thunder Zen + Sound of Wind",why:"Thunder and wind - storm siblings. Powerful contrast.",readability:'Needs furigana (some may read "fuuon")',nicknames:"Kaza-chan"},{name:"Fuuka",kanji:"",tier:1,meaning:"Wind Flower / Snowflakes dancing in wind on a clear day",pairing:" +  = Thunder Zen + Wind Flower",why:"TRIPLE: wind flower, seasonal word for dancing snowflakes, wind+thunder = storm. Most poetic combo.",readability:"Instant",nicknames:"Fuu-chan"},{name:"Suiren",kanji:"",tier:1,meaning:"Water Lotus / Water lily on still water",pairing:" +  = Thunder Zen + Water Lotus",why:'Sounds like "serene." Thunder crashes from sky, water lotus floats in stillness below.',readability:"Instant",nicknames:"Sui, Ren"},{name:"Hotaru",kanji:"",tier:1,meaning:"Firefly - tiny light in the darkness",pairing:" +  = Thunder Zen + Firefly",why:"Both produce LIGHT. Kuya = massive thunderbolt. Imouto = gentle firefly. Same element, different scale.",readability:"Instant",nicknames:"Hota-chan"},{name:"Shizune",kanji:"",tier:1,meaning:"Quiet Sound / The Sound of Silence",pairing:" +  = Thunder Zen + Quiet Sound",why:"ULTIMATE CONTRAST. He is THUNDER. She is SILENCE. Perfect opposites. After every storm comes stillness.",readability:"Instant",nicknames:"Shizu-chan"},{name:"Mirai",kanji:"",tier:2,meaning:"Future - What Has Not Yet Come",pairing:" +  = Thunder Zen + Future",why:"Ryzen = present power and peace. Mirai = everything still coming. The best is yet to come.",readability:"Instant",nicknames:"Mira-chan"},{name:"Kaguya",kanji:"",tier:2,meaning:"Radiant Night / She Who Shines in Darkness",pairing:" +  = Thunder Zen + Radiant Night",why:"Moon Princess from Japan's oldest story. For your family in hard times: she IS the light in darkness.",readability:"Needs furigana (but cultural reference is famous)",nicknames:"Kagu-chan"},{name:"Rinka",kanji:"",tier:2,meaning:"Dignified Flower / Flower that stands tall in cold",pairing:" +  = Thunder Zen + Dignified Flower",why:" = dignity from enduring hardship. For a family facing hard times, this flower doesn't wilt.",readability:"Instant",nicknames:"Rin-chan"},{name:"Reina",kanji:"",tier:1,meaning:"Clear Bell Grace / Elegant resonance",pairing:" +  = Thunder Zen + Clear Grace",why:"Soft, elegant, and international. Keeps the clear-bell motif without losing Japanese roots.",readability:"Instant",nicknames:"Rei, Reina-chan"},{name:"Hoshika",kanji:"",tier:1,meaning:"Star Flower / Flower lit by stars",pairing:" +  = Thunder Zen + Star Flower",why:"Pairs naturally with storm-sky imagery and keeps the poetic style of your current top picks.",readability:"Natural",nicknames:"Hoshi, Ka"},{name:"Airi",kanji:"",tier:1,meaning:"Beloved Dignity / Loving strength",pairing:" +  = Thunder Zen + Loving Dignity",why:"Warm emotional core with strong character. A gentle but powerful sibling contrast.",readability:"Instant",nicknames:"Ai, Riri"},{name:"Akari",kanji:"",tier:2,meaning:"Village Light / Guiding lamp",pairing:" +  = Thunder Zen + Guiding Light",why:"Ryzen as lightning and Akari as steady lamp. Same light theme, different personality.",readability:"Instant",nicknames:"Aka, Kari"},{name:"Yuzuki",kanji:"",tier:2,meaning:"Yuzu Moon / Bright gentle moon",pairing:" +  = Thunder Zen + Yuzu Moon",why:"Soft seasonal name with Japanese charm and modern feel.",readability:"Instant",nicknames:"Yuzu, Zuki"},{name:"Rinon",kanji:"",tier:2,meaning:"Dignified Sound / Strong clear voice",pairing:" +  = Thunder Zen + Dignified Sound",why:"Sound motif connects with thunder while keeping a graceful, feminine profile.",readability:"Instant",nicknames:"Rin, Non-chan"},{name:"Kohana",kanji:"",tier:2,meaning:"Heart Flower / Heart that blooms",pairing:" +  = Thunder Zen + Heart Flower",why:"Directly speaks to family warmth and emotional resilience.",readability:"Natural",nicknames:"Koha"},{name:"Natsuki",kanji:"",tier:2,meaning:"Summer Radiance / Warm seasonal light",pairing:" +  = Thunder Zen + Summer Radiance",why:"Bright and energetic with a clear hopeful vibe. Very easy to call in daily life.",readability:"Instant",nicknames:"Natsu, Tsuki"}],practicalNotes:["Verify chosen kanji are in jinmeiyou kanji () or jouyou kanji () list","Check at Kawasaki Ward Office before birth registration","You have 14 days after birth to submit ()","Test the name: say it in Filipino, Japanese, and English","Furigana is always recorded separately from kanji at registration"]},ek={directCash:{title:"Direct Cash at Birth",total:"610,000 - 1,040,000",items:[{label:"Pregnancy Support Grant ()",amount:"100,000"},{label:"Childbirth Allowance ()",amount:"500,000"},{label:"Delivery refund (if hospital < 500k)",amount:"0-150,000"},{label:"Additional Insurance Benefit ()",amount:"0-90,000"},{label:"Company Birth Bonus",amount:"10,000-100,000"},{label:"Municipal Baby Gift",amount:"0-100,000+"}]},monthlyChild:{title:"Child Allowance (18 years)",total:"3,540,000 - 4,680,000",items:[{label:"Baby #2 (0-3: 15k/mo, 3-18: 10k/mo)",amount:"2,340,000"},{label:"Ryzen (remaining years)",amount:"1,200,000 - 2,340,000"}]},costSavings:{title:"Cost Savings (money you DON'T pay)",total:"3,000,000 - 5,000,000+",items:[{label:"Prenatal checkup vouchers",amount:"120,000"},{label:"Child medical subsidy (per child)",amount:"750,000 - 1,800,000"},{label:"Free preschool 3-5 (per child)",amount:"900,000 - 1,350,000"},{label:"2nd child daycare discount",amount:"450,000 - 1,200,000"},{label:"Free high school (per child)",amount:"360,000"},{label:"Pension exemption",amount:"66,000"}]},taxBenefits:{title:"Tax Benefits Over Time",total:"500,000 - 1,500,000+",items:[{label:"Medical expense deduction",amount:"20,000-80,000/year"},{label:"Spouse deduction",amount:"50,000-100,000/year"},{label:"Furusato nouzei gifts",amount:"10,000-30,000+/year"},{label:"Dependent deduction (age 16+)",amount:"30,000-60,000/year"}]},grandTotal:{conservative:"7,650,000",maximum:"15,720,000+",note:"7.6 to 15.7 MILLION yen in total government support over 18 years"}},tk=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ak=900;function Xg(s){return String(s).padStart(2,"0")}function tc(s,l,u){return`${s}-${Xg(l)}-${Xg(u)}`}function $m(s){const[l,u,c]=s.split("-").map(Number);return new Date(l,u-1,c).toDateString()}function ho({year:s,month:l,onMonthChange:u,renderDay:c,getDayClassName:m,selectedDate:f,onDayClick:p,onDayDoubleTap:g,onDayLongPress:v}){const b=w.useRef({date:"",time:0}),x=w.useRef(null),M=w.useRef({date:"",until:0}),C=new Date,R=tc(C.getFullYear(),C.getMonth()+1,C.getDate()),{days:L,label:W}=w.useMemo(()=>{const ae=new Date(s,l-1,1),V=new Date(s,l,0),K=ae.getDay(),O=[],le=new Date(s,l-1,0);for(let fe=K-1;fe>=0;fe--){const we=le.getDate()-fe,Ce=l-1<=0?12:l-1,_=l-1<=0?s-1:s;O.push({date:tc(_,Ce,we),day:we,overflow:!0})}for(let fe=1;fe<=V.getDate();fe++)O.push({date:tc(s,l,fe),day:fe,overflow:!1});const ve=O.length%7;if(ve>0){const fe=7-ve;for(let we=1;we<=fe;we++){const Ce=l+1>12?1:l+1,_=l+1>12?s+1:s;O.push({date:tc(_,Ce,we),day:we,overflow:!0})}}return{days:O,label:`${["January","February","March","April","May","June","July","August","September","October","November","December"][l-1]} ${s}`}},[s,l]),P=()=>{const ae=l-1<=0?12:l-1,V=l-1<=0?s-1:s;u(V,ae)},Z=()=>{const ae=l+1>12?1:l+1,V=l+1>12?s+1:s;u(V,ae)},xe=ae=>{if(ae.overflow)return;const V=M.current||{date:"",until:0};if(V.date===ae.date&&Date.now()<=V.until)return;const K=Date.now(),O=b.current||{date:"",time:0};if(O.date===ae.date&&K-O.time<=360){b.current={date:"",time:0},g?.(ae.date);return}b.current={date:ae.date,time:K},p?.(ae.date)},te=()=>{x.current&&(clearTimeout(x.current),x.current=null)},ue=ae=>{ae.overflow||!v||(te(),x.current=setTimeout(()=>{b.current={date:"",time:0},M.current={date:ae.date,until:Date.now()+450},v?.(ae.date)},ak))},se=()=>{te()};return n.jsxs("div",{className:"cal",children:[n.jsxs("div",{className:"cal-header",children:[n.jsx("button",{className:"cal-nav glass-inner",onClick:P,children:""}),n.jsx("span",{className:"cal-label",children:W}),n.jsx("button",{className:"cal-nav glass-inner",onClick:Z,children:""})]}),n.jsxs("div",{className:"cal-grid",children:[tk.map(ae=>n.jsx("div",{className:"cal-dow",children:ae},ae)),L.map((ae,V)=>{const K=ae.date===R,O=ae.date===f,le=ae.overflow?"":m?.(ae.date)||"";return n.jsxs("div",{className:`cal-day ${ae.overflow?"overflow":""} ${K?"today":""} ${O?"selected":""} ${le}`,onClick:()=>xe(ae),onPointerDown:()=>ue(ae),onPointerUp:se,onPointerLeave:se,onPointerCancel:se,onTouchStart:()=>ue(ae),onTouchEnd:se,onTouchCancel:se,children:[n.jsx("span",{className:"cal-day-num",children:ae.day}),!ae.overflow&&c?.(ae.date)]},V)})]})]})}const U0=(...s)=>s.filter((l,u,c)=>!!l&&l.trim()!==""&&c.indexOf(l)===u).join(" ").trim();const nk=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const ik=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,u,c)=>c?c.toUpperCase():u.toLowerCase());const Qg=s=>{const l=ik(s);return l.charAt(0).toUpperCase()+l.slice(1)};var sk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ok=s=>{for(const l in s)if(l.startsWith("aria-")||l==="role"||l==="title")return!0;return!1};const lk=w.forwardRef(({color:s="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:c,className:m="",children:f,iconNode:p,...g},v)=>w.createElement("svg",{ref:v,...sk,width:l,height:l,stroke:s,strokeWidth:c?Number(u)*24/Number(l):u,className:U0("lucide",m),...!f&&!ok(g)&&{"aria-hidden":"true"},...g},[...p.map(([b,x])=>w.createElement(b,x)),...Array.isArray(f)?f:[f]]));const Ye=(s,l)=>{const u=w.forwardRef(({className:c,...m},f)=>w.createElement(lk,{ref:f,iconNode:l,className:U0(`lucide-${nk(Qg(s))}`,`lucide-${s}`,c),...m}));return u.displayName=Qg(s),u};const rk=[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M12 9v4l2 2",key:"1c63tq"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}]],ck=Ye("alarm-clock",rk);const uk=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],Zg=Ye("baby",uk);const dk=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],mk=Ye("banknote",dk);const hk=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],K0=Ye("bell",hk);const fk=[["path",{d:"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z",key:"w610uw"}]],pk=Ye("bone",fk);const gk=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],F0=Ye("book-open",gk);const yk=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],bk=Ye("brain",yk);const vk=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Y0=Ye("briefcase",vk);const wk=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],kk=Ye("building-2",wk);const xk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],q0=Ye("calendar-days",xk);const Sk=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],W0=Ye("camera",Sk);const jk=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mm=Ye("chart-column",jk);const Nk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Tk=Ye("chevron-down",Nk);const Ak=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Mk=Ye("chevron-up",Ak);const Ek=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ck=Ye("circle-alert",Ek);const Dk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],Sc=Ye("circle-dollar-sign",Dk);const Ok=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rk=Ye("circle",Ok);const _k=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Im=Ye("clipboard-list",_k);const Lk=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],P0=Ye("ellipsis",Lk);const Hk=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Bk=Ye("file-text",Hk);const zk=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],$k=Ye("flame",zk);const Ik=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Uk=Ye("frown",Ik);const Kk=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Fk=Ye("hard-drive",Kk);const Yk=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],qk=Ye("heart-pulse",Yk);const Wk=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Pk=Ye("heart",Wk);const Gk=[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M14 9h-4",key:"1w2s2s"}],["path",{d:"M18 11h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"1tthqt"}],["path",{d:"M18 21V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16",key:"dw4p4i"}]],G0=Ye("hospital",Gk);const Vk=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],hm=Ye("house",Vk);const Xk=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Qk=Ye("landmark",Xk);const Zk=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Jk=Ye("layout-dashboard",Zk);const ex=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],tx=Ye("leaf",ex);const ax=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],V0=Ye("lightbulb",ax);const nx=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],ix=Ye("list-checks",nx);const sx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ox=Ye("meh",sx);const lx=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],rx=Ye("menu",lx);const cx=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],X0=Ye("message-circle",cx);const ux=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],fm=Ye("moon",ux);const dx=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],mx=Ye("music",dx);const hx=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],fx=Ye("octagon-alert",hx);const px=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pm=Ye("phone",px);const gx=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Um=Ye("pill",gx);const yx=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],bx=Ye("receipt",yx);const vx=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],wx=Ye("shopping-cart",vx);const kx=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],xx=Ye("sliders-horizontal",kx);const Sx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],jx=Ye("smile",Sx);const Nx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Tx=Ye("sparkles",Nx);const Ax=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mx=Ye("square-check-big",Ax);const Ex=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Cx=Ye("star",Ex);const Dx=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],Km=Ye("stethoscope",Dx);const Ox=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Rx=Ye("store",Ox);const _x=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gm=Ye("sun",_x);const Lx=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fc=Ye("triangle-alert",Lx);const Hx=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jg=Ye("user",Hx);const Bx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zx=Ye("users",Bx);const $x=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Q0=Ye("wallet",$x);const Ix=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ux=Ye("zap",Ix);function Le({icon:s,className:l="ui-icon",...u}){return s?n.jsx(s,{"aria-hidden":"true",className:l,...u}):null}function En({expanded:s,className:l="ui-icon"}){const u=s?Mk:Tk;return n.jsx(Le,{icon:u,className:l})}const Kx=[{id:"minimal-clean",label:"Minimal Clean",description:"Nav: House, ClipboardList, CircleDollarSign, Pill, MoreHorizontal."},{id:"friendly-rounded",label:"Friendly Rounded",description:"Nav: Home, ListChecks, Wallet, HeartPulse, SlidersHorizontal."},{id:"medical-premium",label:"Medical Premium",description:"Nav: LayoutDashboard, CheckSquare, Banknote, Stethoscope, Menu."},{id:"soft-duotone",label:"Soft Duotone",description:"Nav: same shapes as Minimal Clean with softer two-tone styling."},{id:"solid-modern",label:"Solid Modern",description:"Filled-look containers, bold modern vibe."}];function Fm(s){const l=String(s||"").trim();return!l||l==="clean"?"minimal-clean":l==="soft"?"friendly-rounded":l==="bold"?"solid-modern":l}function Fx(s){const l=Fm(s);return l==="friendly-rounded"?{home:hm,tasks:ix,money:Q0,health:qk,more:xx}:l==="medical-premium"?{home:Jk,tasks:Mx,money:mk,health:Km,more:rx}:{home:hm,tasks:Im,money:Sc,health:Um,more:P0}}const ey={dark:gm,light:fm},Ee={reminders:K0,supplements:Um,work:Y0,names:Tx,activity:q0,checkup:G0,tip:V0,overview:mm,tasks:Im,benefits:Sc,salary:Q0,tax:mm,warning:fc,phone:pm,script:X0,you:Jg,staff:Jg,info:F0,photos:W0,doctor:Km,contacts:pm,backup:Fk},Yx={"":Zg,"":G0,"":zx,"":Zg,"":Im,"":Um,"":bk,"":pk,"":tx,"":Ux,"":gm,"":gm,"":fm,"":kk,"":Qk,"":Sc,"":Sc,"":mm,"":wx,"":fc,"":Rx,"":bx,"":Cx,"":mx,"":q0,"":fx,"":hm,"":ck,"":V0,"":Bk,"":F0,"":W0,"":Km,"":pm,"":X0,"":Y0,"":fc,"":K0,"":P0,"":jx,"":ox,"":Uk,"":Ck,"":fm,"":$k,"":Pk,"":fc};function qx(s){return Yx[s]||Rk}function xa({token:s,className:l="ui-icon",...u}){const c=qx(s);return n.jsx(Le,{icon:c,className:l,...u})}const ty=[{id:"boshi-techo",label:"Kuyakusho - Boshi Techo",form:{title:"Kuyakusho - Boshi Techo + vouchers",location:"Kawasaki Ward Office",notes:"Bring: pregnancy confirmation, residence card, insurance card, My Number. Ask about all programs.",taskIds:["p2","p3","p4"]}},{id:"obgyn",label:"OB-GYN Visit",form:{title:"OB-GYN visit",location:"",notes:"",taskIds:["p1"]}},{id:"ryzen-pedia",label:"Ryzen Pediatrician",form:{title:"Ryzen - Pediatrician visit",location:"",notes:"Skin allergy follow-up.",taskIds:[]}},{id:"ryzen-school",label:"Ryzen School",form:{title:"Ryzen - school",location:"",notes:"",taskIds:[]}},{id:"groceries",label:"Groceries",form:{title:"Grocery run",location:"",notes:"",taskIds:[]}}];function Wx(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function Px(s){const l=String(s||"").trim();return l||"All day"}function Gx(s){return[...s].sort((l,u)=>{const c=String(l?.time||"").trim(),m=String(u?.time||"").trim();if(c&&m&&c!==m)return c.localeCompare(m);if(c&&!m)return-1;if(!c&&m)return 1;const f=String(l?.title||"").toLowerCase(),p=String(u?.title||"").toLowerCase();return f.localeCompare(p)})}function Vx({dateISO:s,onClose:l,dailySupp:u,suppSchedule:c,attendance:m,checkups:f,moods:p,planner:g,addPlan:v,updatePlan:b,removePlan:x,togglePlanDone:M}){if(!s)return null;const C=Wx(),R=s>C,L=new Date(s+"T00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),W=$m(s),P=Array.isArray(g?.[s])?g[s]:[],Z=w.useMemo(()=>Gx(P),[P]),[xe,te]=w.useState(null),[ue,se]=w.useState({time:"",title:"",location:"",notes:"",done:!1,taskIds:[]}),ae=!!xe,V=()=>{te("new"),se({time:"",title:"",location:"",notes:"",done:!1,taskIds:[]})},K=Y=>{const ge=String(Y?.id||"").trim();ge&&(te(ge),se({time:String(Y?.time||"").trim(),title:String(Y?.title||"").trim(),location:String(Y?.location||"").trim(),notes:String(Y?.notes||"").trim(),done:!!Y?.done,taskIds:Array.isArray(Y?.taskIds)?Y.taskIds:[]}))},O=()=>{te(null),se({time:"",title:"",location:"",notes:"",done:!1,taskIds:[]})},le=()=>{const Y=String(ue.title||"").trim();if(!Y)return;const ge={time:String(ue.time||"").trim(),title:Y,location:String(ue.location||"").trim(),notes:String(ue.notes||"").trim(),done:!!ue.done,taskIds:Array.isArray(ue.taskIds)?ue.taskIds:[]};xe==="new"?v?.(s,ge):b?.(s,xe,ge),O()},ve=Y=>{const ge=Y?.form||null;ge&&se(k=>({...k,title:String(ge.title||"").trim(),location:String(ge.location||"").trim(),notes:String(ge.notes||"").trim(),taskIds:Array.isArray(ge.taskIds)?ge.taskIds:[]}))},ce=Y=>{const ge=Y?.form||null;ge&&v?.(s,{time:String(ge.time||"").trim(),title:String(ge.title||"").trim(),location:String(ge.location||"").trim(),notes:String(ge.notes||"").trim(),done:!!ge.done,taskIds:Array.isArray(ge.taskIds)?ge.taskIds:[]})},fe=w.useMemo(()=>cn.map(Y=>{const z=(c[Y.id]?.times||Y.defaultTimes).map((re,N)=>{const F=`${Y.id}-${N}-${W}`;return{time:re,taken:!!u[F]}});return{...Y,doses:z}}),[s,u,c]),we=fe.reduce((Y,ge)=>Y+ge.doses.filter(k=>k.taken).length,0),Ce=fe.reduce((Y,ge)=>Y+ge.doses.length,0),_=m[s],Q=w.useMemo(()=>{for(const Y of pi){const ge=f[Y.id];if(ge?.date===s)return{visit:Y,data:ge}}return null},[s,f]),Se=w.useMemo(()=>p.find(ge=>{const k=new Date(ge.date);return`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`===s})||null,[s,p]);return n.jsx("div",{className:"day-detail-backdrop",onClick:()=>{ae||l?.()},children:n.jsxs("div",{className:"day-detail-sheet glass-section",onClick:Y=>Y.stopPropagation(),children:[n.jsx("div",{className:"day-detail-handle"}),n.jsx("h3",{className:"day-detail-title",children:L}),n.jsxs("div",{className:"day-detail-group",children:[n.jsxs("div",{className:"day-detail-group-header",children:[n.jsx(Le,{icon:Ee.activity}),n.jsxs("span",{children:["Plans (",P.length,")"]}),!ae&&n.jsx("button",{type:"button",className:"btn-glass-mini",onClick:V,children:"Add"})]}),!ae&&n.jsx("div",{className:"day-detail-quick-row",children:ty.map(Y=>n.jsx("button",{type:"button",className:"quick-chip glass-inner",onClick:()=>ce(Y),children:Y.label},Y.id))}),Z.length>0?n.jsx("div",{className:"day-detail-plans",children:Z.map(Y=>n.jsxs("div",{className:`day-detail-plan glass-inner ${Y.done?"done":""}`,children:[n.jsx("div",{className:"day-detail-plan-time",children:Px(Y.time)}),n.jsxs("div",{className:"day-detail-plan-main",children:[n.jsx("div",{className:"day-detail-plan-title",children:Y.title}),(Y.location||Y.notes)&&n.jsxs("div",{className:"day-detail-plan-meta",children:[Y.location?`Location: ${Y.location}`:"",Y.location&&Y.notes?`
`:"",Y.notes?Y.notes:""]})]}),n.jsxs("div",{className:"day-detail-plan-actions",children:[n.jsx("button",{type:"button",className:`btn-glass-mini ${Y.done?"":"primary"}`,onClick:()=>M?.(s,Y.id),children:Y.done?"Undo":"Done"}),n.jsx("button",{type:"button",className:"btn-glass-mini",onClick:()=>K(Y),children:"Edit"}),n.jsx("button",{type:"button",className:"btn-glass-mini danger",onClick:()=>{window.confirm("Delete this plan item?")&&x?.(s,Y.id)},children:"Delete"})]})]},Y.id))}):n.jsx("div",{className:"day-detail-empty",children:"No plans yet."}),ae&&n.jsxs("div",{className:"day-detail-plan-form glass-inner",children:[n.jsx("div",{className:"day-detail-quick-row",children:ty.map(Y=>n.jsx("button",{type:"button",className:"quick-chip glass-inner",onClick:()=>ve(Y),children:Y.label},Y.id))}),n.jsxs("label",{className:"day-detail-form-row",children:[n.jsx("span",{children:"Title (required)"}),n.jsx("input",{type:"text",value:ue.title,onChange:Y=>se(ge=>({...ge,title:Y.target.value})),placeholder:"e.g. Kuyakusho - Boshi Techo"})]}),n.jsxs("label",{className:"day-detail-form-row",children:[n.jsx("span",{children:"Time (optional)"}),n.jsx("input",{type:"time",value:ue.time,onChange:Y=>se(ge=>({...ge,time:Y.target.value}))})]}),n.jsxs("label",{className:"day-detail-form-row",children:[n.jsx("span",{children:"Location (optional)"}),n.jsx("input",{type:"text",value:ue.location,onChange:Y=>se(ge=>({...ge,location:Y.target.value})),placeholder:"e.g. Kawasaki Ward Office"})]}),n.jsxs("label",{className:"day-detail-form-row",children:[n.jsx("span",{children:"Notes (optional)"}),n.jsx("textarea",{value:ue.notes,onChange:Y=>se(ge=>({...ge,notes:Y.target.value})),placeholder:"Bring documents, ask about vouchers, etc.",rows:3})]}),n.jsxs("label",{className:"day-detail-form-check",children:[n.jsx("input",{type:"checkbox",checked:ue.done,onChange:Y=>se(ge=>({...ge,done:Y.target.checked}))}),n.jsx("span",{children:"Mark as done"})]}),n.jsxs("div",{className:"day-detail-form-actions",children:[n.jsx("button",{type:"button",className:"btn-glass-primary",onClick:le,disabled:!String(ue.title||"").trim(),children:"Save"}),n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:O,children:"Cancel"})]})]})]}),n.jsxs("div",{className:"day-detail-group",children:[n.jsxs("div",{className:"day-detail-group-header",children:[n.jsx(Le,{icon:Ee.supplements}),n.jsxs("span",{children:["Supplements (",we,"/",Ce,")"]})]}),n.jsx("div",{className:"day-detail-supp-list",children:fe.map(Y=>n.jsxs("div",{className:"day-detail-supp",children:[n.jsx("span",{className:"day-detail-supp-icon",children:n.jsx(xa,{token:Y.icon})}),n.jsx("span",{className:"day-detail-supp-name",children:Y.name}),n.jsx("span",{className:"day-detail-supp-doses",children:Y.doses.map((ge,k)=>R?n.jsxs("span",{className:"day-detail-dose future",children:[ge.time," -"]},k):n.jsxs("span",{className:`day-detail-dose ${ge.taken?"taken":"missed"}`,children:[ge.time," ",ge.taken?"":""]},k))})]},Y.id))})]}),n.jsxs("div",{className:"day-detail-group",children:[n.jsxs("div",{className:"day-detail-group-header",children:[n.jsx(Le,{icon:Ee.work}),n.jsx("span",{children:"Work"})]}),_?n.jsxs("div",{className:`day-detail-work ${_.worked?"worked":"absent"}`,children:[_.worked?`Worked ${_.hours}h`:"Absent",_.note&&n.jsxs("span",{className:"day-detail-work-note",children:["  ",_.note]})]}):n.jsx("div",{className:"day-detail-empty",children:"No log"})]}),Q&&n.jsxs("div",{className:"day-detail-group",children:[n.jsxs("div",{className:"day-detail-group-header",children:[n.jsx(Le,{icon:Ee.checkup}),n.jsxs("span",{children:["Checkup Visit ",Q.visit.visit]})]}),n.jsxs("div",{className:"day-detail-checkup",children:[n.jsx("div",{children:Q.visit.label}),Q.data.weight&&n.jsxs("div",{children:["Weight: ",Q.data.weight,"kg"]}),Q.data.bp&&n.jsxs("div",{children:["BP: ",Q.data.bp]}),Q.data.babySize&&n.jsxs("div",{children:["Baby: ",Q.data.babySize]}),Q.data.notes&&n.jsx("div",{className:"day-detail-notes",children:Q.data.notes})]})]}),Se&&n.jsxs("div",{className:"day-detail-group",children:[n.jsxs("div",{className:"day-detail-group-header",children:[n.jsx(Le,{icon:Ee.tip}),n.jsx("span",{children:"Mood"})]}),n.jsxs("div",{className:"day-detail-mood",children:[n.jsx("span",{className:"day-detail-mood-emoji",children:n.jsx(xa,{token:Se.mood})}),n.jsxs("span",{children:["Energy: ",Se.energy,"/5"]}),Se.cravings&&n.jsxs("div",{className:"day-detail-craving",children:["Craving: ",Se.cravings]}),Se.notes&&n.jsx("div",{className:"day-detail-notes",children:Se.notes})]})]}),n.jsx("button",{className:"btn-glass-secondary day-detail-close",onClick:l,children:"Close"})]})})}function Kl(s){let l=0;const u=String(s||"");for(let c=0;c<u.length;c+=1)l=(l<<5)-l+u.charCodeAt(c)|0;return Math.abs(l)}function za(s,l){if(!Array.isArray(s)||s.length===0)return"";const u=Kl(l)%s.length;return s[u]}function Z0(s,l){const u=Array.isArray(s)?s.filter(p=>p&&p.weight>0):[];if(u.length===0)return null;const c=u.reduce((p,g)=>p+g.weight,0),m=Kl(l)%c;let f=0;for(const p of u)if(f+=p.weight,m<f)return p.id;return u[0].id}function Yn(s){return s.getHours()*60+s.getMinutes()}function ym(s){const[l,u]=String(s||"00:00").split(":").map(Number);return Number.isNaN(l)||Number.isNaN(u)?0:l*60+u}function bm(s){const l=String(s||"").trim();if(!l)return null;const[u,c]=l.split(":").map(Number);return Number.isNaN(u)||Number.isNaN(c)||u<0||u>23||c<0||c>59?null:u*60+c}function yi(s){const l=s.getFullYear(),u=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getDate()).padStart(2,"0");return`${l}-${u}-${c}`}function Xx(s){return s.toDateString()}function J0(s){const l=String(s||"").trim();return l?/[.!?]$/.test(l)?l:`${l}.`:""}function Ym(s,l){const u=Array.isArray(s)?s.filter(Boolean):[];if(u.length===0)return[];const c=Array.isArray(l)&&l.length>=3?l.slice(0,3):["Rotation variant A.","Rotation variant B.","Rotation variant C."];return u.flatMap(m=>{const f=String(m).trim();if(!f)return[];const p=J0(f);return[f,`${p} ${c[0]}`,`${p} ${c[1]}`,`${p} ${c[2]}`]})}function xo(s,l){const u={};for(const[c,m]of Object.entries(s||{}))u[c]=Ym(m,l);return u}function eb(s,l){const u={};for(const[c,m]of Object.entries(s||{}))u[c]=xo(m,l);return u}function tb(s,l){const u=Array.isArray(s)?s.filter(Boolean):[];if(u.length===0)return[];const c=Array.isArray(l)&&l.length>=3?l.slice(0,3):["Keep this in your notes.","Action step: do one tiny step now.","Review this in your next checkup."];return u.flatMap(m=>{const f=String(m?.category||"General").trim()||"General",p=String(m?.text||"").trim();if(!p)return[];const g=J0(p);return[{category:f,text:p},{category:f,text:`${g} ${c[0]}`},{category:f,text:`${g} ${c[1]}`},{category:f,text:`${g} ${c[2]}`}]})}const ab=[{id:"taglish",weight:40},{id:"english_tagalog",weight:16},{id:"nihongo_tagalog",weight:13},{id:"english",weight:16},{id:"bisaya_tagalog",weight:5},{id:"bisaya_english",weight:3},{id:"nihongo_tagalog_english_bisaya",weight:2}],Qx={gentle:["Love check-in: supplement time audit.","Friendly nudge from Peggy.","Health mission update, mommy.","Quick body-and-baby check.","Tiny reminder, big impact.","Brain-and-bones shift incoming.","Micro habit, macro benefit.","Just checking your dose streak."],nudge:["Nudge mode: may pending doses pa.","Midday ping: supplements still waiting.","Gentle pressure activated.","Status red-ish: unfinished doses today.","Checklist says we still have work.","Recharge ping: baby fuel not complete.","Kaya pa habulin ang streak.","Reminder wave #2 just landed."],urgent:["Escalation: may overdue doses na.","Alert mode: supplement window is slipping.","Mission critical: tapusin natin today.","Red alert-ish but still fixable.","Overdue detected. We can still recover.","Final stretch reminder activated.","Clock is loud today. Dose now.","Priority ping: overdue stack growing."]},Zx={taglish:{gentle:["Konting consistency lang, malaking tulong sa baby development.","Slow and steady lang tayo, mommy.","Daily wins beat perfect plans.","Small repeat actions build a safer pregnancy."],nudge:["Pwede pa habulin before evening.","Hindi pa late, pero wag na patagalin.","Let us convert this into a quick win.","One round now, less stress mamaya."],urgent:["Overdue na, so best move is take next dose now.","Kung kaya now, gawin na natin agad.","Quick action now saves next-hours stress.","Habol na tayo before bedtime."]},english_tagalog:{gentle:["One clean dose at a time, then tuloy ang day.","Progress over perfection, tuloy lang.","Today still has room for a clean finish.","Your future self will thank you mamaya."],nudge:["You still have runway today, pero move na.","Short task now, calmer night later.","Do one now, then we reassess.","Lock one dose first, then momentum follows."],urgent:["Clock is tight. Best move: execute now.","Overdue already, kaya immediate action na.","One tap now clears the highest risk.","Do not negotiate with this timer."]},nihongo_tagalog:{gentle:["Daijoubu, konti konti lang pero tuloy tuloy.","Yoshi, one dose muna then continue ka na.","Genki track tayo kapag consistent ang doses.","Muri shinaide, pero wag kalimot."],nudge:["Mou sukoshi, kaya mo pa habulin today.","Ima nara safe pa, inom na muna.","Ganbatte, one set now then pahinga.","Ato de ja delikado, ngayon na."],urgent:["Ima sugu dose na. Overdue na tayo.","Hayaku one round now, then breathe.","Daiji na timing ito, act now.","Osoku naru mae ni tapusin na."]},english:{gentle:["Steady rhythm keeps the day smooth.","A quick dose now protects the whole plan.","Tiny action, high return for mom and baby.","Consistency wins more than intensity."],nudge:["You are still on time if you move now.","This is the perfect moment to recover pace.","Do one now and the rest gets easier.","Pending doses are manageable right now."],urgent:["Overdue marker is up. Act now.","Delay costs more energy later.","Run the next dose immediately.","Critical reminder: clear one dose now."]},bisaya_tagalog:{gentle:["Hinay hinay lang, basta padayon ta.","Ayaw kalimot ha, konti na effort lang.","Sakto ra ni, one step then okay na.","Kaya ra nimo, tuloy tuloy lang."],nudge:["Naay pending pa, lihok na gamay.","Pwede pa maapas, inom na karon.","Dali ra ni tapuson, go na.","Ayaw paabti ug gabii, karon na."],urgent:["Overdue na ni, inom dayon.","Dili na ni pa-urong, action na.","Karon jud dapat, para dili maipon.","Lihok dayon, mommy, kaya pa ni."]},bisaya_english:{gentle:["Padayon lang, one dose and keep rolling.","Small move now, better night later.","Ayaw skip, this one matters.","You are doing great, keep the rhythm."],nudge:["Pending ni, best time is now.","Catch up run starts with one tap.","Dali lang ni, then back to chill.","Go now before this turns stressful."],urgent:["Overdue na, execute now.","This is the must-do item right now.","Do not delay this one anymore.","One action now solves a lot."]},nihongo_tagalog_english_bisaya:{gentle:["Ganbatte mommy, kaya ra ni, one dose now.","Daijoubu pa, inom gamay then continue.","Yoshi, small step lang then relax.","Mou ippai not coffee, supplement muna."],nudge:["Hayaku gamay, pending pa ni today.","Ima now na, para smooth ang gabi.","One quick run now then chill ta.","Ganbatte, one dose then done na half."],urgent:["Ima sugu na, overdue jud.","Hayaku please, this is urgent na.","Action now, para dili ma-stack.","Karon na, no delay mode."]}},Jx={gentle:["Baby brain, blood, and bones love routine.","Consistency helps reduce decision fatigue later.","One dose now is easier than three later.","Future-you sends thanks in advance."],nudge:["Catch-up is still easy at this point.","Take one now to avoid night-time backlog.","A 30-second action clears mental load.","Momentum starts with one tap."],urgent:["Overdue stacks become stressful, so clear one now.","Prioritize this before any low-value task.","Fast action now protects your evening rest.","Execute first, then celebrate with a snack."]},e1={gentle:["Peggy payroll says: supplement compliance bonus unlocked.","Ryzen quality control approves this reminder.","Your vitamins are waiting like loyal side quests.","This is your tiny boss fight. Easy clear."],nudge:["The supplements are filing a polite complaint.","Reminder team brought snacks if you tap now. Imaginary snacks, but still.","Pending doses are louder than notifications today.","No pressure, just strategic panic with love."],urgent:["Emergency joke: this is the good kind of panic.","Supplements are now knocking at the front door.","Last call before the guilt DLC unlocks.","Critical meme status: do it now, then breathe."]},t1={gentle:["Work log check-in.","Attendance ping from Peggy.","Quick shift-status reminder.","Small admin nudge.","Paperwork whisper: log today."],nudge:["Attendance still not logged.","Midday reminder: mark work status.","Shift tracker needs one tap.","Log today before it gets forgotten.","Daily work record still pending."],urgent:["Late-day alert: attendance still empty.","End-of-day push: log work now.","Final call for today attendance.","Overtime for memory starts now. Log it.","Urgent admin ping: complete work log."]},a1={taglish:{gentle:["Isang tap lang para walang backtracking bukas.","Quick log now para clean ang records.","Mas madali pag real-time nilalagay.","Admin now, peace later."],nudge:["Nasa gitna na tayo ng day, mark na natin.","Para hindi hulaan later, log now.","One minute task lang ito.","Iwas memory tax tonight."],urgent:["Gabi mode na, kaya log na agad.","Bago matapos ang araw, close this loop.","Habol na natin habang fresh pa details.","Do not carry this to tomorrow."]},english_tagalog:{gentle:["Keep records clean, then move on.","One tap now para zero guesswork later.","Fast log, long-term clarity.","Simple admin, big peace of mind."],nudge:["Still pending, better lock it now.","Leave no loose ends today.","Quick status entry then done ka na.","Past-you will thank current-you."],urgent:["High chance makalimutan pag inantay pa.","Close this now before day rollover.","Do the log first, then chill.","This is the highest ROI tap right now."]},nihongo_tagalog:{gentle:["Kintai log check, onegaishimasu.","Ima one tap lang then okay.","Yoshi, attendance muna before next task.","Mou 1 minute lang ito."],nudge:["Mada mitourokku, log na natin.","Ima yareba easy, later mas hassle.","Ganbatte, attendance first.","Ato de ja risky, now na."],urgent:["Kyou no kintai, ima sugu.","Hayaku log now bago matapos ang araw.","Overtime sa memory wag na, tap now.","Shimekiri vibe na, close this item."]},english:{gentle:["A fast work log keeps data reliable.","Capture now while details are fresh.","This takes under a minute.","Clean tracking reduces future stress."],nudge:["Still pending. Best time is now.","Log now before context disappears.","One quick update prevents backfill pain.","Do the simple thing now."],urgent:["Day is closing. Log attendance now.","Final reminder before date rollover.","Do this now or tomorrow gets messier.","Immediate action recommended."]},bisaya_tagalog:{gentle:["Gamaya ra ni, log na dayon.","Ayaw kalimot sa attendance ha.","One tap lang, human dayon.","Padayon ta, clear ang record."],nudge:["Pending pa gihapon, lihok na.","Karon na para dili makalimtan.","Dali ra kaayo ni buhaton.","Tap na, then balik sa pahulay."],urgent:["Last na ni, log dayon.","Gabii na, ayaw na i-delay.","Karon jud para clean ang adlaw.","Dili na ni pwede later pa."]},bisaya_english:{gentle:["Quick log now, no stress later.","Simple admin task, kaya ra.","Capture while fresh pa details.","One minute check and done."],nudge:["Pending pa, finish this now.","No need overthink, just log it.","Dali ra ni, then done.","Do this first then relax."],urgent:["Late na, attendance now.","Immediate tap needed here.","Close this before midnight.","Critical admin item, run now."]},nihongo_tagalog_english_bisaya:{gentle:["Kintai check, one tap lang ni.","Daijoubu, quick log then chill ta.","Ima now, para smooth ang later.","Yoshi, admin quest clear ta."],nudge:["Mada pending, do it karon.","Hayaku one tap, then done na.","Now na, ayaw pa-late.","Ganbatte, attendance first."],urgent:["Ima sugu log dayon.","Karon na gyud, close this.","Hayaku, day rollover incoming.","No delay mode, execute now."]}},n1={gentle:["Spreadsheet spirits are calmer when logs are complete.","Admin goblins dislike missing attendance.","One tiny tap defeats tomorrow confusion.","Boring task, heroic impact."],nudge:["The calendar is asking for closure.","Your future brain requested less detective work.","Pending admin quests are multiplying.","Log first, memes after."],urgent:["This is the boss fight of tiny tasks.","Final warning from the kingdom of paperwork.","Do not let midnight win this round.","Emergency admin mode: one tap now."]},i1=[{category:"Supplements",text:"Iron from prenatal vitamins absorbs better away from high-dose calcium. Keep at least a 2-hour gap when possible."},{category:"Supplements",text:"DHA is fat-soluble. Taking it with a meal that has healthy fat usually improves absorption and reduces fishy burps."},{category:"Supplements",text:"If nausea is strong, splitting supplements across meals can improve tolerance better than forcing everything in one sitting."},{category:"Supplements",text:"Choline supports fetal brain and neural tube development. Eggs are one of the easiest food boosts on top of supplements."},{category:"Supplements",text:"Magnesium and calcium can support leg cramps, but persistent severe cramps should still be discussed with your OB."},{category:"Hydration",text:"Hydration target is usually spread through the day, not one-time chugging. Pale yellow urine is a practical hydration check."},{category:"Hydration",text:"Frequent small sips can work better than big glasses if reflux or nausea is active."},{category:"Blood Pressure",text:"Home BP checks become useful when done at similar times daily. Trend changes matter more than one random reading."},{category:"Blood Pressure",text:"Call your provider urgently for severe headache, vision changes, right upper abdominal pain, or sudden swelling."},{category:"Nutrition",text:"Protein spacing across meals helps energy stability. A protein-rich breakfast often reduces afternoon crashes."},{category:"Nutrition",text:"If appetite is low, use dense small meals: yogurt, eggs, tofu, nut butter toast, banana, soup with protein."},{category:"Nutrition",text:"Food safety matters more in pregnancy: avoid undercooked meat/eggs and unpasteurized dairy."},{category:"Food Safety",text:"Heat deli meats until steaming when possible. It is a practical step for reducing listeria risk."},{category:"Food Safety",text:"Wash produce well and separate raw meat cutting boards from ready-to-eat foods to reduce contamination risk."},{category:"Dental",text:"Pregnancy hormones can increase gum bleeding. Gentle brushing plus flossing lowers inflammation and supports overall health."},{category:"Dental",text:"Schedule dental cleaning/check early. Oral infections during pregnancy are linked with worse outcomes when ignored."},{category:"Sleep",text:"Left-side sleeping can improve comfort and circulation in later pregnancy, but the best sleep position is the one you can sustain."},{category:"Sleep",text:"A wind-down routine beats random bedtime: low light, warm shower, no heavy meals right before sleep."},{category:"Exercise",text:"Regular low-intensity movement improves glucose control and mood. Consistency matters more than workout intensity."},{category:"Exercise",text:"If a workout causes dizziness, pain, bleeding, or contractions, stop and contact your provider."},{category:"Checkups",text:"Bring a short question list to each checkup. Anxiety drops when concerns are documented and answered in order."},{category:"Checkups",text:"Track fetal movement pattern in late pregnancy. Sudden reduced movement is a same-day call to your provider."},{category:"Logistics",text:"Pre-pack document pouch: insurance card, Boshi Techo, IDs, and key phone numbers. This removes panic during labor start."},{category:"Logistics",text:"Hospital route rehearsal helps: best route, night route, taxi fallback, and estimated travel time."},{category:"Finance",text:"Keep every medical receipt and transport note. Small expenses become significant when combined for tax deduction."},{category:"Finance",text:"Set a monthly admin day for applications and forms. Batch processing reduces missed deadlines."},{category:"Finance",text:"Benefits often require consultation or formal application. Automatic payout is rare without completing forms."},{category:"Mental Health",text:"Daily 5-minute emotional check-ins can catch burnout early. Naming stress lowers its intensity."},{category:"Mental Health",text:"Support requests work best when concrete: task, time, and expected outcome."},{category:"Postpartum",text:"Plan postpartum logistics now: meals, sleep shifts, and emergency contacts. Early planning protects recovery."},{category:"Postpartum",text:"Breastfeeding support contacts should be pre-saved before delivery, not searched while exhausted."},{category:"Work",text:"Log attendance daily while memory is fresh. Late backfilling usually creates errors and stress."},{category:"Work",text:"If work symptoms worsen, document time and trigger. Specific patterns help doctors and managers respond faster."},{category:"Communication",text:"When calling offices, prepare: your ID details, purpose, and exact question. Short scripts save time."},{category:"Communication",text:"If language barrier appears, ask for simpler Japanese, written notes, or interpreter services early."},{category:"Planning",text:"Use a two-layer system: today actions and this-week actions. It keeps urgent tasks from hiding inside long lists."},{category:"Planning",text:"Link reminders to real anchors: breakfast, lunch, bedtime. Context-based cues outperform random-time alarms."},{category:"Medical",text:'Do not add herbs or new supplements without provider review. "Natural" does not always mean pregnancy-safe.'},{category:"Medical",text:"Bring current supplement list to appointments so drug-supplement interactions can be checked."},{category:"Medical",text:"Persistent vomiting, dehydration signs, bleeding, fever, or severe pain are direct call triggers, not wait-and-see items."},{category:"Japan Admin",text:"For Japan paperwork, deadlines are strict. Completing forms early is often worth more than finding perfect wording."},{category:"Japan Admin",text:"Save agency phone numbers with labels. In urgent moments, navigation speed matters more than memory."},{category:"Family",text:"Define backup caregivers and transport options now. Contingency plans reduce delivery-day chaos."},{category:"Family",text:"Short daily updates between parents keep expectations aligned and reduce silent stress buildup."}],s1=[{category:"Witty",text:"Hydration check: if your water bottle has not moved in 2 hours, it is now decorative furniture."},{category:"Witty",text:"Supplements are tiny, but their attitude is huge when ignored."},{category:"Witty",text:"Admin forms are like laundry. Fold them early or they become emotional support piles."},{category:"Witty",text:"Sleep strategy: less doom scroll, more pillow diplomacy."},{category:"Witty",text:"If today feels heavy: one dose, one form, one glass of water. Three wins beats drama."},{category:"Witty",text:"Your baby is running a premium growth subscription. Consistent inputs keep the service smooth."},{category:"Witty",text:'Reminder: "later" is a scammer when paperwork is involved.'},{category:"Witty",text:"Ganbatte mode: small actions now so future-you can flex less panic, more peace."},{category:"Witty",text:"Bisaya mini-mode: hinay lang pero padayon. Slow is still forward."},{category:"Witty",text:"Nurse-level trick: write the question before appointment, because memory turns shy inside clinics."},{category:"Witty",text:"Healthy routine is not glamorous. It is mostly repeating boring good decisions like a champion."},{category:"Witty",text:"If you forgot a dose, no guilt spiral. Reset quickly and continue the mission."}],o1=xo(Qx,["Quick-win edition.","Streak-protect mode.","Consistency compounding mode."]),ay=eb(Zx,["One step now, less stress later.","Momentum beats overthinking.","Small action, strong outcome."]),l1=xo(Jx,["You only need one tap to restart momentum.","Protect the evening by acting now.","Future-you gets calmer with this done."]),r1=xo(e1,["Comedy bonus unlocked for doing it now.","Tiny quest, big victory screen.","Mission control says this is worth it."]),c1=xo(t1,["Fast-log edition.","No-backfill mode.","Memory-friendly pass."]),ny=eb(a1,["Fast tap, clean timeline.","Close this loop before it grows.","Tiny admin now saves future effort."]),u1=xo(n1,["Paperwork goblins lose this round.","Admin quest XP +1.","Tomorrow-you sends thanks."]),d1=tb(i1,["Clinical mindset: consistency matters.","Action step: set one concrete reminder today.","Note this for your next provider conversation."]),m1=tb(s1,["Comedy aside, this one really helps.","Tiny move now beats panic later.","Make it easy: one action right now."]);function qm({dailySupp:s,suppSchedule:l,now:u=new Date}){const c=yi(u),m=Xx(u),f=Yn(u);let p=0,g=0,v=0,b=0,x=Number.POSITIVE_INFINITY;return cn.forEach(M=>{const C=l?.[M.id];(C?.times?.length?C.times:M.defaultTimes).forEach((L,W)=>{p+=1;const P=`${M.id}-${W}-${m}`;if(!!s?.[P]){g+=1;return}v+=1;const xe=ym(L);xe<=f?b+=1:x=Math.min(x,xe-f)})}),{dateKey:c,totalDoses:p,takenDoses:g,remainingDoses:v,overdueDoses:b,nextDoseMinutes:Number.isFinite(x)?x:null}}function Wm({attendance:s,now:l=new Date}){const u=yi(l),c=l.getDay(),m=c>=1&&c<=5,f=!!s?.[u],p=l.getHours();return{dateKey:u,hour:p,isWeekday:m,hasAttendance:f,needsReminder:m&&!f}}const nb=Object.freeze([{code:"happy",emoji:"",label:" Great"},{code:"okay",emoji:"",label:" Okay"},{code:"sad",emoji:"",label:" Low"},{code:"nauseous",emoji:"",label:" Nauseous"},{code:"sleepy",emoji:"",label:" Sleepy"},{code:"stressed",emoji:"",label:" Stressed"},{code:"loved",emoji:"",label:" Loved"},{code:"anxious",emoji:"",label:" Anxious"}]),h1=Object.freeze([{id:"noon",minuteOfDay:720,label:"12:00"},{id:"late_afternoon",minuteOfDay:1020,label:"17:00"},{id:"night",minuteOfDay:1200,label:"20:00"}]),iy={gentle:["Mood check-in time.","How are you feeling today?","Quick mood log before lunch reset."],nudge:["Still no mood log today.","Late-afternoon mood check.","Quick check-in before evening."],urgent:["Final mood check for today.","Before bedtime: log your mood.","End-of-day mood check-in."]},sy={gentle:["One tap is enough. Keep today emotionally tracked.","No long notes needed. Just choose one mood.","Quick snapshot now helps spot stress trends later."],nudge:["If busy kanina, one quick mood tap now is enough.","Simple check-in now, cleaner records tonight.","Track now while your day still feels fresh."],urgent:["No mood logged yet today. Last check-in window is open.","Close the day with one mood tap.","A quick mood log now keeps the daily streak complete."]};function f1(s){const l=String(s||"").trim().toLowerCase();return nb.find(c=>c.code===l)?.emoji||""}function p1(s,l){return(Array.isArray(s)?s:[]).some(c=>{const m=c?.date;if(!m)return!1;const f=new Date(m);return Number.isFinite(f.getTime())?yi(f)===l:!1})}function Pm({moods:s,now:l=new Date}){const u=yi(l),c=Yn(l),m=p1(s,u),f=[...h1].reverse().find(p=>c>=p.minuteOfDay)||null;return{dateKey:u,nowMinutes:c,hasMoodToday:m,needsReminder:!m&&!!f,activeWindow:f}}function oy(s){return[...Array.isArray(s)?s.filter(Boolean):[]].sort((u,c)=>{const m=bm(u?.time),f=bm(c?.time);if(m!==null&&f!==null&&m!==f)return m-f;if(m!==null&&f===null)return-1;if(m===null&&f!==null)return 1;const p=String(u?.title||"").toLowerCase(),g=String(c?.title||"").toLowerCase();return p.localeCompare(g)})}function g1(s,l){try{const u=new Date(`${s}T00:00`),c=new Date(`${l}T00:00`);return Math.round((c-u)/(1e3*60*60*24))}catch{return 0}}function Gm({planner:s,now:l=new Date}){const u=yi(l),c=Yn(l),m=s&&typeof s=="object"?s:{},p=(Array.isArray(m[u])?m[u]:[]).filter(P=>P&&!P.done),g=oy(p),v=[];for(const[P,Z]of Object.entries(m)){if(!P||P>=u||!Array.isArray(Z)||Z.length===0)continue;const xe=Z.filter(te=>te&&!te.done);xe.length!==0&&v.push({dateISO:P,plans:oy(xe)})}v.sort((P,Z)=>Z.dateISO.localeCompare(P.dateISO));const b=v.length>0?v[0]:null,x=b?b.dateISO:u,M=b?b.plans[0]:g[0]||null;if(!M)return{dateKey:u,nowMinutes:c,pendingTodayCount:p.length,pendingOverdueCount:v.reduce((P,Z)=>P+Z.plans.length,0),candidate:null};const C=bm(M.time),R=C===null?null:C-c,L=x<u,W=L?g1(x,u):0;return{dateKey:u,nowMinutes:c,pendingTodayCount:p.length,pendingOverdueCount:v.reduce((P,Z)=>P+Z.plans.length,0),candidate:{dateISO:x,planId:String(M.id||"").trim(),title:String(M.title||"").trim(),time:String(M.time||"").trim(),minutesUntil:R,isOverdueDay:L,overdueDays:W}}}function y1(s,l){return s.overdueDoses>=2||s.overdueDoses>=1&&l.getHours()>=16?"urgent":s.overdueDoses>=1||s.remainingDoses>=3&&l.getHours()>=14?"nudge":s.remainingDoses>=1&&l.getHours()>=20?"urgent":"gentle"}function b1(s){return s.hour>=17?"urgent":s.hour>=11?"nudge":"gentle"}function v1(s,l){const u=s?.candidate;if(!u)return"gentle";if(u.isOverdueDay)return"urgent";const c=u.minutesUntil;return c!==null&&c<=0?l.getHours()>=18?"urgent":"nudge":s.pendingTodayCount>=3&&l.getHours()>=12||s.pendingTodayCount>=1&&l.getHours()>=17?"nudge":"gentle"}function w1(s){return s==="urgent"?18:s==="nudge"?30:45}function k1(s,l,u){return u==="urgent"?s.overdueDoses>=3?6:s.overdueDoses>=2?8:10:u==="nudge"?s.overdueDoses>=1?12:s.remainingDoses>=4?14:18:l.getHours()>=18&&s.remainingDoses>=1?20:28}function x1(s,l){return l==="urgent"?s.hour>=20?8:12:l==="nudge"?s.hour>=15?18:24:40}function S1({taken:s,total:l,remaining:u,overdue:c,styleLine:m,pushLine:f,jokeLine:p,nextDoseMinutes:g}){return[`${s}/${l} doses done.`,`${u} left today.`,c>0?`${c} overdue.`:"Still recoverable.",g&&c===0?`Next window in ~${g} min.`:"",m,f,p].filter(Boolean).join(" ")}function Vm(s,l=new Date,u="home"){const c=y1(s,l),m=k1(s,l,c),f=Math.floor(Yn(l)/m),p=`${u}|supp|${s.dateKey}|${s.remainingDoses}|${s.overdueDoses}|${f}|${c}`,g=Z0(ab,`${p}|style`)||"taglish",v=ay[g]||ay.taglish,b=za(o1[c],`${p}|title`),x=za(v[c],`${p}|line`),M=za(l1[c],`${p}|push`),C=za(r1[c],`${p}|joke`),R=S1({taken:s.takenDoses,total:s.totalDoses,remaining:s.remainingDoses,overdue:s.overdueDoses,styleLine:x,pushLine:M,jokeLine:C,nextDoseMinutes:s.nextDoseMinutes});return{type:"supp",level:c,intervalMinutes:m,slotKey:`${s.dateKey}|supp|${m}|${f}`,priorityScore:c==="urgent"?5:c==="nudge"?3.6:2.4,title:b,subtitle:R,notificationTitle:"Peggy reminder: Supplements",notificationBody:`${s.remainingDoses} doses left today${s.overdueDoses?`, ${s.overdueDoses} overdue`:""}.`}}function Xm(s,l=new Date,u="home"){const c=b1(s),m=x1(s,c),f=Math.floor(Yn(l)/m),p=`${u}|work|${s.dateKey}|${s.hour}|${f}|${c}`,g=Z0(ab,`${p}|style`)||"taglish",v=ny[g]||ny.taglish,b=za(c1[c],`${p}|title`),x=za(v[c],`${p}|line`),M=za(u1[c],`${p}|joke`),C=`${x} ${M}`.trim();return{type:"work",level:c,intervalMinutes:m,slotKey:`${s.dateKey}|work|${m}|${f}`,priorityScore:c==="urgent"?4.4:c==="nudge"?3.1:1.9,title:b,subtitle:C,notificationTitle:"Peggy reminder: Attendance",notificationBody:"Please log today attendance before day rollover."}}function j1(s){const l=s?.activeWindow?.id;return l==="night"?"urgent":l==="late_afternoon"?"nudge":"gentle"}function Qm(s,l=new Date,u="home"){if(!s?.needsReminder||!s?.activeWindow?.id)return null;const c=j1(s),m=s.activeWindow.id,f=`${u}|mood|${s.dateKey}|${m}|${c}`,p=za(iy[c]||iy.gentle,`${f}|title`),g=za(sy[c]||sy.gentle,`${f}|subtitle`);return{type:"mood",level:c,intervalMinutes:1,slotKey:`${s.dateKey}|mood|${m}`,priorityScore:c==="urgent"?4.6:c==="nudge"?3.7:2.7,title:p,subtitle:g,notificationTitle:"Peggy check-in: Mood",notificationBody:`No mood log yet for today. Quick check-in window: ${s.activeWindow.label}.`,moodQuickActions:nb}}function Zm(s,l=new Date,u="home"){const c=s?.candidate;if(!c?.planId||!c?.title)return null;const m=v1(s,l),f=w1(m),p=Math.floor(Yn(l)/f),g=`${u}|plan|${s.dateKey}|${c.dateISO}|${c.planId}|${p}|${m}`,v=String(c.title||"").trim()||"Planner item",b=String(c.time||"").trim(),x=c.minutesUntil,M=(()=>{try{return new Date(`${c.dateISO}T00:00`).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return c.dateISO}})(),C=c.isOverdueDay?`Missed from ${M}${c.overdueDays?` (${c.overdueDays}d ago)`:""}.`:x===null?"All day.":x<=0?`Due now${b?` (${b})`:""}.`:`Today${b?` at ${b}`:""}${x<=180?` (~${x}m)`:""}.`,R={gentle:["Small plan, less stress later.","One tap to stay organized.","Keep it light and simple.","Plan check-in, then continue."],nudge:["Quick confirm so it does not slip.","Tiny admin now saves tomorrow.","Close the loop while it is easy.","One quick step, then back to rest."],urgent:["Overdue loop detected. Close it now.","Confirm status, then move on.","Do not let this pile up.","Fast check, clean timeline."]},L=za(R[m]||R.gentle,`${g}|line`),W=`${C} ${L}`.trim();return{type:"plan",level:m,intervalMinutes:f,slotKey:`${s.dateKey}|plan|${f}|${p}|${c.dateISO}|${c.planId}`,priorityScore:m==="urgent"?3.9:m==="nudge"?2.8:1.6,title:v,subtitle:W,notificationTitle:"Peggy reminder: Planner",notificationBody:`${v} ${C}`.trim(),planDateISO:c.dateISO,planId:c.planId}}function N1({now:s=new Date,dailyTip:l,seedSalt:u="notify"}){const m=Math.floor(Yn(s)/180),f=String(l?.text||"").trim(),p=l?.tone==="serious"?"serious":"witty",g=String(l?.category||"General");return{type:"tip",level:p==="serious"?"nudge":"gentle",intervalMinutes:180,slotKey:`${yi(s)}|tip|180|${m}|${u}`,priorityScore:p==="serious"?1.6:1.2,title:p==="serious"?"Daily Tip: Deep info":"Daily Tip: Light break",subtitle:f,notificationTitle:`Peggy tip: ${g}`,notificationBody:f||"One small healthy action now beats perfect plans later."}}function ib({now:s=new Date,weeksPregnant:l=null,completedCheckups:u=0,suppCtx:c=null}){const m=yi(s),f=Math.floor(Yn(s)/240),p=`${m}|${f}|${l??"na"}|${u}|${c?.remainingDoses??0}|${c?.overdueDoses??0}`,v=Kl(`${p}|tone`)%100<18,x=za(v?m1:d1,`${p}|tip`);return{category:x?.category||"General",tone:v?"witty":"serious",modeLabel:v?"Witty break":"Deep info mode",text:x?.text||"One small healthy action now beats perfect plans later."}}function ly(s,l,u=1){const c=Array.isArray(s)?[...s]:[],m=[];if(c.length===0||u<=0)return m;let f=String(l);for(;c.length>0&&m.length<u;){const p=Kl(f)%c.length;m.push(c.splice(p,1)[0]),f=`${f}|${m.length}`}return m}const T1=["Top picks stay visible. Rotating pick keeps it fresh.","Core choices remain stable, spotlight changes by time.","Priority names are pinned, wildcards rotate for variety.","Main picks stay. Discovery picks rotate all day."],A1=["Baby naming committee is now in session.","Kanji + vibes + future nickname test: approved.","One more strong candidate entered the chat.","Portfolio-level name drop detected.","This name passed the playground shout test."],M1=Ym(T1,["Rotating mode keeps discovery active.","Same quality picks, fresher rhythm.","Variety pass enabled for today."]),E1=Ym(A1,["Name lab status: productive.","Another contender just got promoted.","Shortlist energy remains elite."]),C1=["Pregnancy Planning, Made Simple for @placeholder","Daily Pregnancy Guide for @placeholder","Track Pregnancy, Stay Prepared for @placeholder","Pregnancy Clarity, Every Day for @placeholder","A Simple Pregnancy Plan for @placeholder"];function ry(s){return s?typeof s=="string"?s.trim():String(s?.name||"").trim():""}function D1({now:s=new Date,babyNamesInfo:l,seedSalt:u="home"}){const c=Math.floor(s.getTime()/18e3),m=Math.floor(s.getTime()/6e3),f=yi(s),p=Array.isArray(l?.boyNames)?l.boyNames:[],g=Array.isArray(l?.girlNames)?l.girlNames:[],v=[...p,...g].filter(C=>ry(C)),b=za(C1,`${u}|subtitle|${c}|phrase`)||"Pregnancy Planning, Made Simple for @placeholder",x=za(v,`${u}|subtitle|${m}|name`),M=ry(x)||"Baby";return{text:b.replace("@placeholder",M),babyName:M,slotKey:`${f}|subtitle|${c}|${m}`}}function sb({now:s=new Date,babyNamesInfo:l,seedSalt:u="home"}){const c=yi(s),m=Math.floor(Yn(s)/240),f=Kl(`${u}|${c}|gender`)%2===0?"boy":"girl",p=f==="boy"?l?.boyNames||[]:l?.girlNames||[],g=p.filter(W=>W?.tier===1),v=p.filter(Boolean),b=ly(g.length>=3?g:v,`${u}|${c}|${m}|pinned`,Math.min(3,v.length)),x=ly(v,`${u}|${c}|${m}|rotating`,1)[0]||b[0]||null,M={name:"Kaizen",kanji:"",meaning:"Pioneer with calm strength",tier:1},C=x||b[0]||M,R=za(M1,`${u}|${c}|${m}|style`),L=za(E1,`${u}|${c}|${m}|joke`);return{dateKey:c,gender:f,companionName:C.name,companionKanji:C.kanji,companionLabel:`${C.name}${C.kanji?` (${C.kanji})`:""}`,spotlight:x||C,pinnedTopPicks:b,spotlightLine:R,jokeLine:L,slotKey:`${c}|name|${m}|${f}`,notificationTitle:`New name spotlight: ${x?.name||C.name}`,notificationBody:`${(x?.kanji||C.kanji||"").trim()} ${x?.meaning||C.meaning||""}`.trim()}}const Tl="peggy-smart-notifs-enabled",pc="baby-prep-smart-notifs-enabled",Rl="peggy-smart-notif-pref-changed",ob="peggy-smart-notifs-log-v1",Jm="peggy-smart-notif-inbox-v1",jc="peggy-smart-notif-inbox-changed",Nc="peggy-smart-notif-quiet-hours",Sl="baby-prep-smart-notif-quiet-hours",vm="peggy-smart-notif-quiet-hours-changed",Tc="peggy-smart-notif-channels",jl="baby-prep-smart-notif-channels",_l="peggy-smart-notif-channels-changed",O1=Object.freeze(["reminders","calendar","dailyTip","names"]),Al=Object.freeze({enabled:!0,start:"22:00",end:"07:00"}),Xd=Object.freeze({reminders:!0,calendar:!0,dailyTip:!0,names:!0});function Ac(s){const l=s&&typeof s=="object"?s:{},u={};for(const c of O1)u[c]=l[c]!==!1;return u}function cy(s,l="00:00"){const u=String(s||"").trim(),c=/^(\d{1,2}):(\d{1,2})$/.exec(u);if(!c)return l;const m=Number(c[1]),f=Number(c[2]);return!Number.isFinite(m)||!Number.isFinite(f)||m<0||m>23||f<0||f>59?l:`${String(m).padStart(2,"0")}:${String(f).padStart(2,"0")}`}function Ll(s){const l=s&&typeof s=="object"?s:{};return{enabled:l.enabled!==!1,start:cy(l.start,Al.start),end:cy(l.end,Al.end)}}function Hl(){if(typeof window>"u")return{...Al};try{const s=window.localStorage.getItem(Nc);if(!s){const l=window.localStorage.getItem(Sl);if(l){const u=Ll(JSON.parse(l));return window.localStorage.setItem(Nc,JSON.stringify(u)),window.localStorage.removeItem(Sl),u}return{...Al}}return window.localStorage.getItem(Sl)!==null&&window.localStorage.removeItem(Sl),Ll(JSON.parse(s))}catch{return{...Al}}}function uy(s){if(typeof window>"u")return;const l=Ll(s);window.localStorage.setItem(Nc,JSON.stringify(l)),window.localStorage.removeItem(Sl),window.dispatchEvent(new CustomEvent(vm,{detail:l})),window.dispatchEvent(new CustomEvent("peggy-local-changed",{detail:{key:Nc}}))}function lb(s=new Date,l=null){const u=Ll(l||Hl());if(!u.enabled)return!1;const c=ym(u.start),m=ym(u.end),f=Yn(s);return c===m?!1:c<m?f>=c&&f<m:f>=c||f<m}function Qd(s=null){const l=Ll(s||Hl());return l.enabled?`${l.start} - ${l.end}`:"Off"}function yo(){if(typeof window>"u")return!1;const s=window.localStorage.getItem(Tl);if(s==="1"||s==="0")return s==="1";const l=window.localStorage.getItem(pc);return l==="1"||l==="0"?(window.localStorage.setItem(Tl,l),window.localStorage.removeItem(pc),l==="1"):(l!==null&&window.localStorage.removeItem(pc),typeof Notification<"u"&&Notification.permission==="granted"?(window.localStorage.setItem(Tl,"1"),!0):!1)}function vo(){if(typeof window>"u")return{...Xd};try{const s=window.localStorage.getItem(Tc);if(!s){const l=window.localStorage.getItem(jl);if(l){const u=Ac(JSON.parse(l));return window.localStorage.setItem(Tc,JSON.stringify(u)),window.localStorage.removeItem(jl),u}return{...Xd}}return window.localStorage.getItem(jl)!==null&&window.localStorage.removeItem(jl),Ac(JSON.parse(s))}catch{return{...Xd}}}function rb(s){if(typeof window>"u")return;const l=Ac(s);window.localStorage.setItem(Tc,JSON.stringify(l)),window.localStorage.removeItem(jl),window.dispatchEvent(new CustomEvent(_l,{detail:l})),window.dispatchEvent(new CustomEvent("peggy-local-changed",{detail:{key:Tc}}))}function ka(s,l=null){const u=l?Ac(l):vo(),c=String(s||"").trim();return!c||!Object.prototype.hasOwnProperty.call(u,c)?!1:!!u[c]}function dy(s){if(typeof window>"u")return;const l=s?"1":"0";window.localStorage.setItem(Tl,l),window.localStorage.removeItem(pc),window.dispatchEvent(new CustomEvent(Rl,{detail:{enabled:!!s}})),window.dispatchEvent(new CustomEvent("peggy-local-changed",{detail:{key:Tl}}))}function cb(){if(typeof window>"u")return{};try{const s=window.localStorage.getItem(ob);return s?JSON.parse(s):{}}catch{return{}}}function R1(s){if(!(typeof window>"u"))try{window.localStorage.setItem(ob,JSON.stringify(s))}catch{}}function ub(s,l=new Date){const u=l.getTime()-432e6,c={};for(const[m,f]of Object.entries(s||{})){const p=Number(f);Number.isFinite(p)&&p>=u&&(c[m]=p)}return c}function Zd(s,l=new Date){return s?!!ub(cb(),l)[s]:!1}function Jd(s,l=new Date){if(!s)return;const u=ub(cb(),l);u[s]=l.getTime(),R1(u)}function eh(s={}){const l=new Date().toISOString(),u=String(s.createdAt||l).trim()||l,c=String(s.title||"").trim()||"Peggy notification",m=String(s.body||"").trim(),f=String(s.type||"general").trim()||"general",p=String(s.level||"gentle").trim()||"gentle",g=String(s.status||"sent").trim()||"sent",v=String(s.reason||"").trim(),b=String(s.slotKey||"").trim(),x=String(s.source||"local").trim()||"local",M=String(s.dedupeKey||`${b}|${g}|${v}`).trim();return{id:String(s.id||`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`).trim(),createdAt:u,title:c,body:m,type:f,level:p,status:g,reason:v,slotKey:b,source:x,dedupeKey:M,read:!!s.read}}function Dn(){if(typeof window>"u")return[];try{const s=window.localStorage.getItem(Jm);if(!s)return[];const l=JSON.parse(s);return Array.isArray(l)?l.map(u=>eh(u)).sort((u,c)=>String(c.createdAt).localeCompare(String(u.createdAt))).slice(0,240):[]}catch{return[]}}function th(s){if(typeof window>"u")return;const u=(Array.isArray(s)?s.map(c=>eh(c)):[]).sort((c,m)=>String(m.createdAt).localeCompare(String(c.createdAt))).slice(0,240);window.localStorage.setItem(Jm,JSON.stringify(u)),window.dispatchEvent(new CustomEvent(jc,{detail:{items:u}}))}function Kn(s={}){if(typeof window>"u")return;const l=eh(s),u=Dn(),c=Date.now();u.find(f=>{if(!f?.dedupeKey||!l.dedupeKey||f.dedupeKey!==l.dedupeKey)return!1;const p=Number(new Date(f.createdAt).getTime());return Number.isFinite(p)?Math.abs(c-p)<=720*60*1e3:!1})||th([l,...u])}function _1(s){if(typeof window>"u")return;const l=String(s||"").trim();if(!l)return;const c=Dn().map(m=>m.id===l?{...m,read:!0}:m);th(c)}function L1(){if(typeof window>"u")return;const s=Dn();if(!s.length)return;const l=s.map(u=>({...u,read:!0}));th(l)}function H1(){typeof window>"u"||(window.localStorage.removeItem(Jm),window.dispatchEvent(new CustomEvent(jc,{detail:{items:[]}})))}function B1(s){let l=null;for(const u of Object.keys(s)){const m=u.split("-").slice(2).join("-"),f=new Date(m);!Number.isNaN(f)&&(!l||f<l)&&(l=f)}return l}function z1(s,l,u,c){const m=$m(u),f=new Date,p=`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(f.getDate()).padStart(2,"0")}`;if(u>p)return null;if(c){if(new Date(m)<c)return null}else return null;let g=0,v=0;return cn.forEach(b=>{(l[b.id]?.times||b.defaultTimes).forEach((C,R)=>{g+=1,s[`${b.id}-${R}-${m}`]&&(v+=1)})}),g===0?null:v===g?"all":v>0?"partial":"missed"}function $1(s){const l=String(s||"").trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(l))return null;const[u,c,m]=l.split("-").map(Number),f=new Date(u,c-1,m);return Number.isNaN(f.getTime())?null:f}function lo(s){return!(s instanceof Date)||Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function gl(s,l){const u=new Date(s);return u.setDate(u.getDate()+l),u}function I1(s,l){const u=new Date(s);return u.setFullYear(u.getFullYear()+l),u}function U1(){const{checked:s,dailySupp:l,isSuppTaken:u,moneyClaimed:c,dueDate:m,setDueDate:f,checkups:p,moods:g,suppSchedule:v,attendance:b,planner:x,addPlan:M,updatePlan:C,removePlan:R,togglePlanDone:L}=Fn(),[W,P]=w.useState(!m),[Z,xe]=w.useState(()=>Date.now()),[te,ue]=w.useState(()=>Date.now()),[se,ae]=w.useState(()=>vo()),V=w.useMemo(()=>new Date(Z),[Z]),[K,O]=w.useState({y:V.getFullYear(),m:V.getMonth()+1}),[le,ve]=w.useState(null);w.useEffect(()=>{const ye=setInterval(()=>xe(Date.now()),3e4);return()=>clearInterval(ye)},[]),w.useEffect(()=>{const ye=setInterval(()=>ue(Date.now()),6e3);return()=>clearInterval(ye)},[]),w.useEffect(()=>{if(typeof window>"u")return;const ye=Me=>{if(Me?.detail&&typeof Me.detail=="object"){ae(Me.detail);return}ae(vo())};return window.addEventListener(_l,ye),window.addEventListener("peggy-backup-restored",ye),()=>{window.removeEventListener(_l,ye),window.removeEventListener("peggy-backup-restored",ye)}},[]);const ce=ye=>ka(ye,se),fe=ye=>{const Me={...se,[ye]:!ce(ye)};ae(Me),rb(Me)},we=js.reduce((ye,Me)=>ye+Me.items.length,0),Ce=js.reduce((ye,Me)=>ye+Me.items.filter(Qe=>s[Qe.id]).length,0),_=we>0?Math.round(Ce/we*100):0,Q=cn.filter(ye=>(v?.[ye.id]?.times||ye.defaultTimes).every(($e,kt)=>u(ye.id,kt))).length,Se=cn.length,Y=In.reduce((ye,Me)=>ye+Me.amount,0),ge=In.filter(ye=>c[ye.id]).reduce((ye,Me)=>ye+Me.amount,0),k=m?Math.ceil((new Date(m)-V)/(1e3*60*60*24)):null,z=m?Math.max(0,40-Math.ceil(k/7)):null,re=w.useMemo(()=>{for(const ye of pi)if(!p[ye.id]?.completed)return ye;return null},[p]),N=pi.filter(ye=>p[ye.id]?.completed).length,F=g.length>0?g[0]:null,X=w.useMemo(()=>{const ye=$1(m);if(!ye)return null;const Me=gl(ye,-280),Qe=gl(ye,-56),$e=gl(ye,-3),kt=gl(ye,15),St=gl(ye,365),ft=I1(ye,18);return{startISO:lo(Me),preDeliveryStartISO:lo(Qe),urgentStartISO:lo($e),urgentEndISO:lo(kt),yearOneEndISO:lo(St),longSupportEndISO:lo(ft)}},[m]),U=ye=>{if(!X||ye<X.startISO||ye>X.longSupportEndISO)return"";let Me="";ye<X.preDeliveryStartISO?Me="cal-era-pregnancy":ye<X.urgentStartISO?Me="cal-era-prep":ye<=X.urgentEndISO?Me="cal-era-urgent":ye<=X.yearOneEndISO?Me="cal-era-year1":Me="cal-era-long";const Qe=ye.slice(5,7);return Qe==="02"||Qe==="03"?`${Me} cal-era-tax-window`:Me},Te=w.useMemo(()=>{const ye={};return pi.forEach(Me=>{const Qe=p[Me.id];Qe?.date&&(ye[Qe.date]=!0)}),ye},[p]),Ae=w.useMemo(()=>{const ye={};return g.forEach(Me=>{const Qe=new Date(Me.date),$e=`${Qe.getFullYear()}-${String(Qe.getMonth()+1).padStart(2,"0")}-${String(Qe.getDate()).padStart(2,"0")}`;ye[$e]||(ye[$e]=Me)}),ye},[g]),De=w.useMemo(()=>B1(l),[l]),tt=w.useMemo(()=>qm({dailySupp:l,suppSchedule:v,now:V}),[l,v,Z]),de=w.useMemo(()=>Wm({attendance:b,now:V}),[b,Z]),Oe=w.useMemo(()=>Pm({moods:g,now:V}),[g,Z]),Ve=w.useMemo(()=>Gm({planner:x,now:V}),[x,Z]),Xe=w.useMemo(()=>tt.remainingDoses>0?Vm(tt,V,"home"):null,[tt,Z]),Ze=w.useMemo(()=>de.needsReminder?Xm(de,V,"home"):null,[de,Z]),lt=w.useMemo(()=>Oe.needsReminder?Qm(Oe,V,"home"):null,[Oe,Z]),qe=w.useMemo(()=>Ve?.candidate?.planId?Zm(Ve,V,"home"):null,[Ve,Z]),rt=w.useMemo(()=>sb({now:V,babyNamesInfo:Cn,seedSalt:"home"}),[Z]),Wt=w.useMemo(()=>D1({now:new Date(te),babyNamesInfo:Cn,seedSalt:"home"}),[te]),xt=w.useMemo(()=>ib({now:V,weeksPregnant:z,completedCheckups:N,suppCtx:tt}),[Z,z,N,tt.remainingDoses,tt.overdueDoses]);return n.jsxs("div",{className:"content",children:[n.jsx("header",{className:"home-header",children:n.jsxs("div",{className:"home-header-surface",children:[n.jsxs("div",{className:"home-header-top",children:[n.jsxs("div",{className:"home-header-brand",children:[n.jsx("h1",{children:"Peggy"}),n.jsx("p",{className:"subtitle dynamic-companion subtitle-no-card",children:Wt.text},Wt.slotKey)]}),m&&!W&&n.jsx("button",{type:"button",className:`due-badge glass-inner ${k!==null&&k<=0?"due-now":""}`,onClick:()=>P(!0),children:k!==null&&k>0?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"due-badge-label",children:"Due Countdown"}),n.jsxs("span",{className:"due-badge-value",children:[k," days"]}),z!==null&&n.jsxs("span",{className:"due-badge-meta",children:["Week ",z]})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"due-badge-label",children:"Delivery Window"}),n.jsx("span",{className:"due-badge-value",children:"Any day now"}),n.jsx("span",{className:"due-badge-meta",children:"Tap to update due date"})]})})]}),(!m||W)&&n.jsxs("div",{className:"due-input",children:[n.jsx("label",{htmlFor:"due-date-input",children:"Due date"}),n.jsx("input",{id:"due-date-input",type:"date",value:m,onChange:ye=>{f(ye.target.value),P(!1)}})]})]})}),n.jsxs("div",{className:"stats",children:[n.jsxs("div",{className:"stat-card glass-card",children:[n.jsxs("div",{className:"stat-number",children:[_,"%"]}),n.jsx("div",{className:"stat-label",children:"Tasks Done"}),n.jsx("div",{className:"stat-bar",children:n.jsx("div",{style:{width:`${_}%`}})})]}),n.jsxs("div",{className:"stat-card glass-card",children:[n.jsxs("div",{className:"stat-number",children:[Q,"/",Se]}),n.jsx("div",{className:"stat-label",children:"Supps Today"}),n.jsx("div",{className:"stat-bar",children:n.jsx("div",{style:{width:`${Q/Se*100}%`},className:"green"})})]}),n.jsxs("div",{className:"stat-card glass-card",children:[n.jsxs("div",{className:"stat-number",children:[(ge/1e4).toFixed(0),""]}),n.jsx("div",{className:"stat-label",children:"Yen Claimed"}),n.jsx("div",{className:"stat-bar",children:n.jsx("div",{style:{width:`${ge/Y*100}%`},className:"gold"})})]})]}),n.jsxs("section",{className:"glass-section tip-card",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.tip})}),n.jsx("div",{children:n.jsx("h2",{children:"Daily Tip"})}),n.jsx("button",{type:"button",className:`notif-card-toggle glass-inner ${ce("dailyTip")?"on":""}`,onClick:()=>fe("dailyTip"),"aria-pressed":ce("dailyTip"),title:"Toggle Daily Tip notifications",children:ce("dailyTip")?"Notif ON":"Notif OFF"})]}),n.jsxs("div",{className:`tip-mode ${xt.tone}`,children:[xt.modeLabel," - ",xt.category]}),n.jsx("p",{className:"tip-text",children:xt.text})]}),n.jsxs("section",{className:"glass-section reminder-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.reminders})}),n.jsx("div",{children:n.jsx("h2",{children:"Reminders for Today"})}),n.jsx("button",{type:"button",className:`notif-card-toggle glass-inner ${ce("reminders")?"on":""}`,onClick:()=>fe("reminders"),"aria-pressed":ce("reminders"),title:"Toggle reminder notifications",children:ce("reminders")?"Notif ON":"Notif OFF"})]}),qe||Xe||Ze||lt?n.jsxs("div",{className:"reminder-cards",children:[qe&&n.jsxs("div",{className:`reminder-card glass-inner reminder-plan level-${qe.level}`,onClick:()=>ve(qe.planDateISO),children:[n.jsx("span",{className:"reminder-icon",children:n.jsx(Le,{icon:Ee.activity})}),n.jsxs("div",{className:"reminder-content",children:[n.jsx("div",{className:"reminder-title",children:qe.title}),n.jsx("div",{className:"reminder-subtitle",children:qe.subtitle})]}),n.jsx("button",{type:"button",className:"btn-glass-mini primary reminder-action",onClick:ye=>{ye.stopPropagation(),L?.(qe.planDateISO,qe.planId)},children:"Done"})]}),Xe&&n.jsxs("div",{className:`reminder-card glass-inner reminder-supps level-${Xe.level}`,children:[n.jsx("span",{className:"reminder-icon",children:n.jsx(Le,{icon:Ee.supplements})}),n.jsxs("div",{className:"reminder-content",children:[n.jsx("div",{className:"reminder-title",children:Xe.title}),n.jsx("div",{className:"reminder-subtitle",children:Xe.subtitle})]})]}),Ze&&n.jsxs("div",{className:`reminder-card glass-inner reminder-work level-${Ze.level}`,children:[n.jsx("span",{className:"reminder-icon",children:n.jsx(Le,{icon:Ee.work})}),n.jsxs("div",{className:"reminder-content",children:[n.jsx("div",{className:"reminder-title",children:Ze.title}),n.jsx("div",{className:"reminder-subtitle",children:Ze.subtitle})]})]}),lt&&n.jsxs("div",{className:`reminder-card glass-inner reminder-mood level-${lt.level}`,children:[n.jsx("span",{className:"reminder-icon",children:n.jsx(Le,{icon:Ee.reminders})}),n.jsxs("div",{className:"reminder-content",children:[n.jsx("div",{className:"reminder-title",children:lt.title}),n.jsx("div",{className:"reminder-subtitle",children:lt.subtitle})]}),n.jsx("button",{type:"button",className:"btn-glass-mini primary reminder-action",onClick:()=>{window.dispatchEvent(new CustomEvent("peggy-open-health-mood"))},children:"Log mood"})]})]}):n.jsx("p",{className:"section-note",children:"All good. No reminders right now."}),n.jsx("p",{className:"section-note",children:"Notification settings are now in More."})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.activity})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Calendar"}),n.jsx("span",{className:"section-count",children:"Tap a date to add plans"})]}),n.jsx("button",{type:"button",className:`notif-card-toggle glass-inner ${ce("calendar")?"on":""}`,onClick:()=>fe("calendar"),"aria-pressed":ce("calendar"),title:"Toggle calendar plan notifications",children:ce("calendar")?"Notif ON":"Notif OFF"})]}),n.jsx(ho,{year:K.y,month:K.m,onMonthChange:(ye,Me)=>O({y:ye,m:Me}),selectedDate:le,onDayClick:ye=>ve(ye),getDayClassName:U,renderDay:ye=>{const Me=z1(l,v,ye,De),Qe=b[ye],$e=Te[ye],kt=Ae[ye],St=Array.isArray(x?.[ye])&&x[ye].length>0;return!Me&&!Qe&&!$e&&!kt&&!St?null:n.jsxs("div",{className:"cal-dots",children:[Me&&n.jsx("span",{className:`cal-micro supp-dot-${Me}`}),Qe&&n.jsx("span",{className:`cal-micro ${Qe.worked?"work-dot-yes":"work-dot-no"}`}),$e&&n.jsx("span",{className:"cal-micro checkup-dot"}),kt&&n.jsx("span",{className:"cal-micro mood-dot"}),St&&n.jsx("span",{className:"cal-micro planner-dot"})]})}}),n.jsxs("div",{className:"cal-legend",children:[n.jsxs("span",{className:"cal-legend-item",children:[n.jsx("span",{className:"cal-micro supp-dot-all"})," Supps"]}),n.jsxs("span",{className:"cal-legend-item",children:[n.jsx("span",{className:"cal-micro work-dot-yes"})," Worked"]}),n.jsxs("span",{className:"cal-legend-item",children:[n.jsx("span",{className:"cal-micro checkup-dot"})," Checkup"]}),n.jsxs("span",{className:"cal-legend-item",children:[n.jsx("span",{className:"cal-micro mood-dot"})," Mood"]}),n.jsxs("span",{className:"cal-legend-item",children:[n.jsx("span",{className:"cal-micro planner-dot"})," Plans"]})]}),X&&n.jsxs("div",{className:"cal-era-legend",children:[n.jsxs("span",{className:"cal-era-item",children:[n.jsx("span",{className:"cal-era-swatch cal-era-pregnancy-swatch"})," Pregnancy setup"]}),n.jsxs("span",{className:"cal-era-item",children:[n.jsx("span",{className:"cal-era-swatch cal-era-prep-swatch"})," Pre-delivery prep"]}),n.jsxs("span",{className:"cal-era-item",children:[n.jsx("span",{className:"cal-era-swatch cal-era-urgent-swatch"})," Birth urgent window"]}),n.jsxs("span",{className:"cal-era-item",children:[n.jsx("span",{className:"cal-era-swatch cal-era-year1-swatch"})," Year 1 supports"]}),n.jsxs("span",{className:"cal-era-item",children:[n.jsx("span",{className:"cal-era-swatch cal-era-long-swatch"})," Long-term child support"]}),n.jsxs("span",{className:"cal-era-item",children:[n.jsx("span",{className:"cal-era-swatch cal-era-tax-swatch"})," Feb-Mar tax filing window"]})]})]}),le&&n.jsx(Vx,{dateISO:le,onClose:()=>ve(null),dailySupp:l,suppSchedule:v,attendance:b,checkups:p,moods:g,planner:x,addPlan:M,updatePlan:C,removePlan:R,togglePlanDone:L},le),z!==null&&z>=0&&n.jsxs("section",{className:"glass-section home-progress-ring",children:[n.jsxs("div",{className:"ring-container",children:[n.jsxs("svg",{viewBox:"0 0 120 120",className:"progress-svg",children:[n.jsx("circle",{cx:"60",cy:"60",r:"52",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"8"}),n.jsx("circle",{cx:"60",cy:"60",r:"52",fill:"none",stroke:"url(#ringGradient)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${z/40*327} 327`,transform:"rotate(-90 60 60)"}),n.jsx("defs",{children:n.jsxs("linearGradient",{id:"ringGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[n.jsx("stop",{offset:"0%",stopColor:"#e91e8b"}),n.jsx("stop",{offset:"100%",stopColor:"#6c5ce7"})]})})]}),n.jsxs("div",{className:"ring-text",children:[n.jsx("div",{className:"ring-number",children:z}),n.jsx("div",{className:"ring-label",children:"weeks"})]})]}),n.jsxs("div",{className:"ring-info",children:[n.jsxs("div",{className:"ring-detail",children:["Trimester ",z<13?"1":z<27?"2":"3"]}),n.jsxs("div",{className:"ring-detail",children:["Checkups: ",N,"/14"]}),F&&n.jsxs("div",{className:"ring-detail ring-mood-detail",children:[n.jsx("span",{children:"Mood:"}),n.jsx("span",{className:"ring-mood-icon",children:n.jsx(xa,{token:F.mood})}),n.jsx("span",{children:F.energy&&`Energy: ${F.energy}/5`})]})]})]}),n.jsxs("section",{className:"glass-section name-spotlight-card",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.names})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Name Spotlight"}),n.jsxs("span",{className:"section-count",children:[rt.gender==="boy"?"Boy names":"Girl names"," - updates every few hours"]})]}),n.jsx("button",{type:"button",className:`notif-card-toggle glass-inner ${ce("names")?"on":""}`,onClick:()=>fe("names"),"aria-pressed":ce("names"),title:"Toggle baby names notifications",children:ce("names")?"Notif ON":"Notif OFF"})]}),n.jsxs("div",{className:"name-spotlight-main glass-inner",children:[n.jsxs("div",{className:"name-spotlight-title",children:[rt.spotlight.name," ",rt.spotlight.kanji]}),n.jsx("div",{className:"name-spotlight-subtitle",children:rt.spotlight.meaning}),n.jsxs("div",{className:"name-spotlight-line",children:[rt.spotlightLine," ",rt.jokeLine]})]}),n.jsx("div",{className:"name-chip-row",children:rt.pinnedTopPicks.map((ye,Me)=>n.jsxs("div",{className:"name-chip glass-inner",children:[n.jsx("span",{className:"name-chip-main",children:ye.name}),n.jsx("span",{className:"name-chip-kanji",children:ye.kanji}),n.jsx("span",{className:"name-chip-badge",children:"Top Pick"})]},`${ye.name}-${Me}`))})]}),re&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.checkup})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Next Checkup"}),n.jsxs("span",{className:"section-count",children:["Visit ",re.visit," - Week ",re.weekRange]})]})]}),n.jsx("p",{className:"tip-text",children:re.label})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.overview})}),n.jsx("div",{children:n.jsx("h2",{children:"Quick Overview"})})]}),n.jsxs("div",{className:"quick-stats",children:[n.jsxs("div",{className:"quick-stat glass-inner",children:[n.jsx("span",{className:"qs-icon",children:n.jsx(Le,{icon:Ee.tasks})}),n.jsx("span",{className:"qs-label",children:"Tasks"}),n.jsxs("span",{className:"qs-value",children:[Ce,"/",we]})]}),n.jsxs("div",{className:"quick-stat glass-inner",children:[n.jsx("span",{className:"qs-icon",children:n.jsx(Le,{icon:Ee.benefits})}),n.jsx("span",{className:"qs-label",children:"Benefits"}),n.jsxs("span",{className:"qs-value",children:["",ge.toLocaleString()]})]}),n.jsxs("div",{className:"quick-stat glass-inner",children:[n.jsx("span",{className:"qs-icon",children:n.jsx(Le,{icon:Ee.checkup})}),n.jsx("span",{className:"qs-label",children:"Checkups"}),n.jsxs("span",{className:"qs-value",children:[N,"/14"]})]}),n.jsxs("div",{className:"quick-stat glass-inner",children:[n.jsx("span",{className:"qs-icon",children:n.jsx(Le,{icon:Ee.supplements})}),n.jsx("span",{className:"qs-label",children:"Supps Today"}),n.jsxs("span",{className:"qs-value",children:[Q,"/",Se]})]})]})]})]})}function ia(s){return String(s||"").trim()}function db(s,l="you"){const u=s?.speaker==="staff"?"staff":l,c=ia(s?.ja),m=ia(s?.romaji),f=ia(s?.en);return!c&&!m&&!f?{speaker:u,ja:"",romaji:"Sumimasen, mou ichido yukkuri onegai shimasu.",en:"Sorry, could you please say that again slowly?"}:{speaker:u,ja:c||"",romaji:m||"(Kono naiyou wo nihongo de tsutaetai desu)",en:f||"I want to say this in Japanese."}}const Ue=(s,l,u)=>({speaker:"you",ja:s,romaji:l,en:u}),Ca=(s,l,u)=>({speaker:"staff",ja:s,romaji:l,en:u});function K1(s,l,u){const c=Array.isArray(s?.lines)?s.lines.map(f=>db(f)).filter(Boolean):[],m=Array.isArray(s?.options)?s.options.map(f=>({id:ia(f?.id)||`${l}-opt`,label:ia(f?.label)||"Continue",next:ia(f?.next)||""})).filter(f=>f.next&&u.has(f.next)):[];return{id:l,prompt:ia(s?.prompt),lines:c,options:m}}function F1(s){if(!s?.nodes||typeof s.nodes!="object")return null;const l={};return Object.entries(s.nodes).forEach(([u,c])=>{l[u]={prompt:ia(c?.prompt),lines:Array.isArray(c?.lines)?c.lines.map(m=>({...m})):[],options:Array.isArray(c?.options)?c.options.map(m=>({...m})):[]}}),{title:ia(s?.title),nodes:l}}function Y1(s){const l=F1(s);return l?.nodes?.start?(Object.keys(l.nodes).filter(c=>c!=="start"&&!c.includes("__deep_")).forEach(c=>{const m=l.nodes[c]||{},f=`${c}__deep_clarify_1`,p=`${c}__deep_clarify_2`,g=`${c}__deep_action_1`,v=`${c}__deep_action_2`;l.nodes[f]||(l.nodes[f]={prompt:"Need a clearer explanation in simpler Japanese?",lines:[Ue("","Mou sukoshi gutaiteki ni, yukkuri setsumei shite itadakemasu ka?","Could you explain more specifically and slowly?"),Ca("","Hitsuyou na naiyou wo junban ni setsumei shimasu.","I will explain the necessary points in order.")],options:[{id:`${c}-dc1`,label:"Still unclear, ask one more time",next:p},{id:`${c}-dc2`,label:"Back to main branch",next:"start"}]}),l.nodes[p]||(l.nodes[p]={prompt:"Final clarification step",lines:[Ue("","Ima no setsumei wo watashi no keesu de kakunin shitai desu.","I want to confirm this for my case specifically."),Ue("1","Tsugi ni yaru koto wo hitotsu-zutsu oshiete kudasai.","Please tell me next actions one by one.")],options:[{id:`${c}-dc3`,label:"Back to main branch",next:"start"}]}),l.nodes[g]||(l.nodes[g]={prompt:"Need exact docs/deadlines?",lines:[Ue("","Teishutsu kigen to hitsuyou shorui wo seikaku ni kakunin shitai desu.","I want to confirm exact deadline and required documents."),Ca("","Kigen to shorui no ichiran wo annai shimasu.","I will guide you through deadline and document list.")],options:[{id:`${c}-da1`,label:"Need follow-up contact details",next:v},{id:`${c}-da2`,label:"Back to main branch",next:"start"}]}),l.nodes[v]||(l.nodes[v]={prompt:"Follow-up contact iteration",lines:[Ue("","Toiawase-saki no busho-mei to denwa bangou wo oshiete kudasai.","Please tell me the department name and contact number."),Ue("","Fusoku ga atta baai no sai-teishutsu kigen mo kakunin shitai desu.","I also want to confirm resubmission deadline if anything is missing.")],options:[{id:`${c}-da3`,label:"Back to main branch",next:"start"}]});const M=[...(Array.isArray(m.options)?m.options:[]).map(C=>({id:ia(C?.id),label:ia(C?.label),next:ia(C?.next)})).filter(C=>C.next&&C.next!=="start")];M.some(C=>C.next===f)||M.push({id:`${c}-deep-clarify`,label:"Need clearer explanation",next:f}),M.some(C=>C.next===g)||M.push({id:`${c}-deep-action`,label:"Ask exact next step/docs",next:g}),M.some(C=>C.next==="start")||M.push({id:`${c}-deep-back`,label:"Back to main branch",next:"start"}),l.nodes[c]={...m,options:M}}),l):s}function q1(s,l="Scenario Branch"){const u=s&&typeof s=="object"?s:null,c=u?Y1(u):null;if(!c?.nodes||typeof c.nodes!="object"||!c.nodes.start)return null;const m=new Set(Object.keys(c.nodes)),f={};return m.forEach(p=>{f[p]=K1(c.nodes[p],p,m)}),{title:ia(c.title)||l,startNodeId:"start",nodes:f}}const W1={clinic_appointment:{title:"Branch: Clinic Appointment",nodes:{start:{prompt:"What happened at clinic call/reception?",options:[{id:"a1",label:"No same-day slot",next:"no-slot"},{id:"a2",label:"Asked for documents",next:"docs"},{id:"a3",label:"Need fee details",next:"fees"}]},"no-slot":{lines:[Ca("","Honjitsu wa yoyaku ga ippai desu.","Today is fully booked."),Ue("","Saitan de jushin dekiru nichiji wo onegai shimasu.","Please give me the earliest possible appointment."),Ue("","Kyanseru-machi wa dekimasu ka?","Can I join the cancellation waitlist?")],options:[{id:"a4",label:"Back to start",next:"start"}]},docs:{lines:[Ca("","Hokenshou to zairyuu kaado wa omochi desu ka?","Do you have insurance and residence card?"),Ue("","Fusoku shorui ga areba gutaiteki ni oshiete kudasai.","Please tell me exactly what is missing.")],options:[{id:"a5",label:"Back to start",next:"start"}]},fees:{lines:[Ue("","Shoshin hiyou wa daitai ikura desu ka?","How much is the first visit roughly?"),Ue("","Ryoushuusho wo onegai shimasu.","Please issue a receipt.")],options:[{id:"a6",label:"Back to start",next:"start"}]}}},ward_handbook:{title:"Branch: Ward Office / Boshi Techo",nodes:{start:{prompt:"Ward office situation branch:",options:[{id:"b1",label:"Sent to another counter",next:"counter"},{id:"b2",label:"Missing ID/My Number",next:"missing-id"},{id:"b3",label:"Voucher usage question",next:"voucher"}]},counter:{lines:[Ca("","Kochira de wa naku, kodomo katei-ka e onegai shimasu.","Please go to Child & Family section."),Ue("","Arigatou gozaimasu. Basho wo oshiete kudasai.","Thank you. Please tell me where it is.")],options:[{id:"b4",label:"Back to start",next:"start"}]},"missing-id":{lines:[Ue("","Mainanbaa ga nai baai, daitai shorui de shinsei dekimasu ka?","If My Number is missing, can I apply with alternative docs?"),Ca("","Daitai kanou na shorui wo kakunin shimasu.","We will confirm acceptable alternatives.")],options:[{id:"b5",label:"Back to start",next:"start"}]},voucher:{lines:[Ue("","Ninpu kenshin-ken no tsukaikata wo oshiete kudasai.","Please explain how to use prenatal checkup vouchers."),Ue("","Tsukaeru byouin no ichiran wa arimasu ka?","Is there a list of participating hospitals?")],options:[{id:"b6",label:"Back to start",next:"start"}]}}},grant_consult:{title:"Branch: Grant Consultation",nodes:{start:{prompt:"Grant consultation branch:",options:[{id:"c1",label:"Payout timing",next:"payout"},{id:"c2",label:"Second consultation after birth",next:"second"},{id:"c3",label:"Bank account registration",next:"bank"}]},payout:{lines:[Ue("","Mendan-go dorekurai de furikomaremasu ka?","How long after consultation will it be deposited?"),Ca("","Shinsa-go ni junji furikomi shimasu.","It is deposited after screening.")],options:[{id:"c4",label:"Back to start",next:"start"}]},second:{lines:[Ue("2","Shussan-go no nikai-me mendan wa itsu shinsei sureba ii desu ka?","When should I apply for second consultation after birth?"),Ue("","Hitsuyou shorui wo saki ni oshiete kudasai.","Please tell required documents in advance.")],options:[{id:"c5",label:"Back to start",next:"start"}]},bank:{lines:[Ue("","Furikomi kouza jouhou wa doko de touroku shimasu ka?","Where do I register bank details?"),Ca("","Shinseisho no kouza-ran de touroku shimasu.","Register in the account section of application form.")],options:[{id:"c6",label:"Back to start",next:"start"}]}}},insurance_reduction:{title:"Branch: Insurance Reduction",nodes:{start:{prompt:"Insurance counter branch:",options:[{id:"d1",label:"Tax filing required?",next:"tax-required"},{id:"d2",label:"Retroactive adjustment",next:"retro"},{id:"d3",label:"Required documents",next:"docs"}]},"tax-required":{lines:[Ca("","Genmen hantei ni wa juuminzei jouhou ga hitsuyou desu.","Resident-tax info is needed for screening."),Ue("","Shinkoku-go, han-ei jiki wa itsu desu ka?","After filing, when does it reflect?")],options:[{id:"d4",label:"Back to start",next:"start"}]},retro:{lines:[Ue("","Sude ni shiharatta bun wa ato de chousei saremasu ka?","Will already-paid amounts be adjusted later?"),Ca("","Jouken wo mitaseba kanpu matawa sousai saremasu.","If eligible, it is refunded/offset.")],options:[{id:"d5",label:"Back to start",next:"start"}]},docs:{lines:[Ue("","Hitsuyou shorui wo ichiran de oshiete kudasai.","Please provide a full required document list."),Ue("","Fusoku-bun wa gojitsu teishutsu dekimasu ka?","Can missing docs be submitted later?")],options:[{id:"d6",label:"Back to start",next:"start"}]}}},hr_benefits:{title:"Branch: Company / HR",nodes:{start:{prompt:"HR branch:",options:[{id:"e1",label:"Request complete benefit list",next:"list"},{id:"e2",label:"Leave procedure and deadlines",next:"leave"},{id:"e3",label:"Follow-up HR meeting",next:"meeting"}]},list:{lines:[Ue("","Shussan kanren no kaisha kyuufu wo ichiran de onegai shimasu.","Please provide a full list of childbirth-related company benefits."),Ca("","Shanai poorutaru to shinseisho wo annai shimasu.","We will guide portal and forms.")],options:[{id:"e4",label:"Back to start",next:"start"}]},leave:{lines:[Ue("","Sanzen sango kyuuka to ikuji kyuugyou no teishutsu kigen wo kakunin shitai desu.","I want to confirm deadlines for maternity and childcare leave."),Ue("","Hitsuyou shorui mo awasete oshiete kudasai.","Please include required documents.")],options:[{id:"e5",label:"Back to start",next:"start"}]},meeting:{lines:[Ue("","Jinji tantou to no mendan wo yoyaku shitai desu.","I want to book a meeting with HR."),Ue("","Jizen ni hitsuyou shorui wo meeru soufu dekimasu ka?","Can required documents be sent by email in advance?")],options:[{id:"e6",label:"Back to start",next:"start"}]}}},hospital_payment:{title:"Branch: Hospital Payment System",nodes:{start:{prompt:"Delivery payment branch:",options:[{id:"f1",label:"Hospital does not support direct payment",next:"unsupported"},{id:"f2",label:"Cost above 500,000 yen",next:"above"},{id:"f3",label:"Cost below 500,000 yen",next:"below"}]},unsupported:{lines:[Ue("","Chokusetsu shiharai seido ga tsukaenai baai no tetsuzuki wo oshiete kudasai.","Please explain process if direct payment is unavailable."),Ca("","Shussan-go ni shinsei shite harai-modoshi ni narimasu.","It becomes a post-delivery reimbursement process.")],options:[{id:"f4",label:"Back to start",next:"start"}]},above:{lines:[Ue("50","Gojuu-man en wo koeru jikofutan-gaku wo kakunin shitai desu.","I want to confirm out-of-pocket amount above 500,000 yen.")],options:[{id:"f5",label:"Back to start",next:"start"}]},below:{lines:[Ue("50","Gojuu-man en miman no baai no sagaku shinsei houhou wo oshiete kudasai.","Please explain how to claim the difference if below 500,000 yen.")],options:[{id:"f6",label:"Back to start",next:"start"}]}}},tax_deduction:{title:"Branch: Medical Tax Deduction",nodes:{start:{prompt:"Tax filing branch:",options:[{id:"g1",label:"Which receipts are eligible",next:"receipts"},{id:"g2",label:"Transport log format",next:"transport"},{id:"g3",label:"Family expenses combined",next:"family"}]},receipts:{lines:[Ue("","Iryouhi koujo de taishou to naru ryoushuusho no hani wo kakunin shitai desu.","I want to confirm receipt scope for deduction.")],options:[{id:"g4",label:"Back to start",next:"start"}]},transport:{lines:[Ue("","Tsuin koutsuuhi wa dono keishiki de teishutsu shimasu ka?","What format should I use for transport logs?"),Ca("","Hiduke, kukan, kingaku no ichiran wo junbi shite kudasai.","Prepare list with date, route, and amount.")],options:[{id:"g5",label:"Back to start",next:"start"}]},family:{lines:[Ue("","Haiguusha ya kodomo no iryouhi mo gassan dekimasu ka?","Can spouse/child medical costs be combined?"),Ca("","Seikei wo itsu ni shiteireba kanou desu.","Yes, if part of the same household finances.")],options:[{id:"g6",label:"Back to start",next:"start"}]}}},consulate_birth:{title:"Branch: Consulate Registration",nodes:{start:{prompt:"Consulate branch:",options:[{id:"h1",label:"Order: birth report vs passport",next:"order"},{id:"h2",label:"Only one parent can attend",next:"one-parent"},{id:"h3",label:"Original/copy/translation counts",next:"copies"}]},order:{lines:[Ue("","Shussei houkoku to ryoken shinsei wa dochira wo saki ni okonaimasu ka?","Which comes first: birth report or passport application?"),Ca("","Tsuujou wa shussei houkoku-go ni ryoken shinsei desu.","Usually passport comes after birth report.")],options:[{id:"h4",label:"Back to start",next:"start"}]},"one-parent":{lines:[Ue("","Katahou no oya ga raikan dekinai baai, ininjou de taiou dekimasu ka?","If one parent cannot attend, can authorization letter be used?"),Ue("","Hitsuyou na douisho foomatto wo oshiete kudasai.","Please tell required consent form format.")],options:[{id:"h5",label:"Back to start",next:"start"}]},copies:{lines:[Ue("","Genpon, kopii, hon-yaku shorui no hitsuyou busuu wo oshiete kudasai.","Please tell required counts for originals/copies/translations.")],options:[{id:"h6",label:"Back to start",next:"start"}]}}},general_office:{title:"Branch: General Office Follow-up",nodes:{start:{prompt:"Pick the exact situation now:",options:[{id:"i1",label:"Did not understand response",next:"repeat"},{id:"i2",label:"Need exact docs list",next:"docs"},{id:"i3",label:"Need deadline and next step",next:"deadline"}]},repeat:{lines:[Ue("","Sumimasen, mou ichido yukkuri onegai shimasu.","Sorry, please repeat slowly."),Ue("","Kantan na nihongo de setsumei shite itadakemasu ka?","Could you explain in simpler Japanese?")],options:[{id:"i4",label:"Back to start",next:"start"}]},docs:{lines:[Ue("","Hitsuyou shorui wo kami ni kaite itadakemasu ka?","Could you write down the required documents?")],options:[{id:"i5",label:"Back to start",next:"start"}]},deadline:{lines:[Ue("","Shinsei kigen wa itsu desu ka?","When is the deadline?"),Ue("","Tsugi ni nani wo sureba ii desu ka?","What should I do next?")],options:[{id:"i6",label:"Back to start",next:"start"}]}}}},my={p1:"clinic_appointment",p2:"ward_handbook",p3:"grant_consult",p5:"insurance_reduction",p10:"hr_benefits",d1:"hospital_payment",o4:"tax_deduction",b8:"consulate_birth"},hy={clinic:"clinic_appointment",ward:"ward_handbook",insurance:"insurance_reduction",tax:"tax_deduction",work:"hr_benefits",consulate:"consulate_birth",housing:"general_office",general:"general_office"},P1=[{key:"grant_consult",keywords:["grant","kyuufukin"]},{key:"hospital_payment",keywords:["direct payment","chokusetsu","500,000"]},{key:"tax_deduction",keywords:["tax","kakutei","deduction","zeimusho"]},{key:"consulate_birth",keywords:["consulate","citizenship","passport","philippine"]},{key:"hr_benefits",keywords:["employer","company","leave","hr","fuka"]}],fy={clinic:{situation:"Starter: clinic reception",lines:[Ue("","Ninshin kanren no jushin ni tsuite soudan shitai desu.","I want to ask about pregnancy consultation."),Ca("","Goyoyaku wa arimasu ka?","Do you have an appointment?"),Ue("","Saitan de toreru nichiji wo oshiete kudasai.","Please tell the earliest available date/time.")]},ward:{situation:"Starter: ward office counter",lines:[Ue("","Ninshin shussan kanren no tetsuzuki wo shitai desu.","I want to process pregnancy/childbirth paperwork."),Ca("","Honjitsu wa dono shinsei desu ka?","Which application today?"),Ue("","Hitsuyou na shinsei wo matomete annai shite kudasai.","Please guide all required applications together.")]},insurance:{situation:"Starter: insurance counter",lines:[Ue("","Hoken kanren no tetsuzuki wo kakunin shitai desu.","I want to confirm insurance procedures."),Ue("","Genmen to gendogaku nintei ni tsuite soudan desu.","I need help with premium reduction and limit certificate.")]},tax:{situation:"Starter: tax office inquiry",lines:[Ue("","Iryouhi koujo no shinkoku ni tsuite kakunin shitai desu.","I want to confirm medical deduction filing."),Ue("","Hitsuyou shorui to kigen wo oshiete kudasai.","Please tell required docs and deadline.")]},work:{situation:"Starter: HR inquiry",lines:[Ue("","Shussan ni kansuru shanai tetsuzuki wo kakunin shitai desu.","I want to confirm company procedures for childbirth."),Ue("","Teishutsu kigen mo awasete oshiete kudasai.","Please include submission deadlines.")]},consulate:{situation:"Starter: consulate inquiry",lines:[Ue("","Akachan no shussei touroku ni tsuite soudan shitai desu.","I want to ask about baby birth registration."),Ue("","Hitsuyou shorui to yoyaku houhou wo oshiete kudasai.","Please tell required documents and booking steps.")]},general:{situation:"Starter: office request",lines:[Ue("","Kono tetsuzuki ni tsuite oshiete kudasai.","Please explain this process."),Ue("","Hitsuyou shorui to kigen wo kakunin shitai desu.","I want to confirm required documents and deadline.")]}},G1=[{id:"consulate",keywords:["consulate","citizenship","passport","philippine"]},{id:"clinic",keywords:["ob-gyn","clinic","hospital","checkup","sanfujinka"]},{id:"ward",keywords:["ward office","kuyakusho","boshi","grant","child allowance","birth registration","city office"]},{id:"insurance",keywords:["insurance","hoken","kokuho","limit certificate","medical subsidy","genmen"]},{id:"tax",keywords:["tax","kakutei","deduction","zeimusho"]},{id:"work",keywords:["employer","company","work","leave","hr"]}];function V1(s){const l=[ia(s?.text),...Array.isArray(s?.howTo)?s.howTo.map(c=>ia(c)):[],...Array.isArray(s?.phones)?s.phones.map(c=>`${ia(c?.label)} ${ia(c?.number)}`):[]].join(" ").toLowerCase(),u=G1.filter(c=>c.keywords.some(m=>l.includes(m))).map(c=>c.id);return u.length>0?u:["general"]}function X1(s,l){if(Array.isArray(s?.phones)&&s.phones.length>0||l.some(m=>m!=="general"))return!0;const u=ia(s?.text).toLowerCase();return["ask","apply","submit","register","visit","call","consultation","counter","office","order","buy"].some(m=>u.includes(m))}function Q1(s,l){const u=l[0]||"general",c=fy[u]||fy.general;return{id:`${ia(s?.id)||"task"}-starter`,situation:c.situation,lines:c.lines}}function Z1(s,l,u){const c=ia(s?.id);if(c&&my[c])return my[c];const m=`${ia(s?.text)} ${ia(l?.situation)}`.toLowerCase(),f=P1.find(p=>p.keywords.some(g=>m.includes(g)));if(f)return f.key;for(const p of u)if(hy[p])return hy[p];return"general_office"}function J1(s,l,u){const c=ia(s?.id)||l,m=ia(s?.situation)||"Conversation starter",f=Array.isArray(s?.lines)?s.lines.map(p=>db(p)).filter(Boolean):[];return{id:c,situation:m,lines:f,branchFlow:u||null}}function eS(s){const l=V1(s),u=Array.isArray(s?.scripts)?s.scripts.filter(f=>Array.isArray(f?.lines)&&f.lines.length>0):[],c=(f,p)=>{const g=Z1(s,f,l),v=q1(W1[g],"Scenario Branch");return J1(f,`${s.id}-script-${p+1}`,v)};if(u.length>0)return u.map((f,p)=>c(f,p));if(!X1(s,l))return[];const m=Q1(s,l);return[c(m,0)]}const gc=[{id:"ward-preg",tone:"ward",shortLabel:"WARD (PREG)",fullLabel:"Ward Office bundle (pregnancy visit)",taskIds:["p2","p3","p4","p5","p6","p7","p8","p13","p14","o7"]},{id:"employer",tone:"employer",shortLabel:"HR / EMPLOYER",fullLabel:"Employer and HR paperwork bundle",taskIds:["p10","d6","b7"]},{id:"ward-birth",tone:"birth",shortLabel:"WARD (BIRTH)",fullLabel:"Post-birth ward office bundle",taskIds:["b1","b2","b3","b4","b5"]},{id:"tax",tone:"tax",shortLabel:"TAX / RECEIPTS",fullLabel:"Tax and receipt workflow bundle",taskIds:["p11","p12","o1","o2","o4"]}],ac=(()=>{const s={};return gc.forEach(l=>{l.taskIds.forEach(u=>{s[u]||(s[u]=[]),s[u].push(l)})}),s})(),tS=new Set(["p4","p5","p6","p7","p8","p10","p13","p14","d6","o7","b2"]),Pi="10:00",ro={ward:{id:"ward",label:"Ward Office",start:"08:30",end:"16:00",preferred:"10:00",weekdayOnly:!0},employer:{id:"employer",label:"Employer / HR",start:"10:00",end:"16:30",preferred:"11:00",weekdayOnly:!0},hospital:{id:"hospital",label:"Hospital / Clinic",start:"09:30",end:"15:30",preferred:"13:30",weekdayOnly:!0},tax:{id:"tax",label:"Tax Office",start:"08:30",end:"16:00",preferred:"10:30",weekdayOnly:!0},home:{id:"home",label:"Home admin",start:"09:00",end:"18:00",preferred:"10:30",weekdayOnly:!1},general:{id:"general",label:"Office hours",start:"09:00",end:"16:00",preferred:"10:00",weekdayOnly:!0}};function ah(s){const l=String(s||"").trim();if(!l)return null;const u=new Date(`${l}T00:00:00`);return Number.isNaN(u.getTime())?null:u}function aS(s=new Date){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function Ki(s,l=0){const u=ah(s);return u?(u.setDate(u.getDate()+Number(l||0)),aS(u)):""}function nS(s){const l=ah(s);if(!l)return!1;const u=l.getDay();return u===0||u===6}function py(s){const l=String(s||"").trim();if(!/^\d{2}:\d{2}$/.test(l))return Pi;const[u,c]=l.split(":"),m=Number(u),f=Number(c);if(!Number.isFinite(m)||!Number.isFinite(f)||m<8||m>18||m===18&&f>0)return Pi;const p=f>=30?30:0;return`${String(m).padStart(2,"0")}:${String(p).padStart(2,"0")}`}function gy(s){const l=String(s||"").trim();if(!/^\d{2}:\d{2}$/.test(l))return-1;const[u,c]=l.split(":"),m=Number(u),f=Number(c);return!Number.isFinite(m)||!Number.isFinite(f)||m<0||m>23||f<0||f>59?-1:m*60+f}function iS(s){const l=Math.max(0,Math.min(1439,Number(s)||0)),u=Math.floor(l/60),c=l%60;return`${String(u).padStart(2,"0")}:${String(c).padStart(2,"0")}`}function yy(s){const l=gy(s);return l<0?gy(Pi):Math.round(l/30)*30}function sS(s,l){const u=yy(s),c=yy(l);if(u<0||c<0||c<u)return[Pi];const m=[];for(let f=u;f<=c;f+=30)m.push(iS(f));return m.length?m:[Pi]}function oS(s){return!s||typeof s!="object"?!1:tS.has(String(s.id||""))?!0:/^ask\b/i.test(String(s.text||"").trim())}function em(s,l){const u=s?.startNodeId||"start";return!l||typeof l!="object"?{nodeId:u,history:[]}:{nodeId:l.nodeId||u,history:Array.isArray(l.history)?l.history:[]}}function lS(){const{checked:s,toggle:l,planner:u,addPlan:c,dueDate:m,taskBundleFilter:f,setTaskBundleFilter:p}=Fn(),[g,v]=w.useState(null),[b,x]=w.useState(null),[M,C]=w.useState({}),[R,L]=w.useState({}),W=String(f||"all");w.useEffect(()=>{if(W==="all")return;gc.some(F=>F.id===W)||p("all")},[W,p]);const P=w.useMemo(()=>{const N={};return In.forEach(F=>{N[F.id]=F}),N},[]),Z=(()=>{const N=new Date;return`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-${String(N.getDate()).padStart(2,"0")}`})(),xe=w.useMemo(()=>{const N={},F=u&&typeof u=="object"?u:{};for(const[X,U]of Object.entries(F))if(!(!Array.isArray(U)||U.length===0))for(const Te of U){if(!Te||Te.done)continue;const Ae=Array.isArray(Te.taskIds)?Te.taskIds:[];if(Ae.length===0)continue;const De=String(Te.time||"").trim();for(const tt of Ae){const de=String(tt||"").trim();if(!de)continue;const Oe={dateISO:X,time:De,planId:Te.id},Ve=N[de];if(!Ve){N[de]=Oe;continue}if(Oe.dateISO<Ve.dateISO){N[de]=Oe;continue}Oe.dateISO===Ve.dateISO&&(Oe.time&&!Ve.time||Oe.time&&Ve.time&&Oe.time<Ve.time)&&(N[de]=Oe)}}return N},[u]),te=w.useMemo(()=>{const N={};return Object.entries(u&&typeof u=="object"?u:{}).forEach(([X,U])=>{if(!Array.isArray(U))return;const Te=U.filter(Ae=>Ae&&!Ae.done);Te.length&&(N[X]=Te)}),N},[u]),ue=w.useMemo(()=>js.map(N=>{const F=N.items.filter(X=>W==="all"?!0:(Array.isArray(ac[X.id])?ac[X.id]:[]).some(Te=>Te.id===W));return{...N,items:F}}).filter(N=>N.items.length>0),[W]),se=w.useMemo(()=>ue.reduce((N,F)=>N+F.items.length,0),[ue]),ae=w.useMemo(()=>ue.reduce((N,F)=>N+F.items.filter(X=>s[X.id]).length,0),[ue,s]),V=N=>{try{return new Date(`${N}T00:00`).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return N}},K=N=>{const F=String(N||"").trim();return F.length<=96?F:`${F.slice(0,93)}...`},O=(N,F)=>{L(X=>({...X,[N]:{date:String(X?.[N]?.date||""),time:String(X?.[N]?.time||""),...F}}))},le=(N,F,X=null)=>{const U=R?.[N]||{},Te=String(U.date||X?.dateISO||"").trim()||Z,Ae=String(U.time||X?.time||"").trim();c?.(Te,{time:Ae,title:K(F),location:"",notes:"",done:!1,taskIds:[N]})},ve=(N,F=!1)=>{let X=String(N||"").trim()||Z;for(let U=0;U<20;U+=1){if(!F||!nS(X))return X;X=Ki(X,1)||X}return X},ce=()=>{const N=new Date;return`${N.getMonth()+1<=3?N.getFullYear():N.getFullYear()+1}-02-10`},fe=(N,F)=>{const X=new Set((Array.isArray(F)?F:[]).map(Te=>String(Te?.tone||"").trim().toLowerCase())),U=String(N||"").toLowerCase();return X.has("tax")||/kakutei|tax|receipt/.test(U)?ro.tax:X.has("employer")||/(hr|employer|hello work)/.test(U)?ro.employer:/(hospital|byoin|clinic|ob-gyn|checkup|pediatric)/.test(U)?ro.hospital:X.has("ward")||X.has("birth")||/(ward|office|city hall|kuyakusho|registration)/.test(U)?ro.ward:/(home|review|admin|log|folder|organize)/.test(U)?ro.home:ro.general},we=(N,F=null)=>{const X=new Set;return(Array.isArray(te?.[N])?te[N]:[]).forEach(Te=>{const Ae=String(Te?.time||"").trim();/^\d{2}:\d{2}$/.test(Ae)&&X.add(py(Ae))}),F instanceof Set&&F.forEach(Te=>X.add(String(Te||"").trim())),X},Ce=(N,F,X,U=0,Te=null)=>{const Ae=we(N,Te),De=sS(X?.start||"09:00",X?.end||"16:00"),tt=py(F),de=De.includes(tt)?tt:De.includes(X?.preferred)?X.preferred:De[0],Oe=Math.max(0,De.indexOf(de)),Ve=Math.max(0,Number(U)||0);for(let Xe=0;Xe<De.length;Xe+=1){const Ze=(Oe+Ve+Xe)%De.length,lt=De[Ze];if(!Ae.has(lt))return lt}return de},_=(N,F,X)=>{const U=String(N||"").trim().toLowerCase(),Te=ah(m)?String(m):"",Ae=new Set((Array.isArray(X)?X:[]).map(tt=>String(tt?.tone||"").trim().toLowerCase())),De=String(F||"").toLowerCase();return Ae.has("tax")||/kakutei|tax|receipt/.test(De)||U==="o4"?ce():U.startsWith("p")?Ki(Z,2)||Z:U.startsWith("d")?Te?Ki(Te,-30)||Z:Ki(Z,7)||Z:U.startsWith("b")?Te?Ki(Te,10)||Z:Ki(Z,14)||Z:U.startsWith("o")?Ki(Z,20)||Z:Ki(Z,4)||Z},Q=(N,F,X,U=0,Te=null)=>{const Ae=fe(F,X),De=!!Ae?.weekdayOnly,tt=ve(_(N,F,X),De),de=String(Ae?.preferred||Pi),Oe=Ce(tt,de,Ae,U,Te);return{dateISO:tt,time:Oe,profile:Ae}},Se=(N,F,X)=>{const U=Q(N,F,X),Te=U.dateISO,Ae=U.time;O(N,{date:Te,time:Ae}),c?.(Te,{time:Ae,title:K(F),location:"",notes:"Auto smart schedule (Tasks tab)",done:!1,taskIds:[N]})},Y=(N,F)=>{F.stopPropagation(),v(X=>X===N?null:N),x(null)},ge=(N,F)=>{x(X=>X===N?null:N),F&&C(X=>({...X,[N]:{nodeId:F.startNodeId||"start",history:[]}}))},k=(N,F,X)=>{F?.nodes?.[X]&&C(U=>{const Te=em(F,U[N]);return{...U,[N]:{nodeId:X,history:[...Te.history,Te.nodeId]}}})},z=(N,F)=>{C(X=>{const U=em(F,X[N]);if(U.history.length===0)return X;const Te=[...U.history],Ae=Te.pop();return{...X,[N]:{nodeId:Ae||F.startNodeId||"start",history:Te}}})},re=(N,F)=>{C(X=>({...X,[N]:{nodeId:F?.startNodeId||"start",history:[]}}))};return n.jsxs("div",{className:"content",children:[n.jsxs("div",{className:"tab-header",children:[n.jsx("h2",{children:"Task Checklist"}),n.jsxs("span",{className:"tab-header-count",children:[ae,"/",se," done"]})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.overview})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Recommended Bundles"}),n.jsx("span",{className:"section-count",children:"Do these together to save trips"})]})]}),n.jsx("div",{className:"task-bundle-guide",children:gc.map(N=>n.jsx("span",{className:`bundle-pill bundle-${N.tone}`,children:N.shortLabel},N.id))}),n.jsxs("div",{className:"task-bundle-filters",children:[n.jsx("button",{type:"button",className:`bundle-filter-btn glass-inner ${W==="all"?"active":""}`,onClick:()=>p("all"),children:"All tasks"}),gc.map(N=>n.jsx("button",{type:"button",className:`bundle-filter-btn glass-inner bundle-${N.tone} ${W===N.id?"active":""}`,onClick:()=>p(N.id),children:N.shortLabel},`filter-${N.id}`))]}),n.jsxs("ul",{className:"task-steps",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Ward (pregnancy):"})," Boshi Techo + pregnancy support consultation + prenatal vouchers + ask municipal programs + ask kokuho reduction."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"HR / employer:"})," Maternity leave paperwork + childcare leave benefit + social insurance exemption + extra employer benefit."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ward (after birth):"})," Birth registration + second support payment + child allowance + baby insurance + child medical subsidy."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Tax / receipts flow:"})," save receipts + transport logs, then file Kakutei Shinkoku in Feb-March."]})]})]}),ue.map(N=>{const F=N.items.filter(U=>s[U.id]).length,X=N.items.length;return n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(xa,{token:N.icon})}),n.jsxs("div",{children:[n.jsx("h2",{children:N.title}),n.jsxs("span",{className:"section-count",children:[F,"/",X]})]})]}),n.jsx("ul",{children:N.items.map(U=>{const Te=g===U.id,Ae=eS(U),De=!!(Array.isArray(U.howTo)&&U.howTo.length>0||Array.isArray(U.phones)&&U.phones.length>0||Ae.length>0),tt=Array.isArray(U.moneyIds)?U.moneyIds:[],de=tt.reduce(($e,kt)=>$e+(P[kt]?.amount||0),0),Oe=Array.isArray(ac[U.id])?ac[U.id]:[],Ve=Q(U.id,U.text,Oe),Xe=Oe[0]?.tone||"",Ze=xe[U.id],lt=Ze?V(Ze.dateISO):"",qe=!!(Ze&&Ze.dateISO<Z),rt=U.priority==="urgent"&&!s[U.id],Wt=oS(U)&&!s[U.id],xt=tt.length>0&&!s[U.id],ye=!!Ze&&!s[U.id],Me=!s[U.id]&&Oe.length>0,Qe=rt||Wt||xt||ye||Me||De;return n.jsxs("li",{className:`task-item-wrap ${s[U.id]?"done":""} ${Xe?`bundle-${Xe}`:""}`,children:[n.jsxs("div",{className:`item ${s[U.id]?"done":""} ${U.priority}`,onClick:()=>l(U.id),children:[n.jsx("span",{className:"checkbox glass-inner",children:s[U.id]?"":""}),n.jsxs("div",{className:"item-main",children:[Qe&&n.jsxs("div",{className:"item-top-row",children:[n.jsxs("span",{className:"item-tags",children:[Wt&&n.jsx("span",{className:"badge ask-badge",children:"ASK"}),rt&&n.jsx("span",{className:"badge urgent-badge",children:"URGENT"}),xt&&n.jsx("span",{className:"badge money-badge",children:de>0?`+${de.toLocaleString()}`:"BENEFIT"}),Me&&Oe.map($e=>n.jsx("span",{className:`badge bundle-badge bundle-${$e.tone}`,children:$e.shortLabel},`${U.id}-${$e.id}`)),ye&&n.jsxs("span",{className:`badge schedule-badge ${qe?"overdue":""}`,children:[lt,Ze.time?` ${Ze.time}`:""]})]}),De&&n.jsx("button",{className:"info-btn glass-inner",onClick:$e=>Y(U.id,$e),children:Te?"":"i"})]}),n.jsx("span",{className:"item-text",children:U.text})]})]}),Te&&De&&n.jsxs("div",{className:"task-detail",children:[n.jsxs("div",{className:"task-detail-section",children:[n.jsx("div",{className:"task-detail-label",children:"Schedule (adds to Home  Calendar):"}),Oe.length>0&&n.jsx("div",{className:"task-bundle-row",children:Oe.map($e=>n.jsx("span",{className:`bundle-pill bundle-${$e.tone}`,children:$e.fullLabel},`detail-${U.id}-${$e.id}`))}),n.jsxs("div",{className:"task-schedule-row",children:[n.jsx("input",{type:"date",value:R?.[U.id]?.date||Ze?.dateISO||Ve.dateISO||Z,onChange:$e=>O(U.id,{date:$e.target.value})}),n.jsx("input",{type:"time",value:R?.[U.id]?.time||Ze?.time||Ve.time,onChange:$e=>O(U.id,{time:$e.target.value})}),n.jsx("button",{type:"button",className:"btn-glass-mini secondary",onClick:()=>Se(U.id,U.text,Oe),children:"Auto Smart"}),n.jsx("button",{type:"button",className:"btn-glass-mini primary",onClick:()=>le(U.id,U.text,Ze),children:"Add"})]}),Ze?n.jsxs("div",{className:"task-schedule-note",children:["Scheduled: ",lt,Ze.time?` ${Ze.time}`:"",". Marking the plan as done will auto-check this task."]}):n.jsxs("div",{className:"task-schedule-note",children:["Smart suggestion (",Ve.profile?.label||"Office hours"," ",Ve.profile?.start||"09:00","-",Ve.profile?.end||"16:00","):"," ",V(Ve.dateISO)," ",Ve.time,". Auto Smart avoids night time and calendar conflicts."]})]}),U.howTo&&U.howTo.length>0&&n.jsxs("div",{className:"task-detail-section",children:[n.jsx("div",{className:"task-detail-label",children:"How to do this:"}),n.jsx("ol",{className:"task-steps",children:U.howTo.map(($e,kt)=>n.jsx("li",{children:$e},kt))})]}),U.phones&&U.phones.length>0&&n.jsxs("div",{className:"task-detail-section",children:[n.jsx("div",{className:"task-detail-label",children:"Phone Numbers:"}),n.jsx("div",{className:"task-phones",children:U.phones.map(($e,kt)=>n.jsxs("a",{href:`tel:${$e.number.replace(/-/g,"")}`,className:"task-phone-link",children:[n.jsx("span",{className:"phone-icon",children:n.jsx(Le,{icon:Ee.phone})}),n.jsxs("span",{className:"phone-info",children:[n.jsx("span",{className:"phone-label",children:$e.label}),n.jsx("span",{className:"phone-number",children:$e.number})]})]},kt))})]}),Ae.length>0&&n.jsxs("div",{className:"task-detail-section",children:[n.jsx("div",{className:"task-detail-label",children:"Japanese Scripts (branch flow):"}),n.jsx("div",{className:"script-scenarios",children:Ae.map(($e,kt)=>{const St=`${U.id}-${kt}`,ft=b===St,Ct=$e.branchFlow,Bt=Ct?em(Ct,M[St]):null,Kt=Ct?Ct.nodes[Bt.nodeId]||Ct.nodes[Ct.startNodeId||"start"]:null;return n.jsxs("div",{className:"script-scenario glass-inner",children:[n.jsxs("div",{className:"script-situation",onClick:()=>ge(St,Ct),children:[n.jsxs("span",{className:"script-situation-main",children:[n.jsx(Le,{icon:Ee.script}),n.jsx("span",{children:$e.situation})]}),n.jsx("span",{className:"script-toggle",children:n.jsx(En,{expanded:ft})})]}),ft&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"script-lines",children:$e.lines.map((Ke,zt)=>n.jsxs("div",{className:`script-line ${Ke.speaker==="you"?"you":"them"}`,children:[n.jsxs("div",{className:"script-speaker",children:[n.jsx(Le,{icon:Ke.speaker==="you"?Ee.you:Ee.staff}),n.jsx("span",{children:Ke.speaker==="you"?"You":"Staff"})]}),n.jsx("div",{className:"script-ja",children:Ke.ja}),n.jsx("div",{className:"script-romaji",children:Ke.romaji}),n.jsx("div",{className:"script-en",children:Ke.en})]},zt))}),Ct&&Kt&&n.jsxs("div",{className:"script-flow glass-inner",children:[n.jsx("div",{className:"script-flow-title",children:Ct.title}),Kt.prompt?n.jsx("div",{className:"script-flow-prompt",children:Kt.prompt}):null,Array.isArray(Kt.lines)&&Kt.lines.length>0&&n.jsx("div",{className:"script-flow-lines",children:Kt.lines.map((Ke,zt)=>n.jsxs("div",{className:`script-line ${Ke.speaker==="you"?"you":"them"}`,children:[n.jsxs("div",{className:"script-speaker",children:[n.jsx(Le,{icon:Ke.speaker==="you"?Ee.you:Ee.staff}),n.jsx("span",{children:Ke.speaker==="you"?"You":"Staff"})]}),n.jsx("div",{className:"script-ja",children:Ke.ja}),n.jsx("div",{className:"script-romaji",children:Ke.romaji}),n.jsx("div",{className:"script-en",children:Ke.en})]},zt))}),Array.isArray(Kt.options)&&Kt.options.length>0&&n.jsx("div",{className:"script-flow-options",children:Kt.options.map(Ke=>n.jsx("button",{type:"button",className:"script-flow-option glass-inner",onClick:()=>k(St,Ct,Ke.next),children:Ke.label},Ke.id))}),n.jsxs("div",{className:"script-flow-controls",children:[n.jsx("button",{type:"button",className:"script-flow-control glass-inner",disabled:!Bt||Bt.history.length===0,onClick:()=>z(St,Ct),children:"Back one step"}),n.jsx("button",{type:"button",className:"script-flow-control glass-inner",onClick:()=>re(St,Ct),children:"Reset branch"})]})]})]})]},$e.id||kt)})})]})]})]},U.id)})})]},N.id)}),ue.length===0&&n.jsx("section",{className:"glass-section",children:n.jsx("p",{className:"section-note",children:"No tasks for this bundle yet."})})]})}const by=[{limit:195e4,rate:.05,deduction:0},{limit:33e5,rate:.1,deduction:97500},{limit:695e4,rate:.2,deduction:427500},{limit:9e6,rate:.23,deduction:636e3},{limit:18e6,rate:.33,deduction:1536e3},{limit:4e7,rate:.4,deduction:2796e3},{limit:1/0,rate:.45,deduction:4796e3}],vy=.1,rS=.15,wy=48e4;function wm(s){return s<=1625e3?55e4:s<=18e5?s*.4-1e5:s<=36e5?s*.3+8e4:s<=66e5?s*.2+44e4:s<=85e5?s*.1+11e5:195e4}function cS(s,l){const u=s-wm(s);if(u>1e7)return 0;const c=l-Math.min(wm(l),l);if(c<=48e4)return u<=9e6?38e4:u<=95e5?26e4:13e4;if(c<=133e4){const m=[{limit:5e5,amounts:[38e4,26e4,13e4]},{limit:55e4,amounts:[36e4,24e4,12e4]},{limit:6e5,amounts:[31e4,21e4,11e4]},{limit:65e4,amounts:[26e4,18e4,9e4]},{limit:7e5,amounts:[21e4,14e4,7e4]},{limit:75e4,amounts:[16e4,11e4,6e4]},{limit:8e5,amounts:[11e4,8e4,4e4]},{limit:85e4,amounts:[6e4,4e4,2e4]},{limit:133e4,amounts:[3e4,2e4,1e4]}],f=u<=9e6?0:u<=95e5?1:2;for(const p of m)if(c<=p.limit)return p.amounts[f]}return 0}function uS(s,l){if(s<=0)return 0;const u=Math.min(1e5,l*.05);return Math.max(0,Math.min(s-u,2e6))}function dS({annualIncome:s=0,spouseIncome:l=0,medicalExpenses:u=0,socialInsurance:c=0}){const m=wm(s),f=Math.max(0,s-m),p=c||Math.round(s*rS),g=cS(s,l),v=uS(u,f),b=wy+p+g+v,x=Math.max(0,f-b);let M=0;for(const te of by)if(x<=te.limit){M=Math.round(x*te.rate-te.deduction);break}const C=Math.round(M*.021),R=M+C,L=Math.round(x*vy+5e3),W=R+L,P=s>0?(W/s*100).toFixed(1):"0.0",Z=Math.round((s-W-p)/12);let xe=0;if(v>0){const te=Math.max(0,f-(b-v));let ue=0;for(const ae of by)if(te<=ae.limit){ue=Math.round(te*ae.rate-ae.deduction);break}const se=Math.round(te*vy+5e3);xe=ue+se-(M+L)}return{annualIncome:s,employmentIncome:f,socialInsurance:p,deductions:{basic:wy,socialInsurance:p,spouse:g,medical:v,total:b},taxableIncome:x,incomeTax:R,residentTax:L,totalTax:W,effectiveRate:parseFloat(P),monthlyTakeHome:Z,estimatedRefund:xe}}var wo;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(wo||(wo={}));class tm extends Error{constructor(l,u,c){super(l),this.message=l,this.code=u,this.data=c}}const mS=s=>{var l,u;return s?.androidBridge?"android":!((u=(l=s?.webkit)===null||l===void 0?void 0:l.messageHandlers)===null||u===void 0)&&u.bridge?"ios":"web"},hS=s=>{const l=s.CapacitorCustomPlatform||null,u=s.Capacitor||{},c=u.Plugins=u.Plugins||{},m=()=>l!==null?l.name:mS(s),f=()=>m()!=="web",p=M=>{const C=b.get(M);return!!(C?.platforms.has(m())||g(M))},g=M=>{var C;return(C=u.PluginHeaders)===null||C===void 0?void 0:C.find(R=>R.name===M)},v=M=>s.console.error(M),b=new Map,x=(M,C={})=>{const R=b.get(M);if(R)return console.warn(`Capacitor plugin "${M}" already registered. Cannot register plugins twice.`),R.proxy;const L=m(),W=g(M);let P;const Z=async()=>(!P&&L in C?P=typeof C[L]=="function"?P=await C[L]():P=C[L]:l!==null&&!P&&"web"in C&&(P=typeof C.web=="function"?P=await C.web():P=C.web),P),xe=(K,O)=>{var le,ve;if(W){const ce=W?.methods.find(fe=>O===fe.name);if(ce)return ce.rtype==="promise"?fe=>u.nativePromise(M,O.toString(),fe):(fe,we)=>u.nativeCallback(M,O.toString(),fe,we);if(K)return(le=K[O])===null||le===void 0?void 0:le.bind(K)}else{if(K)return(ve=K[O])===null||ve===void 0?void 0:ve.bind(K);throw new tm(`"${M}" plugin is not implemented on ${L}`,wo.Unimplemented)}},te=K=>{let O;const le=(...ve)=>{const ce=Z().then(fe=>{const we=xe(fe,K);if(we){const Ce=we(...ve);return O=Ce?.remove,Ce}else throw new tm(`"${M}.${K}()" is not implemented on ${L}`,wo.Unimplemented)});return K==="addListener"&&(ce.remove=async()=>O()),ce};return le.toString=()=>`${K.toString()}() { [capacitor code] }`,Object.defineProperty(le,"name",{value:K,writable:!1,configurable:!1}),le},ue=te("addListener"),se=te("removeListener"),ae=(K,O)=>{const le=ue({eventName:K},O),ve=async()=>{const fe=await le;se({eventName:K,callbackId:fe},O)},ce=new Promise(fe=>le.then(()=>fe({remove:ve})));return ce.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await ve()},ce},V=new Proxy({},{get(K,O){switch(O){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return W?ae:ue;case"removeListener":return se;default:return te(O)}}});return c[M]=V,b.set(M,{name:M,proxy:V,platforms:new Set([...Object.keys(C),...W?[L]:[]])}),V};return u.convertFileSrc||(u.convertFileSrc=M=>M),u.getPlatform=m,u.handleError=v,u.isNativePlatform=f,u.isPluginAvailable=p,u.registerPlugin=x,u.Exception=tm,u.DEBUG=!!u.DEBUG,u.isLoggingEnabled=!!u.isLoggingEnabled,u},fS=s=>s.Capacitor=hS(s),Ns=fS(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),So=Ns.registerPlugin;class nh{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(l,u){let c=!1;this.listeners[l]||(this.listeners[l]=[],c=!0),this.listeners[l].push(u);const f=this.windowListeners[l];f&&!f.registered&&this.addWindowListener(f),c&&this.sendRetainedArgumentsForEvent(l);const p=async()=>this.removeListener(l,u);return Promise.resolve({remove:p})}async removeAllListeners(){this.listeners={};for(const l in this.windowListeners)this.removeWindowListener(this.windowListeners[l]);this.windowListeners={}}notifyListeners(l,u,c){const m=this.listeners[l];if(!m){if(c){let f=this.retainedEventArguments[l];f||(f=[]),f.push(u),this.retainedEventArguments[l]=f}return}m.forEach(f=>f(u))}hasListeners(l){var u;return!!(!((u=this.listeners[l])===null||u===void 0)&&u.length)}registerWindowListener(l,u){this.windowListeners[u]={registered:!1,windowEventName:l,pluginEventName:u,handler:c=>{this.notifyListeners(u,c)}}}unimplemented(l="not implemented"){return new Ns.Exception(l,wo.Unimplemented)}unavailable(l="not available"){return new Ns.Exception(l,wo.Unavailable)}async removeListener(l,u){const c=this.listeners[l];if(!c)return;const m=c.indexOf(u);this.listeners[l].splice(m,1),this.listeners[l].length||this.removeWindowListener(this.windowListeners[l])}addWindowListener(l){window.addEventListener(l.windowEventName,l.handler),l.registered=!0}removeWindowListener(l){l&&(window.removeEventListener(l.windowEventName,l.handler),l.registered=!1)}sendRetainedArgumentsForEvent(l){const u=this.retainedEventArguments[l];u&&(delete this.retainedEventArguments[l],u.forEach(c=>{this.notifyListeners(l,c)}))}}const ky=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),xy=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class pS extends nh{async getCookies(){const l=document.cookie,u={};return l.split(";").forEach(c=>{if(c.length<=0)return;let[m,f]=c.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");m=xy(m).trim(),f=xy(f).trim(),u[m]=f}),u}async setCookie(l){try{const u=ky(l.key),c=ky(l.value),m=`; expires=${(l.expires||"").replace("expires=","")}`,f=(l.path||"/").replace("path=",""),p=l.url!=null&&l.url.length>0?`domain=${l.url}`:"";document.cookie=`${u}=${c||""}${m}; path=${f}; ${p};`}catch(u){return Promise.reject(u)}}async deleteCookie(l){try{document.cookie=`${l.key}=; Max-Age=0`}catch(u){return Promise.reject(u)}}async clearCookies(){try{const l=document.cookie.split(";")||[];for(const u of l)document.cookie=u.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(l){return Promise.reject(l)}}async clearAllCookies(){try{await this.clearCookies()}catch(l){return Promise.reject(l)}}}So("CapacitorCookies",{web:()=>new pS});const gS=async s=>new Promise((l,u)=>{const c=new FileReader;c.onload=()=>{const m=c.result;l(m.indexOf(",")>=0?m.split(",")[1]:m)},c.onerror=m=>u(m),c.readAsDataURL(s)}),yS=(s={})=>{const l=Object.keys(s);return Object.keys(s).map(m=>m.toLocaleLowerCase()).reduce((m,f,p)=>(m[f]=s[l[p]],m),{})},bS=(s,l=!0)=>s?Object.entries(s).reduce((c,m)=>{const[f,p]=m;let g,v;return Array.isArray(p)?(v="",p.forEach(b=>{g=l?encodeURIComponent(b):b,v+=`${f}=${g}&`}),v.slice(0,-1)):(g=l?encodeURIComponent(p):p,v=`${f}=${g}`),`${c}&${v}`},"").substr(1):null,vS=(s,l={})=>{const u=Object.assign({method:s.method||"GET",headers:s.headers},l),m=yS(s.headers)["content-type"]||"";if(typeof s.data=="string")u.body=s.data;else if(m.includes("application/x-www-form-urlencoded")){const f=new URLSearchParams;for(const[p,g]of Object.entries(s.data||{}))f.set(p,g);u.body=f.toString()}else if(m.includes("multipart/form-data")||s.data instanceof FormData){const f=new FormData;if(s.data instanceof FormData)s.data.forEach((g,v)=>{f.append(v,g)});else for(const g of Object.keys(s.data))f.append(g,s.data[g]);u.body=f;const p=new Headers(u.headers);p.delete("content-type"),u.headers=p}else(m.includes("application/json")||typeof s.data=="object")&&(u.body=JSON.stringify(s.data));return u};class wS extends nh{async request(l){const u=vS(l,l.webFetchExtra),c=bS(l.params,l.shouldEncodeUrlParams),m=c?`${l.url}?${c}`:l.url,f=await fetch(m,u),p=f.headers.get("content-type")||"";let{responseType:g="text"}=f.ok?l:{};p.includes("application/json")&&(g="json");let v,b;switch(g){case"arraybuffer":case"blob":b=await f.blob(),v=await gS(b);break;case"json":v=await f.json();break;default:v=await f.text()}const x={};return f.headers.forEach((M,C)=>{x[C]=M}),{data:v,headers:x,status:f.status,url:f.url}}async get(l){return this.request(Object.assign(Object.assign({},l),{method:"GET"}))}async post(l){return this.request(Object.assign(Object.assign({},l),{method:"POST"}))}async put(l){return this.request(Object.assign(Object.assign({},l),{method:"PUT"}))}async patch(l){return this.request(Object.assign(Object.assign({},l),{method:"PATCH"}))}async delete(l){return this.request(Object.assign(Object.assign({},l),{method:"DELETE"}))}}So("CapacitorHttp",{web:()=>new wS});var Sy;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(Sy||(Sy={}));var jy;(function(s){s.StatusBar="StatusBar",s.NavigationBar="NavigationBar"})(jy||(jy={}));class kS extends nh{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}So("SystemBars",{web:()=>new kS});const xS="modulepreload",SS=function(s){return"/peggy/"+s},Ny={},jS=function(l,u,c){let m=Promise.resolve();if(u&&u.length>0){let v=function(b){return Promise.all(b.map(x=>Promise.resolve(x).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=p?.nonce||p?.getAttribute("nonce");m=v(u.map(b=>{if(b=SS(b),b in Ny)return;Ny[b]=!0;const x=b.endsWith(".css"),M=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${M}`))return;const C=document.createElement("link");if(C.rel=x?"stylesheet":xS,x||(C.as="script"),C.crossOrigin="",C.href=b,g&&C.setAttribute("nonce",g),document.head.appendChild(C),x)return new Promise((R,L)=>{C.addEventListener("load",R),C.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${b}`)))})}))}function f(p){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=p,window.dispatchEvent(g),!g.defaultPrevented)throw p}return m.then(p=>{for(const g of p||[])g.status==="rejected"&&f(g.reason);return l().catch(f)})};function NS(s){s.CapacitorUtils.Synapse=new Proxy({},{get(l,u){return new Proxy({},{get(c,m){return(f,p,g)=>{const v=s.Capacitor.Plugins[u];if(v===void 0){g(new Error(`Capacitor plugin ${u} not found`));return}if(typeof v[m]!="function"){g(new Error(`Method ${m} not found in Capacitor plugin ${u}`));return}(async()=>{try{const b=await v[m](f);p(b)}catch(b){g(b)}})()}}})}})}function TS(s){s.CapacitorUtils.Synapse=new Proxy({},{get(l,u){return s.cordova.plugins[u]}})}function AS(s=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!s?NS(window):window.cordova!==void 0&&TS(window))}const Ty=So("Geolocation",{web:()=>jS(()=>import("./web-WXZBQdLz.js"),[]).then(s=>new s.GeolocationWeb)});AS();const Ay=So("BackgroundGeolocation"),mb={enableHighAccuracy:!0,timeout:2e4,maximumAge:6e4};function nc(s){const l=Number(s);return Number.isFinite(l)?l:null}function Mc(s){if(!s)return null;const l=nc(s.latitude),u=nc(s.longitude);if(l===null||u===null)return null;const c=nc(s.accuracy),m=nc(s.time)||Date.now();return{latitude:l,longitude:u,accuracy:c,timestamp:m,raw:s}}function hb(s){if(!s)return{code:"UNKNOWN",message:"Unknown location error."};if(typeof s=="string")return{code:"ERROR",message:s};const l=s.code||s.errorCode||"ERROR",u=s.message||s.error||String(s);return{code:String(l),message:String(u)}}function ih(){try{return!!Ns?.isNativePlatform?.()}catch{return!1}}function fb(){try{return Ns?.getPlatform?.()==="ios"&&ih()}catch{return!1}}async function pb(){if(ih()){await Ty.requestPermissions();const s=await Ty.getCurrentPosition({enableHighAccuracy:!0,timeout:2e4,maximumAge:3e4});return Mc({latitude:s?.coords?.latitude,longitude:s?.coords?.longitude,accuracy:s?.coords?.accuracy,time:s?.timestamp})}if(typeof navigator>"u"||!navigator.geolocation)throw new Error("Location services are not available on this device/browser.");return new Promise((s,l)=>{navigator.geolocation.getCurrentPosition(u=>{const c=Mc({latitude:u?.coords?.latitude,longitude:u?.coords?.longitude,accuracy:u?.coords?.accuracy,time:u?.timestamp});if(!c){l(new Error("Could not parse device location."));return}s(c)},u=>l(new Error(u?.message||"Could not get current location.")),{...mb,timeout:15e3,maximumAge:3e4})})}async function MS({onLocation:s,onError:l,distanceFilter:u,background:c}){const m=await Ay.addWatcher({requestPermissions:!0,stale:!1,distanceFilter:Math.max(1,Number(u)||20),backgroundMessage:c?"Peggy is tracking location for auto attendance.":void 0,backgroundTitle:c?"Peggy Auto Attendance":void 0},(f,p)=>{if(p){l?.(hb(p));return}const g=Mc(f);g&&s(g)});return async()=>{if(m)try{await Ay.removeWatcher({id:m})}catch{}}}async function ES({onLocation:s,onError:l}){if(typeof navigator>"u"||!navigator.geolocation)throw new Error("Location services are not available on this device/browser.");const u=navigator.geolocation.watchPosition(c=>{const m=Mc({latitude:c?.coords?.latitude,longitude:c?.coords?.longitude,accuracy:c?.coords?.accuracy,time:c?.timestamp});m&&s(m)},c=>l?.(hb(c)),mb);return async()=>{navigator.geolocation.clearWatch(u)}}async function CS({onLocation:s,onError:l,distanceFilter:u=20,background:c=!0}={}){if(typeof s!="function")throw new Error("startAppLocationWatcher requires an onLocation callback.");return ih()?MS({onLocation:s,onError:l,distanceFilter:u,background:c}):ES({onLocation:s,onError:l})}const Bl="peggy-geo-telemetry",DS={tracking:!1,inside:!1,insideWork:!1,insideHome:!1,distanceMeters:null,distanceWorkMeters:null,distanceHomeMeters:null,accuracyMeters:null,updatedAt:""},sh="naomi",OS=["naomi","husband"];function Ec(){return{status:"",live:{...DS}}}function gb(s){const l=String(s||"").trim().toLowerCase();return OS.includes(l)?l:sh}let yc={naomi:Ec(),husband:Ec()};function Gi(s=sh){const l=gb(s);return yc[l]||Ec()}function yl(s={},l=sh){const u=gb(l),c=yc[u]||Ec(),m={...c,...s,live:s.live?{...c.live,...s.live}:c.live};yc={...yc,[u]:m},typeof window<"u"&&window.dispatchEvent(new CustomEvent(Bl,{detail:{channel:u,...m}}))}const km=50,Cc=180,xm=220,RS=8,_S=90,Sm=3e3,yb=720,LS=22,HS=1200,BS=4200,My={tracking:!1,inside:!1,insideWork:!1,insideHome:!1,distanceMeters:null,distanceWorkMeters:null,distanceHomeMeters:null,accuracyMeters:null,updatedAt:""};function uo(s,l){const u=Number(s),c=Number(l);return Number.isFinite(u)&&Number.isFinite(c)&&u>=-90&&u<=90&&c>=-180&&c<=180}function fo(s,l=Cc){return Math.min(Sm,Math.max(km,Number(s)||l))}function bb(s){return Math.min(12,Math.max(.5,Number(s)||RS))}function jm(s){return Math.min(yb,Math.max(15,Number(s)||_S))}function Ey(s,{minHours:l=0,maxHours:u=24}={}){const c=Math.min(u,Math.max(l,Number(s)||0));let m=Math.floor(c),f=Math.round((c-m)*60);return f>=60&&(m+=1,f-=60),m>u&&(m=u,f=0),{hours:m,minutes:f}}function Cy(s,l,{minHours:u=0,maxHours:c=24}={}){const m=Math.max(0,Number(s)||0),f=Math.min(59,Math.max(0,Number(l)||0)),p=m+f/60;return Math.min(c,Math.max(u,p))}function ic(s){const l=Math.max(0,Number(s)||0);let u=Math.floor(l),c=Math.round((l-u)*60);return c>=60&&(u+=1,c-=60),c<=0?`${u}h`:`${u}h ${c}m`}function Dy(s){const l=String(s||"").trim();if(!l)return null;const[u,c]=l.split(":").map(Number);return!Number.isFinite(u)||!Number.isFinite(c)||u<0||u>23||c<0||c>59?null:u*60+c}function Ml(s){return Math.min(720,Math.max(0,Number(s)||0))}function sc(s,l,u=0){const c=Dy(s),m=Dy(l);if(c===null||m===null)return null;let f=m-c;return f<0&&(f+=1440),Math.max(0,f-Ml(u))/60}function Vi(s){if(s===""||s===null||typeof s>"u")return"";const l=Number(s);return Number.isFinite(l)?l.toFixed(6):""}function zS(s){const l=String(s||"").trim();if(!l)return null;const u=[/@(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/,/[?&]ll=(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/,/[?&]q=(-?\d+(?:\.\d+)?),(-?\d+(?:\.\d+)?)/,/(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)/];for(const c of u){const m=l.match(c);if(!m)continue;const f=Number(m[1]),p=Number(m[2]);if(uo(f,p))return{lat:f,lng:p}}return null}function Nm(){if(typeof navigator>"u")return!1;const s=String(navigator.userAgent||""),l=String(navigator.platform||""),u=Number(navigator.maxTouchPoints||0);return/iPhone|iPad|iPod/i.test(s)||/Mac/i.test(l)&&u>1}function $S(s){if(typeof window>"u")return;const l=String(s||"").trim();if(l)try{if(Nm()){window.location.assign(l);return}window.open(l,"_blank","noopener,noreferrer")||window.location.assign(l)}catch{window.location.assign(l)}}function Oy(s){return{workName:String(s?.name||""),workLat:Vi(s?.lat),workLng:Vi(s?.lng),workRadiusMeters:String(fo(s?.radiusMeters,Cc)),homeName:String(s?.homeName||""),homeLat:Vi(s?.homeLat),homeLng:Vi(s?.homeLng),homeRadiusMeters:String(fo(s?.homeRadiusMeters,xm)),autoHours:String(bb(s?.autoHours)),awayMinutesForWork:String(jm(s?.awayMinutesForWork))}}function mo({isHusband:s=!1}={}){return{worked:!0,hours:s?8:7.5,note:"",useTimeRange:s,startTime:s?"08:00":"",endTime:s?"17:00":"",breakMinutes:s?60:0}}function bl(s,{isHusband:l=!1}={}){const u=mo({isHusband:l}),c=s&&typeof s=="object"?s:{};return{...u,worked:c.worked!==!1,hours:Math.max(0,Number(c.hours)||u.hours),note:String(c.note||""),useTimeRange:!!c.useTimeRange,startTime:String(c.startTime||""),endTime:String(c.endTime||""),breakMinutes:Ml(c.breakMinutes)}}function oc(s,l=!0){if(typeof window>"u")return l;const u=window.localStorage.getItem(s);return u==="0"?!1:u==="1"?!0:l}function Ry({personKey:s="naomi",title:l="Work Attendance",accent:u="wife",allowGeoTracker:c=!0}){const{attendance:m,markAttendance:f,removeAttendance:p,workLocation:g,setWorkLocation:v,husbandAttendance:b,markHusbandAttendance:x,removeHusbandAttendance:M,husbandWorkLocation:C,setHusbandWorkLocation:R}=Fn(),L=String(s||"").toLowerCase()==="husband",W=L?"husband":"naomi",P=L?b:m,Z=L?x:f,xe=L?M:p,te=L?C:g,ue=L?R:v,se=`baby-prep-finance-work-calendar-${L?"husband":"wife"}`,ae=`baby-prep-finance-work-summary-${L?"husband":"wife"}`,V=`baby-prep-finance-work-geo-panel-${L?"husband":"wife"}`,K=`baby-prep-finance-work-geo-advanced-${L?"husband":"wife"}`,O=new Date,[le,ve]=w.useState({y:O.getFullYear(),m:O.getMonth()+1}),[ce,fe]=w.useState(O.toISOString().split("T")[0]),[we,Ce]=w.useState(()=>mo({isHusband:L})),[_,Q]=w.useState(()=>oc(se,!0)),[Se,Y]=w.useState(()=>oc(ae,!0)),[ge,k]=w.useState(()=>oc(V,!1)),[z,re]=w.useState(()=>oc(K,!1)),[N,F]=w.useState(""),[X,U]=w.useState(""),[Te,Ae]=w.useState(()=>String(Gi(W)?.status||"")),[De,tt]=w.useState(()=>({...My,...Gi(W)?.live||{}})),[de,Oe]=w.useState(()=>Oy(te)),[Ve,Xe]=w.useState({work:"",home:""}),Ze=w.useRef(!1),lt=w.useRef(null),qe=w.useRef(null),rt=w.useRef(null),Wt=w.useRef(0),xt=w.useRef(!1),[ye,Me]=w.useState(()=>!Nm()),Qe=uo(te.lat,te.lng),$e=uo(te.homeLat,te.homeLng),kt=Qe||$e,St=fb(),ft=Nm(),Ct=Ey(we.hours,{minHours:.5,maxHours:24}),Bt=Ey(de.autoHours,{minHours:.5,maxHours:12}),Kt=sc(we.startTime,we.endTime,we.breakMinutes);w.useEffect(()=>{Ze.current||Oe(Oy(te))},[te.name,te.lat,te.lng,te.radiusMeters,te.homeName,te.homeLat,te.homeLng,te.homeRadiusMeters,te.autoHours,te.awayMinutesForWork]),w.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(se,_?"1":"0")},[se,_]),w.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(ae,Se?"1":"0")},[ae,Se]),w.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(V,ge?"1":"0")},[V,ge]),w.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(K,z?"1":"0")},[K,z]),w.useEffect(()=>{if(typeof window>"u")return;const T=Ne=>{const He=Ne&&typeof Ne=="object"?Ne:Gi(W);String(He?.channel||W).trim().toLowerCase()===W&&(Ae(String(He?.status||"")),tt({...My,...He?.live||{}}))};T(Gi(W));const me=Ne=>T(Ne?.detail);return window.addEventListener(Bl,me),()=>window.removeEventListener(Bl,me)},[W]),w.useEffect(()=>{if(N)return lt.current&&clearTimeout(lt.current),lt.current=setTimeout(()=>{F("")},1e4),()=>{lt.current&&clearTimeout(lt.current)}},[N]),w.useEffect(()=>{if(X)return qe.current&&clearTimeout(qe.current),qe.current=setTimeout(()=>{U("")},BS),()=>{qe.current&&clearTimeout(qe.current)}},[X]);const Ke=T=>{U(String(T||"").trim())},zt=async()=>{if(typeof window>"u")return!1;const T=window.DeviceMotionEvent;if(!T)return!1;const me=T.requestPermission;if(typeof me!="function")return Me(!0),!0;if(xt.current)return ye;xt.current=!0;try{const Ne=await me.call(T),He=String(Ne||"").toLowerCase()==="granted";return Me(He),Ke(He?"Shake undo enabled for quick logs.":"Motion access denied. Use long press to remove logs."),He}catch{return Me(!1),Ke("Could not enable motion access for shake undo."),!1}},Dt=(T,me)=>{rt.current={dateISO:T,previousRecord:me??null,recordedAt:Date.now()}},Rt=()=>{const T=rt.current;if(!T||!T.dateISO)return!1;const me=T.previousRecord;return me&&typeof me=="object"?(Z(T.dateISO,me),Ce(bl(me,{isHusband:L})),Ke(`Undo complete for ${T.dateISO}.`)):(xe(T.dateISO),Ce(mo({isHusband:L})),Ke(`Cleared quick log for ${T.dateISO}.`)),fe(T.dateISO),rt.current=null,!0};w.useEffect(()=>{if(typeof window>"u"||!ye||!window.DeviceMotionEvent)return;let T=null,me=null,Ne=null;const He=Je=>{const at=Je?.accelerationIncludingGravity||Je?.acceleration;if(!at)return;const yt=Number(at.x||0),Oa=Number(at.y||0),ba=Number(at.z||0);if(T===null||me===null||Ne===null){T=yt,me=Oa,Ne=ba;return}const Ia=Math.abs(yt-T)+Math.abs(Oa-me)+Math.abs(ba-Ne);if(T=yt,me=Oa,Ne=ba,Ia<LS)return;const un=Date.now();un-Wt.current<HS||(Wt.current=un,Rt()||Ke("No recent quick action to undo."))};return window.addEventListener("devicemotion",He),()=>window.removeEventListener("devicemotion",He)},[ye,Z,xe,L]);const ct=T=>{Ze.current=!0,Oe(me=>({...me,...T}))},Ge=(T,me)=>{const Ne=T==="hours"?Number(me):Ct.hours,He=T==="minutes"?Number(me):Ct.minutes,Je=Cy(Ne,He,{minHours:.5,maxHours:24});Ce(at=>({...at,hours:Je}))},Da=(T,me)=>{Ce(Ne=>{const He={...Ne,[T]:T==="breakMinutes"?Ml(me):me},Je=sc(He.startTime,He.endTime,He.breakMinutes);return Je!==null&&(He.hours=Je),He})},Sa=(T,me)=>{const Ne=T==="hours"?Number(me):Bt.hours,He=T==="minutes"?Number(me):Bt.minutes,Je=Cy(Ne,He,{minHours:.5,maxHours:12});ct({autoHours:String(Je)})},$a=()=>{const T=String(de.workLat||"").trim()!==""||String(de.workLng||"").trim()!=="",me=String(de.homeLat||"").trim()!==""||String(de.homeLng||"").trim()!=="";if(T&&!uo(de.workLat,de.workLng)){F("Work pin is invalid. Enter valid latitude and longitude.");return}if(me&&!uo(de.homeLat,de.homeLng)){F("Home pin is invalid. Enter valid latitude and longitude.");return}ue(Ne=>({...Ne,name:String(de.workName||"").trim(),lat:Vi(de.workLat),lng:Vi(de.workLng),radiusMeters:fo(de.workRadiusMeters,Cc),homeName:String(de.homeName||"").trim(),homeLat:Vi(de.homeLat),homeLng:Vi(de.homeLng),homeRadiusMeters:fo(de.homeRadiusMeters,xm),autoHours:bb(de.autoHours),awayMinutesForWork:jm(de.awayMinutesForWork)})),Ze.current=!1,F("Saved location settings. You can now enable tracker.")},Xt=async(T="work")=>{try{F("Getting current location...");const me=await pb();if(!me){F("Could not get current location. Try again.");return}const Ne=me.latitude,He=me.longitude;if(T==="home"){ct({homeLat:Ne.toFixed(6),homeLng:He.toFixed(6),homeName:String(de.homeName||"").trim()||"Home"}),F("Current location captured for Home. Tap Save Locations.");return}ct({workLat:Ne.toFixed(6),workLng:He.toFixed(6),workName:String(de.workName||"").trim()||"Work"}),F("Current location captured for Work. Tap Save Locations.")}catch(me){String(me?.message||"").toLowerCase().includes("permission")?F("Location permission denied. Enable location access first."):F("Could not get current location. Try again.")}},La=(T="work")=>{const me=T==="home"?te.homeLat:te.lat,Ne=T==="home"?te.homeLng:te.lng,He=uo(me,Ne),Je=ft?He?`https://maps.apple.com/?ll=${me},${Ne}`:"https://maps.apple.com/":He?`https://www.google.com/maps/search/?api=1&query=${me},${Ne}`:"https://www.google.com/maps";$S(Je)},At=(T="work")=>{const me=T==="home"?Ve.home:Ve.work,Ne=zS(me);if(!Ne){F('Pin not recognized. Paste a maps link or "lat,lng".');return}if(T==="home"){ct({homeLat:Ne.lat.toFixed(6),homeLng:Ne.lng.toFixed(6),homeName:String(de.homeName||"").trim()||"Home"}),Xe(He=>({...He,home:""})),F("Home pin captured from map. Tap Save Locations.");return}ct({workLat:Ne.lat.toFixed(6),workLng:Ne.lng.toFixed(6),workName:String(de.workName||"").trim()||"Work"}),Xe(He=>({...He,work:""})),F("Work pin captured from map. Tap Save Locations.")},Ga=()=>{if(!kt){F("Save at least one valid location (Work or Home) before enabling tracker.");return}ue(T=>({...T,enabled:!0})),F("Location tracker enabled.")},j=()=>{ue(T=>({...T,enabled:!1})),F("Location tracker disabled.")},ke=()=>{const T=sc(we.startTime,we.endTime,we.breakMinutes),me=we.useTimeRange?T??we.hours:we.hours,Ne={...we,hours:we.worked?Math.max(0,Number(me)||0):0,breakMinutes:Ml(we.breakMinutes)};Z(ce,Ne),Ce(mo({isHusband:L}))},We=T=>{const me=P[T];Dt(T,me||null);const Ne=bl(me,{isHusband:L}),He=Ne.useTimeRange?sc(Ne.startTime,Ne.endTime,Ne.breakMinutes):null,Je=mo({isHusband:L}).hours,at={...Ne,worked:!0,hours:Math.max(0,Number(Ne.useTimeRange?He??Ne.hours:Ne.hours)||Je),breakMinutes:Ml(Ne.breakMinutes)};Z(T,at),fe(T),Ce(bl(at,{isHusband:L})),Ke(`Quick logged Worked for ${T}. Shake to undo.`),zt()},G=T=>{const me=P[T];if(!me){Ke(`No saved log on ${T} to remove.`);return}Dt(T,me),xe(T),fe(T),Ce(mo({isHusband:L})),Ke(`Removed log for ${T}. Shake to undo.`),zt()},oe=()=>{Q(T=>!T)},he=`${le.y}-${String(le.m).padStart(2,"0")}`,_e=w.useMemo(()=>Object.entries(P).filter(([T])=>T.startsWith(he)).map(([T,me])=>({date:T,...me})).sort((T,me)=>me.date.localeCompare(T.date)),[P,he]),ut=_e.filter(T=>T.worked).length,wt=_e.filter(T=>T.worked).reduce((T,me)=>T+(Number(me.hours)||0),0);return n.jsxs("div",{className:`work-finance-wrap ${u}`,children:[n.jsxs("section",{className:`glass-section finance-work-section ${u}`,children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.work})}),n.jsx("div",{children:n.jsx("h2",{children:l})}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:oe,"aria-expanded":_,children:_?"Hide calendar":"Show calendar"})]}),_&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"section-note",children:"Double tap a date to quick-log Worked. Long press to delete that day log. Shake phone to undo last quick action."}),X&&n.jsx("p",{className:"section-note",children:X}),n.jsx(ho,{year:le.y,month:le.m,onMonthChange:(T,me)=>ve({y:T,m:me}),selectedDate:ce,onDayClick:T=>{fe(T),Ce(bl(P[T],{isHusband:L}))},onDayDoubleTap:T=>We(T),onDayLongPress:T=>G(T),renderDay:T=>{const me=P[T];return me?n.jsx("span",{className:`cal-dot ${me.worked?"work-dot-yes":"work-dot-no"}`}):null}})]}),n.jsxs("div",{className:"glass-card attendance-form",children:[n.jsxs("h3",{children:["Log: ",ce]}),n.jsxs("div",{className:"attendance-toggle",children:[n.jsx("button",{className:`att-btn ${we.worked?"active worked":""}`,onClick:()=>Ce(T=>({...T,worked:!0})),children:"Worked"}),n.jsx("button",{className:`att-btn ${we.worked?"":"active absent"}`,onClick:()=>Ce(T=>({...T,worked:!1})),children:"Absent"})]}),we.worked&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"attendance-mode-row",children:[n.jsx("button",{type:"button",className:`att-btn ${we.useTimeRange?"":"active worked"}`,onClick:()=>Ce(T=>({...T,useTimeRange:!1})),children:"Manual Duration"}),n.jsx("button",{type:"button",className:`att-btn ${we.useTimeRange?"active worked":""}`,onClick:()=>Ce(T=>({...T,useTimeRange:!0})),children:"Time In / Out"})]}),!we.useTimeRange&&n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Worked duration"}),n.jsxs("div",{className:"work-duration-row",children:[n.jsx("input",{type:"number",min:"0",max:"24",step:"1",value:Ct.hours,onFocus:T=>T.target.select(),onChange:T=>Ge("hours",T.target.value)}),n.jsx("span",{className:"work-duration-sep",children:"h"}),n.jsx("input",{type:"number",min:"0",max:"59",step:"5",value:Ct.minutes,onFocus:T=>T.target.select(),onChange:T=>Ge("minutes",T.target.value)}),n.jsx("span",{className:"work-duration-sep",children:"m"})]})]}),we.useTimeRange&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"attendance-time-range-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Start"}),n.jsx("input",{type:"time",value:we.startTime,onChange:T=>Da("startTime",T.target.value)})]}),n.jsx("span",{className:"work-duration-sep time-range-sep",children:"to"}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"End"}),n.jsx("input",{type:"time",value:we.endTime,onChange:T=>Da("endTime",T.target.value)})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Total break (minutes)"}),n.jsx("input",{type:"number",min:"0",max:"720",step:"5",value:we.breakMinutes,onFocus:T=>T.target.select(),onChange:T=>Da("breakMinutes",T.target.value),placeholder:"e.g. 75"})]}),n.jsxs("p",{className:"section-note attendance-computed",children:["Paid work time: ",Kt===null?"Set start and end time":ic(Kt)]})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Note (optional)"}),n.jsx("input",{type:"text",value:we.note,onChange:T=>Ce(me=>({...me,note:T.target.value})),placeholder:"e.g. half day, overtime..."})]}),n.jsx("button",{className:"btn-glass-primary",onClick:ke,children:"Save"})]})]}),c&&n.jsxs("section",{className:`glass-section finance-work-section ${u}`,children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.activity})}),n.jsx("div",{children:n.jsx("h2",{children:"Work/Home Location Auto-Log"})}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>k(T=>!T),"aria-expanded":ge,children:ge?"Hide tracker":"Show tracker"})]}),n.jsxs("p",{className:"section-note",children:["Open map, pin the place, paste pin link, then save. ",ft?"On iPhone this opens Apple Maps.":"On non-iOS this opens Google Maps."," Latitude/longitude are under Advanced options."]}),ge&&n.jsxs("div",{className:"glass-card work-location-card",children:[n.jsxs("div",{className:"attendance-toggle",children:[n.jsx("button",{type:"button",className:`att-btn ${te.enabled?"active worked":""}`,onClick:Ga,children:"Tracker ON"}),n.jsx("button",{type:"button",className:`att-btn ${te.enabled?"":"active absent"}`,onClick:j,children:"Tracker OFF"})]}),n.jsxs("div",{className:"work-location-sections",children:[n.jsxs("div",{className:"work-location-block glass-inner",children:[n.jsx("h4",{children:"Work Location"}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Name"}),n.jsx("input",{type:"text",value:de.workName,onChange:T=>ct({workName:T.target.value}),placeholder:"e.g. Kawasaki Office"})]}),n.jsxs("div",{className:"work-location-actions map-actions",children:[n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:()=>Xt("work"),children:"Use Current"}),n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:()=>La("work"),children:ft?"Open Apple Maps":"Open Google Maps"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Map pin link or lat,lng"}),n.jsx("input",{type:"text",value:Ve.work,onChange:T=>Xe(me=>({...me,work:T.target.value})),placeholder:"Paste maps link or 35.680000,139.760000"})]}),n.jsx("button",{type:"button",className:"btn-glass-mini primary",onClick:()=>At("work"),children:"Apply Work Pin"}),Qe&&n.jsxs("p",{className:"section-note pin-preview",children:["Saved: ",te.lat,", ",te.lng]})]}),n.jsxs("div",{className:"work-location-block glass-inner",children:[n.jsx("h4",{children:"Home Location"}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Name"}),n.jsx("input",{type:"text",value:de.homeName,onChange:T=>ct({homeName:T.target.value}),placeholder:"e.g. Home"})]}),n.jsxs("div",{className:"work-location-actions map-actions",children:[n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:()=>Xt("home"),children:"Use Current"}),n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:()=>La("home"),children:ft?"Open Apple Maps":"Open Google Maps"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Map pin link or lat,lng"}),n.jsx("input",{type:"text",value:Ve.home,onChange:T=>Xe(me=>({...me,home:T.target.value})),placeholder:"Paste maps link or 35.680000,139.760000"})]}),n.jsx("button",{type:"button",className:"btn-glass-mini primary",onClick:()=>At("home"),children:"Apply Home Pin"}),$e&&n.jsxs("p",{className:"section-note pin-preview",children:["Saved: ",te.homeLat,", ",te.homeLng]})]})]}),n.jsx("div",{className:"work-location-save-row",children:n.jsx("button",{type:"button",className:"btn-glass-primary",onClick:$a,children:"Save Locations"})}),n.jsx("div",{className:"work-location-advanced-toggle",children:n.jsx("button",{type:"button",className:"btn-glass-mini",onClick:()=>re(T=>!T),children:z?"Hide Advanced Options":"Show Advanced Options"})}),z&&n.jsxs("div",{className:"glass-inner work-location-advanced",children:[n.jsxs("div",{className:"work-location-sections",children:[n.jsxs("div",{className:"work-location-block",children:[n.jsx("h4",{children:"Work Advanced"}),n.jsxs("div",{className:"work-location-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Latitude"}),n.jsx("input",{type:"number",step:"0.000001",value:de.workLat,onChange:T=>ct({workLat:T.target.value}),placeholder:"35.530000"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Longitude"}),n.jsx("input",{type:"number",step:"0.000001",value:de.workLng,onChange:T=>ct({workLng:T.target.value}),placeholder:"139.700000"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Radius (meters)"}),n.jsx("input",{type:"number",min:km,max:Sm,value:de.workRadiusMeters,onChange:T=>ct({workRadiusMeters:String(fo(T.target.value,Cc))})})]})]}),n.jsxs("div",{className:"work-location-block",children:[n.jsx("h4",{children:"Home Advanced"}),n.jsxs("div",{className:"work-location-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Latitude"}),n.jsx("input",{type:"number",step:"0.000001",value:de.homeLat,onChange:T=>ct({homeLat:T.target.value}),placeholder:"35.530000"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Longitude"}),n.jsx("input",{type:"number",step:"0.000001",value:de.homeLng,onChange:T=>ct({homeLng:T.target.value}),placeholder:"139.700000"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Radius (meters)"}),n.jsx("input",{type:"number",min:km,max:Sm,value:de.homeRadiusMeters,onChange:T=>ct({homeRadiusMeters:String(fo(T.target.value,xm))})})]})]})]}),n.jsxs("div",{className:"work-location-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Auto work duration"}),n.jsxs("div",{className:"work-duration-row",children:[n.jsx("input",{type:"number",min:"0",max:"12",step:"1",value:Bt.hours,onFocus:T=>T.target.select(),onChange:T=>Sa("hours",T.target.value)}),n.jsx("span",{className:"work-duration-sep",children:"h"}),n.jsx("input",{type:"number",min:"0",max:"59",step:"5",value:Bt.minutes,onFocus:T=>T.target.select(),onChange:T=>Sa("minutes",T.target.value)}),n.jsx("span",{className:"work-duration-sep",children:"m"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Away minutes (home-only mode)"}),n.jsx("input",{type:"number",min:"15",max:yb,value:de.awayMinutesForWork,onChange:T=>ct({awayMinutesForWork:String(jm(T.target.value))})})]})]})]}),N&&n.jsx("p",{className:"section-note",children:N}),Te&&Te!==N&&n.jsx("p",{className:"section-note",children:Te}),n.jsxs("p",{className:"section-note",children:["Tracking mode: ",St?"Native iOS (background-capable)":"Web (foreground-only)"]}),te.enabled&&De.tracking&&n.jsxs("div",{className:`work-geo-live glass-inner ${De.insideWork?"inside":De.insideHome?"home":"outside"}`,children:[n.jsx("span",{children:De.insideWork?"Inside work zone":De.insideHome?"Inside home zone":"Outside zones"}),n.jsxs("span",{children:[De.distanceWorkMeters!==null?`Work ${De.distanceWorkMeters}m`:"Work n/a"," | ",De.distanceHomeMeters!==null?`Home ${De.distanceHomeMeters}m`:"Home n/a"]})]}),te.enabled&&De.accuracyMeters!==null&&n.jsxs("p",{className:"section-note",children:["GPS accuracy: +/-",De.accuracyMeters,"m"]}),te.lastAutoLogDate&&n.jsxs("p",{className:"section-note",children:["Last auto log date: ",te.lastAutoLogDate,te.lastAutoReason?` (${te.lastAutoReason==="work-zone"?"work zone":"away from home"})`:""]}),!kt&&n.jsx("p",{className:"section-note",children:"Save valid Work or Home coordinates to activate tracking."}),n.jsx("p",{className:"section-note disclaimer",children:St?"Native mode can continue tracking in background after location permissions are granted.":"Web mode auto logging works while Peggy is open and location permission is granted."})]})]}),n.jsxs("section",{className:`glass-section finance-work-section ${u}`,children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.overview})}),n.jsx("div",{children:n.jsxs("h2",{children:["Monthly Summary - ",he]})}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>Y(T=>!T),"aria-expanded":Se,children:Se?"Hide summary":"Show summary"})]}),Se&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"attendance-stats",children:[n.jsxs("div",{className:"att-stat glass-inner",children:[n.jsx("div",{className:"att-stat-num",children:ut}),n.jsx("div",{className:"att-stat-label",children:"Days Worked"})]}),n.jsxs("div",{className:"att-stat glass-inner",children:[n.jsx("div",{className:"att-stat-num",children:ic(wt)}),n.jsx("div",{className:"att-stat-label",children:"Total Hours"})]}),n.jsxs("div",{className:"att-stat glass-inner",children:[n.jsx("div",{className:"att-stat-num",children:_e.filter(T=>!T.worked).length}),n.jsx("div",{className:"att-stat-label",children:"Days Off"})]})]}),_e.length>0&&n.jsx("ul",{className:"attendance-log",children:_e.map(T=>n.jsxs("li",{className:`att-log-item glass-inner ${T.worked?"worked":"absent"}`,onClick:()=>{fe(T.date),Ce(bl(T,{isHusband:L}))},children:[n.jsx("span",{className:"att-log-date",children:T.date}),n.jsx("span",{className:"att-log-status",children:T.worked?`Worked ${ic(T.hours)}`:"Absent"}),T.worked&&T.useTimeRange&&T.startTime&&T.endTime&&n.jsxs("span",{className:"att-log-note",children:[T.startTime," - ",T.endTime," (break ",ic((Number(T.breakMinutes)||0)/60),")"]}),T.note&&n.jsx("span",{className:"att-log-note",children:T.note})]},T.date))})]})]})]})}const rn="",am=[{id:"income",label:"1. Income"},{id:"deductions",label:"2. Deductions"},{id:"result",label:"3. Result"}],IS=[0,5e4,1e5,2e5,3e5],US=[0,3e5,5e5,7e5],ua={naomi:"Naomi",husband:"Shinji"},vb=[{id:"bills",label:"Bills"},{id:"loan",label:"Loan"},{id:"credit_card",label:"Credit Card"},{id:"grocery",label:"Groceries"},{id:"transport",label:"Transport"},{id:"medical",label:"Medical"},{id:"childcare",label:"Childcare"},{id:"extra",label:"Extra"},{id:"other",label:"Other"}],KS={m1:"kawasaki",m2:"kawasaki",m3:"national",m4:"national",m5:"kawasaki",m6:"national",m7:"employer",m8:"national",m9:"national",m10:"kawasaki",m11:"employer",m12:"employer",m13:"employer",m14:"kawasaki",m15:"kawasaki",m16:"kawasaki"},_y={m1:"naomi",m2:"naomi",m3:"naomi",m4:"family",m5:"family",m6:"family",m7:"family",m8:"family",m9:"family",m10:"family",m11:"naomi",m12:"family",m13:"family",m14:"family",m15:"family",m16:"naomi"},FS=[{id:"all",label:"All Owners"},{id:"naomi",label:"Naomi"},{id:"husband",label:"Shinji"},{id:"family",label:"Family"}],Ly=[{id:"all",label:"All Status"},{id:"pending",label:"Pending"},{id:"ask",label:"Ask Required"},{id:"claimed",label:"Claimed"}],nm={m1:"Pregnancy registration day (ward office)",m2:"As early as possible in pregnancy",m3:"Before due month window",m4:"Before delivery (hospital paperwork)",m5:"Right after birth registration",m6:"After delivery invoice is finalized",m7:"During pregnancy and right after birth",m8:"Within 15 days after birth",m9:"Feb-March tax filing period",m10:"During ward visits and annual check-ins",m11:"Before maternity leave starts",m12:"Before childcare leave starts",m13:"Before first childcare leave payroll month",m14:"After baby's insurance card is issued",m15:"When Kawasaki announces yearly campaign window",m16:"During pregnancy/postpartum insurance consultation"},Hy={m1:"Do together with Boshi Techo visit and voucher pickup.",m2:"Do together with pregnancy registration and support consultation.",m5:"Bundle with birth registration + child allowance + baby insurance.",m8:"Bundle with birth registration visit to avoid lost months.",m10:"Ask this at every ward office visit so no missed campaigns.",m11:"Ask HR at same time as maternity leave paperwork.",m12:"Ask HR at same time as childcare leave paperwork.",m13:"Confirm together with childcare leave setup in payroll.",m14:"Apply right after baby's insurance card processing.",m15:"Check together with municipal baby gift and annual program checks.",m16:"Ask at insurance counter while handling other kokuho procedures."},im={m10:!0,m11:!0,m12:!0,m13:!0,m15:!0,m16:!0},By="baby-prep-family-benefits-open",zy="baby-prep-family-benefits-claimed",$y="baby-prep-benefit-tools-open",Iy="baby-prep-family-lane-tools-open",Uy="baby-prep-incident-bridge-open",Ky="baby-prep-incident-bridge-claimed",Fy="baby-prep-support-projection-scenario",Yy="baby-prep-support-projection-child-model",qy="baby-prep-support-playbook-open",Wy=234e4,Py=468e4,YS=["m1","m4","m5"],Gy=["m6","m7","m10","m15"],qS=["m11","m12"],WS=["m2","m3","m13","m14","m16"],PS="m9",po=["09:00","09:30","10:00","10:30","11:00","13:00","13:30","14:00","14:30","15:00","15:30","16:00"],Wi="10:00",GS=[{id:"all",label:"All Tracks"},{id:"employer",label:"Employer / HR"},{id:"insurance",label:"Insurance"},{id:"household",label:"Household"}],lc=[{id:"f1",label:"Shinji childcare leave benefit setup ()",estimateLabel:"Income replacement",owner:"husband",group:"employer",where:"Employer HR + Hello Work",howTo:"Confirm eligibility, leave window, and filing flow before leave starts. Ask payout timing and first payment month.",timing:"Before childcare leave starts",askRequired:!0,sourceLinks:[{label:"MHLW: ",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/0000135090_00001.html"}]},{id:"f2",label:"Company birth bonus / dependent allowance update",estimateLabel:"Varies by company",owner:"husband",group:"employer",where:"Shinji employer HR / payroll",howTo:"Ask if company offers childbirth bonus, family allowance increase, or dependent registration-linked payouts.",timing:"During pregnancy or immediately after birth registration",askRequired:!0,sourceLinks:[{label:"CFA:  (policy context)",url:"https://www.cfa.go.jp/resources/strategy/kakei-oen"}]},{id:"f3",label:"Health insurance extra payout ( / fuka kyuufu)",estimateLabel:"Often 10K-90K",owner:"family",group:"insurance",where:"Health insurance association () + HR",howTo:"Check if insurer adds money on top of childbirth lump-sum. Ask required form and filing deadline.",timing:"Before delivery or right after invoice finalization",askRequired:!0,sourceLinks:[{label:"Kyokai Kenpo: ",url:"https://www.kyoukaikenpo.or.jp/g3/sb3280/"}]},{id:"f4",label:"Confirm childbirth lump-sum payer path (if Naomi under Shinji insurance)",estimateLabel:"Route check",owner:"family",group:"insurance",where:"Insurance office + hospital billing desk",howTo:"Confirm who files and which route applies (direct payment vs refund) to avoid delayed payout.",timing:"Before delivery admission",askRequired:!0,sourceLinks:[{label:"MHLW: ",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/kenkou_iryou/iryouhoken/shussan/index.html"}]},{id:"f5",label:"Household claim packet check (tax receipts, child allowance docs, insurer forms)",estimateLabel:"Savings protection",owner:"family",group:"household",where:"At home prep + ward office + HR",howTo:"Prepare one shared folder for receipts, transport logs, ID docs, and application copies so no support is missed.",timing:"Start now and maintain monthly",askRequired:!1,sourceLinks:[{label:"NTA e-Tax",url:"https://www.e-tax.nta.go.jp/"},{label:"CFA: ",url:"https://www.cfa.go.jp/policies/kokoseido/jidouteate/gaiyou/"}]},{id:"f6",label:"Shinji birth-time leave benefit ()",estimateLabel:"~67% wage (eligible period)",owner:"husband",group:"employer",where:"Employer HR + Hello Work",howTo:"Confirm if Shinji will take birth-time childcare leave (). File leave dates and benefit paperwork before leave starts.",timing:"Before expected delivery month",askRequired:!0,sourceLinks:[{label:"MHLW: ",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/0000135090_00001.html"}]},{id:"f7",label:"Postpartum leave add-on support check ()",estimateLabel:"Extra top-up (if eligible)",owner:"husband",group:"employer",where:"Employer HR + Hello Work",howTo:"Ask if your leave pattern qualifies for the new postpartum add-on support and what exact filing windows apply.",timing:"Within first 8 weeks after birth",askRequired:!0,sourceLinks:[{label:"MHLW leaflet (R7): ",url:"https://www.mhlw.go.jp/content/11600000/001421353.pdf"}]},{id:"f8",label:"Reduced-hours childcare benefit check ()",estimateLabel:"Rate depends on setup",owner:"family",group:"employer",where:"Employer HR + Hello Work",howTo:"If either parent returns on reduced hours, ask whether childcare short-time work benefit can apply and from which payroll month.",timing:"Before return-to-work schedule is finalized",askRequired:!0,sourceLinks:[{label:"MHLW: ",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/0000135090_00001.html"}]}],vl=[{id:"wb1",label:"Medical re-check for persistent dizziness/head symptoms",owner:"husband",timing:"Today / ASAP",where:"Hospital / emergency follow-up clinic",action:"Report all symptoms and request updated shindansho with work restrictions.",planTime:"09:30",planOffsetDays:0,sourceLinks:[{label:"MHLW: ",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/koyou_roudou/roudoukijun/zigyonushi/rousai/index.html"}]},{id:"wb2",label:"Call multilingual legal support (rescheduled call)",owner:"husband",timing:"Fixed reminder: Feb 24, 2026, call early at 09:00",where:"Phone call",action:"Ask for Tagalog/English interpreter, verify rousai filing status, and ask legal referral path.",planTime:"09:00",planDateISO:"2026-02-24",phones:["0570-078377","050-3754-5430","03-5363-3025"],sourceLinks:[{label:"Houterasu multilingual support",url:"https://www.houterasu.or.jp/multilingual/"}]},{id:"wb3",label:"HR lock-in: Naomi dependent + childbirth payer path",owner:"family",timing:"Within 24-48 hours",where:"Employer HR + insurer contact desk",action:"Confirm dependent status, childbirth lump-sum route, and extra insurer/company benefits.",planTime:"10:30",planOffsetDays:1,sourceLinks:[{label:"MHLW: ",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/kenkou_iryou/iryouhoken/shussan/index.html"},{label:"Kyokai Kenpo: ",url:"https://www.kyoukaikenpo.or.jp/g3/sb3280/"}]},{id:"wb4",label:"Rousai follow-up + accident evidence packet",owner:"husband",timing:"This week",where:"Labor office / legal consult prep",action:"Consolidate medical records, photos, payslips, logs, and written communications.",planTime:"14:00",planOffsetDays:2,sourceLinks:[{label:"MHLW: Q&A/claims info",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/0000154471.html"}]},{id:"wb5",label:"No-resignation gate check",owner:"family",timing:"Before any resignation decision",where:"Home legal/finance review",action:"Do not resign until new offer or signed settlement protects income and insurance continuity.",planTime:"15:30",planOffsetDays:3,sourceLinks:[{label:"MHLW: childcare leave benefit basics",url:"https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/0000135090_00001.html"}]},{id:"wb6",label:"Loan defense: request temporary repayment adjustment",owner:"family",timing:"This week",where:"Lender/bank customer support",action:"Submit temporary hardship request while medical/legal process is ongoing.",planTime:"13:00",planOffsetDays:1}],hi=[{id:"sp1",title:"Ward office maximize sweep (ask all optional programs)",daysFromNow:2,time:"10:00",location:"Kawasaki Ward Office",focus:"Capture ask-required and campaign-style support in one visit.",target:"Ask for municipal baby gift, cost-of-living support, and premium reduction windows.",benefitIds:["m10","m15","m16"],taskIds:["p2","p3","p4","p5","p6","p7","p8","p13","p14","o7"]},{id:"sp2",title:"Hospital billing route + delivery refund check",daysFromNow:4,time:"14:00",location:"Delivery hospital billing desk",focus:"Prevent losing refund due to wrong submission route.",target:"Confirm direct payment setup and refund path if invoice is below childbirth lump-sum.",benefitIds:["m4","m6"],taskIds:["d1","b6"]},{id:"sp3",title:"HR benefits bundle (Naomi + Shinji side)",daysFromNow:6,time:"11:00",location:"Employer HR / payroll",focus:"Lock in leave-related income replacement and employer add-ons.",target:"Confirm maternity/childcare leave pay, social insurance exemption, and fuka kyuufu.",benefitIds:["m7","m11","m12","m13"],taskIds:["p10","d6","d7"]},{id:"sp4",title:"Birth registration bundle execution plan",daysFromNow:10,time:"09:30",location:"Kawasaki Ward Office",focus:"Stack post-birth submissions in one process flow.",target:"Sequence birth support payment, child allowance, and child medical subsidy with no deadline miss.",benefitIds:["m5","m8","m14"],taskIds:["b1","b2","b3","b4","b5"]},{id:"sp5",title:"Medical receipts + transport log system",daysFromNow:1,time:"10:30",location:"Home admin setup",focus:"Sustain yearly tax refund quality.",target:"Set monthly archive routine for receipts + transport records before tax season.",benefitIds:["m2","m9"],taskIds:["p11","o1","o2","o4"]},{id:"sp6",title:"Annual support re-check cadence",daysFromNow:30,time:"10:30",location:"Home calendar review",focus:"Catch new city campaigns and rule updates every fiscal year.",target:"Review Kawasaki and national pages, then add follow-ups for active windows.",benefitIds:["m9","m10","m15"],taskIds:["o7"]},{id:"sp7",title:"Prenatal voucher usage planning",daysFromNow:3,time:"09:45",location:"OB-GYN + ward office docs check",focus:"Maximize voucher usage by sequencing visits early.",target:"Set prenatal visit cadence so all vouchers are consumed within valid windows.",benefitIds:["m2"],taskIds:["p1","p2","p11"]},{id:"sp8",title:"Tax filing execution window lock",daysFromNow:40,time:"10:30",location:"Home e-Tax prep",focus:"Avoid missing tax refund timing.",target:"Prepare and submit Kakutei Shinkoku in filing season with complete medical/transport records.",benefitIds:["m9"],taskIds:["o4"]}];function wl(s,l=!1){if(typeof window>"u")return!!l;const u=String(window.localStorage.getItem(s)||"").trim().toLowerCase();return u==="1"||u==="true"?!0:u==="0"||u==="false"?!1:!!l}function kl(s,l){typeof window>"u"||window.localStorage.setItem(s,l?"1":"0")}function Vy(s){if(typeof window>"u")return{};try{const l=window.localStorage.getItem(s);if(!l)return{};const u=JSON.parse(l);return u&&typeof u=="object"&&!Array.isArray(u)?u:{}}catch{return{}}}function Xy(s,l){if(typeof window>"u")return;const u=l&&typeof l=="object"&&!Array.isArray(l)?l:{};window.localStorage.setItem(s,JSON.stringify(u))}function Qy(s,l=""){if(typeof window>"u")return String(l||"");const u=window.localStorage.getItem(s);return u&&String(u).trim()||String(l||"")}function Zy(s,l){typeof window>"u"||window.localStorage.setItem(s,String(l||""))}function st(s){return`${rn}${Number(s||0).toLocaleString()}`}function sm(s){const l=Math.max(0,Number(s)||0);if(l>=1e6){const u=l/1e6,c=u>=10?Math.round(u).toString():u.toFixed(2).replace(/\.?0+$/,"");return`${rn}${c}M`}if(l>=1e3){const u=l/1e3,c=u>=100?Math.round(u).toString():u.toFixed(1).replace(/\.?0+$/,"");return`${rn}${c}K`}return`${rn}${l}`}function Jy(s){const l=Math.max(0,Number(s)||0),u=Math.floor(l),c=Math.round((l-u)*60);return c<=0?`${u}h`:c>=60?`${u+1}h`:`${u}h ${c}m`}function zl(s){const l=String(s||"").trim().toLowerCase();return l==="hourly"||l==="daily"||l==="monthly"?l:"monthly"}function $l(s){const l=String(s||"").trim().toLowerCase();return l==="shinji"||l==="husband"||l==="partner"?"husband":l==="naomi"||l==="wife"?"naomi":l||"naomi"}function Nl(s){const l=String(s||"").trim().toLowerCase();return l==="naomi"||l==="wife"||l==="mom"?"naomi":l==="husband"||l==="shinji"||l==="dad"||l==="partner"?"husband":"family"}function rc(s){const l=Nl(s);return l==="naomi"?ua.naomi:l==="husband"?ua.husband:"Family / Shared"}function Dc(s){const l=String(s||"").trim();if(!l)return-1;const u=Date.parse(`${l}T00:00:00`);return Number.isFinite(u)?u:-1}function VS(s,l,u){const c=$l(l),m=Date.parse(`${String(u||"").trim()}T23:59:59`),f=(Array.isArray(s)?s:[]).filter(g=>$l(g?.person)===c).map(g=>({...g,__stamp:Dc(g?.effectiveFrom)})).sort((g,v)=>v.__stamp-g.__stamp);return f.length?Number.isFinite(m)&&f.find(g=>g.__stamp<=m)||f[0]:null}function Fl(s){const l=String(s||"").trim();return!l||l.length<7?"":l.slice(0,7)}function e0(s,l,u){const c={},m={},f=[],p=[];for(const[g,v]of Object.entries(s||{})){if(!v?.worked)continue;const b=Fl(g);if(!b)continue;const x=VS(l,u,g);if(!x){f.push(g);continue}const M=zl(x.basis),C=Math.max(0,Number(x.rate)||0);if(C<=0){f.push(g);continue}if(p.push(g),M==="hourly"){const W=Math.max(0,Number(v.hours)||0);c[b]=(c[b]||0)+W*C;continue}if(M==="daily"){c[b]=(c[b]||0)+C;continue}const R=Dc(x.effectiveFrom),L=m[b];(!L||R>L.stamp)&&(m[b]={value:C,stamp:R})}for(const[g,v]of Object.entries(m))c[g]=(c[g]||0)+(Number(v.value)||0);return{monthly:c,missingRateDates:f,missingRateDays:f.length,countedWorkedDays:p.length}}function Il(s){const l=s instanceof Date?s:new Date(s);return Number.isNaN(l.getTime())?"":`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`}function t0(s,l=12,u=new Date){let c=0;for(let m=0;m<l;m+=1){const f=new Date(u.getFullYear(),u.getMonth()-m,1),p=Il(f);c+=Number(s?.[p]||0)}return Math.round(c)}function a0(s=6,l=new Date){const u=[];for(let c=0;c<s;c+=1){const m=new Date(l.getFullYear(),l.getMonth()-c,1);u.push(Il(m))}return u}function XS(s,l=0){const u=String(s||"").trim();if(!u||u.length<7)return"";const[c,m]=u.split("-").map(Number);if(!Number.isFinite(c)||!Number.isFinite(m))return"";const f=new Date(c,m-1+Number(l||0),1);return Il(f)}function bc(s,l={}){const u=s&&typeof s=="object"?s:{},c=l&&typeof l=="object"?l:{},m=Math.min(3,Math.max(0,Number(u.delayMonths??c.delayMonths??0)||0)),f=Number(u.monthlyAdjustment??c.monthlyAdjustment??0)||0;return{delayMonths:m,monthlyAdjustment:f}}function n0(s,l,u=[]){const c=bc(l),m={};for(const[f,p]of Object.entries(s||{})){const g=XS(f,c.delayMonths);g&&(m[g]=(m[g]||0)+(Number(p)||0))}if((Number(c.monthlyAdjustment)||0)!==0){const f=Array.isArray(u)?u:[];for(const p of f)Object.prototype.hasOwnProperty.call(m,p)&&(m[p]=(m[p]||0)+Number(c.monthlyAdjustment||0))}return m}function i0(s,l){const u=new Set(Array.isArray(l)?l:[]);let c=0,m=0;for(const[f,p]of Object.entries(s||{})){if(!p?.worked)continue;const g=Fl(f);u.has(g)&&(c+=1,m+=Math.max(0,Number(p?.hours)||0))}return{daysWorked:c,hoursWorked:Math.round(m*100)/100}}function s0(s,l){const u=new Set(Array.isArray(l)?l:[]);return(Array.isArray(s)?s:[]).reduce((c,m)=>{const f=Fl(m);return u.has(f)?c+1:c},0)}function o0(s){const l={};for(const u of Array.isArray(s)?s:[]){const c=Fl(u);c&&(l[c]=(l[c]||0)+1)}return l}function QS(s,l){if(!Array.isArray(s)||!Array.isArray(l)||!l.length)return 0;const u=new Set(l);return Math.round(s.reduce((c,m)=>{const f=Fl(m?.date);return u.has(f)?c+Math.max(0,Number(m?.amount)||0):c},0))}function l0(s){const l=String(s||"other").trim().toLowerCase(),u=vb.find(c=>c.id===l);return u?u.label:"Other"}function ZS(s){return s==="hourly"?"Hourly":s==="daily"?"Daily":"Monthly"}function JS(s){const l=zl(s?.basis),u=Math.max(0,Number(s?.rate)||0);return l==="hourly"?`${st(u)} / hour`:l==="daily"?`${st(u)} / day`:`${st(u)} / month`}function ej(s){const l=zl(s?.basis);return l==="hourly"?"Attendance-based (logged hours x hourly rate)":l==="daily"?"Attendance-based (worked day x daily rate)":"Monthly payout when month has at least one worked day log"}function tj(s){const l=$l(s);return l==="naomi"?ua.naomi:l==="husband"?ua.husband:String(s||"Other")}function Yi(s=new Date){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function fi(s=0){const l=new Date;return l.setDate(l.getDate()+Number(s||0)),Yi(l)}function r0(s,l=96){const u=String(s||"").trim();return u.length<=l?u:`${u.slice(0,Math.max(0,l-3))}...`}function c0(s){return`[stretch-step:${String(s||"").trim().toLowerCase()}]`}function El(s){const l=String(s||"").trim();if(!l)return null;const u=new Date(`${l}T00:00:00`);return Number.isNaN(u.getTime())?null:u}function xl(s,l=0){const u=El(s);return u?(u.setDate(u.getDate()+Number(l||0)),Yi(u)):""}function aj(s){const l=El(s);if(!l)return!1;const u=l.getDay();return u===0||u===6}function u0(s){const l=String(s||"").trim();if(!/^\d{2}:\d{2}$/.test(l))return Wi;if(po.includes(l))return l;const[u,c]=l.split(":"),m=Number(u),f=Number(c);if(!Number.isFinite(m)||!Number.isFinite(f)||m<9||m>16||m===16&&f>0)return Wi;const p=f>=30?30:0,g=`${String(m).padStart(2,"0")}:${String(p).padStart(2,"0")}`;return po.includes(g)?g:Wi}function nj(s){const l=`${String(s?.title||"")} ${String(s?.location||"")} ${String(s?.target||"")}`.toLowerCase();return/(ward|office|kuyakusho|city hall|hr|hospital|byoin|hello work|tax|clinic|ob-gyn|kawasaki)/.test(l)}function ij(){const{checked:s,moneyClaimed:l,toggleMoney:u,payRates:c,addPayRate:m,removePayRate:f,addPlan:p,removePlan:g,taxInputs:v,setTaxInputs:b,attendance:x,husbandAttendance:M,planner:C,dueDate:R,familyConfig:L,financeConfig:W,setFinanceConfig:P,expenses:Z,addExpense:xe,removeExpense:te}=Fn(),ue=L?.includeHusband!==!1,se=w.useMemo(()=>Array.isArray(c)?c.filter(h=>h&&typeof h=="object"):[],[c]),ae=w.useMemo(()=>Array.isArray(Z)?Z.filter(h=>h&&typeof h=="object"):[],[Z]),[V,K]=w.useState("benefits"),[O,le]=w.useState("all"),[ve,ce]=w.useState("all"),[fe,we]=w.useState("all"),[Ce,_]=w.useState("wife"),[Q,Se]=w.useState("annual"),[Y,ge]=w.useState(()=>Il(new Date)),[k,z]=w.useState(null),[re,N]=w.useState(0),[F,X]=w.useState(!1),[U,Te]=w.useState("rates"),[Ae,De]=w.useState("work"),[tt,de]=w.useState(()=>wl(By,!1)),[Oe,Ve]=w.useState(()=>Vy(zy)),[Xe,Ze]=w.useState(()=>wl(Uy,!1)),[lt,qe]=w.useState(()=>Vy(Ky)),[rt,Wt]=w.useState(()=>wl($y,!1)),[xt,ye]=w.useState(()=>wl(Iy,!1)),[Me,Qe]=w.useState(()=>Qy(Fy,"strict")==="stretch"?"stretch":"strict"),[$e,kt]=w.useState(()=>Qy(Yy,"one")==="two"?"two":"one"),[St,ft]=w.useState(()=>wl(qy,!1)),[Ct,Bt]=w.useState("all"),[Kt,Ke]=w.useState("all"),[zt,Dt]=w.useState({}),[Rt,ct]=w.useState(()=>({person:"naomi",basis:"hourly",rate:"",effectiveFrom:Yi(),note:""})),[Ge,Da]=w.useState(()=>({date:Yi(),category:"bills",amount:"",note:"",addToCalendar:!0,planTime:""})),Sa=In.reduce((h,$)=>h+$.amount,0),$a=In.filter(h=>l[h.id]).reduce((h,$)=>h+$.amount,0),Xt=w.useMemo(()=>{const h={};return js.forEach($=>{$.items.forEach(ee=>{(Array.isArray(ee.moneyIds)?ee.moneyIds:[]).forEach(je=>{h[je]||(h[je]=[]),h[je].push({id:ee.id,text:ee.text,phaseTitle:$.title})})})}),h},[]),La=w.useMemo(()=>In.filter(h=>!Array.isArray(Xt[h.id])||Xt[h.id].length===0).map(h=>h.id),[Xt]),At=w.useMemo(()=>In.filter(h=>{const $=KS[h.id]||"kawasaki";if(O!=="all"&&$!==O)return!1;const ee=Nl(_y[h.id]||"family");if(ve!=="all"&&ee!==ve)return!1;const pe=!!l[h.id];return!(fe==="claimed"&&!pe||fe==="pending"&&pe||fe==="ask"&&(!im[h.id]||pe))}),[O,ve,fe,l]),Ga=w.useMemo(()=>At.reduce((h,$)=>h+$.amount,0),[At]),j=w.useMemo(()=>At.filter(h=>l[h.id]).reduce((h,$)=>h+$.amount,0),[At,l]),ke=w.useMemo(()=>lc.filter(h=>Oe[h.id]).length,[Oe]),We=w.useMemo(()=>vl.filter(h=>lt[h.id]).length,[lt]),G=w.useMemo(()=>lc.filter(h=>{const $=String(h?.group||"household").trim().toLowerCase();if(Ct!=="all"&&Ct!==$)return!1;const ee=!!Oe[h.id];return!(Kt==="claimed"&&!ee||Kt==="pending"&&ee||Kt==="ask"&&(!h.askRequired||ee))}),[Ct,Kt,Oe]),oe=w.useMemo(()=>G.filter(h=>Oe[h.id]).length,[G,Oe]),he=w.useMemo(()=>Object.fromEntries(In.map(h=>[h.id,h.label])),[]),_e=w.useMemo(()=>{const h={};return js.forEach($=>{$.items.forEach(ee=>{h[ee.id]={id:ee.id,text:ee.text,phaseTitle:$.title}})}),h},[]),ut=w.useMemo(()=>{const h={};return Object.entries(C&&typeof C=="object"?C:{}).forEach(([ee,pe])=>{Array.isArray(pe)&&pe.forEach(je=>{if(!je||je.done)return;const Ie=Array.isArray(je.taskIds)?je.taskIds:[];Ie.length&&Ie.forEach(jt=>{const Zt=String(jt||"").trim();Zt&&(h[Zt]||(h[Zt]=[]),h[Zt].push({dateISO:ee,planId:je.id,time:String(je.time||"").trim(),title:String(je.title||"").trim()}))})})}),h},[C]),wt=w.useMemo(()=>{const h={};return Object.entries(C&&typeof C=="object"?C:{}).forEach(([ee,pe])=>{if(!Array.isArray(pe))return;const je=pe.filter(Ie=>Ie&&!Ie.done);je.length&&(h[ee]=je)}),h},[C]),T=w.useMemo(()=>{const h={};hi.forEach(pe=>{h[pe.id]=[]});const $={};return hi.forEach(pe=>{$[`stretch: ${String(pe.title||"").trim().toLowerCase()}`]=pe.id}),Object.entries(C&&typeof C=="object"?C:{}).forEach(([pe,je])=>{Array.isArray(je)&&je.forEach(Ie=>{if(!Ie)return;const Zt=String(Ie.title||"").trim().toLowerCase(),Yt=String(Ie.notes||"").match(/\[stretch-step:([a-z0-9_-]+)\]/i);let va=Yt?String(Yt[1]||"").trim().toLowerCase():"";if(!va&&$[Zt]&&(va=$[Zt]),!va||!h[va])return;const Qn=Zt.startsWith("stretch:")?"step":"task";h[va].push({dateISO:pe,planId:String(Ie.id||"").trim(),kind:Qn})})}),h},[C]),me=w.useMemo(()=>{const h=Object.fromEntries(In.map(Ja=>[Ja.id,Math.max(0,Number(Ja.amount)||0)])),$=Ja=>Ja.reduce((Pc,Gc)=>Pc+(h[Gc]||0),0),ee=$(YS),pe=$(Gy),je=ee+pe,Ie=$(qS),jt=$(WS),Zt=h[PS]||0,et=Zt*18,Yt=ee+Ie+jt+et+Wy,va=ee+Ie+jt+et+Py,Qn=Yt+pe,Xl=va+pe,Wc=Gy.map(Ja=>({id:Ja,label:he[Ja]||Ja.toUpperCase(),amount:h[Ja]||0})).filter(Ja=>Ja.amount>0);return{directCashStrict:ee,directCashStretchOnly:pe,directCashStretch:je,incomeReplacementCash:Ie,costSavingsConfigured:jt,taxAnnualEstimate:Zt,taxOver18y:et,strictOneChild:Yt,strictTwoChildren:va,stretchOneChild:Qn,stretchTwoChildren:Xl,stretchOnlyRows:Wc}},[he]),Ne=$e==="two"?Py:Wy,He=$e==="two"?me.strictTwoChildren:me.strictOneChild,Je=$e==="two"?me.stretchTwoChildren:me.stretchOneChild,at=Me==="stretch"?Je:He,yt=Math.max(0,Je-He);w.useEffect(()=>{!ue&&Ce==="husband"&&_("wife")},[ue,Ce]),w.useEffect(()=>{kl(By,tt)},[tt]),w.useEffect(()=>{kl(Uy,Xe)},[Xe]),w.useEffect(()=>{kl($y,rt)},[rt]),w.useEffect(()=>{kl(Iy,xt)},[xt]),w.useEffect(()=>{Zy(Fy,Me)},[Me]),w.useEffect(()=>{Zy(Yy,$e)},[$e]),w.useEffect(()=>{kl(qy,St)},[St]),w.useEffect(()=>{Xy(zy,Oe)},[Oe]),w.useEffect(()=>{Xy(Ky,lt)},[lt]);const Oa=w.useMemo(()=>a0(6),[]),ba=w.useMemo(()=>a0(12),[]),Ia=w.useMemo(()=>bc(W?.payrollProfiles?.naomi,{delayMonths:1,monthlyAdjustment:0}),[W]),un=w.useMemo(()=>bc(W?.payrollProfiles?.husband,{delayMonths:1,monthlyAdjustment:0}),[W]),Rn=w.useMemo(()=>e0(x,se,"naomi"),[x,se]),Ra=w.useMemo(()=>e0(M,se,"husband"),[M,se]),Ua=Rn.monthly,ja=Ra.monthly,Ka=w.useMemo(()=>n0(Ua,Ia,ba),[Ua,Ia,ba]),qn=w.useMemo(()=>n0(ja,un,ba),[ja,un,ba]),ma=w.useMemo(()=>t0(Ua,12),[Ua]),Pt=w.useMemo(()=>t0(ja,12),[ja]),_n=String(Y||"").trim()||Il(new Date),Ha=Q==="monthly"?[_n]:ba,dn=Q==="monthly"?Math.round(Number(Ua[_n]||0)):ma,A=Q==="monthly"?Math.round(Number(ja[_n]||0)):Pt,be=dn+(ue?A:0),Be=w.useMemo(()=>i0(x,Ha),[x,Ha]),dt=w.useMemo(()=>i0(M,Ha),[M,Ha]),la=w.useMemo(()=>s0(Rn.missingRateDates,Ha),[Rn.missingRateDates,Ha]),_t=w.useMemo(()=>s0(Ra.missingRateDates,Ha),[Ra.missingRateDates,Ha]),Gt=w.useMemo(()=>QS(ae,Ha),[ae,Ha]),ta=be-Gt,Qt=w.useMemo(()=>o0(Rn.missingRateDates),[Rn.missingRateDates]),Va=w.useMemo(()=>o0(Ra.missingRateDates),[Ra.missingRateDates]),Ot=w.useMemo(()=>[...ae].sort((h,$)=>String($?.date||"").localeCompare(String(h?.date||""))),[ae]),Ft=ue?Number(v.annualIncome)||Pt:Number(v.annualIncome)||ma,aa=ue?Number(v.spouseIncome)||ma:0,bt=dS({annualIncome:Ft,spouseIncome:aa,medicalExpenses:Number(v.medicalExpenses)||0,socialInsurance:Number(v.socialInsurance)||0}),mn=w.useMemo(()=>[...se].sort((h,$)=>Dc($?.effectiveFrom)-Dc(h?.effectiveFrom)),[se]),Mt=(h,$)=>b(ee=>({...ee,[h]:$})),hn=(h,$)=>{$.stopPropagation(),z(ee=>ee===h?null:h)},es=h=>{Ve($=>({...$&&typeof $=="object"?$:{},[h]:!$?.[h]}))},ts=h=>{qe($=>({...$&&typeof $=="object"?$:{},[h]:!$?.[h]}))},Wn=h=>{const $=String(h?.planDateISO||"").trim();if($&&El($))return $;const ee=Number(h?.planOffsetDays);return Number.isFinite(ee)?fi(ee):Yi()},jo=h=>{const $=Wn(h),ee=String(h?.where||"").trim(),pe=String(h?.timing||"").trim(),je=[pe?`Timing: ${pe}`:"",String(h?.action||"").trim()].filter(Boolean).join(`
`);p($,{time:String(h?.planTime||"").trim(),title:`Bridge: ${h.label}`,location:ee||"",notes:je||"Bridge follow-up",done:!1})},ql=()=>{vl.filter(h=>!lt[h.id]).slice(0,8).forEach(h=>jo(h))},Pn=h=>{const $=Yi(),ee=String(h?.timing||"").trim(),pe=String(h?.where||"").trim();p($,{time:"",title:`Follow-up: ${h.label}`,location:pe||"",notes:ee?`Timing: ${ee}`:"Follow-up action",done:!1})},Fc=()=>{G.filter($=>!Oe[$.id]).slice(0,8).forEach($=>Pn($))},Gn=(h,$="all")=>{const ee=String(h?.id||"").trim().toLowerCase();if(!ee)return[];const pe=Array.isArray(T?.[ee])?T[ee]:[];return $==="all"?pe:pe.filter(je=>je.kind===$)},Ms=h=>{h.forEach($=>{const ee=String($?.dateISO||"").trim(),pe=String($?.planId||"").trim();!ee||!pe||g(ee,pe)})},bi=h=>{const ee=(Array.isArray(h?.benefitIds)?h.benefitIds:[]).flatMap(je=>Array.isArray(Xt[je])?Xt[je].map(Ie=>Ie.id):[]),pe=Array.isArray(h?.taskIds)?h.taskIds:[];return Array.from(new Set([...ee,...pe].map(je=>String(je||"").trim()).filter(je=>!!_e[je])))},No=(h,$=!1)=>{let ee=String(h||"").trim()||Yi();for(let pe=0;pe<20;pe+=1){if(!$||!aj(ee))return ee;ee=xl(ee,1)||ee}return ee},Yc=(h,$=null)=>{const ee=new Set;return(Array.isArray(wt?.[h])?wt[h]:[]).forEach(je=>{const Ie=String(je?.time||"").trim();/^\d{2}:\d{2}$/.test(Ie)&&ee.add(u0(Ie))}),$ instanceof Set&&$.forEach(je=>ee.add(String(je||"").trim())),ee},Vn=(h,$,ee=0,pe=null)=>{const je=Yc(h,pe),Ie=u0($),jt=Math.max(0,po.indexOf(Ie)),Zt=Math.max(0,Number(ee)||0);for(let et=0;et<po.length;et+=1){const Yt=(jt+Zt+et)%po.length,va=po[Yt];if(!je.has(va))return va}return Ie},fn=()=>{const h=new Date;return`${h.getMonth()+1<=3?h.getFullYear():h.getFullYear()+1}-02-10`},To=h=>{const $=String(h?.id||"").trim(),ee=El(R)?String(R):"";return $==="m4"?ee&&xl(ee,-30)||fi(3):$==="m5"||$==="m8"||$==="m14"?ee&&xl(ee,10)||fi(10):$==="m6"?ee&&xl(ee,30)||fi(30):$==="m9"?fn():fi(4)},Ao=h=>{const $=String(h?.id||"").trim();return $==="m4"||$==="m6"?"13:30":$==="m7"||$==="m11"||$==="m12"||$==="m13"?"10:30":"10:00"},Ln=(h,$=0,ee=null)=>{const pe=No(To(h),!0),je=Vn(pe,Ao(h),$,ee);return{dateISO:pe,time:je}},jn=h=>{const $=String(h?.id||"").trim(),ee=El(R)?String(R):"";let pe=fi(h?.daysFromNow);$==="sp4"&&ee&&(pe=xl(ee,10)||pe),$==="sp8"&&(pe=fn());const je=nj(h);return No(pe,je)},Wl=(h,$=0,ee=null)=>{const pe=jn(h);return Vn(pe,String(h?.time||Wi),$,ee)},as=h=>Gn(h,"step").length>0,Pl=h=>Gn(h,"task").length>0,vi=h=>bi(h).reduce((ee,pe)=>s?.[pe]||Array.isArray(ut?.[pe])&&ut[pe].length>0?ee:ee+1,0),Xa=(h,$)=>{const ee=String(h||"").trim();ee&&Dt(pe=>({...pe&&typeof pe=="object"?pe:{},[ee]:{...pe?.[ee]&&typeof pe[ee]=="object"?pe[ee]:{},...$}}))},Es=(h,$={})=>{if(!h||typeof h!="object")return;const ee=Array.isArray(Xt[h.id])?Xt[h.id]:[],pe=Array.from(new Set(ee.map(Qn=>String(Qn?.id||"").trim()).filter(Boolean))),je=Ln(h),Ie=String($?.dateISO||"").trim()||je.dateISO,jt=No(Ie,!0),Zt=String($?.time||"").trim()||je.time,et=Vn(jt,Zt),Yt=String(h?.where||"").trim(),va=String(nm[h?.id]||h?.deadline||"").trim();p(jt,{time:et,title:r0(`Claim: ${h.label}`,94),location:Yt?Yt.split(`
`)[0]:"",notes:va?`Timing: ${va}${Yt?`
Where: ${Yt}`:""}`:Yt||"Benefit follow-up",done:!1,taskIds:pe})},ns=h=>{const $=Ln(h);Xa(h?.id,{dateISO:$.dateISO,time:$.time}),Es(h,$)},Nn=h=>{if(!h||as(h))return;const $=jn(h),ee=Wl(h,0),pe=Array.isArray(h.benefitIds)?h.benefitIds:[],je=bi(h),Ie=pe.map(et=>`${String(et||"").toUpperCase()} - ${he[et]||et}`).join(`
`),Zt=[c0(h.id),`Focus: ${h.focus}`,`Target: ${h.target}`,Ie?`Related benefits:
${Ie}`:""].filter(Boolean).join(`
`);p($,{time:ee,title:`Stretch: ${h.title}`,location:String(h.location||"").trim(),notes:Zt,done:!1,taskIds:je})},Mo=h=>{Ms(Gn(h,"step"))},is=h=>{if(!h)return;const $=jn(h),ee=bi(h),pe=new Set,je=c0(h.id);ee.forEach((Ie,jt)=>{if(s?.[Ie]||Array.isArray(ut?.[Ie])&&ut[Ie].length>0)return;const et=_e[Ie];if(!et)return;const Yt=Vn($,String(h.time||Wi),jt,pe);pe.add(Yt),p($,{time:Yt,title:r0(et.text,88),location:String(h.location||"").trim(),notes:`${je}
Auto-scheduled from Stretch Maximizer (${h.title}).`,done:!1,taskIds:[Ie]})})},Gl=h=>{Ms(Gn(h,"task"))},Cs=()=>{hi.forEach(h=>Nn(h))},Ds=()=>{hi.forEach(h=>is(h))},Vl=()=>{const h=hi.flatMap(pe=>Gn(pe,"all")),$=new Set,ee=h.filter(pe=>{const je=`${String(pe?.dateISO||"").trim()}::${String(pe?.planId||"").trim()}`;return!je||$.has(je)?!1:($.add(je),!0)});Ms(ee)},Na=re===0?Ft>0:!0,Qa=(h,$)=>{ct(ee=>({...ee,[h]:$}))},Xn=(h,$)=>{const ee=$l(h);P(pe=>{const je=pe&&typeof pe=="object"?pe:{},Ie=je.payrollProfiles&&typeof je.payrollProfiles=="object"?je.payrollProfiles:{},jt=bc(Ie[ee],{delayMonths:1,monthlyAdjustment:0});return{...je,payrollProfiles:{...Ie,[ee]:{...jt,...$}}}})},Za=(h,$)=>{Da(ee=>({...ee,[h]:$}))},qc=()=>{if(ue){Pt>0&&Mt("annualIncome",String(Pt)),ma>0&&Mt("spouseIncome",String(ma));return}ma>0&&Mt("annualIncome",String(ma)),Mt("spouseIncome","")},Eo=h=>{h.preventDefault();const $=Math.max(0,Number(Rt.rate)||0);$<=0||String(Rt.effectiveFrom||"").trim()&&(m({person:$l(Rt.person),basis:zl(Rt.basis),rate:$,effectiveFrom:Rt.effectiveFrom,note:String(Rt.note||"").trim()}),ct(ee=>({...ee,rate:"",note:""})))},Co=h=>{h.preventDefault();const $=String(Ge.date||"").trim(),ee=Math.max(0,Number(Ge.amount)||0);if(!(!$||ee<=0)){if(xe({date:$,category:Ge.category,amount:ee,note:Ge.note}),Ge.addToCalendar){const pe=l0(Ge.category),je=String(Ge.note||"").trim();p($,{time:String(Ge.planTime||"").trim(),title:`Expense: ${pe}`,location:"",notes:je?`${je} (${st(ee)})`:`${pe} budget ${st(ee)}`,done:!1})}Da(pe=>({...pe,amount:"",note:"",planTime:""}))}};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"sub-tabs glass-tabs",children:["benefits","work","salary","tax","expenses"].map(h=>n.jsx("button",{className:`glass-tab ${V===h?"active":""}`,onClick:()=>K(h),children:n.jsxs("span",{className:"tab-icon-label",children:[n.jsx(Le,{icon:h==="benefits"?Ee.benefits:h==="work"?Ee.work:h==="salary"?Ee.salary:h==="tax"?Ee.tax:Ee.benefits}),n.jsx("span",{children:h==="benefits"?"Benefits":h==="work"?"Work":h==="salary"?"Salary":h==="tax"?"Tax Calc":"Expenses"})]})},h))}),V==="benefits"&&n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.benefits})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Finance Tracker"}),n.jsxs("span",{className:"section-count",children:[st(O==="all"?$a:j)," / ",st(O==="all"?Sa:Ga)]})]})]}),n.jsx("p",{className:"section-note",children:"Tap checkbox to mark as claimed. Tap info for claim flow, related tasks, and what to batch together."}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>Wt(h=>!h),"aria-expanded":rt,children:rt?"Hide coverage + filters":"Show coverage + filters"}),rt&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"section-note",children:La.length===0?"Coverage check: all Benefits items are linked to checklist tasks.":`Coverage warning: ${La.join(", ")} not linked to checklist yet.`}),n.jsx("div",{className:"glass-tabs salary-mini-tabs",children:[{id:"all",label:"All"},{id:"national",label:"National"},{id:"kawasaki",label:"Kawasaki"},{id:"employer",label:"Employer"}].map(h=>n.jsx("button",{type:"button",className:`glass-tab ${O===h.id?"active":""}`,onClick:()=>le(h.id),children:n.jsx("span",{children:h.label})},h.id))}),n.jsx("div",{className:"glass-tabs salary-mini-tabs",children:FS.map(h=>n.jsx("button",{type:"button",className:`glass-tab ${ve===h.id?"active":""}`,onClick:()=>ce(h.id),children:n.jsx("span",{children:h.label})},`owner-${h.id}`))}),n.jsx("div",{className:"glass-tabs salary-mini-tabs",children:Ly.map(h=>n.jsx("button",{type:"button",className:`glass-tab ${fe===h.id?"active":""}`,onClick:()=>we(h.id),children:n.jsx("span",{children:h.label})},`status-${h.id}`))}),n.jsxs("p",{className:"section-note",children:["Showing ",At.length," item(s). Claimed in this view: ",At.filter(h=>l[h.id]).length,"."]})]}),n.jsx("ul",{children:At.map(h=>{const $=Nl(_y[h.id]||"family"),ee=rc($),pe=!!l[h.id],je=Ln(h),Ie=zt?.[h.id]&&typeof zt[h.id]=="object"?zt[h.id]:{},jt=String(Ie.dateISO||je.dateISO||"").trim()||Yi(),Zt=String(Ie.time||je.time||"").trim()||Wi;return n.jsxs("li",{className:`glass-card money-card ${pe?"done":""}`,children:[n.jsxs("div",{className:"money-card-top",children:[n.jsx("span",{className:"checkbox glass-inner",onClick:()=>u(h.id),children:pe?"":""}),n.jsxs("div",{className:"money-card-main",children:[n.jsxs("div",{className:"money-card-badges",children:[n.jsx("span",{className:`badge owner-badge owner-${$}`,children:ee}),n.jsx("span",{className:"badge money-badge",children:sm(h.amount)}),im[h.id]&&!pe&&n.jsx("span",{className:"badge ask-badge",children:"ASK"})]}),n.jsx("span",{className:`item-text ${pe?"claimed":""}`,children:h.label})]}),n.jsx("button",{className:"info-btn glass-inner",onClick:et=>hn(h.id,et),children:k===h.id?"Hide":"i"})]}),k===h.id&&h.howTo&&n.jsxs("div",{className:"money-detail",children:[n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Claim owner:"}),n.jsx("div",{className:"detail-text",children:ee})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"How to claim:"}),n.jsx("div",{className:"detail-text",children:h.howTo})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Schedule claim action:"}),n.jsxs("div",{className:"task-schedule-row",children:[n.jsx("input",{type:"date",value:jt,onChange:et=>Xa(h.id,{dateISO:et.target.value})}),n.jsx("input",{type:"time",value:Zt,onChange:et=>Xa(h.id,{time:et.target.value})})]}),n.jsxs("div",{className:"task-schedule-note",children:["Smart suggestion: ",je.dateISO," ",je.time]}),n.jsxs("div",{className:"stretch-step-actions",children:[n.jsx("button",{type:"button",className:"tax-preset-btn glass-inner",onClick:()=>ns(h),children:"Auto smart schedule"}),n.jsx("button",{type:"button",className:"tax-preset-btn glass-inner",onClick:()=>Es(h,{dateISO:jt,time:Zt}),children:"Add with selected date/time"})]})]}),h.where&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Where:"}),n.jsx("div",{className:"detail-text",style:{whiteSpace:"pre-line"},children:h.where})]}),h.bring&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"What to bring:"}),n.jsx("div",{className:"detail-text",children:h.bring})]}),h.deadline&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Deadline:"}),n.jsx("div",{className:"detail-text deadline-text",children:h.deadline})]}),nm[h.id]&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Recommended timing:"}),n.jsx("div",{className:"detail-text",children:nm[h.id]})]}),Hy[h.id]&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Batch this with:"}),n.jsx("div",{className:"detail-text",children:Hy[h.id]})]}),im[h.id]&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Important:"}),n.jsx("div",{className:"detail-text",children:"Not always auto-granted. Ask directly at counter/HR so this benefit is not missed."})]}),Array.isArray(Xt[h.id])&&Xt[h.id].length>0&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Checklist flow:"}),n.jsx("div",{className:"detail-text",children:Xt[h.id].map(et=>{const Yt=!!s?.[et.id];return n.jsxs("div",{className:"benefit-task-row",children:[n.jsx("strong",{children:et.id.toUpperCase()})," - ",et.text," (",et.phaseTitle,")",n.jsx("span",{className:`badge ${Yt?"done-badge":"pending-badge"}`,children:Yt?"Done":"Pending"})]},`${h.id}-task-${et.id}`)})})]}),h.verifiedAt&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Last verified:"}),n.jsx("div",{className:"detail-text",children:h.verifiedAt})]}),Array.isArray(h.sourceLinks)&&h.sourceLinks.length>0&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Official sources:"}),n.jsx("div",{className:"detail-text",children:h.sourceLinks.map((et,Yt)=>n.jsx("div",{children:n.jsx("a",{href:et.url,target:"_blank",rel:"noopener noreferrer",children:et.label})},`${h.id}-source-${Yt}`))})]}),Array.isArray(h.phones)&&h.phones.length>0&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Phone Numbers:"}),n.jsx("div",{className:"task-phones",children:h.phones.map((et,Yt)=>n.jsxs("a",{href:`tel:${et.number.replace(/-/g,"")}`,className:"task-phone-link",children:[n.jsx("span",{className:"phone-icon",children:n.jsx(Le,{icon:Ee.phone})}),n.jsxs("span",{className:"phone-info",children:[n.jsx("span",{className:"phone-label",children:et.label}),n.jsx("span",{className:"phone-number",children:et.number})]})]},Yt))})]})]})]},h.id)})}),At.length===0&&n.jsx("p",{className:"section-note",children:"No benefits match current source/owner/status filters."})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.work})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Father / Family Lane (Draft)"}),n.jsxs("span",{className:"section-count",children:[oe,"/",G.length||lc.length," checked"]})]})]}),n.jsx("p",{className:"section-note",children:"Optional Shinji-side support lane (kaisha/hoken). Naomi flow above stays unchanged."}),n.jsxs("p",{className:"section-note",children:["Full progress: ",ke,"/",lc.length," checked."]}),n.jsxs("div",{className:"glass-tabs salary-mini-tabs",children:[n.jsx("button",{type:"button",className:`glass-tab ${tt?"active":""}`,onClick:()=>de(h=>!h),children:n.jsx("span",{children:tt?"Hide lane":"Show lane"})}),tt&&n.jsx("button",{type:"button",className:`glass-tab ${xt?"active":""}`,onClick:()=>ye(h=>!h),children:n.jsx("span",{children:xt?"Hide filters":"Show filters"})})]}),tt&&n.jsxs(n.Fragment,{children:[xt&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"glass-tabs salary-mini-tabs",children:GS.map(h=>n.jsx("button",{type:"button",className:`glass-tab ${Ct===h.id?"active":""}`,onClick:()=>Bt(h.id),children:n.jsx("span",{children:h.label})},`family-group-${h.id}`))}),n.jsx("div",{className:"glass-tabs salary-mini-tabs",children:Ly.map(h=>n.jsx("button",{type:"button",className:`glass-tab ${Kt===h.id?"active":""}`,onClick:()=>Ke(h.id),children:n.jsx("span",{children:h.label})},`family-status-${h.id}`))}),n.jsx("div",{className:"backup-cloud-actions",style:{marginBottom:"0.45rem"},children:n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:Fc,disabled:!G.some(h=>!Oe[h.id]),children:"Add pending follow-ups to Home calendar"})})]}),n.jsx("ul",{children:G.map(h=>{const $=`family-${h.id}`,ee=!!Oe[h.id],pe=Nl(h.owner||"family");return n.jsxs("li",{className:`glass-card money-card ${ee?"done":""}`,children:[n.jsxs("div",{className:"money-card-top",children:[n.jsx("span",{className:"checkbox glass-inner",onClick:()=>es(h.id),children:ee?"":""}),n.jsxs("div",{className:"money-card-main",children:[n.jsxs("div",{className:"money-card-badges",children:[n.jsx("span",{className:`badge owner-badge owner-${pe}`,children:rc(pe)}),n.jsx("span",{className:"badge money-badge",children:h.estimateLabel}),h.askRequired&&!ee&&n.jsx("span",{className:"badge ask-badge",children:"ASK"})]}),n.jsx("span",{className:`item-text ${ee?"claimed":""}`,children:h.label})]}),n.jsx("button",{className:"info-btn glass-inner",onClick:je=>hn($,je),children:k===$?"Hide":"i"})]}),k===$&&n.jsxs("div",{className:"money-detail",children:[n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Action:"}),n.jsx("div",{className:"detail-text",children:h.howTo})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Claim owner:"}),n.jsx("div",{className:"detail-text",children:rc(pe)})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Where:"}),n.jsx("div",{className:"detail-text",children:h.where})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Timing:"}),n.jsx("div",{className:"detail-text",children:h.timing})]}),n.jsx("div",{className:"detail-section",children:n.jsx("button",{type:"button",className:"tax-preset-btn glass-inner",onClick:()=>Pn(h),children:"Add follow-up to Home calendar"})}),Array.isArray(h.sourceLinks)&&h.sourceLinks.length>0&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Official sources:"}),n.jsx("div",{className:"detail-text",children:h.sourceLinks.map((je,Ie)=>n.jsx("div",{children:n.jsx("a",{href:je.url,target:"_blank",rel:"noopener noreferrer",children:je.label})},`${h.id}-family-source-${Ie}`))})]})]})]},h.id)})}),G.length===0&&n.jsx("p",{className:"section-note",children:"No family-lane items match current filters."})]})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.work})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Work Accident + Pregnancy Bridge"}),n.jsxs("span",{className:"section-count",children:[We,"/",vl.length," checked"]})]})]}),n.jsx("p",{className:"section-note",children:"Toggle lane for accident-related actions so rousai/legal steps and Naomi benefits stay aligned."}),n.jsxs("div",{className:"glass-tabs salary-mini-tabs",children:[n.jsx("button",{type:"button",className:`glass-tab ${Xe?"active":""}`,onClick:()=>Ze(h=>!h),children:n.jsx("span",{children:Xe?"Hide bridge lane":"Show bridge lane"})}),Xe&&n.jsx("button",{type:"button",className:"glass-tab",onClick:ql,disabled:!vl.some(h=>!lt[h.id]),children:n.jsx("span",{children:"Add pending bridge follow-ups"})})]}),Xe&&n.jsx("ul",{children:vl.map(h=>{const $=`bridge-${h.id}`,ee=!!lt[h.id],pe=Nl(h.owner||"family"),je=Wn(h);return n.jsxs("li",{className:`glass-card money-card ${ee?"done":""}`,children:[n.jsxs("div",{className:"money-card-top",children:[n.jsx("span",{className:"checkbox glass-inner",onClick:()=>ts(h.id),children:ee?"":""}),n.jsxs("div",{className:"money-card-main",children:[n.jsxs("div",{className:"money-card-badges",children:[n.jsx("span",{className:`badge owner-badge owner-${pe}`,children:rc(pe)}),n.jsx("span",{className:"badge money-badge",children:h.timing})]}),n.jsx("span",{className:`item-text ${ee?"claimed":""}`,children:h.label})]}),n.jsx("button",{className:"info-btn glass-inner",onClick:Ie=>hn($,Ie),children:k===$?"Hide":"i"})]}),k===$&&n.jsxs("div",{className:"money-detail",children:[n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Action:"}),n.jsx("div",{className:"detail-text",children:h.action})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Where:"}),n.jsx("div",{className:"detail-text",children:h.where})]}),n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Target schedule:"}),n.jsxs("div",{className:"detail-text",children:[je," ",String(h.planTime||"").trim()]})]}),n.jsx("div",{className:"detail-section",children:n.jsx("button",{type:"button",className:"tax-preset-btn glass-inner",onClick:()=>jo(h),children:"Add follow-up to Home calendar"})}),Array.isArray(h.phones)&&h.phones.length>0&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Phone numbers:"}),n.jsx("div",{className:"task-phones",children:h.phones.map(Ie=>{const jt=String(Ie||"").replace(/[^0-9]/g,"");return n.jsxs("a",{href:`tel:${jt}`,className:"task-phone-link",children:[n.jsx("span",{className:"phone-icon",children:n.jsx(Le,{icon:Ee.phone})}),n.jsxs("span",{className:"phone-info",children:[n.jsx("span",{className:"phone-label",children:"Call"}),n.jsx("span",{className:"phone-number",children:Ie})]})]},`${h.id}-${Ie}`)})})]}),Array.isArray(h.sourceLinks)&&h.sourceLinks.length>0&&n.jsxs("div",{className:"detail-section",children:[n.jsx("div",{className:"detail-label",children:"Official sources:"}),n.jsx("div",{className:"detail-text",children:h.sourceLinks.map((Ie,jt)=>n.jsx("div",{children:n.jsx("a",{href:Ie.url,target:"_blank",rel:"noopener noreferrer",children:Ie.label})},`${h.id}-source-${jt}`))})]})]})]},h.id)})})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.tax})}),n.jsx("div",{children:n.jsx("h2",{children:"18-Year Support Projection"})})]}),n.jsx("p",{className:"section-note",children:"Strict mode is conservative baseline. Stretch mode adds optional/campaign capture items with an explicit playbook."}),n.jsx("div",{className:"glass-tabs salary-mini-tabs projection-mode-tabs",children:[{id:"strict",label:"Strict Baseline"},{id:"stretch",label:"Stretch Scenario"}].map(h=>n.jsx("button",{type:"button",className:`glass-tab ${Me===h.id?"active":""}`,onClick:()=>Qe(h.id),children:n.jsx("span",{children:h.label})},`support-scenario-${h.id}`))}),n.jsx("div",{className:"glass-tabs salary-mini-tabs projection-mode-tabs",children:[{id:"one",label:"1 Child Model"},{id:"two",label:"2 Child Model"}].map(h=>n.jsx("button",{type:"button",className:`glass-tab ${$e===h.id?"active":""}`,onClick:()=>kt(h.id),children:n.jsx("span",{children:h.label})},`support-child-${h.id}`))}),n.jsxs("div",{className:"projection-assumption-strip glass-inner",children:[n.jsx("span",{children:Me==="strict"?"Strict excludes optional refund/campaign/ask-only cash.":"Stretch includes optional refund/campaign/ask-only cash capture."}),n.jsx("strong",{children:Me==="strict"?"Conservative":"Maximize"})]}),n.jsxs("div",{className:"ceiling-table",children:[n.jsxs("div",{className:"ceil-row glass-inner",children:[n.jsxs("span",{children:["Direct cash around birth (",Me==="strict"?"strict baseline":"strict + stretch extras",")"]}),n.jsx("span",{children:st(Me==="strict"?me.directCashStrict:me.directCashStretch)})]}),Me==="stretch"&&n.jsxs("div",{className:"ceil-row glass-inner",children:[n.jsx("span",{children:"Stretch-only optional cash pool (refund/ask/campaign)"}),n.jsxs("span",{children:["+ ",st(me.directCashStretchOnly)]})]}),Me==="strict"&&n.jsxs("div",{className:"ceil-row glass-inner",children:[n.jsx("span",{children:"Optional cash not counted in strict baseline"}),n.jsx("span",{children:st(me.directCashStretchOnly)})]}),n.jsxs("div",{className:"ceil-row glass-inner",children:[n.jsx("span",{children:"Income replacement cash (leave benefits)"}),n.jsx("span",{children:st(me.incomeReplacementCash)})]}),n.jsxs("div",{className:"ceil-row glass-inner",children:[n.jsx("span",{children:"Cost savings (medical/education, configured)"}),n.jsx("span",{children:st(me.costSavingsConfigured)})]}),n.jsxs("div",{className:"ceil-row glass-inner",children:[n.jsx("span",{children:"Tax benefits over time (18 years)"}),n.jsxs("span",{children:[st(me.taxOver18y)," (",st(me.taxAnnualEstimate),"/year)"]})]}),n.jsxs("div",{className:"ceil-row glass-inner",children:[n.jsxs("span",{children:["Child allowance (",$e==="two"?"2-child model":"1-child model",")"]}),n.jsx("span",{children:st(Ne)})]}),n.jsxs("div",{className:"ceil-row total glass-inner",children:[n.jsxs("span",{children:["Total 18-year projection (",Me==="strict"?"strict":"stretch",")"]}),n.jsx("span",{children:st(at)})]}),n.jsxs("div",{className:"ceil-row glass-inner projection-compare-row",children:[n.jsxs("span",{children:["Strict vs Stretch delta (",$e==="two"?"2-child":"1-child",")"]}),n.jsxs("span",{children:["+ ",st(yt)]})]})]}),me.stretchOnlyRows.length>0&&n.jsxs("div",{className:"support-optional-list",children:[n.jsx("div",{className:"detail-label",children:"Stretch-only benefit sources"}),n.jsx("div",{className:"detail-text",children:me.stretchOnlyRows.map(h=>n.jsxs("div",{className:"benefit-task-row",children:[n.jsx("strong",{children:h.id.toUpperCase()})," - ",h.label,n.jsx("span",{className:"badge money-badge",children:sm(h.amount)})]},`stretch-only-${h.id}`))})]}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>ft(h=>!h),"aria-expanded":St,children:St?"Hide Stretch Maximizer":"Show Stretch Maximizer"}),St&&n.jsxs("div",{className:"stretch-playbook",children:[n.jsx("p",{className:"section-note",children:"Detailed maximize flow: may undo/remove na bawat step, plus one-click auto schedule papunta sa task calendar flow."}),n.jsxs("div",{className:"backup-cloud-actions",style:{marginBottom:"0.25rem"},children:[n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:Cs,disabled:hi.every(h=>as(h)),children:"Add all missing stretch steps to Home calendar"}),n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:Ds,disabled:hi.every(h=>vi(h)===0),children:"One-click: auto-schedule linked tasks (best dates)"}),n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:Vl,disabled:hi.every(h=>Gn(h,"all").length===0),children:"Undo all stretch adds (calendar + task schedules)"})]}),hi.map(h=>{const $=Array.isArray(h.benefitIds)?h.benefitIds:[],ee=bi(h),pe=as(h),je=Pl(h),Ie=vi(h),jt=jn(h),Zt=$.reduce((et,Yt)=>{const va=In.find(Qn=>Qn.id===Yt);return et+Math.max(0,Number(va?.amount)||0)},0);return n.jsxs("div",{className:"stretch-step glass-inner",children:[n.jsxs("div",{className:"stretch-step-top",children:[n.jsxs("div",{children:[n.jsx("div",{className:"stretch-step-title",children:h.title}),n.jsxs("div",{className:"stretch-step-meta",children:[n.jsxs("span",{children:["Best date: ",jt]}),h.time&&n.jsx("span",{children:h.time}),h.location&&n.jsx("span",{children:h.location})]})]}),n.jsxs("span",{className:"badge money-badge",children:[sm(Zt)," pool"]})]}),n.jsxs("div",{className:"stretch-step-note",children:[n.jsx("strong",{children:"Focus:"})," ",h.focus]}),n.jsxs("div",{className:"stretch-step-note",children:[n.jsx("strong",{children:"Target:"})," ",h.target]}),n.jsxs("div",{className:"stretch-step-badges",children:[$.map(et=>n.jsx("span",{className:"badge owner-badge owner-family",children:et.toUpperCase()},`${h.id}-${et}`)),ee.map(et=>n.jsx("span",{className:"badge owner-badge owner-naomi",children:et.toUpperCase()},`${h.id}-task-${et}`))]}),n.jsxs("div",{className:"stretch-step-actions",children:[n.jsx("button",{type:"button",className:"tax-preset-btn glass-inner",onClick:()=>pe?Mo(h):Nn(h),children:pe?"Remove step from Home calendar":"Add step to Home calendar"}),n.jsx("button",{type:"button",className:"tax-preset-btn glass-inner",onClick:()=>je?Gl(h):is(h),disabled:!je&&Ie===0,children:je?"Undo auto task schedules":`Auto-schedule tasks (${Ie})`})]})]},h.id)})]})]})]}),V==="work"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"glass-tabs salary-mini-tabs",children:["wife",ue?"husband":null].filter(Boolean).map(h=>n.jsx("button",{className:`glass-tab ${Ce===h?"active":""} ${h==="husband"?"husband-tab":""}`,onClick:()=>_(h),children:n.jsx("span",{children:h==="wife"?`${ua.naomi} Work`:`${ua.husband} Work`})},h))}),Ce==="wife"&&n.jsx(Ry,{personKey:"naomi",title:`${ua.naomi} Work`,accent:"wife",allowGeoTracker:!0}),Ce==="husband"&&ue&&n.jsx(Ry,{personKey:"husband",title:`${ua.husband} Work`,accent:"husband",allowGeoTracker:!0})]}),V==="salary"&&n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.overview})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Family Income Summary"}),n.jsx("span",{className:"section-count",children:Q==="monthly"?`Work month: ${_n}`:"Last 12 work months"})]})]}),n.jsxs("div",{className:"glass-inner summary-period-row",children:[n.jsx("div",{className:"household-toggle-title",children:"Summary Period"}),n.jsxs("div",{className:"summary-period-controls",children:[n.jsx("button",{type:"button",className:`tax-preset-btn glass-inner ${Q==="annual"?"active":""}`,onClick:()=>Se("annual"),children:"Annual"}),n.jsx("button",{type:"button",className:`tax-preset-btn glass-inner ${Q==="monthly"?"active":""}`,onClick:()=>Se("monthly"),children:"Monthly"})]}),Q==="monthly"&&n.jsxs("div",{className:"form-row summary-month-select",children:[n.jsx("label",{children:"Month"}),n.jsx("select",{value:_n,onChange:h=>ge(h.target.value),children:ba.map(h=>n.jsx("option",{value:h,children:h},h))})]})]}),n.jsxs("div",{className:"salary-summary-grid",children:[n.jsxs("div",{className:"glass-inner salary-summary-card",children:[n.jsx("div",{className:"salary-person",children:ua.naomi}),n.jsxs("div",{className:"salary-annual",children:[st(dn)," / ",Q==="monthly"?"month":"year"]}),n.jsx("div",{className:"salary-assume",children:Q==="monthly"?"Computed from worked days/hours in selected month":"Last 12 months from attendance logs"}),n.jsxs("div",{className:"salary-assume",children:["Worked: ",Be.daysWorked," day(s), ",Jy(Be.hoursWorked)]}),la>0&&n.jsxs("div",{className:"salary-assume",children:["Not counted yet: ",la," day(s) without pay rate."]})]}),ue&&n.jsxs("div",{className:"glass-inner salary-summary-card husband-summary",children:[n.jsx("div",{className:"salary-person",children:ua.husband}),n.jsxs("div",{className:"salary-annual",children:[st(A)," / ",Q==="monthly"?"month":"year"]}),n.jsx("div",{className:"salary-assume",children:Q==="monthly"?"Computed from worked days/hours in selected month":"Last 12 months from attendance logs"}),n.jsxs("div",{className:"salary-assume",children:["Worked: ",dt.daysWorked," day(s), ",Jy(dt.hoursWorked)]}),_t>0&&n.jsxs("div",{className:"salary-assume",children:["Not counted yet: ",_t," day(s) without pay rate."]})]})]}),n.jsxs("div",{className:"glass-inner family-total-card",children:[n.jsx("span",{children:"Gross Family Total"}),n.jsxs("strong",{children:[st(be)," / ",Q==="monthly"?"month":"year"]})]}),n.jsxs("div",{className:"glass-inner family-total-card finance-expense-total",children:[n.jsx("span",{children:"Tracked Expenses"}),n.jsxs("strong",{children:["- ",st(Gt)," / ",Q==="monthly"?"month":"year"]})]}),n.jsxs("div",{className:"glass-inner family-total-card finance-net-total",children:[n.jsx("span",{children:"Net Family Total"}),n.jsxs("strong",{children:[st(ta)," / ",Q==="monthly"?"month":"year"]})]})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.activity})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Recent Monthly Income"}),n.jsx("span",{className:"section-count",children:Ae==="work"?"Work-month view (direct from attendance logs)":"Payout-month view (with payroll delay/adjustments)"})]})]}),n.jsxs("div",{className:"glass-inner summary-period-row",children:[n.jsx("div",{className:"household-toggle-title",children:"Monthly View"}),n.jsxs("div",{className:"summary-period-controls",children:[n.jsx("button",{type:"button",className:`tax-preset-btn glass-inner ${Ae==="work"?"active":""}`,onClick:()=>De("work"),children:"Work Month"}),n.jsx("button",{type:"button",className:`tax-preset-btn glass-inner ${Ae==="payout"?"active":""}`,onClick:()=>De("payout"),children:"Payout Month"})]})]}),n.jsx("div",{className:"salary-month-table",children:Oa.map(h=>{const $=Math.round(Number((Ae==="work"?Ua:Ka)[h]||0)),ee=Math.round(Number((Ae==="work"?ja:qn)[h]||0)),pe=$+(ue?ee:0),je=Number(Qt[h]||0),Ie=Number(Va[h]||0),jt=je+(ue?Ie:0);return n.jsxs("div",{className:"glass-inner salary-month-row",children:[n.jsx("span",{children:h}),n.jsxs("span",{children:[ua.naomi,": ",st($)]}),ue&&n.jsxs("span",{children:[ua.husband,": ",st(ee)]}),n.jsxs("span",{children:["Total: ",st(pe)]}),Ae==="work"&&jt>0&&n.jsxs("span",{children:["Missing rate days: ",jt]})]},h)})})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.salary})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Salary Setup"}),n.jsx("span",{className:"section-count",children:"Tap to manage payout rules and rates"})]}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>X(h=>!h),"aria-expanded":F,children:F?"Hide setup":"Show setup"})]}),F&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"glass-tabs salary-mini-tabs",children:[{id:"rates",label:"Pay Rate Profiles"},{id:"payroll",label:"Payroll Rules"},{id:"history",label:"Rate History"}].map(h=>n.jsx("button",{type:"button",className:`glass-tab ${U===h.id?"active":""}`,onClick:()=>Te(h.id),children:h.label},h.id))}),U==="rates"&&n.jsxs("form",{className:"salary-rate-form glass-card",onSubmit:Eo,children:[n.jsxs("div",{className:"salary-rate-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Side"}),n.jsxs("select",{value:Rt.person,onChange:h=>Qa("person",h.target.value),children:[n.jsx("option",{value:"naomi",children:ua.naomi}),n.jsx("option",{value:"husband",children:ua.husband})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Basis"}),n.jsxs("select",{value:Rt.basis,onChange:h=>Qa("basis",h.target.value),children:[n.jsx("option",{value:"hourly",children:"Hourly"}),n.jsx("option",{value:"daily",children:"Daily"}),n.jsx("option",{value:"monthly",children:"Monthly"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("label",{children:["Rate (",rn,")"]}),n.jsx("input",{type:"number",value:Rt.rate,onChange:h=>Qa("rate",h.target.value),placeholder:Rt.basis==="hourly"?"e.g. 1350":Rt.basis==="daily"?"e.g. 16000":"e.g. 350000",required:!0})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Effective From"}),n.jsx("input",{type:"date",value:Rt.effectiveFrom,onChange:h=>Qa("effectiveFrom",h.target.value),required:!0})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Note (optional)"}),n.jsx("input",{type:"text",value:Rt.note,onChange:h=>Qa("note",h.target.value),placeholder:"e.g. rate increase in April"})]}),n.jsx("button",{type:"submit",className:"btn-glass-primary",children:"Save Rate"})]}),U==="payroll"&&n.jsxs("div",{className:"salary-rate-list",children:[ue&&n.jsxs("div",{className:"glass-card payroll-card husband-summary",children:[n.jsxs("h3",{children:[ua.husband," Payroll"]}),n.jsxs("div",{className:"salary-rate-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Work Month Delay"}),n.jsx("input",{type:"number",min:"0",max:"3",value:un.delayMonths,onChange:h=>Xn("husband",{delayMonths:Math.min(3,Math.max(0,Number(h.target.value)||0))})})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("label",{children:["Monthly Adjustment (",rn,")"]}),n.jsx("input",{type:"number",value:un.monthlyAdjustment,onChange:h=>Xn("husband",{monthlyAdjustment:Number(h.target.value)||0}),placeholder:"Use negative for deductions"})]})]}),n.jsxs("p",{className:"section-note",children:["Separate profile and logs from ",ua.naomi,"."]})]}),n.jsxs("div",{className:"glass-card payroll-card",children:[n.jsxs("h3",{children:[ua.naomi," Payroll"]}),n.jsxs("div",{className:"salary-rate-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Work Month Delay"}),n.jsx("input",{type:"number",min:"0",max:"3",value:Ia.delayMonths,onChange:h=>Xn("naomi",{delayMonths:Math.min(3,Math.max(0,Number(h.target.value)||0))})})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("label",{children:["Monthly Adjustment (",rn,")"]}),n.jsx("input",{type:"number",value:Ia.monthlyAdjustment,onChange:h=>Xn("naomi",{monthlyAdjustment:Number(h.target.value)||0}),placeholder:"Use negative for advances/bale deductions"})]})]}),n.jsx("p",{className:"section-note",children:"Income remains attendance-based. Delay just shifts payout month."})]})]}),U==="history"&&n.jsx(n.Fragment,{children:mn.length>0?n.jsx("ul",{className:"salary-rate-list",children:mn.map(h=>n.jsxs("li",{className:"glass-card salary-rate-item",children:[n.jsxs("div",{className:"salary-rate-top",children:[n.jsx("span",{className:"salary-rate-person",children:tj(h.person)}),n.jsx("span",{className:"salary-rate-basis",children:ZS(zl(h.basis))})]}),n.jsx("div",{className:"salary-rate-main",children:JS(h)}),n.jsxs("div",{className:"salary-rate-meta",children:[n.jsxs("span",{children:["From ",h.effectiveFrom]}),n.jsx("span",{children:ej(h)})]}),h.note&&n.jsx("div",{className:"salary-rate-note",children:h.note}),n.jsx("button",{type:"button",className:"btn-delete",onClick:()=>f(h.id),children:"Delete"})]},h.id))}):n.jsx("p",{className:"empty-state",children:"No salary rates yet. Add one above."})})]})]})]}),V==="expenses"&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.benefits})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Expense Tracker"}),n.jsx("span",{className:"section-count",children:"Bills, loans, groceries, credit card, extras"})]})]}),n.jsxs("form",{className:"salary-rate-form glass-card",onSubmit:Co,children:[n.jsxs("div",{className:"salary-rate-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Date"}),n.jsx("input",{type:"date",value:Ge.date,onChange:h=>Za("date",h.target.value),required:!0})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Category"}),n.jsx("select",{value:Ge.category,onChange:h=>Za("category",h.target.value),children:vb.map(h=>n.jsx("option",{value:h.id,children:h.label},h.id))})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("label",{children:["Amount (",rn,")"]}),n.jsx("input",{type:"number",value:Ge.amount,onChange:h=>Za("amount",h.target.value),placeholder:"e.g. 58000",required:!0})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Note (optional)"}),n.jsx("input",{type:"text",value:Ge.note,onChange:h=>Za("note",h.target.value),placeholder:"e.g. rent, electric, grocery run"})]}),n.jsxs("div",{className:"attendance-toggle",children:[n.jsx("button",{type:"button",className:`att-btn ${Ge.addToCalendar?"active worked":""}`,onClick:()=>Za("addToCalendar",!0),children:"Add to Calendar"}),n.jsx("button",{type:"button",className:`att-btn ${Ge.addToCalendar?"":"active absent"}`,onClick:()=>Za("addToCalendar",!1),children:"Expense Only"})]}),Ge.addToCalendar&&n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Planner time (optional)"}),n.jsx("input",{type:"time",value:Ge.planTime,onChange:h=>Za("planTime",h.target.value)})]}),n.jsx("button",{type:"submit",className:"btn-glass-primary",children:"Add Expense"})]}),Ot.length>0?n.jsx("ul",{className:"salary-rate-list",children:Ot.slice(0,20).map(h=>n.jsxs("li",{className:"glass-card salary-rate-item expense-item",children:[n.jsxs("div",{className:"salary-rate-top",children:[n.jsx("span",{className:"salary-rate-person",children:h.date}),n.jsx("span",{className:"salary-rate-basis",children:l0(h.category)})]}),n.jsxs("div",{className:"salary-rate-main",children:["- ",st(h.amount)]}),h.note&&n.jsx("div",{className:"salary-rate-note",children:h.note}),n.jsx("button",{type:"button",className:"btn-delete",onClick:()=>te(h.id),children:"Delete"})]},h.id))}):n.jsx("p",{className:"empty-state",children:"No expenses yet. Add your first bill or grocery expense above."})]}),V==="tax"&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.tax})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Japan Tax Calculator"}),n.jsx("span",{className:"section-count",children:"Guided flow (income -> deductions -> result)"})]})]}),n.jsx("p",{className:"section-note",children:"Quick estimate only. Final filing values should come from official slips and receipts."}),n.jsx("div",{className:"tax-tunnel-steps",children:am.map((h,$)=>n.jsx("button",{type:"button",className:`tax-step-chip glass-inner ${re===$?"active":""} ${re>$?"done":""}`,onClick:()=>{($<=re||Ft>0)&&N($)},children:h.label},h.id))}),n.jsxs("div",{className:"tax-step-card glass-card",children:[re===0&&n.jsxs("div",{className:"tax-step-body",children:[n.jsx("h3",{children:"Income Inputs"}),n.jsxs("div",{className:"tax-form",children:[n.jsxs("div",{className:"tax-field",children:[n.jsx("label",{children:ue?`${ua.husband} annual income (${rn})`:`Primary annual income (${rn})`}),n.jsx("input",{type:"number",value:v.annualIncome,onChange:h=>Mt("annualIncome",h.target.value),placeholder:Ft>0?`Auto available: ${st(Ft)}`:"e.g. 5,000,000"})]}),ue&&n.jsxs("div",{className:"tax-field",children:[n.jsxs("label",{children:[ua.naomi," annual income (",rn,")"]}),n.jsx("input",{type:"number",value:v.spouseIncome,onChange:h=>Mt("spouseIncome",h.target.value),placeholder:ma>0?`Auto available: ${st(ma)}`:"e.g. 1,200,000"})]})]}),n.jsx("div",{className:"tax-input-actions",children:n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:qc,children:"Use Work-Based Salary Estimates"})}),n.jsxs("div",{className:"glass-inner tax-feed-guide",children:[n.jsx("div",{className:"tax-feed-title",children:"What to feed here"}),n.jsxs("ul",{className:"tax-feed-list",children:[n.jsx("li",{children:"Annual income from work logs/rates or official salary slips"}),n.jsx("li",{children:"Medical receipts total for the year"}),n.jsx("li",{children:"Social insurance paid (if known)"})]})]}),Ft<=0&&n.jsx("p",{className:"section-note",children:"Required: set primary annual income to continue."})]}),re===1&&n.jsxs("div",{className:"tax-step-body",children:[n.jsx("h3",{children:"Deductions Inputs"}),n.jsxs("div",{className:"tax-form",children:[n.jsxs("div",{className:"tax-field",children:[n.jsxs("label",{children:["Medical expenses this year (",rn,")"]}),n.jsx("input",{type:"number",value:v.medicalExpenses,onChange:h=>Mt("medicalExpenses",h.target.value),placeholder:"e.g. 300,000"}),n.jsx("div",{className:"tax-preset-row",children:IS.map(h=>n.jsx("button",{type:"button",className:`tax-preset-btn glass-inner ${Number(v.medicalExpenses)===h?"active":""}`,onClick:()=>Mt("medicalExpenses",String(h)),children:h===0?"0":`${Math.round(h/1e3)}k`},`med-${h}`))})]}),n.jsxs("div",{className:"tax-field",children:[n.jsxs("label",{children:["Social insurance paid (",rn,")"]}),n.jsx("input",{type:"number",value:v.socialInsurance,onChange:h=>Mt("socialInsurance",h.target.value),placeholder:"Leave blank for auto estimate"}),n.jsxs("div",{className:"tax-preset-row",children:[n.jsx("button",{type:"button",className:`tax-preset-btn glass-inner ${v.socialInsurance===""?"active":""}`,onClick:()=>Mt("socialInsurance",""),children:"Auto"}),US.map(h=>n.jsx("button",{type:"button",className:`tax-preset-btn glass-inner ${Number(v.socialInsurance)===h?"active":""}`,onClick:()=>Mt("socialInsurance",String(h)),children:h===0?"0":`${Math.round(h/1e3)}k`},`social-${h}`))]})]})]})]}),re===2&&n.jsxs("div",{className:"tax-step-body",children:[n.jsx("h3",{children:"Estimated Result"}),n.jsxs("div",{className:"tax-summary-strip",children:[n.jsxs("span",{children:[ue?ua.husband:"Primary",": ",st(Ft)]}),ue&&n.jsxs("span",{children:[ua.naomi,": ",st(aa)]}),n.jsxs("span",{children:["Family: ",st(Ft+aa)]})]}),n.jsxs("div",{className:"tax-results",children:[n.jsxs("div",{className:"tax-row",children:[n.jsx("span",{children:"Employment Income"}),n.jsx("span",{children:st(bt.employmentIncome)})]}),n.jsxs("div",{className:"tax-row sub",children:[n.jsx("span",{children:"Deductions"}),n.jsx("span",{})]}),n.jsxs("div",{className:"tax-row detail",children:[n.jsx("span",{children:"Basic deduction (kiso koujo)"}),n.jsxs("span",{children:["-",st(bt.deductions.basic)]})]}),n.jsxs("div",{className:"tax-row detail",children:[n.jsx("span",{children:"Social insurance (shakai hoken)"}),n.jsxs("span",{children:["-",st(bt.deductions.socialInsurance)]})]}),bt.deductions.spouse>0&&n.jsxs("div",{className:"tax-row detail",children:[n.jsx("span",{children:"Spouse deduction (haiguusha koujo)"}),n.jsxs("span",{children:["-",st(bt.deductions.spouse)]})]}),bt.deductions.medical>0&&n.jsxs("div",{className:"tax-row detail",children:[n.jsx("span",{children:"Medical deduction (iryouhi koujo)"}),n.jsxs("span",{children:["-",st(bt.deductions.medical)]})]}),n.jsxs("div",{className:"tax-row",children:[n.jsx("span",{children:"Taxable Income (kazei shotoku)"}),n.jsx("span",{children:st(bt.taxableIncome)})]}),n.jsxs("div",{className:"tax-row",children:[n.jsx("span",{children:"Income Tax (shotokuzei)"}),n.jsx("span",{className:"tax-amount",children:st(bt.incomeTax)})]}),n.jsxs("div",{className:"tax-row",children:[n.jsx("span",{children:"Resident Tax (juuminzei)"}),n.jsx("span",{className:"tax-amount",children:st(bt.residentTax)})]}),n.jsxs("div",{className:"tax-row total",children:[n.jsx("span",{children:"Total Tax"}),n.jsx("span",{children:st(bt.totalTax)})]}),n.jsxs("div",{className:"tax-row",children:[n.jsx("span",{children:"Effective Rate"}),n.jsxs("span",{children:[bt.effectiveRate,"%"]})]}),n.jsxs("div",{className:"tax-row highlight",children:[n.jsx("span",{children:"Monthly Take-Home"}),n.jsx("span",{children:st(bt.monthlyTakeHome)})]}),bt.estimatedRefund>0&&n.jsxs("div",{className:"tax-row refund",children:[n.jsx("span",{children:"Estimated Medical Refund"}),n.jsx("span",{children:st(bt.estimatedRefund)})]})]})]})]}),n.jsxs("div",{className:"tax-step-actions",children:[n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:()=>N(h=>Math.max(0,h-1)),disabled:re===0,children:"Back"}),re<am.length-1?n.jsx("button",{type:"button",className:"btn-glass-primary",onClick:()=>{Na&&N(h=>Math.min(am.length-1,h+1))},disabled:!Na,children:"Next"}):n.jsx("button",{type:"button",className:"btn-glass-primary",onClick:()=>N(0),children:"Start Over"})]})]})]})}const sj=["","","","","","","",""],Tm=50,Oc=180,Am=220,oj=8,lj=90,Mm=3e3,wb=720,d0={tracking:!1,inside:!1,insideWork:!1,insideHome:!1,distanceMeters:null,distanceWorkMeters:null,distanceHomeMeters:null,accuracyMeters:null,updatedAt:""};function cc(s,l){const u=Number(s),c=Number(l);return Number.isFinite(u)&&Number.isFinite(c)&&u>=-90&&u<=90&&c>=-180&&c<=180}function go(s,l=Oc){return Math.min(Mm,Math.max(Tm,Number(s)||l))}function kb(s){return Math.min(12,Math.max(.5,Number(s)||oj))}function Em(s){return Math.min(wb,Math.max(15,Number(s)||lj))}function m0(s,{minHours:l=0,maxHours:u=24}={}){const c=Math.min(u,Math.max(l,Number(s)||0));let m=Math.floor(c),f=Math.round((c-m)*60);return f>=60&&(m+=1,f-=60),m>u&&(m=u,f=0),{hours:m,minutes:f}}function h0(s,l,{minHours:u=0,maxHours:c=24}={}){const m=Math.max(0,Number(s)||0),f=Math.min(59,Math.max(0,Number(l)||0)),p=m+f/60;return Math.min(c,Math.max(u,p))}function uc(s){const l=Math.max(0,Number(s)||0);let u=Math.floor(l),c=Math.round((l-u)*60);return c>=60&&(u+=1,c-=60),c<=0?`${u}h`:`${u}h ${c}m`}function f0(s){const l=String(s||"").trim();if(!l)return null;const[u,c]=l.split(":").map(Number);return!Number.isFinite(u)||!Number.isFinite(c)||u<0||u>23||c<0||c>59?null:u*60+c}function Rc(s){return Math.min(720,Math.max(0,Number(s)||0))}function om(s,l,u=0){const c=f0(s),m=f0(l);if(c===null||m===null)return null;let f=m-c;return f<0&&(f+=1440),Math.max(0,f-Rc(u))/60}function Xi(s){if(s===""||s===null||typeof s>"u")return"";const l=Number(s);return Number.isFinite(l)?l.toFixed(6):""}function p0(s){return{workName:String(s?.name||""),workLat:Xi(s?.lat),workLng:Xi(s?.lng),workRadiusMeters:String(go(s?.radiusMeters,Oc)),homeName:String(s?.homeName||""),homeLat:Xi(s?.homeLat),homeLng:Xi(s?.homeLng),homeRadiusMeters:String(go(s?.homeRadiusMeters,Am)),autoHours:String(kb(s?.autoHours)),awayMinutesForWork:String(Em(s?.awayMinutesForWork))}}function Cm(){return{worked:!0,hours:7.5,note:"",useTimeRange:!1,startTime:"",endTime:"",breakMinutes:0}}function g0(s){const l=Cm(),u=s&&typeof s=="object"?s:{};return{...l,worked:u.worked!==!1,hours:Math.max(0,Number(u.hours)||l.hours),note:String(u.note||""),useTimeRange:!!u.useTimeRange,startTime:String(u.startTime||""),endTime:String(u.endTime||""),breakMinutes:Rc(u.breakMinutes)}}function rj(s,l){const u=new Date,c=u.toDateString(),[m,f]=s.split(":").map(Number),p=new Date(u);if(p.setHours(m,f,0,0),l&&new Date(l).toDateString()===c)return{text:"Done!",status:"done",minutes:0};if(u>p)return{text:"Take now!",status:"overdue",minutes:0};const g=p-u,v=Math.floor(g/6e4);return v<=15?{text:"Take now!",status:"soon",minutes:v}:{text:"Take now!",status:"waiting",minutes:v}}function cj({supp:s,schedule:l,isTaken:u,toggleSupp:c,undoSupp:m,resetBottle:f,lastTaken:p,bottle:g,showExplanation:v,onToggleExplanation:b}){const[x,M]=w.useState([]),[C,R]=w.useState(new Date().toDateString());w.useEffect(()=>{const V=()=>{const O=new Date().toDateString();O!==C&&R(O);const ve=(l?.times||s.defaultTimes).map((ce,fe)=>({...rj(ce,p?.[`${s.id}-${fe}`]),time:ce,doseIndex:fe}));M(ve)};V();const K=setInterval(V,3e4);return()=>clearInterval(K)},[s.id,l,p,C]);const W=(l?.times||s.defaultTimes).map((V,K)=>u(s.id,K)),P=W.every(Boolean),Z=g?.remaining??s.bottleSize,xe=Z/s.bottleSize*100,te=s.perDose*(l?.timesPerDay||s.timesPerDay),ue=Math.floor(Z/te),se=Math.floor(s.bottleSize/te),ae=s.price?Math.round(s.price/se):null;return n.jsxs("li",{className:`glass-card supp-card ${P?"supp-done":""}`,children:[n.jsxs("div",{className:"supp-card-header",children:[n.jsx("span",{className:"supp-icon-lg",children:n.jsx(xa,{token:s.icon})}),n.jsxs("div",{className:"supp-card-info",children:[n.jsx("div",{className:"supp-card-name",children:s.name}),n.jsx("div",{className:"supp-card-why",children:s.why})]}),n.jsx("button",{className:"info-btn glass-inner",onClick:b,children:v?"":"?"})]}),v&&n.jsxs("div",{className:"supp-explanation",children:[s.explanation&&n.jsx("div",{className:"supp-explain-text",children:s.explanation}),s.dosageInfo&&n.jsxs("div",{className:"supp-dosage-info",children:[n.jsx("span",{className:"supp-dosage-label",children:"Dosage:"})," ",s.dosageInfo]}),s.warnings&&n.jsxs("div",{className:"supp-warning-info",children:[n.jsx("span",{className:"supp-warning-label",children:"Warning:"})," ",s.warnings]}),s.budgetAlt&&n.jsxs("div",{className:"supp-budget-alt",children:[n.jsx("span",{className:"supp-dosage-label",children:"Budget Alt:"})," ",s.budgetAlt]})]}),n.jsx("div",{className:"supp-countdowns",children:x.map((V,K)=>{const O=W[K];return n.jsxs("div",{className:"supp-dose-wrap",children:[n.jsxs("div",{className:`supp-dose glass-inner ${O?"dose-done":V.status==="overdue"?"dose-overdue":V.status==="soon"?"dose-soon":""}`,onClick:()=>!O&&c(s.id,K),children:[n.jsx("div",{className:"dose-time",children:V.time}),n.jsx("div",{className:`dose-countdown ${O?"done":V.status}`,children:O?"":V.text}),n.jsx("div",{className:"dose-label",children:O?"Taken!":"Take now"})]}),O&&n.jsx("button",{className:"undo-dose-btn",onClick:()=>m(s.id,K),children:"Undo"})]},K)})}),n.jsxs("div",{className:"supp-bottle-bar",children:[n.jsxs("div",{className:"bottle-label",children:[n.jsxs("span",{children:["Bottle: ",Z,"/",s.bottleSize]}),n.jsxs("span",{className:ue<=7?"bottle-low":"",children:[ue,"d left"]})]}),n.jsx("div",{className:"bottle-track",children:n.jsx("div",{className:`bottle-fill ${xe<20?"low":xe<40?"med":""}`,style:{width:`${xe}%`}})}),n.jsx("button",{className:"reset-bottle-btn",onClick:()=>{window.confirm(`Reset ${s.name} bottle count back to ${s.bottleSize}? (New bottle opened)`)&&f(s.id)},children:"New Bottle"})]}),n.jsxs("div",{className:"supp-card-meta",children:[n.jsx("span",{className:"supp-card-product",children:s.product}),s.price&&n.jsxs("span",{className:"supp-card-price",children:["",s.price.toLocaleString()," (",se,"d = ",ae,"/day)"]})]}),s.note&&n.jsx("div",{className:"supp-card-note",children:s.note})]})}function uj(s){let l=null;for(const u of Object.keys(s)){const m=u.split("-").slice(2).join("-"),f=new Date(m);!isNaN(f)&&(!l||f<l)&&(l=f)}return l}function dj(s,l,u,c){const m=$m(u),f=new Date,p=`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(f.getDate()).padStart(2,"0")}`;if(u>p)return"future";if(c){if(new Date(m)<c)return"future"}else return"future";let g=0,v=0;return cn.forEach(b=>{(l[b.id]?.times||b.defaultTimes).forEach((C,R)=>{g++;const L=`${b.id}-${R}-${m}`;s[L]&&v++})}),g===0?"future":v===g?"all":v>0?"partial":"missed"}function mj(){const{dailySupp:s,isSuppTaken:l,toggleSupp:u,undoSupp:c,checkups:m,updateCheckup:f,moods:p,addMood:g,suppSchedule:v,suppLastTaken:b,suppBottles:x,resetBottle:M,attendance:C,markAttendance:R,workLocation:L,setWorkLocation:W,healthCalendarVisibility:P,setHealthCalendarVisibility:Z}=Fn(),[xe,te]=w.useState("supps"),[ue,se]=w.useState(null),[ae,V]=w.useState({}),[K,O]=w.useState({mood:"",energy:3,cravings:"",notes:""}),[le,ve]=w.useState(null),ce=w.useMemo(()=>{const j=P&&typeof P=="object"?P:{};return{supps:j.supps!==!1,work:j.work!==!1,checkups:j.checkups!==!1,mood:j.mood!==!1}},[P]),fe=new Date,[we,Ce]=w.useState({y:fe.getFullYear(),m:fe.getMonth()+1}),[_,Q]=w.useState({y:fe.getFullYear(),m:fe.getMonth()+1}),[Se,Y]=w.useState({y:fe.getFullYear(),m:fe.getMonth()+1}),[ge,k]=w.useState({y:fe.getFullYear(),m:fe.getMonth()+1}),[z,re]=w.useState(fe.toISOString().split("T")[0]),[N,F]=w.useState(()=>Cm()),[X,U]=w.useState(""),[Te,Ae]=w.useState(()=>String(Gi("naomi")?.status||"")),[De,tt]=w.useState(()=>({...d0,...Gi("naomi")?.live||{}})),[de,Oe]=w.useState(()=>p0(L)),Ve=w.useRef(!1),Xe=w.useRef(null);w.useEffect(()=>{if(typeof window>"u")return;const j=ke=>{const We=String(ke?.detail?.subTab||"").trim().toLowerCase();We&&["supps","work","checkups","mood"].includes(We)&&te(We)};return window.addEventListener("peggy-open-health-subtab",j),()=>window.removeEventListener("peggy-open-health-subtab",j)},[]),w.useEffect(()=>{Ve.current||Oe(p0(L))},[L.name,L.lat,L.lng,L.radiusMeters,L.homeName,L.homeLat,L.homeLng,L.homeRadiusMeters,L.autoHours,L.awayMinutesForWork]);const Ze=cn.filter(j=>(v[j.id]?.times||j.defaultTimes).every((G,oe)=>l(j.id,oe))).length,lt=cn.length,qe=cc(L.lat,L.lng),rt=cc(L.homeLat,L.homeLng),Wt=qe||rt,xt=fb(),ye=m0(N.hours,{minHours:.5,maxHours:24}),Me=m0(de.autoHours,{minHours:.5,maxHours:12}),Qe=om(N.startTime,N.endTime,N.breakMinutes),$e=(j,ke)=>{const We=j==="hours"?Number(ke):ye.hours,G=j==="minutes"?Number(ke):ye.minutes,oe=h0(We,G,{minHours:.5,maxHours:24});F(he=>({...he,hours:oe}))},kt=(j,ke)=>{F(We=>{const G={...We,[j]:j==="breakMinutes"?Rc(ke):ke},oe=om(G.startTime,G.endTime,G.breakMinutes);return oe!==null&&(G.hours=oe),G})},St=(j,ke)=>{const We=j==="hours"?Number(ke):Me.hours,G=j==="minutes"?Number(ke):Me.minutes,oe=h0(We,G,{minHours:.5,maxHours:12});Ke({autoHours:String(oe)})};w.useEffect(()=>{if(typeof window>"u")return;const j=We=>{const G=We&&typeof We=="object"?We:Gi("naomi");String(G?.channel||"naomi").trim().toLowerCase()==="naomi"&&(Ae(String(G?.status||"")),tt({...d0,...G?.live||{}}))};j(Gi("naomi"));const ke=We=>j(We?.detail);return window.addEventListener(Bl,ke),()=>window.removeEventListener(Bl,ke)},[]),w.useEffect(()=>{if(X)return Xe.current&&clearTimeout(Xe.current),Xe.current=setTimeout(()=>{U("")},1e4),()=>{Xe.current&&clearTimeout(Xe.current)}},[X]);const ft=j=>{f(j,{...ae,completed:!0}),se(null),V({})},Ct=j=>{se(j.id),V(m[j.id]||{date:"",weight:"",bp:"",babySize:"",notes:"",nextDate:""})},Bt=j=>{j.preventDefault(),K.mood&&(g(K),O({mood:"",energy:3,cravings:"",notes:""}))},Kt=()=>{const j=om(N.startTime,N.endTime,N.breakMinutes),ke=N.useTimeRange?j??N.hours:N.hours,We={...N,hours:N.worked?Math.max(0,Number(ke)||0):0,breakMinutes:Rc(N.breakMinutes)};R(z,We),F(Cm())},Ke=j=>{Ve.current=!0,Oe(ke=>({...ke,...j}))},zt=()=>{const j=String(de.workLat||"").trim()!==""||String(de.workLng||"").trim()!=="",ke=String(de.homeLat||"").trim()!==""||String(de.homeLng||"").trim()!=="";if(j&&!cc(de.workLat,de.workLng)){U("Work pin is invalid. Enter valid latitude and longitude.");return}if(ke&&!cc(de.homeLat,de.homeLng)){U("Home pin is invalid. Enter valid latitude and longitude.");return}W(We=>({...We,name:String(de.workName||"").trim(),lat:Xi(de.workLat),lng:Xi(de.workLng),radiusMeters:go(de.workRadiusMeters,Oc),homeName:String(de.homeName||"").trim(),homeLat:Xi(de.homeLat),homeLng:Xi(de.homeLng),homeRadiusMeters:go(de.homeRadiusMeters,Am),autoHours:kb(de.autoHours),awayMinutesForWork:Em(de.awayMinutesForWork)})),Ve.current=!1,U("Saved location settings. You can now enable tracker.")},Dt=async(j="work")=>{try{U("Getting current location...");const ke=await pb();if(!ke){U("Could not get current location. Try again.");return}const We=ke.latitude,G=ke.longitude;if(j==="home"){Ke({homeLat:We.toFixed(6),homeLng:G.toFixed(6),homeName:String(de.homeName||"").trim()||"Home"}),U("Current location captured for Home. Tap Save Locations.");return}Ke({workLat:We.toFixed(6),workLng:G.toFixed(6),workName:String(de.workName||"").trim()||"Work"}),U("Current location captured for Work. Tap Save Locations.")}catch(ke){String(ke?.message||"").toLowerCase().includes("permission")?U("Location permission denied. Enable location access first."):U("Could not get current location. Try again.")}},Rt=()=>{if(!Wt){U("Save at least one valid location (Work or Home) before enabling tracker.");return}W(j=>({...j,enabled:!0})),U("Location tracker enabled.")},ct=()=>{W(j=>({...j,enabled:!1})),U("Location tracker disabled.")},Ge=j=>{const ke=String(j||"").trim();ke&&Z(We=>{const G=We&&typeof We=="object"?We:{},oe={supps:G.supps!==!1,work:G.work!==!1,checkups:G.checkups!==!1,mood:G.mood!==!1};return{...oe,[ke]:!oe[ke]}})},Da=`${_.y}-${String(_.m).padStart(2,"0")}`,Sa=w.useMemo(()=>Object.entries(C).filter(([j])=>j.startsWith(Da)).map(([j,ke])=>({date:j,...ke})).sort((j,ke)=>ke.date.localeCompare(j.date)),[C,Da]),$a=Sa.filter(j=>j.worked).length,Xt=Sa.filter(j=>j.worked).reduce((j,ke)=>j+(Number(ke.hours)||0),0),La=w.useMemo(()=>{const j={};return p.forEach(ke=>{const We=new Date(ke.date),G=`${We.getFullYear()}-${String(We.getMonth()+1).padStart(2,"0")}-${String(We.getDate()).padStart(2,"0")}`;j[G]||(j[G]=ke)}),j},[p]),At=w.useMemo(()=>uj(s),[s]),Ga=w.useMemo(()=>{const j={};return pi.forEach(ke=>{const We=m[ke.id];We?.date&&(j[We.date]=ke)}),j},[m]);return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"sub-tabs glass-tabs",children:["supps","checkups","mood"].map(j=>n.jsx("button",{className:`glass-tab ${xe===j?"active":""}`,onClick:()=>te(j),children:n.jsxs("span",{className:"tab-icon-label",children:[n.jsx(Le,{icon:j==="supps"?Ee.supplements:j==="checkups"?Ee.checkup:Ee.tip}),n.jsx("span",{children:j==="supps"?"Supps":j==="checkups"?"Checkups":"Mood"})]})},j))}),xe==="supps"&&n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.supplements})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Daily Supplement Tracker"}),n.jsxs("span",{className:"section-count",children:[Ze,"/",lt," complete today"]})]}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>Ge("supps"),"aria-expanded":ce.supps,children:ce.supps?"Hide calendar":"Show calendar"})]}),ce.supps&&n.jsxs(n.Fragment,{children:[n.jsx(ho,{year:we.y,month:we.m,onMonthChange:(j,ke)=>Ce({y:j,m:ke}),renderDay:j=>{const ke=dj(s,v,j,At);return ke==="future"?null:n.jsx("span",{className:`cal-dot supp-dot-${ke}`})}}),n.jsxs("div",{className:"cal-legend",children:[n.jsxs("span",{className:"cal-legend-item",children:[n.jsx("span",{className:"cal-dot supp-dot-all"})," All taken"]}),n.jsxs("span",{className:"cal-legend-item",children:[n.jsx("span",{className:"cal-dot supp-dot-partial"})," Partial"]}),n.jsxs("span",{className:"cal-legend-item",children:[n.jsx("span",{className:"cal-dot supp-dot-missed"})," Missed"]})]})]})]}),n.jsxs("section",{className:"glass-section",children:[n.jsx("p",{className:"section-note",children:'Tap dose to mark as taken. Tap ? for info. Use "Undo" if you made a mistake.'}),n.jsx("ul",{className:"supp-grid",children:cn.map(j=>n.jsx(cj,{supp:j,schedule:v[j.id],isTaken:l,toggleSupp:u,undoSupp:c,resetBottle:M,lastTaken:b,bottle:x[j.id],showExplanation:le===j.id,onToggleExplanation:()=>ve(ke=>ke===j.id?null:j.id)},j.id))})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.tasks})}),n.jsx("div",{children:n.jsx("h2",{children:"Optimal Schedule (Locked)"})})]}),n.jsx("p",{className:"section-note",children:"This is the optimal schedule  follow it para ma-maximize ang absorption!"}),n.jsx("div",{className:"optimal-schedule",children:Pw.map((j,ke)=>n.jsxs("div",{className:"optimal-slot glass-card",children:[n.jsxs("div",{className:"optimal-slot-header",children:[n.jsx("span",{className:"optimal-icon",children:n.jsx(xa,{token:j.icon})}),n.jsx("span",{className:"optimal-time",children:j.time})]}),n.jsx("div",{className:"optimal-supps",children:j.supps.map((We,G)=>n.jsx("span",{className:"optimal-supp-tag",children:We},G))}),n.jsx("div",{className:"optimal-note",children:j.tagNote||j.note})]},ke))})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.warning})}),n.jsx("div",{children:n.jsx("h2",{children:"Important Rule"})})]}),n.jsxs("div",{className:"glass-card warn-card",children:[n.jsx("p",{children:"Huwag sabayan ang Calcium at Prenatal (may iron)!"}),n.jsx("p",{children:"Nag-aagawan sila sa absorption. Keep them 2+ hours apart."}),n.jsxs("p",{children:[n.jsx("strong",{children:"Morning:"})," Prenatal + DHA + Choline + Chlorella"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Lunch:"})," Calcium (1st) (+ Vitamin D3 only if advised)"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Evening:"})," Calcium (2nd)"]})]})]})]}),xe==="work"&&n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.work})}),n.jsx("div",{children:n.jsx("h2",{children:"Naomi's Work Attendance"})}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>Ge("work"),"aria-expanded":ce.work,children:ce.work?"Hide calendar":"Show calendar"})]}),n.jsx("p",{className:"section-note",children:"Save a Work pin or Home pin first, then enable tracker for auto attendance logs."}),n.jsxs("div",{className:"glass-card work-location-card",children:[n.jsx("h3",{children:"Work/Home Location Auto-Log"}),n.jsxs("div",{className:"attendance-toggle",children:[n.jsx("button",{type:"button",className:`att-btn ${L.enabled?"active worked":""}`,onClick:Rt,children:"Tracker ON"}),n.jsx("button",{type:"button",className:`att-btn ${L.enabled?"":"active absent"}`,onClick:ct,children:"Tracker OFF"})]}),n.jsxs("div",{className:"work-location-sections",children:[n.jsxs("div",{className:"work-location-block glass-inner",children:[n.jsx("h4",{children:"Work Location"}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Name"}),n.jsx("input",{type:"text",value:de.workName,onChange:j=>Ke({workName:j.target.value}),placeholder:"e.g. Kawasaki Office"})]}),n.jsxs("div",{className:"work-location-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Latitude"}),n.jsx("input",{type:"number",step:"0.000001",value:de.workLat,onChange:j=>Ke({workLat:j.target.value}),placeholder:"35.530000"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Longitude"}),n.jsx("input",{type:"number",step:"0.000001",value:de.workLng,onChange:j=>Ke({workLng:j.target.value}),placeholder:"139.700000"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Radius (meters)"}),n.jsx("input",{type:"number",min:Tm,max:Mm,value:de.workRadiusMeters,onChange:j=>Ke({workRadiusMeters:String(go(j.target.value,Oc))})})]}),n.jsx("div",{className:"work-location-actions",children:n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:()=>Dt("work"),children:"Use Current for Work"})})]}),n.jsxs("div",{className:"work-location-block glass-inner",children:[n.jsx("h4",{children:"Home Location"}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Name"}),n.jsx("input",{type:"text",value:de.homeName,onChange:j=>Ke({homeName:j.target.value}),placeholder:"e.g. Home"})]}),n.jsxs("div",{className:"work-location-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Latitude"}),n.jsx("input",{type:"number",step:"0.000001",value:de.homeLat,onChange:j=>Ke({homeLat:j.target.value}),placeholder:"35.530000"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Longitude"}),n.jsx("input",{type:"number",step:"0.000001",value:de.homeLng,onChange:j=>Ke({homeLng:j.target.value}),placeholder:"139.700000"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Radius (meters)"}),n.jsx("input",{type:"number",min:Tm,max:Mm,value:de.homeRadiusMeters,onChange:j=>Ke({homeRadiusMeters:String(go(j.target.value,Am))})})]}),n.jsx("div",{className:"work-location-actions",children:n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:()=>Dt("home"),children:"Use Current for Home"})})]})]}),n.jsxs("div",{className:"work-location-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Auto work duration"}),n.jsxs("div",{className:"work-duration-row",children:[n.jsx("input",{type:"number",min:"0",max:"12",step:"1",value:Me.hours,onFocus:j=>j.target.select(),onChange:j=>St("hours",j.target.value)}),n.jsx("span",{className:"work-duration-sep",children:"h"}),n.jsx("input",{type:"number",min:"0",max:"59",step:"5",value:Me.minutes,onFocus:j=>j.target.select(),onChange:j=>St("minutes",j.target.value)}),n.jsx("span",{className:"work-duration-sep",children:"m"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Away minutes (home-only mode)"}),n.jsx("input",{type:"number",min:"15",max:wb,value:de.awayMinutesForWork,onChange:j=>Ke({awayMinutesForWork:String(Em(j.target.value))})})]})]}),n.jsx("div",{className:"work-location-save-row",children:n.jsx("button",{type:"button",className:"btn-glass-primary",onClick:zt,children:"Save Locations"})}),X&&n.jsx("p",{className:"section-note",children:X}),Te&&Te!==X&&n.jsx("p",{className:"section-note",children:Te}),n.jsxs("p",{className:"section-note",children:["Tracking mode: ",xt?"Native iOS (background-capable)":"Web (foreground-only)"]}),L.enabled&&De.tracking&&n.jsxs("div",{className:`work-geo-live glass-inner ${De.insideWork?"inside":De.insideHome?"home":"outside"}`,children:[n.jsx("span",{children:De.insideWork?"Inside work zone":De.insideHome?"Inside home zone":"Outside zones"}),n.jsxs("span",{children:[De.distanceWorkMeters!==null?`Work ${De.distanceWorkMeters}m`:"Work n/a"," | ",De.distanceHomeMeters!==null?`Home ${De.distanceHomeMeters}m`:"Home n/a"]})]}),L.enabled&&De.accuracyMeters!==null&&n.jsxs("p",{className:"section-note",children:["GPS accuracy: +/-",De.accuracyMeters,"m"]}),L.lastAutoLogDate&&n.jsxs("p",{className:"section-note",children:["Last auto log date: ",L.lastAutoLogDate,L.lastAutoReason?` (${L.lastAutoReason==="work-zone"?"work zone":"away from home"})`:""]}),!Wt&&n.jsx("p",{className:"section-note",children:"Save valid Work or Home coordinates to activate tracking."}),n.jsx("p",{className:"section-note disclaimer",children:xt?"Native mode can continue tracking in background after location permissions are granted.":"Web mode auto logging works while Peggy is open and location permission is granted."})]}),ce.work&&n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"section-note",children:"Tap a day to select, then log attendance below."}),n.jsx(ho,{year:_.y,month:_.m,onMonthChange:(j,ke)=>Q({y:j,m:ke}),selectedDate:z,onDayClick:j=>{re(j),F(g0(C[j]))},renderDay:j=>{const ke=C[j];return ke?n.jsx("span",{className:`cal-dot ${ke.worked?"work-dot-yes":"work-dot-no"}`}):null}})]}),n.jsxs("div",{className:"glass-card attendance-form",children:[n.jsxs("h3",{children:["Log: ",z]}),n.jsxs("div",{className:"attendance-toggle",children:[n.jsx("button",{className:`att-btn ${N.worked?"active worked":""}`,onClick:()=>F(j=>({...j,worked:!0})),children:"Worked"}),n.jsx("button",{className:`att-btn ${N.worked?"":"active absent"}`,onClick:()=>F(j=>({...j,worked:!1})),children:"Absent"})]}),N.worked&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"attendance-mode-row",children:[n.jsx("button",{type:"button",className:`att-btn ${N.useTimeRange?"":"active worked"}`,onClick:()=>F(j=>({...j,useTimeRange:!1})),children:"Manual Duration"}),n.jsx("button",{type:"button",className:`att-btn ${N.useTimeRange?"active worked":""}`,onClick:()=>F(j=>({...j,useTimeRange:!0})),children:"Time In / Out"})]}),!N.useTimeRange&&n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Worked duration"}),n.jsxs("div",{className:"work-duration-row",children:[n.jsx("input",{type:"number",min:"0",max:"24",step:"1",value:ye.hours,onFocus:j=>j.target.select(),onChange:j=>$e("hours",j.target.value)}),n.jsx("span",{className:"work-duration-sep",children:"h"}),n.jsx("input",{type:"number",min:"0",max:"59",step:"5",value:ye.minutes,onFocus:j=>j.target.select(),onChange:j=>$e("minutes",j.target.value)}),n.jsx("span",{className:"work-duration-sep",children:"m"})]})]}),N.useTimeRange&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"attendance-time-range-grid",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Start"}),n.jsx("input",{type:"time",value:N.startTime,onChange:j=>kt("startTime",j.target.value)})]}),n.jsx("span",{className:"work-duration-sep time-range-sep",children:"to"}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"End"}),n.jsx("input",{type:"time",value:N.endTime,onChange:j=>kt("endTime",j.target.value)})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Total break (minutes)"}),n.jsx("input",{type:"number",min:"0",max:"720",step:"5",value:N.breakMinutes,onFocus:j=>j.target.select(),onChange:j=>kt("breakMinutes",j.target.value),placeholder:"e.g. 75"})]}),n.jsxs("p",{className:"section-note attendance-computed",children:["Paid work time: ",Qe===null?"Set start and end time":uc(Qe)]})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Note (optional)"}),n.jsx("input",{type:"text",value:N.note,onChange:j=>F(ke=>({...ke,note:j.target.value})),placeholder:"e.g. half day, overtime..."})]}),n.jsx("button",{className:"btn-glass-primary",onClick:Kt,children:"Save"})]})]}),n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.overview})}),n.jsx("div",{children:n.jsxs("h2",{children:["Monthly Summary  ",Da]})})]}),n.jsxs("div",{className:"attendance-stats",children:[n.jsxs("div",{className:"att-stat glass-inner",children:[n.jsx("div",{className:"att-stat-num",children:$a}),n.jsx("div",{className:"att-stat-label",children:"Days Worked"})]}),n.jsxs("div",{className:"att-stat glass-inner",children:[n.jsx("div",{className:"att-stat-num",children:uc(Xt)}),n.jsx("div",{className:"att-stat-label",children:"Total Hours"})]}),n.jsxs("div",{className:"att-stat glass-inner",children:[n.jsx("div",{className:"att-stat-num",children:Sa.filter(j=>!j.worked).length}),n.jsx("div",{className:"att-stat-label",children:"Days Off"})]})]}),Sa.length>0&&n.jsx("ul",{className:"attendance-log",children:Sa.map(j=>n.jsxs("li",{className:`att-log-item glass-inner ${j.worked?"worked":"absent"}`,onClick:()=>{re(j.date),F(g0(j))},children:[n.jsx("span",{className:"att-log-date",children:j.date}),n.jsx("span",{className:"att-log-status",children:j.worked?`Worked ${uc(j.hours)}`:"Absent"}),j.worked&&j.useTimeRange&&j.startTime&&j.endTime&&n.jsxs("span",{className:"att-log-note",children:[j.startTime," - ",j.endTime," (break ",uc((Number(j.breakMinutes)||0)/60),")"]}),j.note&&n.jsx("span",{className:"att-log-note",children:j.note})]},j.date))})]})]}),xe==="checkups"&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.checkup})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Checkup Visits"}),n.jsxs("span",{className:"section-count",children:[pi.filter(j=>m[j.id]?.completed).length,"/14 completed"]})]}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>Ge("checkups"),"aria-expanded":ce.checkups,children:ce.checkups?"Hide calendar":"Show calendar"})]}),ce.checkups&&n.jsx(ho,{year:Se.y,month:Se.m,onMonthChange:(j,ke)=>Y({y:j,m:ke}),renderDay:j=>Ga[j]?n.jsx("span",{className:"cal-icon",children:n.jsx(Le,{icon:Ee.checkup})}):null}),n.jsx("p",{className:"section-note",style:{marginTop:"0.6rem"},children:"Track your 14 prenatal checkups from boshi techo vouchers."}),n.jsx("ul",{className:"checkup-list",children:pi.map(j=>{const ke=m[j.id]||{},We=ue===j.id;return n.jsxs("li",{className:`glass-card checkup-item ${ke.completed?"completed":""}`,children:[n.jsxs("div",{className:"checkup-header",onClick:()=>!We&&Ct(j),children:[n.jsx("div",{className:`checkup-num ${ke.completed?"done":""}`,children:ke.completed?"":j.visit}),n.jsxs("div",{className:"checkup-info",children:[n.jsxs("div",{className:"checkup-title",children:["Visit ",j.visit," - Week ",j.weekRange]}),n.jsx("div",{className:"checkup-desc",children:j.label}),ke.completed&&ke.date&&n.jsxs("div",{className:"checkup-date",children:["Done: ",ke.date]})]})]}),We&&n.jsxs("div",{className:"checkup-form",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Date"}),n.jsx("input",{type:"date",value:ae.date||"",onChange:G=>V(oe=>({...oe,date:G.target.value}))})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Weight (kg)"}),n.jsx("input",{type:"number",step:"0.1",value:ae.weight||"",onChange:G=>V(oe=>({...oe,weight:G.target.value})),placeholder:"e.g. 55.5"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Blood Pressure"}),n.jsx("input",{type:"text",value:ae.bp||"",onChange:G=>V(oe=>({...oe,bp:G.target.value})),placeholder:"e.g. 120/80"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Baby Size"}),n.jsx("input",{type:"text",value:ae.babySize||"",onChange:G=>V(oe=>({...oe,babySize:G.target.value})),placeholder:"e.g. 25cm, 800g"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Doctor Notes"}),n.jsx("textarea",{value:ae.notes||"",onChange:G=>V(oe=>({...oe,notes:G.target.value})),placeholder:"Any notes from the doctor..."})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Next Appointment"}),n.jsx("input",{type:"date",value:ae.nextDate||"",onChange:G=>V(oe=>({...oe,nextDate:G.target.value}))})]}),n.jsxs("div",{className:"form-buttons",children:[n.jsx("button",{className:"btn-glass-primary",onClick:()=>ft(j.id),children:"Save & Mark Complete"}),n.jsx("button",{className:"btn-glass-secondary",onClick:()=>{se(null),V({})},children:"Cancel"})]})]})]},j.id)})})]}),xe==="mood"&&n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.tip})}),n.jsx("div",{children:n.jsx("h2",{children:"Mood & Cravings"})}),n.jsx("button",{type:"button",className:"cal-collapse-btn",onClick:()=>Ge("mood"),"aria-expanded":ce.mood,children:ce.mood?"Hide calendar":"Show calendar"})]}),ce.mood&&n.jsx(ho,{year:ge.y,month:ge.m,onMonthChange:(j,ke)=>k({y:j,m:ke}),renderDay:j=>{const ke=La[j];return ke?n.jsx("span",{className:"cal-icon cal-mood-icon",children:n.jsx(xa,{token:ke.mood})}):null}}),n.jsx("p",{className:"section-note",style:{marginTop:"0.6rem"},children:"How is Naomi feeling today?"}),n.jsxs("form",{className:"mood-form",onSubmit:Bt,children:[n.jsx("div",{className:"mood-emojis",children:sj.map(j=>n.jsx("button",{type:"button",className:`mood-emoji glass-inner ${K.mood===j?"selected":""}`,onClick:()=>O(ke=>({...ke,mood:j})),children:n.jsx(xa,{token:j,className:"ui-icon mood-option-icon"})},j))}),n.jsxs("div",{className:"form-row",children:[n.jsxs("label",{children:["Energy Level: ",K.energy,"/5"]}),n.jsx("input",{type:"range",min:"1",max:"5",value:K.energy,onChange:j=>O(ke=>({...ke,energy:Number(j.target.value)}))})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Cravings"}),n.jsx("input",{type:"text",value:K.cravings,onChange:j=>O(ke=>({...ke,cravings:j.target.value})),placeholder:"What's Naomi craving?"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Notes"}),n.jsx("textarea",{value:K.notes,onChange:j=>O(ke=>({...ke,notes:j.target.value})),placeholder:"Any other notes..."})]}),n.jsx("button",{type:"submit",className:"btn-glass-primary",disabled:!K.mood,children:"Log Mood"})]})]}),p.length>0&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.info})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Mood History"}),n.jsxs("span",{className:"section-count",children:[p.length," entries"]})]})]}),n.jsx("ul",{className:"mood-list",children:p.slice(0,20).map(j=>n.jsxs("li",{className:"glass-card mood-entry",children:[n.jsxs("div",{className:"mood-entry-top",children:[n.jsx("span",{className:"mood-entry-emoji",children:n.jsx(xa,{token:j.mood})}),n.jsxs("span",{className:"mood-entry-energy",children:["Energy: ",j.energy,"/5"]}),n.jsx("span",{className:"mood-entry-date",children:new Date(j.date).toLocaleDateString()})]}),j.cravings&&n.jsxs("div",{className:"mood-entry-craving",children:["Craving: ",j.cravings]}),j.notes&&n.jsx("div",{className:"mood-entry-notes",children:j.notes})]},j.id))})]})]})]})}const oh="baby-prep-cloud-session",hj="peggy-cloud-session-changed",fj=45;function xb(s){typeof window<"u"&&window.dispatchEvent(new CustomEvent(hj,{detail:{session:s||null}}))}function Uc(){const s="https://tgolpmbqmcdrjrimbjak.supabase.co".trim(),l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRnb2xwbWJxbWNkcmpyaW1iamFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1MjYxMjAsImV4cCI6MjA4NjEwMjEyMH0.G6HujAKTCFNlw7ZFWA1lZG4qvrEJlJMCkqvVHXx0o_c".trim();return{url:s,anonKey:l,configured:!!(s&&l)}}function pj(){return("/peggy/".trim()||"/").replace(/^\/+|\/+$/g,"")||"root"}function gj(s){try{const l=new URL(String(s||"")).hostname||"";return l.endsWith(".supabase.co")&&l.split(".")[0]||""}catch{return""}}function Kc(){const s=Uc(),l=gj(s.url)||"unknown-ref",u=pj();return`${oh}:${l}:${u}`}function yj(s){try{const l=String(s||"").split(".");if(l.length<2)return null;const u=l[1].replace(/-/g,"+").replace(/_/g,"/"),c=u.padEnd(Math.ceil(u.length/4)*4,"="),m=atob(c);return JSON.parse(m)}catch{return null}}function _c(s){const l=String(s?.accessToken||"").trim();if(!l)return!1;const u=yj(l);if(!u?.iss)return!0;const c=`${String(Uc().url||"").replace(/\/+$/,"")}/auth/v1`,m=String(u.iss||"").trim();return!c||!m?!0:m===c}function Lc(s){return!!(s?.accessToken&&s?.user?.id)}function lh(){try{const s=Kc(),l=localStorage.getItem(s);if(l){const m=JSON.parse(l);if(Lc(m)&&_c(m))return m;localStorage.removeItem(s)}const u=localStorage.getItem(oh);if(!u)return null;const c=JSON.parse(u);if(!Lc(c)||!_c(c))return null;localStorage.setItem(s,JSON.stringify(c));try{Ul(s,c)}catch{}return c}catch{return null}}function ko(s){const l=Kc();localStorage.setItem(l,JSON.stringify(s));try{Ul(l,s)}catch{}return xb(s),s}function bj(s,l,u={}){const c={apikey:s.anonKey,"Content-Type":"application/json",...u};return l&&(c.Authorization=`Bearer ${l}`),c}async function vj(s){try{const l=await s.json();return l?.msg||l?.message||l?.error_description||l?.error||`HTTP ${s.status}`}catch{return`HTTP ${s.status}`}}async function On(s,{method:l="GET",body:u,headers:c}={},m=""){const f=Uc();if(!f.configured)throw new Error("Cloud sync is not configured. Add Supabase env vars first.");const p=await fetch(`${f.url}${s}`,{method:l,headers:bj(f,m,c),body:u?JSON.stringify(u):void 0});if(!p.ok)throw new Error(await vj(p));return p.status===204?null:p.json()}function Sb(){return Math.floor(Date.now()/1e3)}function rh(s,l=null){const u=s?.user||l?.user||null;if(!s?.access_token||!u?.id)throw new Error("Missing auth session from Supabase.");const c=Sb();return{accessToken:s.access_token,refreshToken:s.refresh_token||l?.refreshToken||"",expiresAt:c+(Number(s.expires_in)||3600),user:{id:u.id,email:u.email||""}}}function wj(s,l=fj){return s?.expiresAt?Sb()>=Number(s.expiresAt)-l:!1}function kj(s){const l=String(s?.message||"").toLowerCase();return l.includes("jwt")||l.includes("token")||l.includes("expired")||l.includes("unauthorized")||l.includes("invalid claim")||l.includes("http 401")}function jb(s){if(!s?.accessToken||!s?.user?.id)throw new Error("Not signed in.");return s}async function y0(s){const l=jb(s);if(!l.refreshToken)throw new Error("Session expired. Please sign in again.");const u=await On("/auth/v1/token?grant_type=refresh_token",{method:"POST",body:{refresh_token:l.refreshToken}});return ko(rh(u,l))}async function Ts(s,l){let u=jb(s);wj(u)&&u.refreshToken&&(u=await y0(u));try{return{result:await l(u),session:u}}catch(c){if(!u.refreshToken||!kj(c))throw c;const m=await y0(u);return{result:await l(m),session:m}}}function xj(s){return encodeURIComponent(String(s))}function Ss(){return Uc().configured}function gi(){return lh()}function Cl(){const s=Kc();localStorage.removeItem(s);try{Ul(s,null)}catch{}xb(null)}async function Hc(){const s=lh();if(s)return s;try{const l=Kc(),u=await dm(l);if(Lc(u)&&_c(u))return ko(u);const c=await dm(oh);if(Lc(c)&&_c(c))return ko(c)}catch{}return null}async function Sj(s,l,u=""){const c={email:s,password:l},m=u?`/auth/v1/signup?redirect_to=${encodeURIComponent(u)}`:"/auth/v1/signup",p=await On(m,{method:"POST",headers:u?{redirect_to:u}:void 0,body:c});return!p?.access_token||!p?.user?.id?{session:null,message:"Account created. If email confirmation is enabled, confirm first then sign in."}:{session:ko(rh(p)),message:"Account created and signed in."}}async function jj(s,l){const u=await On("/auth/v1/token?grant_type=password",{method:"POST",body:{email:s,password:l}});return ko(rh(u))}async function Nj(){const s=lh();if(!s?.accessToken){Cl();return}try{await On("/auth/v1/logout",{method:"POST"},s.accessToken)}finally{Cl()}}async function vc(s){const{result:l,session:u}=await Ts(s,async c=>On("/auth/v1/user",{method:"GET"},c.accessToken));return ko({...u,user:{id:l.id,email:l.email||u.user?.email||""}})}async function Dm(s,l){const{result:u}=await Ts(l,async c=>{const m=[{user_id:c.user.id,payload:s,updated_at:new Date().toISOString()}];return(await On("/rest/v1/cloud_backups?on_conflict=user_id",{method:"POST",headers:{Prefer:"resolution=merge-duplicates,return=representation"},body:m},c.accessToken))?.[0]||null});return u}async function Nb(s){const{result:l}=await Ts(s,async u=>On(`/rest/v1/cloud_backups?select=payload,updated_at&user_id=eq.${xj(u.user.id)}&limit=1`,{method:"GET"},u.accessToken));if(!Array.isArray(l)||!l.length||!l[0]?.payload)throw new Error("No cloud backup found yet.");return{backup:l[0].payload,updatedAt:l[0].updated_at||null}}async function Tj(s,l){const u={action:"upsert",...s&&typeof s=="object"?s:{}},{result:c}=await Ts(l,async m=>On("/functions/v1/push-subscriptions",{method:"POST",body:u},m.accessToken));return c}async function Aj(s,l){const u={action:"disable",...s&&typeof s=="object"?s:{}},{result:c}=await Ts(l,async m=>On("/functions/v1/push-subscriptions",{method:"POST",body:u},m.accessToken));return c}async function Mj(s,l,u){const c={action:"sync_reminders",deviceId:String(l||"").trim(),reminders:Array.isArray(s)?s:[]},{result:m}=await Ts(u,async f=>On("/functions/v1/push-subscriptions",{method:"POST",body:c},f.accessToken));return m}async function dc(s,l={}){const u={action:"send_test"},c=String(l?.deviceId||"").trim();c&&(u.deviceId=c);const{result:m}=await Ts(s,async f=>On("/functions/v1/push-subscriptions",{method:"POST",body:u},f.accessToken));return m}const b0="peggy-push-device-id",Bc="peggy-push-endpoint",v0=12e3,xs=2500,Om=12e3,zc=1e4,Rm=2e4,Tb=5e3,w0=25e3,Ej=15e3;function da(s,l=v0,u="operation"){const c=Math.max(1e3,Number(l)||v0);return new Promise((m,f)=>{const p=setTimeout(()=>f(new Error(`${u} timed out after ${c}ms`)),c);Promise.resolve(s).then(g=>{clearTimeout(p),m(g)}).catch(g=>{clearTimeout(p),f(g)})})}function k0(s){const l=`${s}`.replace(/-/g,"+").replace(/_/g,"/"),u=l.padEnd(Math.ceil(l.length/4)*4,"="),c=atob(u),m=new Uint8Array(c.length);for(let f=0;f<c.length;f+=1)m[f]=c.charCodeAt(f);return m}function Cj(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`}function Ab(){return"BNdt37ORfjoKHdHhq5Dsvh8COQW7Td-Hstu66b3ETy6eqXbDg3XcvrvKr0e29Rzf9UiKqilGbUUtpmWE5PwEJPI".trim()}function Mb(){if(typeof navigator>"u")return!1;const s=String(navigator.userAgent||"").toLowerCase(),l=String(navigator.platform||"").toLowerCase();return/iphone|ipad|ipod/.test(s)||/iphone|ipad|ipod/.test(l)}function Eb(){if(typeof window>"u")return!1;const s=window.matchMedia?.("(display-mode: standalone)")?.matches,l=window.navigator?.standalone===!0;return!!(s||l)}function Yl(){return`${"/peggy/".replace(/\/+$/,"")}/`}function ch(){return`${Yl()}sw.js`}function Cb(){if(typeof window>"u")return!1;if("PushManager"in window)return!0;try{return typeof ServiceWorkerRegistration<"u"&&"pushManager"in ServiceWorkerRegistration.prototype}catch{return!1}}function qi(s){return!!(s?.pushManager&&typeof s.pushManager.subscribe=="function"&&typeof s.pushManager.getSubscription=="function")}async function Db(){if(!As())return null;const s=Yl(),l=ch(),[u,c]=await Promise.all([da(navigator.serviceWorker.getRegistration(s),xs,"service worker getRegistration(scope)").catch(()=>null),da(navigator.serviceWorker.getRegistration(),xs,"service worker getRegistration").catch(()=>null)]);if(u?.active)return u;if(c?.active)return c;const m=await da(navigator.serviceWorker.register(l,{scope:s}),Om,"service worker register").catch(()=>null);if(m?.active)return m;const f=await da(navigator.serviceWorker.ready,zc,"service worker ready").catch(()=>null);return f?.active?f:u||c||m||f||null}function x0(s,l=8e3){return s?.state==="activated"?Promise.resolve(!0):new Promise(u=>{const c=setTimeout(()=>u(!1),l),m=()=>{s?.state==="activated"&&(clearTimeout(c),u(!0))};try{s.addEventListener("statechange",m)}catch{}m()})}async function S0(s=Rm,l){if(!As())return null;const u=Yl(),c=ch(),m=typeof window<"u"?window.location.origin:"",f=Date.now()+Math.max(3e3,Number(s)||Rm),p=typeof l=="function"?l:()=>{};let g=null;for(;Date.now()<f;){const b=await da(navigator.serviceWorker.getRegistration(u),xs,"service worker getRegistration(scope) wait-active").catch(()=>null),x=await da(navigator.serviceWorker.getRegistrations(),xs,"service worker getRegistrations wait-active").catch(()=>[]),M=Array.isArray(x)?x.filter(W=>{const P=String(W?.scope||"");return!P||!m?!0:P.startsWith(`${m}${u}`)}):[],C=[b,...M].filter(Boolean),R=C.find(W=>W?.active);if(R)return R;if(g=C[0]||g,!g)g=await da(navigator.serviceWorker.register(c,{scope:u}),Om,"service worker register wait-active").catch(()=>null);else if(g.waiting)try{g.waiting.postMessage({type:"peggy-skip-waiting"})}catch{}const L=g?.installing||g?.waiting;if(L&&L.state!=="activated"&&(p("sw-wait-active",`Worker in state "${L.state}", listening for statechange...`),await x0(L,Math.min(4e3,f-Date.now())))){p("sw-wait-active","Worker became active via statechange");const P=await da(navigator.serviceWorker.getRegistration(u),xs,"service worker getRegistration after statechange").catch(()=>null);if(P?.active)return P}await new Promise(W=>setTimeout(W,600))}p("sw-nuke","SW stuck non-active after timeout. Unregistering and re-registering...");try{const b=await navigator.serviceWorker.getRegistrations();for(const R of b){const L=String(R?.scope||"");(L.startsWith(`${m}${u}`)||!L)&&await R.unregister()}p("sw-nuke","Old registrations cleared. Registering fresh SW...");const x=await da(navigator.serviceWorker.register(c,{scope:u}),Om,"service worker fresh register after nuke");if(x?.active)return p("sw-nuke","Fresh registration immediately active"),x;const M=x?.installing||x?.waiting;if(M&&(p("sw-nuke",`Fresh SW in state "${M.state}", waiting for activation...`),await x0(M,1e4))){p("sw-nuke","Fresh SW became active");const L=await da(navigator.serviceWorker.getRegistration(u),xs,"service worker getRegistration after fresh activate").catch(()=>null);if(L?.active)return L}const C=await da(navigator.serviceWorker.ready,8e3,"service worker ready after nuke").catch(()=>null);if(C?.active)return p("sw-nuke","Got active via navigator.serviceWorker.ready after nuke"),C;p("sw-nuke","Fresh registration still not active after nuke")}catch(b){p("sw-nuke",`Nuke failed: ${b?.message||"unknown"}`)}const v=await da(navigator.serviceWorker.ready,6e3,"service worker ready final wait-active").catch(()=>null);return v?.active?v:g?.active||g?.pushManager?g:null}function As(){return typeof window<"u"&&typeof Notification<"u"&&"serviceWorker"in navigator&&Cb()}function Qi(){if(typeof window>"u")return"";const s=window.localStorage.getItem(b0);if(s)return s;const l=Cj();return window.localStorage.setItem(b0,l),l}async function Dj(){if(!As())return null;const s=await Db(),l=qi(s)?s:await da(navigator.serviceWorker.ready,zc,"service worker ready for readCurrentSubscription").catch(()=>null);return qi(l)?da(l.pushManager.getSubscription(),Tb,"pushManager.getSubscription"):null}async function wc(s,{notifEnabled:l=!0,onStep:u}={}){const c=typeof u=="function"?u:()=>{};if(c("prechecks","Running prechecks..."),!Ss())return{status:"skipped",reason:"cloud-not-configured"};if(!s?.accessToken||!s?.user?.id)return{status:"skipped",reason:"no-session"};if(!As())return{status:"skipped",reason:"push-not-supported"};if(typeof window<"u"&&window.isSecureContext===!1)return{status:"skipped",reason:"insecure-context"};if(Mb()&&!Eb())return{status:"skipped",reason:"ios-home-screen-required"};if(Notification.permission!=="granted")return{status:"skipped",reason:"permission-not-granted"};const m=Ab();if(!m)return{status:"skipped",reason:"missing-vapid-public-key"};c("prechecks","All prechecks passed"),c("sw-resolve","Resolving service worker registration...");const f=await Db();c("sw-resolve",`SW resolved: active=${!!f?.active}, scope=${f?.scope||"none"}`);let p=f?.active?f:null;if(p||(c("sw-wait-active","Waiting for active service worker..."),p=await S0(Rm,c),c("sw-wait-active",`Wait result: active=${!!p?.active}`)),!p&&qi(f)&&(c("sw-fallback","Using non-active registration with pushManager"),p=f),!p)return c("sw-fail","No service worker registration available"),{status:"skipped",reason:"service-worker-unavailable"};if(!qi(p)){c("pm-ready","pushManager missing, waiting for navigator.serviceWorker.ready...");const R=await da(navigator.serviceWorker.ready,zc,"service worker ready with push manager").catch(()=>null);R?.active&&qi(R)&&(p=R,c("pm-ready","Got pushManager from ready registration"))}if(!qi(p)){c("pm-scan","pushManager still missing; scanning all registrations for compatible scope...");const R=await da(navigator.serviceWorker.getRegistrations(),xs,"service worker getRegistrations pushManager scan").catch(()=>[]),L=typeof window<"u"?window.location.origin:"",W=Yl(),P=Array.isArray(R)?R.find(Z=>{if(!qi(Z))return!1;const xe=String(Z?.scope||"");return!xe||!L?!0:xe.startsWith(`${L}${W}`)}):null;P&&(p=P,c("pm-scan",`Found pushManager via registration scan, scope=${P.scope||"n/a"}`))}if(!qi(p))return c("pm-fail","pushManager still unavailable after all attempts"),{status:"skipped",reason:"push-manager-unavailable"};c("pm-ok",`pushManager available, scope=${p.scope||"n/a"}`),c("get-sub","Calling pushManager.getSubscription()...");let g=await da(p.pushManager.getSubscription(),Tb,"pushManager.getSubscription").catch(()=>null);if(c("get-sub",g?"Existing subscription found":"No existing subscription"),!g){c("subscribe","Calling pushManager.subscribe()...");try{g=await da(p.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:k0(m)}),w0,"pushManager.subscribe"),c("subscribe","Subscribe succeeded")}catch(R){const W=String(R?.message||"").toLowerCase().includes("active service worker");if(c("subscribe",`Subscribe failed: ${R?.message||"unknown"}`),!W)throw R;c("subscribe-retry","Needs active worker, retrying after ready...");const P=await da(navigator.serviceWorker.ready,zc,"service worker ready retry").catch(()=>null),Z=P?.active?P:await S0(12e3,c);if(!Z?.pushManager)throw R;g=await da(Z.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:k0(m)}),w0,"pushManager.subscribe retry"),c("subscribe-retry","Subscribe retry succeeded")}}const v=g.toJSON(),b=v?.endpoint||g.endpoint||"",x=v?.keys?.p256dh||"",M=v?.keys?.auth||"";if(!b||!x||!M)return c("validate",`Invalid subscription data: endpoint=${!!b}, p256dh=${!!x}, auth=${!!M}`),{status:"skipped",reason:"invalid-subscription"};c("validate",`Subscription valid, endpoint hash: ...${b.slice(-20)}`),typeof window<"u"&&window.localStorage.setItem(Bc,b),c("upsert","Sending subscription to server...");const C=await da(Tj({deviceId:Qi(),notifEnabled:!!l,endpoint:b,p256dh:x,auth:M,subscription:v,userAgent:typeof navigator<"u"?navigator.userAgent:"",platform:typeof navigator<"u"?navigator.platform:"",appBaseUrl:"/peggy/"},s),Ej,"cloudUpsertPushSubscription");return c("upsert","Server upsert complete"),{status:"ok",result:C}}function Ob(){const s=Mb(),l=Eb(),u=typeof window<"u"?window.isSecureContext:null,c=typeof navigator<"u"&&"serviceWorker"in navigator,m=Cb(),f=typeof Notification<"u"?Notification.permission:"unavailable",p=Ab(),g=Qi(),v=typeof window<"u"&&window.localStorage.getItem(Bc)||"",b=typeof window<"u"&&window.matchMedia?window.matchMedia("(display-mode: standalone)").matches?"standalone":window.matchMedia("(display-mode: fullscreen)").matches?"fullscreen":"browser":"unknown",x=Yl(),M=ch();return{ios:s,standalone:l,secure:u,swSupported:c,pmGlobal:m,notifPerm:f,vapidPresent:!!p,deviceId:g,cachedEndpoint:v?`...${v.slice(-25)}`:"none",displayMode:b,basePath:x,swUrl:M}}async function lm(){const s=Ob();let l="unknown",u="none",c="none",m=0;try{const f=await navigator.serviceWorker.getRegistrations().catch(()=>[]),p=typeof window<"u"?window.location.origin:"",g=Array.isArray(f)?f.filter(x=>{const M=String(x?.scope||"");return!M||!p?!0:M.startsWith(`${p}${s.basePath}`)}):[];m=g.length;const b=await navigator.serviceWorker.getRegistration(s.basePath)||g[0]||null;if(b){u=b.scope||"none",l=b.active?"active":b.waiting?"waiting":b.installing?"installing":"no-worker";try{const x=await b.pushManager?.getSubscription();x?.endpoint&&(c=`...${x.endpoint.slice(-25)}`)}catch{}}else l="not-registered"}catch(f){l=`error: ${f?.message||"unknown"}`}return{...s,swState:l,swScope:u,subEndpoint:c,scopedRegistrations:m}}async function Dl(s,{unsubscribeLocal:l=!1}={}){let u=null;try{u=await Dj()}catch{u=null}const c=u?.endpoint||"",m=typeof window<"u"&&window.localStorage.getItem(Bc)||"",f=c||m,p=Qi();if(s?.accessToken&&s?.user?.id&&await Aj({endpoint:f,deviceId:p},s),l&&u)try{await u.unsubscribe()}catch{}return typeof window<"u"&&window.localStorage.removeItem(Bc),{status:"ok"}}const Oj=["Ultrasound","Documents","Receipts","Boshi Techo","Other"],Rj=[{id:"gov",label:"Gov Support",icon:""},{id:"budget",label:"Budget Tips",icon:""},{id:"health",label:"Health Tips",icon:""},{id:"supps",label:"Supplements",icon:""},{id:"names",label:"Baby Names",icon:""},{id:"kawasaki",label:"Kawasaki Info",icon:""},{id:"money-summary",label:"Total Benefits",icon:""}];function _j(s){const l=new Date(s);return Number.isNaN(l.getTime())?String(s||""):l.toLocaleString([],{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}function Lj(s){const l=String(s||"").trim();return l?l==="quiet-hours"?"Quiet hours":l==="permission-not-granted"?"Permission not granted":l==="foreground-suppressed"?"Foreground suppressed":l:""}function Un(s,l,u="operation"){const c=Math.max(1e3,Number(l)||15e3);return new Promise((m,f)=>{const p=setTimeout(()=>f(new Error(`${u} timed out after ${c}ms`)),c);Promise.resolve(s).then(g=>{clearTimeout(p),m(g)}).catch(g=>{clearTimeout(p),f(g)})})}function Hj(s,l=1e4){const u=String(s||"").trim(),c=Math.max(1e3,Number(l)||1e4);return new Promise((m,f)=>{let p=!1;const g=(x,M)=>{p||(p=!0,window.removeEventListener("peggy-local-test-ack",v),clearTimeout(b),x(M))},v=x=>{const M=String(x?.detail?.tag||"").trim();u&&M&&M!==u||g(m,x?.detail||{})},b=setTimeout(()=>g(f,new Error(`local test ack timed out after ${c}ms`)),c);window.addEventListener("peggy-local-test-ack",v)})}async function Bj(s=12e3){if(typeof navigator>"u"||!("serviceWorker"in navigator))return null;const u=await Un(navigator.serviceWorker.getRegistration("/peggy/"),2500,"service worker getRegistration(scope)").catch(()=>null);if(u)return u;const c=await Un(navigator.serviceWorker.getRegistration(),2500,"service worker getRegistration").catch(()=>null);return c||Un(navigator.serviceWorker.ready,s,"service worker ready").catch(()=>null)}function zj({section:s}){const[l,u]=w.useState(null),[c,m]=w.useState(null),[f,p]=w.useState("boy");if(s==="gov")return n.jsxs("div",{className:"info-panel",children:[n.jsx("h3",{children:"Government Support Guide"}),n.jsx("p",{className:"section-note",children:"Complete guide to ALL government benefits. Kawasaki-shi specific. Tap each phase to see details."}),Jw.map((g,v)=>n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>u(l===v?null:v),children:[n.jsxs("span",{className:"info-phase-head-main",children:[n.jsx(xa,{token:g.icon}),n.jsx("span",{children:g.phase})]}),n.jsxs("span",{className:"info-count info-phase-toggle",children:[n.jsxs("span",{children:[g.items.length," items"]}),n.jsx(En,{expanded:l===v})]})]}),l===v&&n.jsx("div",{className:"info-phase-body",children:g.items.map((b,x)=>n.jsxs("div",{className:"info-item glass-inner",children:[n.jsxs("div",{className:"info-item-header",onClick:()=>m(c===`${v}-${x}`?null:`${v}-${x}`),children:[n.jsx("div",{className:"info-item-title",children:b.title}),n.jsx("div",{className:"info-item-value",children:b.value})]}),c===`${v}-${x}`&&n.jsx("ul",{className:"info-details",children:b.details.map((M,C)=>n.jsx("li",{children:M},C))})]},x))})]},v))]});if(s==="budget")return n.jsxs("div",{className:"info-panel",children:[n.jsx("h3",{children:Gg.title}),Gg.sections.map((g,v)=>n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>u(l===v?null:v),children:[n.jsxs("span",{className:"info-phase-head-main",children:[n.jsx(xa,{token:g.icon}),n.jsx("span",{children:g.title})]}),n.jsx("span",{className:"info-phase-toggle",children:n.jsx(En,{expanded:l===v})})]}),l===v&&n.jsx("div",{className:"info-phase-body",children:g.content.map((b,x)=>n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:b.label}),n.jsx("div",{className:"info-tip-detail",children:b.detail})]},x))})]},v))]});if(s==="health")return n.jsxs("div",{className:"info-panel",children:[n.jsx("h3",{children:Vg.title}),Vg.sections.map((g,v)=>n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>u(l===v?null:v),children:[n.jsxs("span",{className:"info-phase-head-main",children:[n.jsx(xa,{token:g.icon}),n.jsx("span",{children:g.title})]}),n.jsx("span",{className:"info-phase-toggle",children:n.jsx(En,{expanded:l===v})})]}),l===v&&n.jsx("div",{className:"info-phase-body",children:g.content.map((b,x)=>n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:b.label}),n.jsx("div",{className:"info-tip-detail",children:b.detail})]},x))})]},v))]});if(s==="supps")return n.jsxs("div",{className:"info-panel",children:[n.jsx("h3",{children:ws.title}),n.jsx("p",{className:"section-note disclaimer",children:ws.disclaimer}),ws.sections.map((g,v)=>n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>u(l===v?null:v),children:[n.jsxs("span",{className:"info-phase-head-main",children:[n.jsx(xa,{token:g.icon}),n.jsx("span",{children:g.name})]}),n.jsx("span",{className:"info-phase-toggle",children:n.jsx(En,{expanded:l===v})})]}),l===v&&n.jsxs("div",{className:"info-phase-body",children:[n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:"Why essential"}),n.jsx("div",{className:"info-tip-detail",children:g.why})]}),n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:"When to take"}),n.jsx("div",{className:"info-tip-detail",children:g.when})]}),g.target&&n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:"Target dosage"}),n.jsx("div",{className:"info-tip-detail",children:g.target})]}),n.jsx("div",{className:"info-tip-label",style:{padding:"8px 0 4px"},children:"iHerb Options:"}),g.options.map((b,x)=>n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:b.product}),n.jsxs("div",{className:"info-tip-detail",children:[b.price," - ",b.note," (Lasts: ",b.lasts,")"]})]},x))]})]},v)),n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>u(l==="schedule"?null:"schedule"),children:[n.jsxs("span",{className:"info-phase-head-main",children:[n.jsx(xa,{token:""}),n.jsx("span",{children:"Daily Schedule"})]}),n.jsx("span",{className:"info-phase-toggle",children:n.jsx(En,{expanded:l==="schedule"})})]}),l==="schedule"&&n.jsxs("div",{className:"info-phase-body",children:[ws.schedule.map((g,v)=>n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:g.time}),n.jsx("div",{className:"info-tip-detail",children:g.supplements}),n.jsx("div",{className:"info-tip-detail",style:{opacity:.7,fontSize:"0.85em"},children:g.note})]},v)),n.jsx("div",{className:"glass-inner warn-card",style:{marginTop:8},children:n.jsx("p",{children:ws.importantRule})})]})]}),n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>u(l==="tips"?null:"tips"),children:[n.jsxs("span",{className:"info-phase-head-main",children:[n.jsx(xa,{token:""}),n.jsx("span",{children:"iHerb Tips & What NOT to Buy"})]}),n.jsx("span",{className:"info-phase-toggle",children:n.jsx(En,{expanded:l==="tips"})})]}),l==="tips"&&n.jsxs("div",{className:"info-phase-body",children:[n.jsx("div",{className:"info-tip-label",children:"iHerb Tips:"}),ws.iherbTips.map((g,v)=>n.jsx("div",{className:"info-tip glass-inner",children:n.jsx("div",{className:"info-tip-detail",children:g})},v)),n.jsx("div",{className:"info-tip-label",style:{marginTop:8},children:"DON'T buy (waste of money):"}),ws.whatNotToBuy.map((g,v)=>n.jsx("div",{className:"info-tip glass-inner",children:n.jsxs("div",{className:"info-tip-detail",style:{opacity:.7},children:[" ",g]})},v))]})]})]});if(s==="names"){const g=f==="boy"?Cn.boyNames:Cn.girlNames;return n.jsxs("div",{className:"info-panel",children:[n.jsx("h3",{children:Cn.title}),n.jsx("p",{className:"section-note",children:Cn.subtitle}),n.jsxs("div",{className:"glass-card info-tip",children:[n.jsxs("div",{className:"info-tip-label",children:["The Ryzen Formula: ",Cn.ryzenFormula.sound]}),n.jsxs("div",{className:"info-tip-detail",children:["Kanji: ",Cn.ryzenFormula.kanji," - ",Cn.ryzenFormula.meaning]})]}),n.jsxs("div",{className:"name-gender-toggle",children:[n.jsx("button",{className:`att-btn ${f==="boy"?"active worked":""}`,onClick:()=>p("boy"),children:"Boy Names"}),n.jsx("button",{className:`att-btn ${f==="girl"?"active worked":""}`,onClick:()=>p("girl"),children:"Girl Names"})]}),g.map((v,b)=>n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>m(c===`name-${b}`?null:`name-${b}`),children:[n.jsxs("span",{className:"name-header",children:[n.jsx("span",{className:"name-main",children:v.name}),n.jsx("span",{className:"name-kanji",children:v.kanji}),v.tier===1&&n.jsx("span",{className:"tier-badge",children:"Top Pick"})]}),n.jsx("span",{className:"info-phase-toggle",children:n.jsx(En,{expanded:c===`name-${b}`})})]}),c===`name-${b}`&&n.jsxs("div",{className:"info-phase-body",children:[n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:"Meaning"}),n.jsx("div",{className:"info-tip-detail",children:v.meaning})]}),n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:"Sibling Pair"}),n.jsx("div",{className:"info-tip-detail",children:v.pairing})]}),n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:"Why this name"}),n.jsx("div",{className:"info-tip-detail",children:v.why})]}),n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:"Readability"}),n.jsx("div",{className:"info-tip-detail",children:v.readability})]}),n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:"Nicknames"}),n.jsx("div",{className:"info-tip-detail",children:v.nicknames})]})]})]},b)),n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>m(c==="pnotes"?null:"pnotes"),children:[n.jsxs("span",{className:"info-phase-head-main",children:[n.jsx(xa,{token:""}),n.jsx("span",{children:"Practical Notes"})]}),n.jsx("span",{className:"info-phase-toggle",children:n.jsx(En,{expanded:c==="pnotes"})})]}),c==="pnotes"&&n.jsx("div",{className:"info-phase-body",children:Cn.practicalNotes.map((v,b)=>n.jsx("div",{className:"info-tip glass-inner",children:n.jsx("div",{className:"info-tip-detail",children:v})},b))})]})]})}if(s==="kawasaki"){const g=Zw;return n.jsxs("div",{className:"info-panel",children:[n.jsx("h3",{children:"Kawasaki-shi Info"}),n.jsxs("p",{className:"section-note",children:["Your area: ",g.address]}),[{label:g.wardOffice.name,detail:`${g.wardOffice.address}
Phone: ${g.wardOffice.mainPhone}
Hours: ${g.wardOffice.hours}
${g.wardOffice.note}`},...Object.values(g.wardOffice.departments).map(v=>({label:`  ${v.name}`,detail:v.phone})),{label:g.taxOffice.name,detail:`${g.taxOffice.address}
Phone: ${g.taxOffice.phone}
${g.taxOffice.note}`},{label:g.pensionOffice.name,detail:`${g.pensionOffice.address}
Phone: ${g.pensionOffice.phone}
${g.pensionOffice.note}`},{label:g.healthCenter.name,detail:`${g.healthCenter.address}
Phone: ${g.healthCenter.phone}
${g.healthCenter.note}`},{label:g.urHousing.name,detail:`Phone: ${g.urHousing.phone}
${g.urHousing.note}`},{label:g.kanagawaHousing.name,detail:`Phone: ${g.kanagawaHousing.phone}
${g.kanagawaHousing.note}`},{label:g.internationalExchange.name,detail:`${g.internationalExchange.address}
Phone: ${g.internationalExchange.phone}
${g.internationalExchange.note}`},{label:g.philConsulateYokohama.name,detail:`Phone: ${g.philConsulateYokohama.phone}
${g.philConsulateYokohama.note}`},{label:g.philEmbassy.name,detail:`${g.philEmbassy.address}
Phone: ${g.philEmbassy.phone}
${g.philEmbassy.note}`}].map((v,b)=>n.jsxs("div",{className:"glass-card info-tip",children:[n.jsx("div",{className:"info-tip-label",children:v.label}),n.jsx("div",{className:"info-tip-detail",style:{whiteSpace:"pre-line"},children:v.detail})]},b)),n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>u(l==="danchi"?null:"danchi"),children:[n.jsxs("span",{className:"info-phase-head-main",children:[n.jsx(xa,{token:""}),n.jsx("span",{children:"Danchi / Public Housing Tips"})]}),n.jsx("span",{className:"info-phase-toggle",children:n.jsx(En,{expanded:l==="danchi"})})]}),l==="danchi"&&n.jsxs("div",{className:"info-phase-body",children:[n.jsx("p",{className:"section-note",children:g.danchiInfo.note}),g.danchiInfo.tips.map((v,b)=>n.jsx("div",{className:"info-tip glass-inner",children:n.jsx("div",{className:"info-tip-detail",children:v})},b))]})]})]})}if(s==="money-summary"){const g=ek;return n.jsxs("div",{className:"info-panel",children:[n.jsx("h3",{children:"Total Government Support Summary"}),n.jsx("p",{className:"section-note",children:"Conservative to maximum estimates over 18 years for 2 children."}),[g.directCash,g.monthlyChild,g.costSavings,g.taxBenefits].map((v,b)=>n.jsxs("div",{className:"glass-card info-phase",children:[n.jsxs("div",{className:"info-phase-header",onClick:()=>u(l===b?null:b),children:[n.jsx("span",{children:v.title}),n.jsxs("span",{className:"info-item-value info-phase-toggle",children:[n.jsx("span",{children:v.total}),n.jsx(En,{expanded:l===b})]})]}),l===b&&n.jsx("div",{className:"info-phase-body",children:v.items.map((x,M)=>n.jsxs("div",{className:"info-tip glass-inner",children:[n.jsx("div",{className:"info-tip-label",children:x.label}),n.jsx("div",{className:"info-tip-detail",children:x.amount})]},M))})]},b)),n.jsxs("div",{className:"glass-card grand-total",children:[n.jsx("div",{className:"grand-total-label",children:"GRAND TOTAL (18 years, 2 kids)"}),n.jsxs("div",{className:"grand-total-range",children:[n.jsx("span",{children:g.grandTotal.conservative}),n.jsx("span",{children:" ~ "}),n.jsx("span",{children:g.grandTotal.maximum})]}),n.jsx("div",{className:"grand-total-note",children:g.grandTotal.note})]})]})}return null}function $j(){const{doctor:s,setDoctor:l,contacts:u,addContact:c,removeContact:m,updateContact:f,familyConfig:p,setFamilyConfig:g,iconStyle:v,setIconStyle:b,dailySupp:x,suppSchedule:M,attendance:C,planner:R,moods:L}=Fn(),W=p?.includeHusband!==!1,[P,Z]=w.useState("info"),[xe,te]=w.useState("gov"),[ue,se]=w.useState("Ultrasound"),[ae,V]=w.useState([]),[K,O]=w.useState(null),[le,ve]=w.useState(!1),[ce,fe]=w.useState(null),[we,Ce]=w.useState({name:"",phone:"",relationship:""}),[_,Q]=w.useState(""),[Se,Y]=w.useState(""),[ge,k]=w.useState(""),[z,re]=w.useState([]),[N,F]=w.useState(!1),[X,U]=w.useState(null),[Te,Ae]=w.useState(()=>({...Ob(),swState:"unknown",swScope:"none",subEndpoint:"none",scopedRegistrations:0})),[De,tt]=w.useState(!1),[de,Oe]=w.useState(!1),[Ve,Xe]=w.useState(""),[Ze,lt]=w.useState(""),[qe,rt]=w.useState(()=>gi()),Wt=w.useRef(),xt=w.useRef(),ye=Ss(),Me=As(),Qe=!!"BNdt37ORfjoKHdHhq5Dsvh8COQW7Td-Hstu66b3ETy6eqXbDg3XcvrvKr0e29Rzf9UiKqilGbUUtpmWE5PwEJPI".trim(),$e=Fm(v),[kt,St]=w.useState(()=>yo()),[ft,Ct]=w.useState(()=>vo()),[Bt,Kt]=w.useState(()=>Hl()),[Ke,zt]=w.useState(()=>Dn()),[Dt,Rt]=w.useState(()=>Date.now()),[ct,Ge]=w.useState(""),[Da,Sa]=w.useState(()=>typeof Notification>"u"?"unsupported":Notification.permission),[$a,Xt]=w.useState(""),La=lb(new Date,Bt),At=w.useMemo(()=>new Date(Dt),[Dt]),Ga=typeof window<"u"&&(window.matchMedia?.("(display-mode: standalone)")?.matches||window.navigator?.standalone===!0);w.useEffect(()=>{P==="photos"&&We()},[ue,P]),w.useEffect(()=>{if(P!=="notifications")return;const A=window.setInterval(()=>Rt(Date.now()),60*1e3);return()=>window.clearInterval(A)},[P]),w.useEffect(()=>{if(typeof window>"u"||P!=="settings")return;let A=!1;const be=async()=>{try{const dt=await lm();A||Ae(dt)}catch{A||Ae(dt=>({...dt,swState:"error"}))}};be();const Be=window.setInterval(be,12e3);return()=>{A=!0,window.clearInterval(Be)}},[P]);const j=()=>{if(typeof Notification>"u"){Sa("unsupported");return}Sa(Notification.permission)},ke=async()=>{try{const A=await lm();Ae(A)}catch{Ae(A=>({...A,swState:"error"}))}};w.useEffect(()=>{if(typeof window>"u")return;const A=()=>St(yo()),be=()=>Ct(vo()),Be=()=>Kt(Hl()),dt=()=>zt(Dn()),la=()=>{A(),be(),Be(),dt(),j()};return window.addEventListener(Rl,A),window.addEventListener(_l,be),window.addEventListener(vm,Be),window.addEventListener(jc,dt),window.addEventListener("peggy-backup-restored",la),window.addEventListener("storage",la),window.addEventListener("focus",j),window.addEventListener("peggy-local-test-ack",dt),document.addEventListener("visibilitychange",j),j(),()=>{window.removeEventListener(Rl,A),window.removeEventListener(_l,be),window.removeEventListener(vm,Be),window.removeEventListener(jc,dt),window.removeEventListener("peggy-backup-restored",la),window.removeEventListener("storage",la),window.removeEventListener("focus",j),window.removeEventListener("peggy-local-test-ack",dt),document.removeEventListener("visibilitychange",j)}},[]),w.useEffect(()=>{if(typeof window>"u")return;const A=be=>{const Be=!!be?.detail?.ok,dt=String(be?.detail?.error||"").trim();Ge(Be?"Local test acknowledged by Service Worker.":`Local test failed in Service Worker${dt?`: ${dt}`:""}`),zt(Dn()),Xt(String(be?.detail?.createdAt||new Date().toISOString()))};return window.addEventListener("peggy-local-test-ack",A),()=>window.removeEventListener("peggy-local-test-ack",A)},[]),w.useEffect(()=>{if(typeof window>"u")return;const A=be=>{rt(be?.detail?.session||null)};return window.addEventListener("peggy-cloud-session-changed",A),()=>window.removeEventListener("peggy-cloud-session-changed",A)},[]),w.useEffect(()=>{if(!ye)return;const A=gi();A&&vc(A).then(be=>rt(be)).catch(be=>{const Be=String(be?.message||"").toLowerCase();if(Be.includes("invalid jwt")||Be.includes("unauthorized")||Be.includes("http 401")||Be.includes("refresh token")||Be.includes("invalid refresh")||Be.includes("session expired")){Cl();return}rt(A)})},[ye]);const We=async()=>{try{const A=await H0(ue);V(A)}catch{V([])}},G=async A=>{const be=A.target.files;if(be.length){ve(!0);try{for(const Be of be)await Uw(ue,Be);await We()}catch(Be){console.error("Upload failed:",Be)}ve(!1),Wt.current&&(Wt.current.value="")}},oe=async A=>{await Kw(A),await We(),O(null)},he=A=>{A.preventDefault(),we.name&&(ce||(c(we),Ce({name:"",phone:"",relationship:""})))},_e=A=>{fe(A.id),Ce({name:A.name,phone:A.phone,relationship:A.relationship})},ut=()=>{f(ce,we),fe(null),Ce({name:"",phone:"",relationship:""})},wt=async()=>{if(typeof Notification>"u"){Ge("Browser notifications are not supported on this device/browser.");return}if(kt){if(dy(!1),St(!1),Ge("Reminders paused on this device."),qe&&Me)try{await Dl(qe,{unsubscribeLocal:!0})}catch{}return}if(Notification.permission==="denied"){Ge("Notifications are blocked in browser settings.");return}let A=Notification.permission;if(A!=="granted"&&(A=await Notification.requestPermission()),A==="granted"){if(dy(!0),St(!0),qe&&Me&&Qe)try{const be=await wc(qe,{notifEnabled:!0});if(be?.status==="ok")Ge("Notifications enabled and push connected on this device.");else{const Be=String(be?.reason||"subscription-sync-skipped");Ge(`Notifications enabled, but push sync skipped (${Be}).`)}}catch(be){Ge(`Notifications enabled, but push sync failed (${be?.message||"unknown error"}).`)}else Ge(qe?"Notifications enabled on this device.":"Notifications enabled locally. Sign in to cloud for lock-screen push.");return}Ge("Permission not granted.")},T=()=>{const A={...Bt,enabled:!Bt.enabled};Kt(A),uy(A),Ge(A.enabled?`Quiet hours enabled (${Qd(A)}).`:"Quiet hours disabled.")},me=(A,be)=>{const Be={...Bt,[A]:be};Kt(Be),uy(Be),Be.enabled&&Ge(`Quiet hours updated (${Qd(Be)}).`)},Ne=A=>{const be={...ft,[A]:!ka(A,ft)};Ct(be),rb(be),Ge(`${A==="dailyTip"?"Daily Tip":A==="calendar"?"Calendar":A==="names"?"Names":"Reminders"} notifications ${be[A]?"enabled":"paused"}.`)},He=async()=>{try{Q("Exporting..."),await Yw(),Q("Backup downloaded! Keep it safe."),setTimeout(()=>Q(""),5e3)}catch(A){Q("Export failed: "+A.message)}},Je=async A=>{const be=A.target.files?.[0];if(be){try{Q("Restoring...");const Be=await qw(be);Q(`Restored! ${Be.items} data items + ${Be.photos} photos.`)}catch(Be){Q("Restore failed: "+Be.message)}xt.current&&(xt.current.value="")}},at=async()=>{if(!ye){Y("Cloud not configured. Add Supabase env vars first.");return}if(!Ve||!Ze){Y("Enter email and password first.");return}try{Oe(!0),Y("Creating account...");const A=new URL("/peggy/",window.location.origin).toString(),be=await Sj(Ve.trim(),Ze,A);rt(be.session||null),Y(be.message)}catch(A){Y("Signup failed: "+A.message)}finally{Oe(!1)}},yt=async()=>{if(!ye){Y("Cloud not configured. Add Supabase env vars first.");return}if(!Ve||!Ze){Y("Enter email and password first.");return}try{Oe(!0),Y("Signing in...");const A=await jj(Ve.trim(),Ze),be=await vc(A);rt(be),Y(`Signed in as ${be.user.email||be.user.id}. Auto-sync is running in background.`)}catch(A){Y("Sign in failed: "+A.message)}finally{Oe(!1)}},Oa=async()=>{try{if(Oe(!0),k(""),qe)try{await Dl(qe,{unsubscribeLocal:!0})}catch{}await Nj(),rt(null),Y("Signed out.")}catch(A){Y("Sign out failed: "+A.message)}finally{Oe(!1)}},ba=async()=>{if(!qe){Y("Sign in first.");return}try{Oe(!0),Y("Uploading cloud backup...");const A=await xc();await Dm(A,qe),Y("Cloud backup uploaded successfully.")}catch(A){Y("Cloud upload failed: "+A.message)}finally{Oe(!1)}},Ia=async()=>{if(!qe){Y("Sign in first.");return}try{Oe(!0),Y("Downloading cloud backup...");const{backup:A}=await Nb(qe),be=await zm(A);Y(`Cloud restore complete: ${be.items} items + ${be.photos} photos.`)}catch(A){Y("Cloud download failed: "+A.message)}finally{Oe(!1)}},un=async()=>{ke();let A=qe||gi();if(!A)try{A=await Hc(),A&&rt(A)}catch{}if(!A){k("Sign in first to test push notifications.");return}if(!Me){k("Push notifications are not supported on this browser/device.");return}if(!Qe){k("Missing VITE_WEB_PUSH_PUBLIC_KEY in app env config.");return}if(Notification.permission!=="granted"){k("Enable notifications first in More tab, then retry test push.");return}const be=[],Be=(dt,la)=>{const _t=`[${dt}] ${la}`;be.push(_t),re([...be])};try{Oe(!0),re([]);let dt=A;Be("session","Validating cloud session...");try{dt=await vc(A),rt(dt),Be("session","Session valid")}catch(Ot){const Ft=String(Ot?.message||"").toLowerCase();if(Ft.includes("invalid jwt")||Ft.includes("http 401")||Ft.includes("refresh token")){Cl(),Be("session","FAILED: JWT expired"),k("Cloud session expired (Invalid JWT). Please sign in again in Cloud Sync, then retry Send Test Push.");return}Be("session",`FAILED: ${Ot?.message||"unknown"}`),k(`Cloud session check failed: ${Ot?.message||"unknown error"}. Please retry.`);return}k("Checking push capability, then registering this device... (1/2). Keep app open while registration finishes.");let la=null;try{la=await Un(wc(dt,{notifEnabled:!0,onStep:Be}),9e4,"push registration")}catch(Ot){if(!String(Ot?.message||"").toLowerCase().includes("push registration timed out"))throw Ot;k("Registration is slow. Trying server push test on existing device subscription...");const bt=await Un(dc(dt,{deviceId:Qi()}),2e4,"push send_test after registration-timeout"),mn=Number(bt?.sent||0),Mt=Number(bt?.total||mn),hn=Number(bt?.stale||0),es=Number(bt?.failed||0),ts=bt?.fallbackUsed?" (fallback subscription path)":"";if(mn>0){k(`Test push sent via existing subscription after slow registration (${mn}/${Mt}, stale ${hn}, failed ${es})${ts}.`);return}if(Mt<=0){k("No push subscription found for this device yet. Reopen Peggy from Home Screen, keep it open for 10s, then retry Send Test Push.");return}throw new Error(`push registration timed out and existing subscription did not deliver (${mn}/${Mt}, stale ${hn}, failed ${es})`)}if(la?.status!=="ok"){const Ot=String(la?.reason||"subscription-sync-skipped");if(Ot==="ios-home-screen-required"){k("Push on iPhone requires Home Screen mode. Open Peggy from Safari > Add to Home Screen, then retry Send Test Push from that installed icon.");return}if(Ot==="insecure-context"){k("Push requires secure HTTPS context. Use the GitHub Pages URL and Home Screen app, not localhost.");return}if(Ot==="service-worker-unavailable"){k("Service worker is not ready yet in this app context. Close Peggy completely, reopen from Home Screen, wait 10 seconds, then retry Send Test Push.");return}if(Ot==="push-manager-unavailable"){k("Push manager unavailable in current context. On iPhone, use Safari Add to Home Screen for the HTTPS GH Pages URL, then open that Home Screen app and retry.");const Ft=await Un(dc(dt,{deviceId:Qi()}),2e4,"push send_test existing-subscription"),aa=Number(Ft?.sent||0),bt=Number(Ft?.total||aa),mn=Number(Ft?.stale||0),Mt=Number(Ft?.failed||0),hn=Ft?.fallbackUsed?" (fallback subscription path)":"";if(aa>0){k(`Test push sent via existing subscription (${aa}/${bt}, stale ${mn}, failed ${Mt})${hn}.`);return}k(`Push registration skipped (${Ot}) and no existing delivery (${aa}/${bt}, stale ${mn}, failed ${Mt}).`);return}k(`Push registration skipped (${Ot}).`);return}k("Sending test push... (2/2). Lock phone now and wait 5-10 seconds.");let _t=await Un(dc(dt,{deviceId:Qi()}),2e4,"push send_test"),Gt=Number(_t?.sent||0),ta=Number(_t?.total||Gt),Qt=Number(_t?.stale||0),Va=Number(_t?.failed||0);if(Gt<=0){k("No delivery yet. Repairing device subscription then retrying test push..."),await Un(Dl(dt,{unsubscribeLocal:!0}),12e3,"push disable current subscription"),Be("repair","Re-registering push subscription...");const Ot=await Un(wc(dt,{notifEnabled:!0,onStep:Be}),9e4,"push re-registration");if(Ot?.status!=="ok"){const Ft=String(Ot?.reason||"push-repair-sync-skipped");k(`Push re-registration skipped (${Ft}).`);return}k("Retrying test push after subscription repair..."),_t=await Un(dc(dt,{deviceId:Qi()}),2e4,"push send_test retry"),Gt=Number(_t?.sent||0),ta=Number(_t?.total||Gt),Qt=Number(_t?.stale||0),Va=Number(_t?.failed||0)}if(Gt>0){const Ot=_t?.fallbackUsed?" (fallback subscription path)":"";k(`Test push sent (${Gt}/${ta} device${ta===1?"":"s"}, stale ${Qt}, failed ${Va})${Ot}.`)}else if(ta>0){const Ot=Array.isArray(_t?.errors)&&_t.errors.length?` First error: ${String(_t.errors[0]).slice(0,140)}.`:"";k(`Push request reached server but no device delivered (${Gt}/${ta}, stale ${Qt}, failed ${Va}).`+Ot+" Usually this is a stale/mismatched subscription or VAPID mismatch.")}else k("No active push device found yet. Open Peggy as installed PWA and allow notifications, then retry.")}catch(dt){const la=String(dt?.message||"unknown error");la.toLowerCase().includes("invalid jwt")?(Cl(),k("Test push failed: Invalid JWT. Please sign in again in Cloud Sync, then retry.")):k("Test push failed: "+la)}finally{ke(),Oe(!1)}},Rn=async()=>{const A=new Date().toISOString();Xt(A),Ge("Running local notification test...");const be=typeof window>"u"?!1:window.matchMedia?.("(display-mode: standalone)")?.matches||window.navigator?.standalone===!0;if(typeof Notification>"u"){Ge("Notifications are not supported on this browser/device.");return}let Be=Notification.permission;if(Be==="default"){try{Be=await Notification.requestPermission()}catch{Be=Notification.permission}Sa(Be)}if(Be!=="granted"){Ge("Notification permission is not granted. Enable it first for this device."),Kn({title:"Local notification test blocked",body:`Permission is ${Be}.`,type:"test",level:"nudge",status:"missed",reason:`permission-${Be}`,source:"local",slotKey:`local-test|permission|${Be}`,dedupeKey:`local-test|permission|${Be}`,createdAt:new Date().toISOString(),read:!1}),zt(Dn());return}const dt="Peggy local test",la=be?"Local test scheduled. Lock iPhone now and wait ~4s for banner.":"Notification test from browser mode. For iPhone lock-screen push, use Home Screen app.",_t={body:la,icon:"/peggy/icon-192.png",badge:"/peggy/icon-192.png",tag:`peggy-local-test-${Date.now()}`,renotify:!1,requireInteraction:!1,timestamp:Date.now()};try{let Gt="",ta=!1;const Qt=[],Va=await Bj(12e3);if(Va?.showNotification){Ge("Running local notification test... service-worker showNotification");try{await Va.showNotification(dt,{..._t,renotify:!0,requireInteraction:!0,data:{url:"/peggy/",actionUrls:{}}}),Gt="service-worker-showNotification",ta=!0}catch(aa){Qt.push(`sw-showNotification: ${String(aa?.message||aa||"unknown-error")}`)}}if(!ta&&Va?.active){const aa=String(_t.tag||"").trim();Ge("Running local notification test... service-worker message");try{Va.active.postMessage({type:"peggy-local-test",payload:{title:dt,body:la,icon:_t.icon,badge:_t.badge,tag:aa,url:"/peggy/",delayMs:0}});try{await Hj(aa,9e3),Gt="service-worker-message",ta=!0}catch(bt){Qt.push(`sw-message-ack: ${String(bt?.message||bt||"unknown-error")}`)}}catch(bt){Qt.push(`sw-message-post: ${String(bt?.message||bt||"unknown-error")}`)}}if(!ta){Ge("Running local notification test... fallback to Notification API");try{new Notification(dt,_t),Gt="notification-api",ta=!0}catch(aa){Qt.push(`notification-api: ${String(aa?.message||aa||"unknown-error")}`)}}if(!ta){const aa=Qt.length?Qt.join(" | "):"No available notification route";throw new Error(aa)}const Ot=new Date().toISOString();Xt(Ot),Kn({title:"Local test sent",body:`Route: ${Gt}. Standalone: ${be?"yes":"no"}.`,type:"test",level:"gentle",status:"sent",source:"local",slotKey:`local-test|${Gt}|${Ot.slice(0,16)}`,dedupeKey:`local-test|${Gt}|${Ot.slice(0,16)}`,createdAt:Ot,read:!1}),zt(Dn());const Ft=yo()?"":" Reminder channels are OFF in this device; enable them for automatic reminders.";Ge(`Local test sent via ${Gt}. ${be?"If lock-screen banner still does not appear, use Send Test Push and lock phone for 5-10s. ":"Open Peggy from Home Screen for iPhone lock-screen behavior. "}`+Ft+"If no banner appears, check iOS Notification settings + Focus mode.")}catch(Gt){Ge(`Local test failed: ${Gt.message}`),Kn({title:"Local test failed",body:String(Gt?.message||"unknown error"),type:"test",level:"nudge",status:"missed",reason:"local-test-failed",source:"local",slotKey:"local-test|failed",dedupeKey:`local-test|failed|${new Date().toISOString().slice(0,16)}`,createdAt:new Date().toISOString(),read:!1}),zt(Dn())}},Ra=w.useMemo(()=>qm({dailySupp:x,suppSchedule:M,now:At}),[x,M,Dt]),Ua=w.useMemo(()=>Wm({attendance:C,now:At}),[C,Dt]),ja=w.useMemo(()=>Pm({moods:L,now:At}),[L,Dt]),Ka=w.useMemo(()=>Gm({planner:R,now:At}),[R,Dt]),qn=w.useMemo(()=>Array.isArray(Ke)?Ke.filter(A=>!A?.read).length:0,[Ke]),ma=w.useMemo(()=>Array.isArray(Ke)&&Ke.length?Ke[0]:null,[Ke]),Pt=w.useMemo(()=>{const A=[];if(Ra.remainingDoses>0&&ka("reminders",ft)){const be=Vm(Ra,At,"notifications-preview");be&&A.push(be)}if(Ua.needsReminder&&ka("reminders",ft)){const be=Xm(Ua,At,"notifications-preview");be&&A.push(be)}if(ja.needsReminder&&ka("reminders",ft)){const be=Qm(ja,At,"notifications-preview");be&&A.push(be)}if(Ka?.candidate?.planId&&ka("calendar",ft)){const be=Zm(Ka,At,"notifications-preview");be&&A.push(be)}return A},[Ra.remainingDoses,Ra.overdueDoses,Ua.needsReminder,ja.needsReminder,Ka?.candidate?.planId,Ka?.pendingOverdueCount,Ka?.pendingTodayCount,ft,Dt]),_n=A=>{_1(A),zt(Dn())},Ha=()=>{L1(),zt(Dn())},dn=()=>{H1(),zt([])};return n.jsxs("div",{className:"content",children:[n.jsx("div",{className:"sub-tabs glass-tabs",children:["info","notifications","photos","contacts","settings"].map(A=>n.jsx("button",{className:`glass-tab ${P===A?"active":""}`,onClick:()=>Z(A),children:n.jsxs("span",{className:"tab-icon-label",children:[n.jsx(Le,{icon:A==="info"?Ee.info:A==="notifications"?Ee.reminders:A==="photos"?Ee.photos:A==="contacts"?Ee.contacts:Ee.backup}),n.jsx("span",{children:A==="info"?"Info":A==="notifications"?"Notifications":A==="photos"?"Photos":A==="contacts"?"Contacts":"Settings"})]})},A))}),P==="info"&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.info})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Knowledge Base"}),n.jsx("span",{className:"section-count",children:"All info from all guides"})]})]}),n.jsx("p",{className:"section-note",children:"Everything you need to know, organized by topic. All info from the original guides is here."}),n.jsx("div",{className:"info-nav",children:Rj.map(A=>n.jsxs("button",{className:`info-nav-btn glass-inner ${xe===A.id?"active":""}`,onClick:()=>te(A.id),children:[n.jsx("span",{className:"info-nav-icon",children:n.jsx(xa,{token:A.icon})}),n.jsx("span",{className:"info-nav-label",children:A.label})]},A.id))}),n.jsx(zj,{section:xe})]}),P==="notifications"&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.reminders})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Notifications"}),n.jsxs("span",{className:"section-count",children:[qn," unread"]})]})]}),n.jsx("p",{className:"section-note",children:"Inbox of sent, missed, and opened notifications. Use this to review anything Naomi missed."}),n.jsxs("div",{className:"backup-cloud-actions",children:[n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:Ha,children:"Mark all read"}),n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:dn,children:"Clear history"})]}),n.jsxs("div",{className:"glass-card backup-card",children:[n.jsx("h3",{children:"Live Pending"}),Pt.length?n.jsx("ul",{className:"notif-inbox-list",children:Pt.map(A=>n.jsxs("li",{className:"notif-inbox-item glass-inner unread",children:[n.jsxs("div",{className:"notif-inbox-top",children:[n.jsx("span",{className:`notif-chip ${A.level}`,children:"Pending"}),n.jsx("span",{className:"notif-time",children:"now"})]}),n.jsx("div",{className:"notif-title",children:A.notificationTitle}),n.jsx("div",{className:"notif-body",children:A.notificationBody})]},`live-${A.slotKey}`))}):n.jsx("p",{className:"section-note",children:"No pending notification candidates right now."})]}),n.jsxs("div",{className:"glass-card backup-card",children:[n.jsx("h3",{children:"History"}),Ke.length?n.jsx("ul",{className:"notif-inbox-list",children:Ke.map(A=>n.jsxs("li",{className:`notif-inbox-item glass-inner ${A.read?"":"unread"}`,onClick:()=>_n(A.id),children:[n.jsxs("div",{className:"notif-inbox-top",children:[n.jsx("span",{className:`notif-chip ${A.status||"sent"}`,children:A.status||"sent"}),n.jsx("span",{className:"notif-time",children:_j(A.createdAt)})]}),n.jsx("div",{className:"notif-title",children:A.title}),n.jsx("div",{className:"notif-body",children:A.body}),n.jsxs("div",{className:"notif-meta",children:[n.jsx("span",{children:String(A.type||"general")}),A.reason?n.jsx("span",{children:Lj(A.reason)}):null,n.jsx("span",{children:String(A.source||"local")})]})]},A.id))}):n.jsx("p",{className:"section-note",children:"No notification history yet."})]})]}),P==="photos"&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.photos})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Photo Gallery"}),n.jsxs("span",{className:"section-count",children:[ae.length," photos"]})]})]}),n.jsx("p",{className:"section-note",children:"Upload ultrasounds, documents, receipts. All stored on your device only."}),n.jsx("div",{className:"photo-categories",children:Oj.map(A=>n.jsx("button",{className:`photo-cat-btn glass-inner ${ue===A?"active":""}`,onClick:()=>se(A),children:A},A))}),n.jsxs("div",{className:"photo-upload",children:[n.jsx("input",{ref:Wt,type:"file",accept:"image/*",multiple:!0,onChange:G,id:"photo-input",style:{display:"none"}}),n.jsx("button",{className:"btn-glass-primary upload-btn",onClick:()=>Wt.current?.click(),disabled:le,children:le?"Uploading...":`Upload to ${ue}`})]}),ae.length>0?n.jsx("div",{className:"photo-grid",children:ae.map(A=>n.jsxs("div",{className:"photo-thumb",onClick:()=>O(A),children:[n.jsx("img",{src:A.data,alt:A.name}),n.jsx("div",{className:"photo-date",children:new Date(A.date).toLocaleDateString()})]},A.id))}):n.jsxs("p",{className:"empty-state",children:["No ",ue.toLowerCase()," photos yet."]}),K&&n.jsx("div",{className:"photo-modal",onClick:()=>O(null),children:n.jsxs("div",{className:"photo-modal-content",onClick:A=>A.stopPropagation(),children:[n.jsx("img",{src:K.data,alt:K.name}),n.jsxs("div",{className:"photo-modal-info",children:[n.jsx("span",{children:K.name}),n.jsx("span",{children:new Date(K.date).toLocaleDateString()})]}),n.jsxs("div",{className:"photo-modal-actions",children:[n.jsx("button",{className:"btn-glass-secondary",onClick:()=>O(null),children:"Close"}),n.jsx("button",{className:"btn-delete",onClick:()=>oe(K.id),children:"Delete"})]})]})})]}),P==="contacts"&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.contacts})}),n.jsxs("div",{children:[n.jsx("h2",{children:"Emergency Contacts"}),n.jsxs("span",{className:"section-count",children:[u.length," contacts"]})]})]}),n.jsx("p",{className:"section-note",children:"Keep important contacts handy. Tap the phone button to call."}),n.jsx("ul",{className:"contact-list",children:u.map(A=>n.jsx("li",{className:"glass-card contact-item",children:ce===A.id?n.jsxs("div",{className:"contact-edit",children:[n.jsx("input",{type:"text",value:we.name,onChange:be=>Ce(Be=>({...Be,name:be.target.value})),placeholder:"Name"}),n.jsx("input",{type:"tel",value:we.phone,onChange:be=>Ce(Be=>({...Be,phone:be.target.value})),placeholder:"Phone"}),n.jsx("input",{type:"text",value:we.relationship,onChange:be=>Ce(Be=>({...Be,relationship:be.target.value})),placeholder:"Relationship"}),n.jsxs("div",{className:"form-buttons",children:[n.jsx("button",{className:"btn-glass-primary",onClick:ut,children:"Save"}),n.jsx("button",{className:"btn-glass-secondary",onClick:()=>{fe(null),Ce({name:"",phone:"",relationship:""})},children:"Cancel"})]})]}):n.jsxs("div",{className:"contact-display",children:[n.jsxs("div",{className:"contact-info",onClick:()=>_e(A),children:[n.jsx("div",{className:"contact-name",children:A.name}),n.jsx("div",{className:"contact-role",children:A.relationship}),A.phone&&n.jsx("div",{className:"contact-phone",children:A.phone})]}),n.jsxs("div",{className:"contact-actions",children:[A.phone&&n.jsx("a",{href:`tel:${A.phone}`,className:"btn-call",children:n.jsx(Le,{icon:Ee.contacts})}),n.jsx("button",{className:"btn-delete-sm",onClick:()=>m(A.id),children:""})]})]})},A.id))}),n.jsxs("form",{className:"add-contact-form glass-card",onSubmit:he,children:[n.jsx("h3",{children:"Add Contact"}),n.jsx("input",{type:"text",value:ce?"":we.name,onChange:A=>Ce(be=>({...be,name:A.target.value})),placeholder:"Name",required:!0,disabled:!!ce}),n.jsx("input",{type:"tel",value:ce?"":we.phone,onChange:A=>Ce(be=>({...be,phone:A.target.value})),placeholder:"Phone",disabled:!!ce}),n.jsx("input",{type:"text",value:ce?"":we.relationship,onChange:A=>Ce(be=>({...be,relationship:A.target.value})),placeholder:"Relationship",disabled:!!ce}),n.jsx("button",{type:"submit",className:"btn-glass-primary",disabled:!!ce,children:"Add Contact"})]}),n.jsxs("div",{className:"glass-card backup-card",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.doctor})}),n.jsx("div",{children:n.jsx("h3",{children:"Doctor / Hospital Info"})})]}),n.jsx("p",{className:"section-note",children:"Save your OB-GYN and hospital details for quick access."}),n.jsxs("div",{className:"doctor-form",children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"OB-GYN Name"}),n.jsx("input",{type:"text",value:s.name,onChange:A=>l(be=>({...be,name:A.target.value})),placeholder:"Dr. ..."})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Hospital / Clinic"}),n.jsx("input",{type:"text",value:s.hospital,onChange:A=>l(be=>({...be,hospital:A.target.value})),placeholder:"Hospital name"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Phone"}),n.jsxs("div",{className:"input-with-action",children:[n.jsx("input",{type:"tel",value:s.phone,onChange:A=>l(be=>({...be,phone:A.target.value})),placeholder:"0XX-XXXX-XXXX"}),s.phone&&n.jsx("a",{href:`tel:${s.phone}`,className:"btn-call",children:"Call"})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Address"}),n.jsx("input",{type:"text",value:s.address,onChange:A=>l(be=>({...be,address:A.target.value})),placeholder:"Hospital address"})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Notes"}),n.jsx("textarea",{value:s.notes,onChange:A=>l(be=>({...be,notes:A.target.value})),placeholder:"Visiting hours, special instructions, etc."})]})]})]})]}),P==="settings"&&n.jsxs("section",{className:"glass-section",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.backup})}),n.jsx("div",{children:n.jsx("h2",{children:"Settings & Backup"})})]}),n.jsxs("div",{className:"backup-section",children:[n.jsx("p",{className:"section-note",children:"Your data is stored in localStorage + IndexedDB. Para safe talaga, mag-backup ka regularly!"}),n.jsxs("div",{className:"glass-card backup-card notif-settings-card",children:[n.jsxs("div",{className:"section-header",children:[n.jsx("span",{className:"section-icon",children:n.jsx(Le,{icon:Ee.reminders})}),n.jsxs("div",{children:[n.jsx("h3",{children:"Notification Settings"}),n.jsx("span",{className:"section-count",children:"Per-device settings"})]}),n.jsx("button",{type:"button",className:`notif-toggle-btn glass-inner ${kt?"on":""}`,onClick:wt,children:kt?"Notifications ON":"Enable Notifications"})]}),n.jsxs("div",{className:"notif-settings-grid",children:[n.jsxs("div",{className:"notif-channel-grid",children:[n.jsxs("button",{type:"button",className:`notif-channel-btn glass-inner ${ka("reminders",ft)?"on":""}`,onClick:()=>Ne("reminders"),children:["Reminders ",ka("reminders",ft)?"ON":"OFF"]}),n.jsxs("button",{type:"button",className:`notif-channel-btn glass-inner ${ka("calendar",ft)?"on":""}`,onClick:()=>Ne("calendar"),children:["Calendar ",ka("calendar",ft)?"ON":"OFF"]}),n.jsxs("button",{type:"button",className:`notif-channel-btn glass-inner ${ka("dailyTip",ft)?"on":""}`,onClick:()=>Ne("dailyTip"),children:["Daily Tip ",ka("dailyTip",ft)?"ON":"OFF"]}),n.jsxs("button",{type:"button",className:`notif-channel-btn glass-inner ${ka("names",ft)?"on":""}`,onClick:()=>Ne("names"),children:["Names ",ka("names",ft)?"ON":"OFF"]})]}),n.jsxs("div",{className:"notif-quiet-grid",children:[n.jsx("button",{type:"button",className:`notif-pill-btn glass-inner ${Bt.enabled?"on":""}`,onClick:T,children:Bt.enabled?"Quiet Hours ON":"Quiet Hours OFF"}),n.jsxs("div",{className:"notif-time-row",children:[n.jsxs("label",{className:"notif-time-field",children:[n.jsx("span",{children:"Start"}),n.jsx("input",{type:"time",value:Bt.start,disabled:!Bt.enabled,onChange:A=>me("start",A.target.value)})]}),n.jsxs("label",{className:"notif-time-field",children:[n.jsx("span",{children:"End"}),n.jsx("input",{type:"time",value:Bt.end,disabled:!Bt.enabled,onChange:A=>me("end",A.target.value)})]})]})]})]}),n.jsxs("p",{className:"section-note",children:["Quiet hours: ",Qd(Bt),". During quiet hours, reminders stay silent pero badge updates continue."]}),n.jsxs("div",{className:"notif-diagnostics glass-inner",children:[n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Permission"}),n.jsx("strong",{children:Da==="unsupported"?"unsupported":Da})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Mode"}),n.jsx("strong",{children:Ga?"Home Screen App":"Browser tab"})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Service Worker"}),n.jsx("strong",{children:String(Te?.swState||"unknown")})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"SW Scope"}),n.jsx("strong",{children:String(Te?.swScope||"none")})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Push Subscription"}),n.jsx("strong",{children:String(Te?.subEndpoint||"none")})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Scoped SW Count"}),n.jsx("strong",{children:Number(Te?.scopedRegistrations||0)})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Quiet Hours Active"}),n.jsx("strong",{children:La?"yes":"no"})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Latest Status"}),n.jsx("strong",{children:ct||"none"})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Last Local Test"}),n.jsx("strong",{children:$a?new Date($a).toLocaleString():"none"})]}),n.jsxs("div",{className:"notif-diagnostic-row",children:[n.jsx("span",{children:"Latest History"}),n.jsx("strong",{children:ma?`${String(ma.status||"sent")} - ${String(ma.title||"").trim()||"Untitled"}`:"none"})]})]}),n.jsx("p",{className:"section-note",children:"New installs start with Notifications OFF by default. Enable manually per device."}),n.jsx("p",{className:"section-note",children:"Mood reminder slots: 12:00, 17:00, 20:00 (only if today has no mood log yet)."}),ct&&n.jsx("p",{className:"section-note",children:ct}),ge&&n.jsx("p",{className:"section-note",children:ge}),n.jsxs("button",{type:"button",className:"btn-glass-secondary",style:{marginTop:"8px",fontSize:"12px",opacity:.7},onClick:()=>tt(!De),children:[De?"Hide":"Show"," Advanced"]}),De&&n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"section-note",style:{marginTop:"8px"},children:["iPhone note: local test can be silent while app is open. For real lock-screen check, use ",n.jsx("strong",{children:"Send Test Push"})," and lock phone for 5-10 seconds."]}),n.jsxs("div",{className:"backup-cloud-actions notif-test-actions",children:[n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:Rn,children:"Send Local Test"}),n.jsx("button",{type:"button",className:"btn-glass-secondary",onClick:un,disabled:de||!qe,children:"Send Test Push"})]}),!qe&&n.jsx("p",{className:"section-note",children:"Sign in to Cloud Sync first to enable Send Test Push."}),z.length>0&&n.jsxs("details",{className:"push-debug-log",open:!0,children:[n.jsxs("summary",{children:["Push Debug Log (",z.length," steps)"]}),n.jsx("pre",{style:{fontSize:"11px",whiteSpace:"pre-wrap",wordBreak:"break-all",background:"rgba(0,0,0,0.3)",padding:"8px",borderRadius:"6px",maxHeight:"200px",overflow:"auto",margin:"6px 0"},children:z.join(`
`)}),n.jsx("button",{type:"button",className:"btn-glass-secondary",style:{fontSize:"11px",padding:"4px 10px",marginTop:"4px"},onClick:()=>{const A=z.join(`
`);if(navigator.clipboard?.writeText)navigator.clipboard.writeText(A).then(()=>k("Debug log copied!")).catch(()=>{});else{const be=document.createElement("textarea");be.value=A,document.body.appendChild(be),be.select(),document.execCommand("copy"),document.body.removeChild(be),k("Debug log copied!")}},children:"Copy Log"})]}),n.jsxs("button",{type:"button",className:"btn-glass-secondary",style:{marginTop:"8px",fontSize:"12px"},onClick:async()=>{if(F(!N),!N)try{const A=await lm();U(A)}catch(A){U({error:A?.message||"unknown"})}},children:[N?"Hide":"Show"," Push Diagnostics"]}),N&&X&&n.jsx("pre",{style:{fontSize:"11px",whiteSpace:"pre-wrap",wordBreak:"break-all",background:"rgba(0,0,0,0.3)",padding:"8px",borderRadius:"6px",maxHeight:"250px",overflow:"auto",margin:"6px 0"},children:JSON.stringify(X,null,2)})]})]}),n.jsxs("div",{className:"glass-card backup-card",children:[n.jsx("h3",{children:"Family Setup"}),n.jsx("p",{className:"section-note",children:"Control whether Shinji side appears in Work and Salary tabs."}),n.jsxs("div",{className:"household-toggle-row glass-inner",children:[n.jsxs("div",{children:[n.jsx("div",{className:"household-toggle-title",children:"Show Shinji side"}),n.jsx("div",{className:"household-toggle-note",children:"Turn off for single-mother mode"})]}),n.jsx("button",{type:"button",className:`notif-pill-btn glass-inner ${W?"on":""}`,onClick:()=>g(A=>({...A||{},includeHusband:!W})),children:W?"Enabled":"Disabled"})]})]}),n.jsxs("div",{className:"glass-card backup-card design-card",children:[n.jsx("h3",{children:"UI Icon Style (Local Preview)"}),n.jsx("p",{className:"section-note",children:"Choose the icon design you like. Saved on this device only."}),n.jsx("div",{className:"design-picker",children:Kx.map(A=>n.jsxs("button",{type:"button",className:`design-choice glass-inner ${$e===A.id?"active":""}`,onClick:()=>b(A.id),children:[n.jsx("span",{className:"design-choice-title",children:A.label}),n.jsx("span",{className:"design-choice-desc",children:A.description})]},A.id))})]}),n.jsxs("div",{className:"backup-actions",children:[n.jsxs("div",{className:"glass-card backup-card",children:[n.jsx("h3",{children:"Export Backup"}),n.jsx("p",{className:"section-note",children:"Downloads a JSON file with ALL your data + photos."}),n.jsx("button",{className:"btn-glass-primary",onClick:He,children:"Download Backup"})]}),n.jsxs("div",{className:"glass-card backup-card",children:[n.jsx("h3",{children:"Restore from Backup"}),n.jsx("p",{className:"section-note",children:"Upload a backup file. This overwrites current data."}),n.jsx("input",{ref:xt,type:"file",accept:".json",onChange:Je,style:{display:"none"}}),n.jsx("button",{className:"btn-glass-secondary",onClick:()=>xt.current?.click(),children:"Upload Backup File"})]}),n.jsxs("div",{className:"glass-card backup-card",children:[n.jsx("h3",{children:"Cloud Sync (Supabase)"}),ye?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"section-note",children:"Auto-sync is enabled per account. On sign in, your cloud data is applied automatically."}),qe?n.jsxs("p",{className:"cloud-user",children:["Signed in: ",qe.user.email||qe.user.id]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Email"}),n.jsx("input",{type:"email",value:Ve,onChange:A=>Xe(A.target.value),placeholder:"you@example.com",disabled:de})]}),n.jsxs("div",{className:"form-row",children:[n.jsx("label",{children:"Password"}),n.jsx("input",{type:"password",value:Ze,onChange:A=>lt(A.target.value),placeholder:"At least 6 characters",disabled:de})]}),n.jsxs("div",{className:"backup-cloud-actions",children:[n.jsx("button",{className:"btn-glass-primary",onClick:yt,disabled:de,children:"Sign In"}),n.jsx("button",{className:"btn-glass-secondary",onClick:at,disabled:de,children:"Sign Up"})]})]}),qe&&n.jsx("div",{className:"backup-cloud-actions",children:n.jsx("button",{className:"btn-glass-secondary",onClick:Oa,disabled:de,children:"Sign Out"})}),qe&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",className:"btn-glass-secondary",style:{marginTop:"8px",fontSize:"12px",opacity:.7},onClick:()=>tt(!De),children:[De?"Hide":"Show"," Advanced"]}),De&&n.jsxs("div",{style:{marginTop:"8px"},children:[n.jsxs("div",{className:"backup-cloud-actions",children:[n.jsx("button",{className:"btn-glass-primary",onClick:ba,disabled:de,children:"Force Upload"}),n.jsx("button",{className:"btn-glass-secondary",onClick:Ia,disabled:de,children:"Force Download"}),n.jsx("button",{className:"btn-glass-secondary",onClick:un,disabled:de,children:"Send Test Push"})]}),n.jsxs("p",{className:"section-note",style:{marginTop:"6px"},children:["Push status: ",Me?Qe?"Ready for Web Push setup.":"Missing VAPID key in frontend env.":"Not supported on this browser."]}),n.jsx("p",{className:"section-note",children:"iPhone note: install Peggy to Home Screen, then allow notifications when prompted."}),ge&&n.jsx("p",{className:"section-note",children:ge}),z.length>0&&n.jsxs("details",{className:"push-debug-log",children:[n.jsxs("summary",{style:{fontSize:"12px",cursor:"pointer"},children:["Debug Log (",z.length," steps)"]}),n.jsx("pre",{style:{fontSize:"11px",whiteSpace:"pre-wrap",wordBreak:"break-all",background:"rgba(0,0,0,0.3)",padding:"8px",borderRadius:"6px",maxHeight:"200px",overflow:"auto",margin:"6px 0"},children:z.join(`
`)}),n.jsx("button",{type:"button",className:"btn-glass-secondary",style:{fontSize:"11px",padding:"4px 10px",marginTop:"4px"},onClick:()=>{const A=z.join(`
`);if(navigator.clipboard?.writeText)navigator.clipboard.writeText(A).then(()=>k("Debug log copied!")).catch(()=>{});else{const be=document.createElement("textarea");be.value=A,document.body.appendChild(be),be.select(),document.execCommand("copy"),document.body.removeChild(be),k("Debug log copied!")}},children:"Copy Log"})]})]})]})]}):n.jsx("p",{className:"section-note",children:"Not configured yet. Add `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY` in `app/.env.local`."})]})]}),_&&n.jsx("div",{className:"backup-status glass-card",children:_}),Se&&n.jsx("div",{className:"backup-status cloud-status glass-card",children:Se}),n.jsxs("div",{className:"glass-card",children:[n.jsx("h3",{children:"Data Safety Tips"}),n.jsxs("ul",{className:"safety-tips",children:[n.jsx("li",{children:"Backup after every checkup or important data entry"}),n.jsx("li",{children:"Save backup to cloud (iCloud, Google Drive)"}),n.jsx("li",{children:"Deleting browser history MIGHT delete localStorage"}),n.jsx("li",{children:"IndexedDB is safer but not 100% guaranteed"}),n.jsx("li",{children:"The backup file has EVERYTHING including photos"})]})]})]})]})]})}const mc="peggy-cloud-active-user-id",j0="peggy-cloud-session-changed",Ij=new Set(["baby-prep-theme"]);function Uj(s){return String(s?.message||"").toLowerCase().includes("no cloud backup found")}function Kj(s){if(!s||typeof s!="object")return!1;if(Array.isArray(s.photos)&&s.photos.length>0)return!0;const l=s.appData||{};for(const[u,c]of Object.entries(l))if(!Ij.has(u)&&(Array.isArray(c)&&c.length>0||c&&typeof c=="object"&&Object.keys(c).length>0||typeof c=="string"&&c.trim()!==""||typeof c=="number"&&c!==0||typeof c=="boolean"&&c))return!0;return!1}function Fj(){const[s,l]=w.useState(()=>gi()),u=w.useRef(!1),c=w.useRef(!1),m=w.useRef(null),f=w.useRef(s);return w.useEffect(()=>{f.current=s},[s]),w.useEffect(()=>{if(!Ss()||typeof window>"u")return;const p=v=>{l(v?.detail?.session||gi())};window.addEventListener(j0,p),l(gi());let g=!1;return Hc().then(v=>{g||v?.accessToken&&v?.user?.id&&l(v)}),()=>{g=!0,window.removeEventListener(j0,p)}},[]),w.useEffect(()=>{if(!Ss())return;let p=!1;return(async()=>{if(u.current=!1,!s?.accessToken||!s?.user?.id){try{const b=await Hc();if(!p&&b?.accessToken&&b?.user?.id){l(b),u.current=!0;return}}catch{}if(localStorage.getItem(mc)){try{await ec()}catch{}localStorage.removeItem(mc)}u.current=!0;return}c.current=!0;try{const v=await vc(s);if(p)return;const b=localStorage.getItem(mc),x=!!(b&&b!==v.user.id);if(x)try{await ec()}catch{}try{const{backup:M}=await Nb(v);if(p)return;await zm(M)}catch(M){if(!Uj(M))throw M;if(x)try{await ec()}catch{}else{const C=await xc();if(Kj(C))await Dm(C,v);else try{await ec()}catch{}}}if(p)return;localStorage.setItem(mc,v.user.id)}catch{}finally{c.current=!1,u.current=!0}})(),()=>{p=!0}},[s?.accessToken,s?.user?.id]),w.useEffect(()=>{if(!Ss()||typeof window>"u")return;const p=()=>{const g=f.current;!u.current||c.current||!g?.accessToken||!g?.user?.id||(m.current&&clearTimeout(m.current),m.current=setTimeout(async()=>{const v=f.current;if(!c.current&&!(!v?.accessToken||!v?.user?.id))try{const b=await xc();await Dm(b,v)}catch{}},1200))};return window.addEventListener("peggy-local-changed",p),window.addEventListener("peggy-photo-changed",p),()=>{window.removeEventListener("peggy-local-changed",p),window.removeEventListener("peggy-photo-changed",p),m.current&&clearTimeout(m.current)}},[]),null}const N0="peggy-cloud-session-changed";function Yj(){const[s,l]=w.useState(()=>gi()),[u,c]=w.useState(()=>yo()),m=w.useRef(s),f=w.useRef(u),p=w.useRef(!1);return w.useEffect(()=>{m.current=s},[s]),w.useEffect(()=>{f.current=u},[u]),w.useEffect(()=>{if(typeof window>"u")return;const g=async()=>{if(!Ss()||p.current)return;const R=m.current;if(!(!R?.accessToken||!R?.user?.id)){p.current=!0;try{if(!As()){await Dl(R,{unsubscribeLocal:!1});return}const L=f.current;if(!L||Notification.permission!=="granted"){await Dl(R,{unsubscribeLocal:!L});return}await wc(R,{notifEnabled:L})}catch{}finally{p.current=!1}}},v=R=>{const L=R?.detail?.session||gi()||null;l(L),m.current=L,g()},b=()=>{const R=yo();c(R),f.current=R,g()},x=()=>{document.visibilityState==="visible"&&g()};window.addEventListener(N0,v),window.addEventListener(Rl,b),window.addEventListener("peggy-backup-restored",b),document.addEventListener("visibilitychange",x),window.addEventListener("focus",x),window.addEventListener("pageshow",x),window.addEventListener("online",x);let M=!1;Hc().then(R=>{M||R?.accessToken&&R?.user?.id&&(l(R),m.current=R,g())}),g();const C=window.setInterval(()=>{g()},120*1e3);return()=>{M=!0,window.removeEventListener(N0,v),window.removeEventListener(Rl,b),window.removeEventListener("peggy-backup-restored",b),document.removeEventListener("visibilitychange",x),window.removeEventListener("focus",x),window.removeEventListener("pageshow",x),window.removeEventListener("online",x),window.clearInterval(C)}},[]),null}const bo="/peggy/",$c=`${bo.replace(/\/+$/,"/")}icon-192.png`;async function T0(s){if(typeof navigator>"u")return;const l=typeof navigator.setAppBadge=="function",u=typeof navigator.clearAppBadge=="function";if(!(!l&&!u))try{const c=Math.max(0,Number(s)||0);if(c<=0){u?await navigator.clearAppBadge():l&&await navigator.setAppBadge(0);return}l&&await navigator.setAppBadge(Math.min(99,c))}catch{}}function Ol(s,l="gentle"){return s==="supp"?{titlePrefix:"",bodyPrefix:"Supplement check:",vibrate:l==="urgent"?[140,70,140]:[100,60,100]}:s==="work"?{titlePrefix:"",bodyPrefix:"Work log:",vibrate:l==="urgent"?[120,50,120,50,120]:[90,50,90]}:s==="tip"?{titlePrefix:"",bodyPrefix:"Daily tip:",vibrate:[70]}:s==="name"?{titlePrefix:"",bodyPrefix:"Name spotlight:",vibrate:[50,35,50]}:s==="plan"?{titlePrefix:"",bodyPrefix:"Plan:",vibrate:l==="urgent"?[110,60,110]:[70,40,70]}:{titlePrefix:"",bodyPrefix:"",vibrate:[80]}}function qj({title:s,body:l,slotKey:u,type:c="general",level:m="gentle",urgent:f=!1,url:p=bo,actions:g=null,actionUrls:v=null}){const b=Ol(c,m),x=`${b.titlePrefix} ${String(s||"").trim()}`.trim(),M=String(l||"").trim(),C=b.bodyPrefix?`${b.bodyPrefix} ${M}`.trim():M;try{const R={body:C,icon:$c,badge:$c,tag:`${c}:${u}`,renotify:f,requireInteraction:f||m==="urgent",vibrate:b.vibrate,timestamp:Date.now(),data:{type:c,level:m,url:p,actionUrls:v&&typeof v=="object"?v:{}}};Array.isArray(g)&&g.length>0&&(R.actions=g.slice(0,8)),new Notification(x,R)}catch{}}async function rm(s){const l=Ol(s?.type,s?.level),u=`${l.titlePrefix} ${String(s?.title||"").trim()}`.trim(),c=String(s?.body||"").trim(),f={body:l.bodyPrefix?`${l.bodyPrefix} ${c}`.trim():c,icon:$c,badge:$c,tag:`${String(s?.type||"general")}:${String(s?.slotKey||"")}`,renotify:!!s?.urgent,requireInteraction:!!(s?.urgent||s?.level==="urgent"),vibrate:l.vibrate,timestamp:Date.now(),data:{type:s?.type||"general",level:s?.level||"gentle",url:s?.url||bo,actionUrls:s?.actionUrls&&typeof s.actionUrls=="object"?s.actionUrls:{}}};Array.isArray(s?.actions)&&s.actions.length>0&&(f.actions=s.actions.slice(0,8));try{if(typeof navigator<"u"&&"serviceWorker"in navigator){const p=await navigator.serviceWorker.ready;if(p?.showNotification){await p.showNotification(u,f);return}}}catch{}qj(s)}const Wj=120*1e3,Pj={prenatal:"Prenatal",dha:"DHA",calcium:"Calcium",chlorella:"Chlorella",choline:"Choline",vitd:"Vitamin D"};function Gj(s){return!s||!s.length?"EMPTY":s.map(l=>`${l.type}|${l.tag}|${l.fireAt||""}|${l.notificationTitle}`).join(";;")}function Vj(s,l,u,c,m,f){const p=[],g=f.toDateString(),v=`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(f.getDate()).padStart(2,"0")}`,b=f.getTime()-7200*1e3,x={};for(const W of Object.keys(s||{})){const P=s[W];if(!P?.enabled)continue;(Array.isArray(P.times)?P.times:[]).forEach((xe,te)=>{const ue=`${W}-${te}-${g}`;l[ue]!==!0&&(x[xe]||(x[xe]=[]),x[xe].push(Pj[W]||W))})}for(const W of Object.keys(x)){const P=x[W],Z=W.split(":").map(Number),xe=new Date(f.getFullYear(),f.getMonth(),f.getDate(),Z[0],Z[1]||0,0);if(xe.getTime()<b)continue;const te=xe.getTime()<=f.getTime(),ue=Ol("supp",te?"urgent":"gentle"),se=te?"Overdue supplements":"Supplement time";p.push({type:"supp",level:te?"urgent":"gentle",notificationTitle:`${ue.titlePrefix} ${se}`.trim(),notificationBody:`${ue.bodyPrefix} Take ${P.join(", ")}`.trim(),tag:`supp-${v}-${W}`,fireAt:xe.toISOString(),priorityScore:te?90:70})}const M=f.getDay()>=1&&f.getDay()<=5,C=u&&u[v];if(M&&!C)for(const{hour:W,level:P}of[{hour:11,level:"gentle"},{hour:17,level:"urgent"}]){const Z=new Date(f.getFullYear(),f.getMonth(),f.getDate(),W,0,0);if(Z.getTime()<b)continue;const xe=Ol("work",P);p.push({type:"work",level:P,notificationTitle:`${xe.titlePrefix} Work attendance`.trim(),notificationBody:`${xe.bodyPrefix} Log today's work attendance`.trim(),tag:`work-${v}-${W}`,fireAt:Z.toISOString(),priorityScore:P==="urgent"?75:50})}if(!(Array.isArray(m)&&m.some(W=>String(W?.date||W?.createdAt||"").startsWith(v))))for(const{hour:W,label:P,level:Z}of[{hour:12,label:"Kumusta feeling mo today?",level:"gentle"},{hour:17,label:"Afternoon mood check-in",level:"nudge"},{hour:20,label:"Evening mood check-in",level:"urgent"}]){const xe=new Date(f.getFullYear(),f.getMonth(),f.getDate(),W,0,0);xe.getTime()<b||p.push({type:"mood",level:Z,notificationTitle:" Mood check",notificationBody:P,tag:`mood-${v}-${W}`,fireAt:xe.toISOString(),priorityScore:Z==="urgent"?65:40})}const L=Array.isArray(c?.[v])?c[v]:[];for(const W of L){if(W.done)continue;const P=String(W.time||"").trim();if(!P)continue;const Z=P.split(":").map(Number);if(!Number.isFinite(Z[0]))continue;const xe=new Date(f.getFullYear(),f.getMonth(),f.getDate(),Z[0],Z[1]||0,0),te=new Date(xe.getTime()-900*1e3);if(te.getTime()<b)continue;const ue=Ol("plan","gentle");p.push({type:"plan",level:"gentle",notificationTitle:`${ue.titlePrefix} ${String(W.title||"Upcoming event").trim()}`.trim(),notificationBody:`${ue.bodyPrefix} ${P}  ${String(W.title||"").trim()}`.trim(),tag:`plan-${v}-${W.id||P}`,fireAt:te.toISOString(),priorityScore:85})}return p.sort((W,P)=>new Date(W.fireAt).getTime()-new Date(P.fireAt).getTime()),p}function Xj(){const{dailySupp:s,suppSchedule:l,attendance:u,planner:c,moods:m}=Fn(),f=w.useRef(""),p=w.useRef(0),g=w.useRef(!1);return w.useEffect(()=>{if(typeof window>"u"||typeof Notification>"u")return;const v=()=>{if(!yo()){T0(0);return}T0(0);const x=new Date,M=qm({dailySupp:s,suppSchedule:l,now:x}),C=Wm({attendance:u,now:x}),R=Pm({moods:m,now:x}),L=Gm({planner:c,now:x}),W=vo(),P=ka("reminders",W),Z=ka("calendar",W),xe=ka("dailyTip",W),te=ka("names",W),ue=[];if(P&&M.remainingDoses>0&&ue.push(Vm(M,x,"notify")),P&&C.needsReminder&&ue.push(Xm(C,x,"notify")),P&&R.needsReminder){const O=Qm(R,x,"notify");O&&ue.push(O)}if(Z&&L?.candidate?.planId){const O=Zm(L,x,"notify");O&&ue.push(O)}if(Ss()&&As()){const O=Vj(l,s,u,c,m,x),le=Gj(O),ve=Date.now()-p.current;if(le!==f.current&&ve>=Wj&&!g.current){const ce=gi();ce?.accessToken&&(g.current=!0,Mj(O,Qi(),ce).then(()=>{f.current=le,p.current=Date.now()}).catch(()=>{}).finally(()=>{g.current=!1}))}}const se=ue.filter(O=>!Zd(O.slotKey,x)).sort((O,le)=>le.priorityScore-O.priorityScore)[0]||null,ae=lb(x,Hl()),V=Notification.permission==="granted",K=!ae&&V;if(!K&&se){const O=ae?"quiet-hours":V?"foreground-suppressed":"permission-not-granted";Kn({title:se.notificationTitle,body:se.notificationBody,type:se.type,level:se.level,status:"missed",reason:O,source:"local",slotKey:se.slotKey,dedupeKey:`${se.slotKey}|missed|${O}`,createdAt:x.toISOString(),read:!1})}if(K){if(se){const O=se.type==="mood",le=Array.isArray(se.moodQuickActions)?se.moodQuickActions:[],ve=le.map(fe=>({action:`quick_mood_${String(fe.code||"").trim()}`,title:String(fe.label||fe.emoji||"").trim()})).filter(fe=>fe.action&&fe.title),ce=Object.fromEntries(le.map(fe=>{const we=String(fe?.code||"").trim();return we?[`quick_mood_${we}`,`${bo}?openMood=1&quickMood=${encodeURIComponent(we)}`]:["",""]}).filter(([fe,we])=>fe&&we));rm({title:se.notificationTitle,body:se.notificationBody,slotKey:se.slotKey,type:se.type,level:se.level,urgent:se.level==="urgent",url:O?`${bo}?openMood=1`:bo,actions:O?ve:[],actionUrls:O?ce:{}}),Jd(se.slotKey,x),Kn({title:se.notificationTitle,body:se.notificationBody,type:se.type,level:se.level,status:"sent",reason:"",source:"local",slotKey:se.slotKey,dedupeKey:`${se.slotKey}|sent`,createdAt:x.toISOString(),read:!1});return}if(xe){const O=ib({now:x,suppCtx:M}),le=N1({now:x,dailyTip:O,seedSalt:"notify"});if(!Zd(le.slotKey,x)){rm({title:le.notificationTitle,body:le.notificationBody,slotKey:le.slotKey,type:le.type,level:le.level,urgent:!1}),Jd(le.slotKey,x),Kn({title:le.notificationTitle,body:le.notificationBody,type:le.type,level:le.level,status:"sent",source:"local",slotKey:le.slotKey,dedupeKey:`${le.slotKey}|sent`,createdAt:x.toISOString(),read:!1});return}}if(te){const O=sb({now:x,babyNamesInfo:Cn,seedSalt:"notify"}),le=`${O.slotKey}|name-notif`;!Zd(le,x)&&x.getMinutes()%2===0&&(rm({title:O.notificationTitle,body:O.notificationBody,slotKey:le,type:"name",level:"gentle",urgent:!1}),Jd(le,x),Kn({title:O.notificationTitle,body:O.notificationBody,type:"name",level:"gentle",status:"sent",source:"local",slotKey:le,dedupeKey:`${le}|sent`,createdAt:x.toISOString(),read:!1}))}}};v();const b=window.setInterval(v,45*1e3);return()=>{window.clearInterval(b)}},[s,l,u,c,m]),null}const Rb=So("PeggyWidgetSync");function _b(){try{return Ns?.isNativePlatform?.()&&Ns?.getPlatform?.()==="ios"}catch{return!1}}function ks(s,l=0){const u=Number(s);return Number.isFinite(u)?u:l}function cm(s){return typeof s=="string"?s:String(s??"")}function Qj(s={}){const l=cm(s.dueDate||"");return{updatedAt:cm(s.updatedAt||new Date().toISOString()),dueDate:l,daysUntilDue:ks(s.daysUntilDue,0),weeksPregnant:ks(s.weeksPregnant,0),supplementsTaken:ks(s.supplementsTaken,0),supplementsTotal:Math.max(1,ks(s.supplementsTotal,1)),checkupsDone:ks(s.checkupsDone,0),checkupsTotal:Math.max(1,ks(s.checkupsTotal,1)),openTasks:Math.max(0,ks(s.openTasks,0)),attendedToday:!!s.attendedToday,reminderText:cm(s.reminderText||"")}}async function Zj(s){if(!_b())return{skipped:!0,reason:"not-native-ios"};const l=Qj(s);try{return await Rb.setSnapshot({snapshot:l}),{ok:!0}}catch{return{skipped:!0,reason:"plugin-not-ready"}}}async function Jj(){if(!_b())return{skipped:!0,reason:"not-native-ios"};try{return await Rb.reloadTimelines(),{ok:!0}}catch{return{skipped:!0,reason:"plugin-not-ready"}}}const eN=300*1e3;function tN(s=new Date){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function aN(s){if(!s)return!1;const l=new Date(s);return Number.isFinite(l.getTime())}function nN(){const{checked:s,dailySupp:l,dueDate:u,checkups:c,suppSchedule:m,attendance:f}=Fn(),p=w.useRef(""),g=w.useRef(0),v=w.useMemo(()=>{const x=new Date,M=tN(x),C=x.toDateString();let R=0,L=0;cn.forEach(O=>{const le=m?.[O.id];if(le?.enabled===!1)return;(le?.times||O.defaultTimes).forEach((ce,fe)=>{L+=1,l?.[`${O.id}-${fe}-${C}`]&&(R+=1)})});const W=pi.filter(O=>c?.[O.id]?.completed).length,P=pi.length,Z=js.reduce((O,le)=>O+le.items.length,0),xe=js.reduce((O,le)=>O+le.items.filter(ve=>s?.[ve.id]).length,0),te=Math.max(0,Z-xe),ue=!!f?.[M]?.worked;let se=0,ae=0;if(aN(u)){const O=new Date(u);se=Math.ceil((O.getTime()-x.getTime())/(1e3*60*60*24)),ae=Math.max(0,40-Math.ceil(se/7))}const V=Math.max(0,L-R),K=V>0?`${V} supplement dose(s) left today`:te>0?`${te} open task(s) to review`:"All key items done today";return{updatedAt:x.toISOString(),dueDate:u||"",daysUntilDue:se,weeksPregnant:ae,supplementsTaken:R,supplementsTotal:L,checkupsDone:W,checkupsTotal:P,openTasks:te,attendedToday:ue,reminderText:K}},[s,l,u,c,m,f]),b=w.useMemo(()=>JSON.stringify(v),[v]);return w.useEffect(()=>{if(typeof window>"u")return;let x=!1;const M=window.setTimeout(async()=>{if(x||b===p.current||(p.current=b,!(await Zj(v))?.ok))return;const R=Date.now();R-g.current<eN||(g.current=R,await Jj())},700);return()=>{x=!0,window.clearTimeout(M)}},[b,v]),null}const iN=50,Lb=180,sN=220,oN=8,lN=90,rN=3e3,cN=720,uN=60;function dN(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function A0(s,l){const u=Number(s),c=Number(l);return Number.isFinite(u)&&Number.isFinite(c)&&u>=-90&&u<=90&&c>=-180&&c<=180}function hc(s){return Number(s)*Math.PI/180}function M0(s,l,u,c){const f=hc(u-s),p=hc(c-l),g=Math.sin(f/2)**2+Math.cos(hc(s))*Math.cos(hc(u))*Math.sin(p/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))}function E0(s,l=Lb){return Math.min(rN,Math.max(iN,Number(s)||l))}function mN(s){return Math.min(12,Math.max(.5,Number(s)||oN))}function hN(s){return Math.min(cN,Math.max(15,Number(s)||lN))}function C0({personKey:s="naomi"}){const{attendance:l,markAttendance:u,workLocation:c,setWorkLocation:m,husbandAttendance:f,markHusbandAttendance:p,husbandWorkLocation:g,setHusbandWorkLocation:v}=Fn(),b=String(s||"").trim().toLowerCase()==="husband",x=b?"husband":"naomi",M=b?f:l,C=b?p:u,R=b?g:c,L=b?v:m,W=w.useRef(null),P=w.useRef(null),Z=w.useRef(M),xe=w.useRef(C),te=w.useRef(""),ue=w.useRef(!!R.enabled);w.useEffect(()=>{Z.current=M},[M]),w.useEffect(()=>{xe.current=C},[C]);const se=V=>{const K=String(V||"");K!==te.current&&(te.current=K,yl({status:K},x))},ae=w.useMemo(()=>({enabled:!!R.enabled,lat:R.lat,lng:R.lng,radiusMeters:R.radiusMeters,homeLat:R.homeLat,homeLng:R.homeLng,homeRadiusMeters:R.homeRadiusMeters,homeName:R.homeName,autoHours:R.autoHours,awayMinutesForWork:R.awayMinutesForWork,name:R.name}),[R.enabled,R.lat,R.lng,R.radiusMeters,R.homeLat,R.homeLng,R.homeRadiusMeters,R.homeName,R.autoHours,R.awayMinutesForWork,R.name]);return w.useEffect(()=>{const V=async()=>{const k=W.current;if(W.current=null,typeof k=="function")try{await k()}catch{}},K=()=>{yl({live:{tracking:!1,inside:!1,insideWork:!1,insideHome:!1,distanceMeters:null,distanceWorkMeters:null,distanceHomeMeters:null,accuracyMeters:null,updatedAt:new Date().toISOString()}},x)};if(!ae.enabled){V(),P.current=null,K(),ue.current?se("Location tracker disabled."):se(""),ue.current=!1;return}ue.current=!0;const O=A0(ae.lat,ae.lng),le=A0(ae.homeLat,ae.homeLng);if(!O&&!le){V(),P.current=null,K(),se("Tracker enabled, but no valid saved location found. Save Work or Home first.");return}const ve=Number(ae.lat),ce=Number(ae.lng),fe=Number(ae.homeLat),we=Number(ae.homeLng),Ce=E0(ae.radiusMeters,Lb),_=E0(ae.homeRadiusMeters,sN),Q=mN(ae.autoHours),Se=hN(ae.awayMinutesForWork);P.current=null,V(),se(O?`Location tracker active (work radius ${Math.round(Ce)}m).`:`Location tracker active (home-away mode, ${Math.round(Se)} min).`);let Y=!1;return(async()=>{try{const k=await CS({distanceFilter:15,background:!0,onLocation:z=>{if(Y||!z)return;const re=Number(z.latitude),N=Number(z.longitude),F=Number(z.accuracy),X=!Number.isFinite(F)||F<=uN,U=Date.now(),Te=O?M0(re,N,ve,ce):null,Ae=le?M0(re,N,fe,we):null,De=Te===null?null:Math.round(Te),tt=Ae===null?null:Math.round(Ae),de=De!==null&&De<=Ce,Oe=tt!==null&&tt<=_;if(yl({live:{tracking:!0,inside:de||Oe,insideWork:de,insideHome:Oe,distanceMeters:de?De:tt,distanceWorkMeters:De,distanceHomeMeters:tt,accuracyMeters:Number.isFinite(F)?Math.round(F):null,updatedAt:new Date().toISOString()}},x),!X){se("GPS accuracy is weak right now. Waiting for a stronger signal before auto logging.");return}Oe&&(P.current=null);let Xe="";if(de?Xe="work-zone":!O&&le&&(Oe||(P.current||(P.current=U),(U-P.current)/6e4>=Se&&(Xe="away-from-home"))),!Xe)return;const Ze=dN(),lt=Z.current[Ze];if(!lt?.worked){const qe=String(ae.name||"work location").trim()||"work location",rt=String(ae.homeName||"home").trim()||"home",Wt=Xe==="work-zone"?`arrived at ${qe}`:`away from ${rt} for ${Math.round(Se)}+ min`,xt=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Me=`${lt?.note?`${lt.note} | `:""}Auto logged: ${Wt} (${xt})`;xe.current(Ze,{worked:!0,hours:Q,note:Me}),se(Xe==="work-zone"?"Auto logged: marked Worked today after entering work zone.":"Auto logged: marked Worked today after prolonged time away from home.")}L(qe=>qe.lastAutoLogDate===Ze&&qe.lastAutoReason===Xe?qe:{...qe,lastAutoLogDate:Ze,lastInsideAt:new Date().toISOString(),lastAutoReason:Xe})},onError:z=>{if(Y)return;yl({live:{tracking:!1,inside:!1,insideWork:!1,insideHome:!1,distanceMeters:null,distanceWorkMeters:null,distanceHomeMeters:null,accuracyMeters:null,updatedAt:new Date().toISOString()}},x);const re=String(z?.code||"").toUpperCase(),N=String(z?.message||"");re==="NOT_AUTHORIZED"||re==="1"||N.toLowerCase().includes("permission")?se("Location permission denied. Enable location access to use auto work logging."):re==="3"||N.toLowerCase().includes("timeout")?se("Location request timed out. Tracker will retry automatically."):se("Location unavailable right now. Tracker will retry automatically.")}});if(Y){try{await k()}catch{}return}W.current=k}catch{if(Y)return;yl({live:{tracking:!1,inside:!1,insideWork:!1,insideHome:!1,distanceMeters:null,distanceWorkMeters:null,distanceHomeMeters:null,accuracyMeters:null,updatedAt:new Date().toISOString()}},x),se("Could not start location tracker on this device.")}})(),()=>{Y=!0,V()}},[ae,L,x]),null}const D0=145,fN=12e3,O0=2,R0=2200,pN=4500;function gN(){if(typeof document>"u")return!1;const s=document.activeElement;if(!s)return!1;const l=String(s.tagName||"").toUpperCase();return l==="INPUT"||l==="TEXTAREA"||s.isContentEditable}async function yN(){if(typeof navigator>"u"||!("serviceWorker"in navigator))return;const s=(l,u)=>new Promise(c=>{let m=!1;const f=window.setTimeout(()=>{m||(m=!0,c(!1))},u);Promise.resolve(l).then(p=>{m||(m=!0,window.clearTimeout(f),c(p))}).catch(()=>{m||(m=!0,window.clearTimeout(f),c(!1))})});try{const l=await s(navigator.serviceWorker.ready,R0);return l?(await s(l.update(),R0),!!(l.installing||l.waiting)):!1}catch{}return!1}function bN(){if(typeof window>"u")return;let s=!1;const l=()=>{s=!0};window.addEventListener("pagehide",l,{once:!0});const u=Date.now();try{const c=new URL(window.location.href);c.searchParams.set("_r",String(u)),window.location.assign(c.toString())}catch{try{window.location.reload()}catch{}}window.setTimeout(()=>{if(!s)try{window.location.reload()}catch{}},900),window.setTimeout(()=>{if(!s)try{const c=`${window.location.origin}${window.location.pathname}`;window.location.href=`${c}?_r=${u}&_rf=1`}catch{}},1700)}function vN(){return typeof document>"u"?null:document.getElementById("peggy-scroll-root")||document.scrollingElement||document.documentElement||document.body||null}function _m(s){if(!s)return 0;const l=Number(s.scrollTop);return Number.isFinite(l)?l:0}function wN(){if(typeof document>"u"||typeof window>"u")return 0;const s=document.getElementById("peggy-scroll-root"),l=_m(s),u=_m(document.scrollingElement||document.documentElement||document.body),c=Number.isFinite(Number(window.scrollY))?Number(window.scrollY):0;return Math.max(l,u,c)}function um(s){return _m(s)>O0?!1:wN()<=O0}function kN(s){return s instanceof Element?s.closest(".day-detail-sheet, .photo-modal-content")||s.closest(".theme-toggle, .bottom-nav")?!0:!!s.closest('input, textarea, select, [contenteditable="true"]'):!1}function xN(){const[s,l]=w.useState({visible:!1,progress:0,armed:!1,refreshing:!1}),u=w.useRef(!1),c=w.useRef({active:!1,startY:0,currentY:0,atTop:!1,triggered:!1,scroller:null,eligible:!1}),m=w.useRef(0),f=w.useRef(null),p=w.useRef(null);w.useEffect(()=>{u.current=s.refreshing},[s.refreshing]),w.useEffect(()=>{if(typeof window>"u"||typeof document>"u")return;const b=()=>{f.current&&(window.clearTimeout(f.current),f.current=null)},x=()=>{p.current&&(window.clearTimeout(p.current),p.current=null)},M=()=>{l(Z=>({...Z,visible:Z.progress>.03||Z.refreshing}))},C=(Z=120)=>{b(),f.current=window.setTimeout(()=>{l({visible:!1,progress:0,armed:!1,refreshing:!1})},Z)},R=()=>{c.current={active:!1,startY:0,currentY:0,atTop:!1,triggered:!1,scroller:null,eligible:!1}},L=Z=>{if(u.current)return;if(Z.touches?.length!==1){R();return}if(kN(Z.target)){R();return}const xe=Z.touches?.[0];if(!xe)return;const te=vN();c.current={active:!0,startY:xe.clientY,currentY:xe.clientY,atTop:um(te),triggered:!1,scroller:te,eligible:um(te)},C(30)},W=Z=>{if(!c.current.active||c.current.triggered||!c.current.atTop||!c.current.eligible)return;const xe=Z.touches?.[0];if(!xe)return;if(!um(c.current.scroller)){c.current.eligible=!1,C(20);return}c.current.currentY=xe.clientY;const te=xe.clientY-c.current.startY,ue=Math.max(0,te),se=Math.min(1,ue/D0),ae=se>=1;l(V=>V.visible&&Math.abs(V.progress-se)<.02&&V.armed===ae&&!V.refreshing?V:{visible:ue>6,progress:se,armed:ae,refreshing:!1}),ae&&(c.current.triggered=!0)},P=async()=>{const{triggered:Z,startY:xe,currentY:te}=c.current,ue=Math.max(0,Number(te)-Number(xe));if(R(),!Z||ue<D0){l(V=>({...V,armed:!1,refreshing:!1})),C(130);return}if(gN())return;const se=Date.now();if(se-m.current<fN){M(),C(220);return}m.current=se,l({visible:!0,progress:1,armed:!0,refreshing:!0}),x(),p.current=window.setTimeout(()=>{l(V=>({...V,refreshing:!1,armed:!1})),C(220)},pN);try{window.dispatchEvent(new CustomEvent("peggy-force-update"))}catch{}const ae=await yN();window.setTimeout(()=>{bN()},ae?240:140)};return document.addEventListener("touchstart",L,{passive:!0,capture:!0}),document.addEventListener("touchmove",W,{passive:!0,capture:!0}),document.addEventListener("touchend",P,{capture:!0}),document.addEventListener("touchcancel",P,{capture:!0}),()=>{b(),x(),document.removeEventListener("touchstart",L,{capture:!0}),document.removeEventListener("touchmove",W,{capture:!0}),document.removeEventListener("touchend",P,{capture:!0}),document.removeEventListener("touchcancel",P,{capture:!0})}},[]);const g=`pull-refresh-indicator ${s.visible?"show":""} ${s.refreshing?"refreshing":""}`,v=s.refreshing?"Refreshing...":s.armed?"Release to refresh":"Pull to refresh";return n.jsx("div",{className:g,"aria-hidden":"true",children:n.jsxs("div",{className:"pull-refresh-surface",children:[n.jsx("div",{className:"pull-refresh-spinner-wrap",children:n.jsx("div",{className:"pull-refresh-spinner",style:{"--pull-progress":s.progress}})}),n.jsx("div",{className:"pull-refresh-text",children:v})]})})}const co=8,Fi=36;function _0(s,l,u){return Math.min(Math.max(s,l),u)}function SN(){const[s,l]=w.useState("home"),[u,c]=w.useState(null),{theme:m,toggleTheme:f,iconStyle:p,addMood:g,moods:v}=Fn(),b=w.useRef(null),x=w.useRef(null),M=w.useRef(!1),C=w.useRef({active:!1,pointerId:null,startX:0,startY:0,originX:0,originY:0,moved:!1}),R=Fm(p),L=Fx(R),W=[{id:"home",label:"Home",icon:L.home},{id:"tasks",label:"Tasks",icon:L.tasks},{id:"money",label:"Finance",icon:L.money},{id:"health",label:"Health",icon:L.health},{id:"more",label:"More",icon:L.more}],P=m==="dark"?ey.dark:ey.light,Z=K=>{const O=b.current;!O||!K||(O.style.left=`${K.x}px`,O.style.top=`${K.y}px`,O.style.right="auto")},xe=()=>{const K=b.current;K&&(K.style.left="",K.style.top="",K.style.right="")},te=(K,O,le=Fi,ve=Fi)=>{if(typeof window>"u")return{x:K,y:O};const ce=Math.max(co,window.innerWidth-le-co),fe=Math.max(co,window.innerHeight-ve-co);return{x:_0(K,co,ce),y:_0(O,co,fe)}},ue=K=>{if(typeof K.button=="number"&&K.button!==0)return;const O=b.current;if(!O)return;const le=O.getBoundingClientRect();C.current={active:!0,pointerId:K.pointerId,startX:K.clientX,startY:K.clientY,originX:le.left,originY:le.top,moved:!1},x.current={x:le.left,y:le.top},O.setPointerCapture?.(K.pointerId)},se=K=>{const O=C.current;if(!O.active||O.pointerId!==K.pointerId)return;const le=K.clientX-O.startX,ve=K.clientY-O.startY;if(!O.moved&&Math.hypot(le,ve)>4&&(O.moved=!0),!O.moved)return;K.preventDefault();const ce=b.current?.getBoundingClientRect(),fe=te(O.originX+le,O.originY+ve,ce?.width||Fi,ce?.height||Fi);x.current=fe,Z(fe)},ae=K=>{const O=C.current;!O.active||O.pointerId!==K.pointerId||(O.moved&&(M.current=!0,x.current&&c(x.current)),C.current={active:!1,pointerId:null,startX:0,startY:0,originX:0,originY:0,moved:!1},b.current?.releasePointerCapture?.(K.pointerId))},V=()=>{if(M.current){M.current=!1;return}f()};return w.useEffect(()=>{if(typeof window>"u")return;const K=()=>{const O=x.current;if(!O)return;const le=b.current?.getBoundingClientRect(),ve=te(O.x,O.y,le?.width||Fi,le?.height||Fi);x.current=ve,Z(ve),c(ce=>{if(!ce)return ve;const fe=b.current?.getBoundingClientRect(),we=te(ce.x,ce.y,fe?.width||Fi,fe?.height||Fi);return we.x===ce.x&&we.y===ce.y?ce:we})};return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),w.useEffect(()=>{if(!u){xe();return}x.current=u,Z(u)},[u]),w.useEffect(()=>{if(typeof window>"u")return;const K=()=>{l("health"),window.setTimeout(()=>{window.dispatchEvent(new CustomEvent("peggy-open-health-subtab",{detail:{subTab:"mood"}}))},30)};return window.addEventListener("peggy-open-health-mood",K),()=>window.removeEventListener("peggy-open-health-mood",K)},[]),w.useEffect(()=>{if(typeof window>"u")return;let K;try{K=new URL(window.location.href)}catch{return}const O=K.searchParams.get("openMood")==="1",le=String(K.searchParams.get("quickMood")||"").trim().toLowerCase(),ve=f1(le);if(!O&&!ve)return;if(O&&window.dispatchEvent(new CustomEvent("peggy-open-health-mood")),ve){const we=new Date().toDateString();Array.isArray(v)&&v.some(_=>{const Q=_?.date;if(!Q)return!1;const Se=new Date(Q);return Number.isNaN(Se.getTime())?!1:Se.toDateString()===we})||g({mood:ve,energy:3,cravings:"",notes:"Quick mood log from notification"})}K.searchParams.delete("openMood"),K.searchParams.delete("quickMood");const ce=K.searchParams.toString(),fe=`${K.pathname}${ce?`?${ce}`:""}${K.hash||""}`;window.history.replaceState({},"",fe)},[g,v]),w.useEffect(()=>{if(typeof navigator>"u"||!("serviceWorker"in navigator))return;const K=O=>{const le=String(O?.data?.type||"").trim(),ve=O?.data?.payload&&typeof O.data.payload=="object"?O.data.payload:{};if(le==="peggy-sw-push"){Kn({title:String(ve.title||"Peggy push").trim(),body:String(ve.body||"").trim(),type:"push",level:"gentle",status:"delivered",source:"push",slotKey:String(ve.tag||ve.url||"").trim(),dedupeKey:`${String(ve.tag||"push")}|${String(ve.createdAt||"").slice(0,13)}`,createdAt:ve.createdAt||new Date().toISOString(),read:!1});return}if(le==="peggy-sw-notification-click"){Kn({title:"Notification opened",body:String(ve.targetUrl||"").trim(),type:"push",level:"gentle",status:"opened",source:"push",slotKey:String(ve.targetUrl||"").trim(),dedupeKey:`${String(ve.targetUrl||"opened")}|opened|${String(ve.createdAt||"").slice(0,16)}`,createdAt:ve.createdAt||new Date().toISOString(),read:!0});return}if(le==="peggy-sw-local-test-ack"){const ce=!!ve.ok,fe=ve.createdAt||new Date().toISOString(),we=String(ve.tag||"").trim();Kn({title:ce?"Local test acknowledged by Service Worker":"Local test failed in Service Worker",body:ce?String(ve.title||"Peggy local test sent").trim():String(ve.error||"unknown-error").trim(),type:"test",level:ce?"gentle":"nudge",status:ce?"sent":"missed",source:"service-worker",reason:ce?"":"sw-local-test-failed",slotKey:we,dedupeKey:ce?`sw-local-test-ok|${we}|${String(fe).slice(0,16)}`:`sw-local-test-failed|${String(fe).slice(0,16)}`,createdAt:fe,read:!1}),window.dispatchEvent(new CustomEvent("peggy-local-test-ack",{detail:{ok:ce,tag:we,error:String(ve.error||"").trim(),createdAt:fe}}))}};return navigator.serviceWorker.addEventListener("message",K),()=>navigator.serviceWorker.removeEventListener("message",K)},[]),w.useEffect(()=>{if(typeof navigator>"u")return;const K=typeof navigator.setAppBadge=="function",O=typeof navigator.clearAppBadge=="function";if(!K&&!O)return;const le=async()=>{try{if(O){await navigator.clearAppBadge();return}K&&await navigator.setAppBadge(0)}catch{}},ve=()=>{(typeof document>"u"||document.visibilityState==="visible")&&le()};return le(),typeof document<"u"&&document.addEventListener("visibilitychange",ve),window.addEventListener("focus",ve),()=>{typeof document<"u"&&document.removeEventListener("visibilitychange",ve),window.removeEventListener("focus",ve)}},[]),n.jsxs("div",{className:`app ${m} icon-${R}`,children:[n.jsx("button",{ref:b,className:"theme-toggle",onPointerDown:ue,onPointerMove:se,onPointerUp:ae,onPointerCancel:ae,onClick:V,title:`Switch to ${m==="dark"?"light":"dark"} mode`,style:u?{left:`${u.x}px`,top:`${u.y}px`,right:"auto"}:void 0,children:n.jsx(Le,{icon:P})}),n.jsxs("main",{id:"peggy-scroll-root",className:"app-main",children:[s==="home"&&n.jsx(U1,{}),s==="tasks"&&n.jsx(lS,{}),s==="money"&&n.jsx(ij,{}),s==="health"&&n.jsx(mj,{}),s==="more"&&n.jsx($j,{})]}),n.jsx("nav",{className:"bottom-nav",children:W.map(K=>n.jsxs("button",{className:`nav-btn ${s===K.id?"active":""}`,onClick:()=>l(K.id),children:[n.jsx("span",{className:"nav-icon",children:n.jsx(Le,{icon:K.icon})}),n.jsx("span",{className:"nav-label",children:K.label})]},K.id))})]})}function jN(){return n.jsxs(Qw,{children:[n.jsx(Fj,{}),n.jsx(Yj,{}),n.jsx(Xj,{}),n.jsx(nN,{}),n.jsx(C0,{personKey:"naomi"}),n.jsx(C0,{personKey:"husband"}),n.jsx(xN,{}),n.jsx(SN,{})]})}_w.createRoot(document.getElementById("root")).render(n.jsx(w.StrictMode,{children:n.jsx(jN,{})}));if("serviceWorker"in navigator){let s=!1,l=!!navigator.serviceWorker.controller;const u="5d1d0b2",c=()=>{if(typeof document>"u")return!1;const b=document.activeElement;if(!b)return!1;const x=String(b.tagName||"").toUpperCase();return x==="INPUT"||x==="TEXTAREA"||b.isContentEditable},m=(b="")=>{try{const x=new URL(window.location.href);return x.searchParams.set("_pv",String(b||u||"refresh")),x.searchParams.set("_ts",String(Date.now())),x.toString()}catch{return window.location.href}},f=(b={})=>{if(s)return;const x=typeof b.forceUrl=="string"?b.forceUrl:"",M=()=>{if(!s){if(typeof document<"u"&&document.visibilityState==="hidden"){window.setTimeout(M,1500);return}if(c()){window.setTimeout(M,1500);return}if(s=!0,x){window.location.replace(x);return}window.location.reload()}};window.setTimeout(M,350)},p=async()=>{try{if(typeof caches>"u")return;const b=await caches.keys();await Promise.all(b.filter(x=>String(x).startsWith("peggy-")||String(x).startsWith("baby-prep-")).map(x=>caches.delete(x)))}catch{}},g=async b=>{const x=`${b.replace(/\/+$/,"/")}version.json`;try{const M=await fetch(x,{cache:"no-store"});return M.ok?await M.json():null}catch{return null}},v=async(b,x="boot")=>{if(!b)return;const C=await g("/peggy/"),R=String(C?.buildId||"").trim();if(!R)return;const L=String(u).trim();if(L&&R===L)return;const W=`peggy-update-attempted:${R}`;try{if(typeof sessionStorage<"u"&&sessionStorage.getItem(W))return;typeof sessionStorage<"u"&&sessionStorage.setItem(W,`${Date.now()}|${x}`)}catch{}await p();try{await b.update()}catch{}f({forceUrl:m(R)})};window.addEventListener("load",async()=>{const b="/peggy/",x=`?b=${encodeURIComponent(u)}`,M=`${b.replace(/\/+$/,"/")}sw.js${x}`;try{const C=await navigator.serviceWorker.register(M),R=L=>{try{C.update()}catch{}v(C,L)};R("load"),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&R("visible")}),window.addEventListener("focus",()=>R("focus")),window.addEventListener("pageshow",()=>R("pageshow")),window.addEventListener("online",()=>R("online")),window.setInterval(()=>{document.visibilityState==="visible"&&R("interval")},45e3),window.addEventListener("peggy-force-update",()=>{R("manual")}),navigator.serviceWorker.addEventListener("controllerchange",()=>{if(!l){l=!0;return}f()}),C.addEventListener("updatefound",()=>{const L=C.installing;L&&L.addEventListener("statechange",()=>{L.state==="installed"&&l&&f()})})}catch{}})}export{nh as W};
